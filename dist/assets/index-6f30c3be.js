var Gw=Object.defineProperty;var Yw=(e,t,n)=>t in e?Gw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var la=(e,t,n)=>(Yw(e,typeof t!="symbol"?t+"":t,n),n);function Xw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var vA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lx={exports:{}},Af={},cx={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mu=Symbol.for("react.element"),Qw=Symbol.for("react.portal"),Zw=Symbol.for("react.fragment"),e4=Symbol.for("react.strict_mode"),t4=Symbol.for("react.profiler"),n4=Symbol.for("react.provider"),r4=Symbol.for("react.context"),a4=Symbol.for("react.forward_ref"),i4=Symbol.for("react.suspense"),s4=Symbol.for("react.memo"),o4=Symbol.for("react.lazy"),t2=Symbol.iterator;function l4(e){return e===null||typeof e!="object"?null:(e=t2&&e[t2]||e["@@iterator"],typeof e=="function"?e:null)}var ux={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dx=Object.assign,hx={};function Kl(e,t,n){this.props=e,this.context=t,this.refs=hx,this.updater=n||ux}Kl.prototype.isReactComponent={};Kl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fx(){}fx.prototype=Kl.prototype;function f1(e,t,n){this.props=e,this.context=t,this.refs=hx,this.updater=n||ux}var m1=f1.prototype=new fx;m1.constructor=f1;dx(m1,Kl.prototype);m1.isPureReactComponent=!0;var n2=Array.isArray,mx=Object.prototype.hasOwnProperty,p1={current:null},px={key:!0,ref:!0,__self:!0,__source:!0};function gx(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)mx.call(t,r)&&!px.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:Mu,type:e,key:i,ref:o,props:a,_owner:p1.current}}function c4(e,t){return{$$typeof:Mu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function g1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mu}function u4(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var r2=/\/+/g;function z0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?u4(""+e.key):t.toString(36)}function dh(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Mu:case Qw:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+z0(o,0):r,n2(a)?(n="",e!=null&&(n=e.replace(r2,"$&/")+"/"),dh(a,t,n,"",function(d){return d})):a!=null&&(g1(a)&&(a=c4(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(r2,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",n2(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+z0(i,l);o+=dh(i,t,n,c,a)}else if(c=l4(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+z0(i,l++),o+=dh(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Fd(e,t,n){if(e==null)return e;var r=[],a=0;return dh(e,r,"","",function(i){return t.call(n,i,a++)}),r}function d4(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pr={current:null},hh={transition:null},h4={ReactCurrentDispatcher:pr,ReactCurrentBatchConfig:hh,ReactCurrentOwner:p1};function vx(){throw Error("act(...) is not supported in production builds of React.")}Nt.Children={map:Fd,forEach:function(e,t,n){Fd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Fd(e,function(){t++}),t},toArray:function(e){return Fd(e,function(t){return t})||[]},only:function(e){if(!g1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nt.Component=Kl;Nt.Fragment=Zw;Nt.Profiler=t4;Nt.PureComponent=f1;Nt.StrictMode=e4;Nt.Suspense=i4;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h4;Nt.act=vx;Nt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=dx({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=p1.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)mx.call(t,c)&&!px.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Mu,type:e.type,key:a,ref:i,props:r,_owner:o}};Nt.createContext=function(e){return e={$$typeof:r4,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:n4,_context:e},e.Consumer=e};Nt.createElement=gx;Nt.createFactory=function(e){var t=gx.bind(null,e);return t.type=e,t};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(e){return{$$typeof:a4,render:e}};Nt.isValidElement=g1;Nt.lazy=function(e){return{$$typeof:o4,_payload:{_status:-1,_result:e},_init:d4}};Nt.memo=function(e,t){return{$$typeof:s4,type:e,compare:t===void 0?null:t}};Nt.startTransition=function(e){var t=hh.transition;hh.transition={};try{e()}finally{hh.transition=t}};Nt.unstable_act=vx;Nt.useCallback=function(e,t){return pr.current.useCallback(e,t)};Nt.useContext=function(e){return pr.current.useContext(e)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(e){return pr.current.useDeferredValue(e)};Nt.useEffect=function(e,t){return pr.current.useEffect(e,t)};Nt.useId=function(){return pr.current.useId()};Nt.useImperativeHandle=function(e,t,n){return pr.current.useImperativeHandle(e,t,n)};Nt.useInsertionEffect=function(e,t){return pr.current.useInsertionEffect(e,t)};Nt.useLayoutEffect=function(e,t){return pr.current.useLayoutEffect(e,t)};Nt.useMemo=function(e,t){return pr.current.useMemo(e,t)};Nt.useReducer=function(e,t,n){return pr.current.useReducer(e,t,n)};Nt.useRef=function(e){return pr.current.useRef(e)};Nt.useState=function(e){return pr.current.useState(e)};Nt.useSyncExternalStore=function(e,t,n){return pr.current.useSyncExternalStore(e,t,n)};Nt.useTransition=function(){return pr.current.useTransition()};Nt.version="18.3.1";cx.exports=Nt;var q=cx.exports;const Ea=Jw(q),f4=Xw({__proto__:null,default:Ea},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m4=q,p4=Symbol.for("react.element"),g4=Symbol.for("react.fragment"),v4=Object.prototype.hasOwnProperty,x4=m4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y4={key:!0,ref:!0,__self:!0,__source:!0};function xx(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)v4.call(t,r)&&!y4.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:p4,type:e,key:i,ref:o,props:a,_owner:x4.current}}Af.Fragment=g4;Af.jsx=xx;Af.jsxs=xx;lx.exports=Af;var s=lx.exports,Lm={},yx={exports:{}},Gr={},bx={exports:{}},wx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,te){var ne=U.length;U.push(te);e:for(;0<ne;){var pe=ne-1>>>1,C=U[pe];if(0<a(C,te))U[pe]=te,U[ne]=C,ne=pe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var te=U[0],ne=U.pop();if(ne!==te){U[0]=ne;e:for(var pe=0,C=U.length,D=C>>>1;pe<D;){var W=2*(pe+1)-1,Q=U[W],ie=W+1,de=U[ie];if(0>a(Q,ne))ie<C&&0>a(de,Q)?(U[pe]=de,U[ie]=ne,pe=ie):(U[pe]=Q,U[W]=ne,pe=W);else if(ie<C&&0>a(de,ne))U[pe]=de,U[ie]=ne,pe=ie;else break e}}return te}function a(U,te){var ne=U.sortIndex-te.sortIndex;return ne!==0?ne:U.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],m=1,h=null,v=3,p=!1,j=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(U){for(var te=n(d);te!==null;){if(te.callback===null)r(d);else if(te.startTime<=U)r(d),te.sortIndex=te.expirationTime,t(c,te);else break;te=n(d)}}function A(U){if(w=!1,N(U),!j)if(n(c)!==null)j=!0,Z(R);else{var te=n(d);te!==null&&ee(A,te.startTime-U)}}function R(U,te){j=!1,w&&(w=!1,g(M),M=-1),p=!0;var ne=v;try{for(N(te),h=n(c);h!==null&&(!(h.expirationTime>te)||U&&!E());){var pe=h.callback;if(typeof pe=="function"){h.callback=null,v=h.priorityLevel;var C=pe(h.expirationTime<=te);te=e.unstable_now(),typeof C=="function"?h.callback=C:h===n(c)&&r(c),N(te)}else r(c);h=n(c)}if(h!==null)var D=!0;else{var W=n(d);W!==null&&ee(A,W.startTime-te),D=!1}return D}finally{h=null,v=ne,p=!1}}var $=!1,I=null,M=-1,H=5,ae=-1;function E(){return!(e.unstable_now()-ae<H)}function P(){if(I!==null){var U=e.unstable_now();ae=U;var te=!0;try{te=I(!0,U)}finally{te?J():($=!1,I=null)}}else $=!1}var J;if(typeof y=="function")J=function(){y(P)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,X=V.port2;V.port1.onmessage=P,J=function(){X.postMessage(null)}}else J=function(){S(P,0)};function Z(U){I=U,$||($=!0,J())}function ee(U,te){M=S(function(){U(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){j||p||(j=!0,Z(R))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(U){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var ne=v;v=te;try{return U()}finally{v=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,te){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ne=v;v=U;try{return te()}finally{v=ne}},e.unstable_scheduleCallback=function(U,te,ne){var pe=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?pe+ne:pe):ne=pe,U){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=ne+C,U={id:m++,callback:te,priorityLevel:U,startTime:ne,expirationTime:C,sortIndex:-1},ne>pe?(U.sortIndex=ne,t(d,U),n(c)===null&&U===n(d)&&(w?(g(M),M=-1):w=!0,ee(A,ne-pe))):(U.sortIndex=C,t(c,U),j||p||(j=!0,Z(R))),U},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(U){var te=v;return function(){var ne=v;v=te;try{return U.apply(this,arguments)}finally{v=ne}}}})(wx);bx.exports=wx;var b4=bx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w4=q,Vr=b4;function Ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nx=new Set,iu={};function ko(e,t){Rl(e,t),Rl(e+"Capture",t)}function Rl(e,t){for(iu[e]=t,e=0;e<t.length;e++)Nx.add(t[e])}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Em=Object.prototype.hasOwnProperty,N4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a2={},i2={};function j4(e){return Em.call(i2,e)?!0:Em.call(a2,e)?!1:N4.test(e)?i2[e]=!0:(a2[e]=!0,!1)}function S4(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k4(e,t,n,r){if(t===null||typeof t>"u"||S4(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gr(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wn[e]=new gr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wn[t]=new gr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wn[e]=new gr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wn[e]=new gr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wn[e]=new gr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wn[e]=new gr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wn[e]=new gr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wn[e]=new gr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wn[e]=new gr(e,5,!1,e.toLowerCase(),null,!1,!1)});var v1=/[\-:]([a-z])/g;function x1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v1,x1);Wn[t]=new gr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v1,x1);Wn[t]=new gr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v1,x1);Wn[t]=new gr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wn[e]=new gr(e,1,!1,e.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wn[e]=new gr(e,1,!1,e.toLowerCase(),null,!0,!0)});function y1(e,t,n,r){var a=Wn.hasOwnProperty(t)?Wn[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k4(t,n,a,r)&&(n=null),r||a===null?j4(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Bi=w4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Od=Symbol.for("react.element"),dl=Symbol.for("react.portal"),hl=Symbol.for("react.fragment"),b1=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),jx=Symbol.for("react.provider"),Sx=Symbol.for("react.context"),w1=Symbol.for("react.forward_ref"),Dm=Symbol.for("react.suspense"),Tm=Symbol.for("react.suspense_list"),N1=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),kx=Symbol.for("react.offscreen"),s2=Symbol.iterator;function Ac(e){return e===null||typeof e!="object"?null:(e=s2&&e[s2]||e["@@iterator"],typeof e=="function"?e:null)}var tn=Object.assign,q0;function Rc(e){if(q0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q0=t&&t[1]||""}return`
`+q0+e}var U0=!1;function W0(e,t){if(!e||U0)return"";U0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{U0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Rc(e):""}function C4(e){switch(e.tag){case 5:return Rc(e.type);case 16:return Rc("Lazy");case 13:return Rc("Suspense");case 19:return Rc("SuspenseList");case 0:case 2:case 15:return e=W0(e.type,!1),e;case 11:return e=W0(e.type.render,!1),e;case 1:return e=W0(e.type,!0),e;default:return""}}function Mm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hl:return"Fragment";case dl:return"Portal";case Im:return"Profiler";case b1:return"StrictMode";case Dm:return"Suspense";case Tm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sx:return(e.displayName||"Context")+".Consumer";case jx:return(e._context.displayName||"Context")+".Provider";case w1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N1:return t=e.displayName||null,t!==null?t:Mm(e.type)||"Memo";case os:t=e._payload,e=e._init;try{return Mm(e(t))}catch{}}return null}function A4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mm(t);case 8:return t===b1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _s(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function P4(e){var t=Cx(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rd(e){e._valueTracker||(e._valueTracker=P4(e))}function Ax(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Cx(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Mh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fm(e,t){var n=t.checked;return tn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function o2(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_s(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Px(e,t){t=t.checked,t!=null&&y1(e,"checked",t,!1)}function Om(e,t){Px(e,t);var n=_s(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rm(e,t.type,n):t.hasOwnProperty("defaultValue")&&Rm(e,t.type,_s(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function l2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Rm(e,t,n){(t!=="number"||Mh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Bc=Array.isArray;function Sl(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_s(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Bm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return tn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function c2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ee(92));if(Bc(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_s(n)}}function _x(e,t){var n=_s(t.value),r=_s(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function u2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $m(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bd,Ex=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bd=Bd||document.createElement("div"),Bd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function su(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_4=["Webkit","ms","Moz","O"];Object.keys(Wc).forEach(function(e){_4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wc[t]=Wc[e]})});function Ix(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wc.hasOwnProperty(e)&&Wc[e]?(""+t).trim():t+"px"}function Dx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Ix(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var L4=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zm(e,t){if(t){if(L4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ee(62))}}function qm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Um=null;function j1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wm=null,kl=null,Cl=null;function d2(e){if(e=Ru(e)){if(typeof Wm!="function")throw Error(Ee(280));var t=e.stateNode;t&&(t=If(t),Wm(e.stateNode,e.type,t))}}function Tx(e){kl?Cl?Cl.push(e):Cl=[e]:kl=e}function Mx(){if(kl){var e=kl,t=Cl;if(Cl=kl=null,d2(e),t)for(e=0;e<t.length;e++)d2(t[e])}}function Fx(e,t){return e(t)}function Ox(){}var H0=!1;function Rx(e,t,n){if(H0)return e(t,n);H0=!0;try{return Fx(e,t,n)}finally{H0=!1,(kl!==null||Cl!==null)&&(Ox(),Mx())}}function ou(e,t){var n=e.stateNode;if(n===null)return null;var r=If(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ee(231,t,typeof n));return n}var Hm=!1;if(Ii)try{var Pc={};Object.defineProperty(Pc,"passive",{get:function(){Hm=!0}}),window.addEventListener("test",Pc,Pc),window.removeEventListener("test",Pc,Pc)}catch{Hm=!1}function E4(e,t,n,r,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var Hc=!1,Fh=null,Oh=!1,Vm=null,I4={onError:function(e){Hc=!0,Fh=e}};function D4(e,t,n,r,a,i,o,l,c){Hc=!1,Fh=null,E4.apply(I4,arguments)}function T4(e,t,n,r,a,i,o,l,c){if(D4.apply(this,arguments),Hc){if(Hc){var d=Fh;Hc=!1,Fh=null}else throw Error(Ee(198));Oh||(Oh=!0,Vm=d)}}function Co(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Bx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h2(e){if(Co(e)!==e)throw Error(Ee(188))}function M4(e){var t=e.alternate;if(!t){if(t=Co(e),t===null)throw Error(Ee(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return h2(a),e;if(i===r)return h2(a),t;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?e:t}function $x(e){return e=M4(e),e!==null?zx(e):null}function zx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zx(e);if(t!==null)return t;e=e.sibling}return null}var qx=Vr.unstable_scheduleCallback,f2=Vr.unstable_cancelCallback,F4=Vr.unstable_shouldYield,O4=Vr.unstable_requestPaint,fn=Vr.unstable_now,R4=Vr.unstable_getCurrentPriorityLevel,S1=Vr.unstable_ImmediatePriority,Ux=Vr.unstable_UserBlockingPriority,Rh=Vr.unstable_NormalPriority,B4=Vr.unstable_LowPriority,Wx=Vr.unstable_IdlePriority,Pf=null,Za=null;function $4(e){if(Za&&typeof Za.onCommitFiberRoot=="function")try{Za.onCommitFiberRoot(Pf,e,void 0,(e.current.flags&128)===128)}catch{}}var Ia=Math.clz32?Math.clz32:U4,z4=Math.log,q4=Math.LN2;function U4(e){return e>>>=0,e===0?32:31-(z4(e)/q4|0)|0}var $d=64,zd=4194304;function $c(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=$c(l):(i&=o,i!==0&&(r=$c(i)))}else o=n&~a,o!==0?r=$c(o):i!==0&&(r=$c(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ia(t),a=1<<n,r|=e[n],t&=~a;return r}function W4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H4(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ia(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=W4(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Km(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hx(){var e=$d;return $d<<=1,!($d&4194240)&&($d=64),e}function V0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ia(t),e[t]=n}function V4(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ia(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function k1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ia(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Ft=0;function Vx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kx,C1,Gx,Yx,Xx,Gm=!1,qd=[],bs=null,ws=null,Ns=null,lu=new Map,cu=new Map,us=[],K4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function m2(e,t){switch(e){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":lu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(t.pointerId)}}function _c(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ru(t),t!==null&&C1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function G4(e,t,n,r,a){switch(t){case"focusin":return bs=_c(bs,e,t,n,r,a),!0;case"dragenter":return ws=_c(ws,e,t,n,r,a),!0;case"mouseover":return Ns=_c(Ns,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lu.set(i,_c(lu.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,cu.set(i,_c(cu.get(i)||null,e,t,n,r,a)),!0}return!1}function Jx(e){var t=io(e.target);if(t!==null){var n=Co(t);if(n!==null){if(t=n.tag,t===13){if(t=Bx(n),t!==null){e.blockedOn=t,Xx(e.priority,function(){Gx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ym(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Um=r,n.target.dispatchEvent(r),Um=null}else return t=Ru(n),t!==null&&C1(t),e.blockedOn=n,!1;t.shift()}return!0}function p2(e,t,n){fh(e)&&n.delete(t)}function Y4(){Gm=!1,bs!==null&&fh(bs)&&(bs=null),ws!==null&&fh(ws)&&(ws=null),Ns!==null&&fh(Ns)&&(Ns=null),lu.forEach(p2),cu.forEach(p2)}function Lc(e,t){e.blockedOn===t&&(e.blockedOn=null,Gm||(Gm=!0,Vr.unstable_scheduleCallback(Vr.unstable_NormalPriority,Y4)))}function uu(e){function t(a){return Lc(a,e)}if(0<qd.length){Lc(qd[0],e);for(var n=1;n<qd.length;n++){var r=qd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(bs!==null&&Lc(bs,e),ws!==null&&Lc(ws,e),Ns!==null&&Lc(Ns,e),lu.forEach(t),cu.forEach(t),n=0;n<us.length;n++)r=us[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<us.length&&(n=us[0],n.blockedOn===null);)Jx(n),n.blockedOn===null&&us.shift()}var Al=Bi.ReactCurrentBatchConfig,$h=!0;function X4(e,t,n,r){var a=Ft,i=Al.transition;Al.transition=null;try{Ft=1,A1(e,t,n,r)}finally{Ft=a,Al.transition=i}}function J4(e,t,n,r){var a=Ft,i=Al.transition;Al.transition=null;try{Ft=4,A1(e,t,n,r)}finally{Ft=a,Al.transition=i}}function A1(e,t,n,r){if($h){var a=Ym(e,t,n,r);if(a===null)nm(e,t,r,zh,n),m2(e,r);else if(G4(a,e,t,n,r))r.stopPropagation();else if(m2(e,r),t&4&&-1<K4.indexOf(e)){for(;a!==null;){var i=Ru(a);if(i!==null&&Kx(i),i=Ym(e,t,n,r),i===null&&nm(e,t,r,zh,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else nm(e,t,r,null,n)}}var zh=null;function Ym(e,t,n,r){if(zh=null,e=j1(r),e=io(e),e!==null)if(t=Co(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Bx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zh=e,null}function Qx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R4()){case S1:return 1;case Ux:return 4;case Rh:case B4:return 16;case Wx:return 536870912;default:return 16}default:return 16}}var ms=null,P1=null,mh=null;function Zx(){if(mh)return mh;var e,t=P1,n=t.length,r,a="value"in ms?ms.value:ms.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return mh=a.slice(e,1<r?1-r:void 0)}function ph(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ud(){return!0}function g2(){return!1}function Yr(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ud:g2,this.isPropagationStopped=g2,this}return tn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ud)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ud)},persist:function(){},isPersistent:Ud}),t}var Gl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_1=Yr(Gl),Ou=tn({},Gl,{view:0,detail:0}),Q4=Yr(Ou),K0,G0,Ec,_f=tn({},Ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ec&&(Ec&&e.type==="mousemove"?(K0=e.screenX-Ec.screenX,G0=e.screenY-Ec.screenY):G0=K0=0,Ec=e),K0)},movementY:function(e){return"movementY"in e?e.movementY:G0}}),v2=Yr(_f),Z4=tn({},_f,{dataTransfer:0}),e3=Yr(Z4),t3=tn({},Ou,{relatedTarget:0}),Y0=Yr(t3),n3=tn({},Gl,{animationName:0,elapsedTime:0,pseudoElement:0}),r3=Yr(n3),a3=tn({},Gl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),i3=Yr(a3),s3=tn({},Gl,{data:0}),x2=Yr(s3),o3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=c3[e])?!!t[e]:!1}function L1(){return u3}var d3=tn({},Ou,{key:function(e){if(e.key){var t=o3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ph(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?l3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L1,charCode:function(e){return e.type==="keypress"?ph(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ph(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),h3=Yr(d3),f3=tn({},_f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y2=Yr(f3),m3=tn({},Ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L1}),p3=Yr(m3),g3=tn({},Gl,{propertyName:0,elapsedTime:0,pseudoElement:0}),v3=Yr(g3),x3=tn({},_f,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),y3=Yr(x3),b3=[9,13,27,32],E1=Ii&&"CompositionEvent"in window,Vc=null;Ii&&"documentMode"in document&&(Vc=document.documentMode);var w3=Ii&&"TextEvent"in window&&!Vc,ey=Ii&&(!E1||Vc&&8<Vc&&11>=Vc),b2=String.fromCharCode(32),w2=!1;function ty(e,t){switch(e){case"keyup":return b3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ny(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fl=!1;function N3(e,t){switch(e){case"compositionend":return ny(t);case"keypress":return t.which!==32?null:(w2=!0,b2);case"textInput":return e=t.data,e===b2&&w2?null:e;default:return null}}function j3(e,t){if(fl)return e==="compositionend"||!E1&&ty(e,t)?(e=Zx(),mh=P1=ms=null,fl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ey&&t.locale!=="ko"?null:t.data;default:return null}}var S3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!S3[e.type]:t==="textarea"}function ry(e,t,n,r){Tx(r),t=qh(t,"onChange"),0<t.length&&(n=new _1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kc=null,du=null;function k3(e){my(e,0)}function Lf(e){var t=gl(e);if(Ax(t))return e}function C3(e,t){if(e==="change")return t}var ay=!1;if(Ii){var X0;if(Ii){var J0="oninput"in document;if(!J0){var j2=document.createElement("div");j2.setAttribute("oninput","return;"),J0=typeof j2.oninput=="function"}X0=J0}else X0=!1;ay=X0&&(!document.documentMode||9<document.documentMode)}function S2(){Kc&&(Kc.detachEvent("onpropertychange",iy),du=Kc=null)}function iy(e){if(e.propertyName==="value"&&Lf(du)){var t=[];ry(t,du,e,j1(e)),Rx(k3,t)}}function A3(e,t,n){e==="focusin"?(S2(),Kc=t,du=n,Kc.attachEvent("onpropertychange",iy)):e==="focusout"&&S2()}function P3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lf(du)}function _3(e,t){if(e==="click")return Lf(t)}function L3(e,t){if(e==="input"||e==="change")return Lf(t)}function E3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ma=typeof Object.is=="function"?Object.is:E3;function hu(e,t){if(Ma(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Em.call(t,a)||!Ma(e[a],t[a]))return!1}return!0}function k2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function C2(e,t){var n=k2(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=k2(n)}}function sy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oy(){for(var e=window,t=Mh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Mh(e.document)}return t}function I1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function I3(e){var t=oy(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&sy(n.ownerDocument.documentElement,n)){if(r!==null&&I1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=C2(n,i);var o=C2(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var D3=Ii&&"documentMode"in document&&11>=document.documentMode,ml=null,Xm=null,Gc=null,Jm=!1;function A2(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jm||ml==null||ml!==Mh(r)||(r=ml,"selectionStart"in r&&I1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gc&&hu(Gc,r)||(Gc=r,r=qh(Xm,"onSelect"),0<r.length&&(t=new _1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ml)))}function Wd(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pl={animationend:Wd("Animation","AnimationEnd"),animationiteration:Wd("Animation","AnimationIteration"),animationstart:Wd("Animation","AnimationStart"),transitionend:Wd("Transition","TransitionEnd")},Q0={},ly={};Ii&&(ly=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function Ef(e){if(Q0[e])return Q0[e];if(!pl[e])return e;var t=pl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ly)return Q0[e]=t[n];return e}var cy=Ef("animationend"),uy=Ef("animationiteration"),dy=Ef("animationstart"),hy=Ef("transitionend"),fy=new Map,P2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(e,t){fy.set(e,t),ko(t,[e])}for(var Z0=0;Z0<P2.length;Z0++){var em=P2[Z0],T3=em.toLowerCase(),M3=em[0].toUpperCase()+em.slice(1);Os(T3,"on"+M3)}Os(cy,"onAnimationEnd");Os(uy,"onAnimationIteration");Os(dy,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(hy,"onTransitionEnd");Rl("onMouseEnter",["mouseout","mouseover"]);Rl("onMouseLeave",["mouseout","mouseover"]);Rl("onPointerEnter",["pointerout","pointerover"]);Rl("onPointerLeave",["pointerout","pointerover"]);ko("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ko("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ko("onBeforeInput",["compositionend","keypress","textInput","paste"]);ko("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ko("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ko("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F3=new Set("cancel close invalid load scroll toggle".split(" ").concat(zc));function _2(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,T4(r,t,void 0,e),e.currentTarget=null}function my(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;_2(a,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;_2(a,l,d),i=c}}}if(Oh)throw e=Vm,Oh=!1,Vm=null,e}function Wt(e,t){var n=t[np];n===void 0&&(n=t[np]=new Set);var r=e+"__bubble";n.has(r)||(py(t,e,2,!1),n.add(r))}function tm(e,t,n){var r=0;t&&(r|=4),py(n,e,r,t)}var Hd="_reactListening"+Math.random().toString(36).slice(2);function fu(e){if(!e[Hd]){e[Hd]=!0,Nx.forEach(function(n){n!=="selectionchange"&&(F3.has(n)||tm(n,!1,e),tm(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hd]||(t[Hd]=!0,tm("selectionchange",!1,t))}}function py(e,t,n,r){switch(Qx(t)){case 1:var a=X4;break;case 4:a=J4;break;default:a=A1}n=a.bind(null,t,n,e),a=void 0,!Hm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function nm(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=io(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Rx(function(){var d=i,m=j1(n),h=[];e:{var v=fy.get(e);if(v!==void 0){var p=_1,j=e;switch(e){case"keypress":if(ph(n)===0)break e;case"keydown":case"keyup":p=h3;break;case"focusin":j="focus",p=Y0;break;case"focusout":j="blur",p=Y0;break;case"beforeblur":case"afterblur":p=Y0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=v2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=e3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=p3;break;case cy:case uy:case dy:p=r3;break;case hy:p=v3;break;case"scroll":p=Q4;break;case"wheel":p=y3;break;case"copy":case"cut":case"paste":p=i3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=y2}var w=(t&4)!==0,S=!w&&e==="scroll",g=w?v!==null?v+"Capture":null:v;w=[];for(var y=d,N;y!==null;){N=y;var A=N.stateNode;if(N.tag===5&&A!==null&&(N=A,g!==null&&(A=ou(y,g),A!=null&&w.push(mu(y,A,N)))),S)break;y=y.return}0<w.length&&(v=new p(v,j,null,n,m),h.push({event:v,listeners:w}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",v&&n!==Um&&(j=n.relatedTarget||n.fromElement)&&(io(j)||j[Di]))break e;if((p||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,p?(j=n.relatedTarget||n.toElement,p=d,j=j?io(j):null,j!==null&&(S=Co(j),j!==S||j.tag!==5&&j.tag!==6)&&(j=null)):(p=null,j=d),p!==j)){if(w=v2,A="onMouseLeave",g="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(w=y2,A="onPointerLeave",g="onPointerEnter",y="pointer"),S=p==null?v:gl(p),N=j==null?v:gl(j),v=new w(A,y+"leave",p,n,m),v.target=S,v.relatedTarget=N,A=null,io(m)===d&&(w=new w(g,y+"enter",j,n,m),w.target=N,w.relatedTarget=S,A=w),S=A,p&&j)t:{for(w=p,g=j,y=0,N=w;N;N=tl(N))y++;for(N=0,A=g;A;A=tl(A))N++;for(;0<y-N;)w=tl(w),y--;for(;0<N-y;)g=tl(g),N--;for(;y--;){if(w===g||g!==null&&w===g.alternate)break t;w=tl(w),g=tl(g)}w=null}else w=null;p!==null&&L2(h,v,p,w,!1),j!==null&&S!==null&&L2(h,S,j,w,!0)}}e:{if(v=d?gl(d):window,p=v.nodeName&&v.nodeName.toLowerCase(),p==="select"||p==="input"&&v.type==="file")var R=C3;else if(N2(v))if(ay)R=L3;else{R=P3;var $=A3}else(p=v.nodeName)&&p.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(R=_3);if(R&&(R=R(e,d))){ry(h,R,n,m);break e}$&&$(e,v,d),e==="focusout"&&($=v._wrapperState)&&$.controlled&&v.type==="number"&&Rm(v,"number",v.value)}switch($=d?gl(d):window,e){case"focusin":(N2($)||$.contentEditable==="true")&&(ml=$,Xm=d,Gc=null);break;case"focusout":Gc=Xm=ml=null;break;case"mousedown":Jm=!0;break;case"contextmenu":case"mouseup":case"dragend":Jm=!1,A2(h,n,m);break;case"selectionchange":if(D3)break;case"keydown":case"keyup":A2(h,n,m)}var I;if(E1)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else fl?ty(e,n)&&(M="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(ey&&n.locale!=="ko"&&(fl||M!=="onCompositionStart"?M==="onCompositionEnd"&&fl&&(I=Zx()):(ms=m,P1="value"in ms?ms.value:ms.textContent,fl=!0)),$=qh(d,M),0<$.length&&(M=new x2(M,e,null,n,m),h.push({event:M,listeners:$}),I?M.data=I:(I=ny(n),I!==null&&(M.data=I)))),(I=w3?N3(e,n):j3(e,n))&&(d=qh(d,"onBeforeInput"),0<d.length&&(m=new x2("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:d}),m.data=I))}my(h,t)})}function mu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qh(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ou(e,n),i!=null&&r.unshift(mu(e,i,a)),i=ou(e,t),i!=null&&r.push(mu(e,i,a))),e=e.return}return r}function tl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function L2(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,a?(c=ou(n,i),c!=null&&o.unshift(mu(n,c,l))):a||(c=ou(n,i),c!=null&&o.push(mu(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var O3=/\r\n?/g,R3=/\u0000|\uFFFD/g;function E2(e){return(typeof e=="string"?e:""+e).replace(O3,`
`).replace(R3,"")}function Vd(e,t,n){if(t=E2(t),E2(e)!==t&&n)throw Error(Ee(425))}function Uh(){}var Qm=null,Zm=null;function ep(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tp=typeof setTimeout=="function"?setTimeout:void 0,B3=typeof clearTimeout=="function"?clearTimeout:void 0,I2=typeof Promise=="function"?Promise:void 0,$3=typeof queueMicrotask=="function"?queueMicrotask:typeof I2<"u"?function(e){return I2.resolve(null).then(e).catch(z3)}:tp;function z3(e){setTimeout(function(){throw e})}function rm(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),uu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);uu(t)}function js(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function D2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Yl=Math.random().toString(36).slice(2),Ga="__reactFiber$"+Yl,pu="__reactProps$"+Yl,Di="__reactContainer$"+Yl,np="__reactEvents$"+Yl,q3="__reactListeners$"+Yl,U3="__reactHandles$"+Yl;function io(e){var t=e[Ga];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Di]||n[Ga]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=D2(e);e!==null;){if(n=e[Ga])return n;e=D2(e)}return t}e=n,n=e.parentNode}return null}function Ru(e){return e=e[Ga]||e[Di],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ee(33))}function If(e){return e[pu]||null}var rp=[],vl=-1;function Rs(e){return{current:e}}function Kt(e){0>vl||(e.current=rp[vl],rp[vl]=null,vl--)}function Ut(e,t){vl++,rp[vl]=e.current,e.current=t}var Ls={},ar=Rs(Ls),Cr=Rs(!1),vo=Ls;function Bl(e,t){var n=e.type.contextTypes;if(!n)return Ls;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ar(e){return e=e.childContextTypes,e!=null}function Wh(){Kt(Cr),Kt(ar)}function T2(e,t,n){if(ar.current!==Ls)throw Error(Ee(168));Ut(ar,t),Ut(Cr,n)}function gy(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Ee(108,A4(e)||"Unknown",a));return tn({},n,r)}function Hh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,vo=ar.current,Ut(ar,e),Ut(Cr,Cr.current),!0}function M2(e,t,n){var r=e.stateNode;if(!r)throw Error(Ee(169));n?(e=gy(e,t,vo),r.__reactInternalMemoizedMergedChildContext=e,Kt(Cr),Kt(ar),Ut(ar,e)):Kt(Cr),Ut(Cr,n)}var ji=null,Df=!1,am=!1;function vy(e){ji===null?ji=[e]:ji.push(e)}function W3(e){Df=!0,vy(e)}function Bs(){if(!am&&ji!==null){am=!0;var e=0,t=Ft;try{var n=ji;for(Ft=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ji=null,Df=!1}catch(a){throw ji!==null&&(ji=ji.slice(e+1)),qx(S1,Bs),a}finally{Ft=t,am=!1}}return null}var xl=[],yl=0,Vh=null,Kh=0,ca=[],ua=0,xo=null,Ci=1,Ai="";function eo(e,t){xl[yl++]=Kh,xl[yl++]=Vh,Vh=e,Kh=t}function xy(e,t,n){ca[ua++]=Ci,ca[ua++]=Ai,ca[ua++]=xo,xo=e;var r=Ci;e=Ai;var a=32-Ia(r)-1;r&=~(1<<a),n+=1;var i=32-Ia(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ci=1<<32-Ia(t)+a|n<<a|r,Ai=i+e}else Ci=1<<i|n<<a|r,Ai=e}function D1(e){e.return!==null&&(eo(e,1),xy(e,1,0))}function T1(e){for(;e===Vh;)Vh=xl[--yl],xl[yl]=null,Kh=xl[--yl],xl[yl]=null;for(;e===xo;)xo=ca[--ua],ca[ua]=null,Ai=ca[--ua],ca[ua]=null,Ci=ca[--ua],ca[ua]=null}var Hr=null,Ur=null,Jt=!1,La=null;function yy(e,t){var n=da(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function F2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hr=e,Ur=js(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hr=e,Ur=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=xo!==null?{id:Ci,overflow:Ai}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=da(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Hr=e,Ur=null,!0):!1;default:return!1}}function ap(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ip(e){if(Jt){var t=Ur;if(t){var n=t;if(!F2(e,t)){if(ap(e))throw Error(Ee(418));t=js(n.nextSibling);var r=Hr;t&&F2(e,t)?yy(r,n):(e.flags=e.flags&-4097|2,Jt=!1,Hr=e)}}else{if(ap(e))throw Error(Ee(418));e.flags=e.flags&-4097|2,Jt=!1,Hr=e}}}function O2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hr=e}function Kd(e){if(e!==Hr)return!1;if(!Jt)return O2(e),Jt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ep(e.type,e.memoizedProps)),t&&(t=Ur)){if(ap(e))throw by(),Error(Ee(418));for(;t;)yy(e,t),t=js(t.nextSibling)}if(O2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ur=js(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ur=null}}else Ur=Hr?js(e.stateNode.nextSibling):null;return!0}function by(){for(var e=Ur;e;)e=js(e.nextSibling)}function $l(){Ur=Hr=null,Jt=!1}function M1(e){La===null?La=[e]:La.push(e)}var H3=Bi.ReactCurrentBatchConfig;function Ic(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,e))}return e}function Gd(e,t){throw e=Object.prototype.toString.call(t),Error(Ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function R2(e){var t=e._init;return t(e._payload)}function wy(e){function t(g,y){if(e){var N=g.deletions;N===null?(g.deletions=[y],g.flags|=16):N.push(y)}}function n(g,y){if(!e)return null;for(;y!==null;)t(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function a(g,y){return g=As(g,y),g.index=0,g.sibling=null,g}function i(g,y,N){return g.index=N,e?(N=g.alternate,N!==null?(N=N.index,N<y?(g.flags|=2,y):N):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,y,N,A){return y===null||y.tag!==6?(y=dm(N,g.mode,A),y.return=g,y):(y=a(y,N),y.return=g,y)}function c(g,y,N,A){var R=N.type;return R===hl?m(g,y,N.props.children,A,N.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===os&&R2(R)===y.type)?(A=a(y,N.props),A.ref=Ic(g,y,N),A.return=g,A):(A=Nh(N.type,N.key,N.props,null,g.mode,A),A.ref=Ic(g,y,N),A.return=g,A)}function d(g,y,N,A){return y===null||y.tag!==4||y.stateNode.containerInfo!==N.containerInfo||y.stateNode.implementation!==N.implementation?(y=hm(N,g.mode,A),y.return=g,y):(y=a(y,N.children||[]),y.return=g,y)}function m(g,y,N,A,R){return y===null||y.tag!==7?(y=uo(N,g.mode,A,R),y.return=g,y):(y=a(y,N),y.return=g,y)}function h(g,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return y=dm(""+y,g.mode,N),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Od:return N=Nh(y.type,y.key,y.props,null,g.mode,N),N.ref=Ic(g,null,y),N.return=g,N;case dl:return y=hm(y,g.mode,N),y.return=g,y;case os:var A=y._init;return h(g,A(y._payload),N)}if(Bc(y)||Ac(y))return y=uo(y,g.mode,N,null),y.return=g,y;Gd(g,y)}return null}function v(g,y,N,A){var R=y!==null?y.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return R!==null?null:l(g,y,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Od:return N.key===R?c(g,y,N,A):null;case dl:return N.key===R?d(g,y,N,A):null;case os:return R=N._init,v(g,y,R(N._payload),A)}if(Bc(N)||Ac(N))return R!==null?null:m(g,y,N,A,null);Gd(g,N)}return null}function p(g,y,N,A,R){if(typeof A=="string"&&A!==""||typeof A=="number")return g=g.get(N)||null,l(y,g,""+A,R);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Od:return g=g.get(A.key===null?N:A.key)||null,c(y,g,A,R);case dl:return g=g.get(A.key===null?N:A.key)||null,d(y,g,A,R);case os:var $=A._init;return p(g,y,N,$(A._payload),R)}if(Bc(A)||Ac(A))return g=g.get(N)||null,m(y,g,A,R,null);Gd(y,A)}return null}function j(g,y,N,A){for(var R=null,$=null,I=y,M=y=0,H=null;I!==null&&M<N.length;M++){I.index>M?(H=I,I=null):H=I.sibling;var ae=v(g,I,N[M],A);if(ae===null){I===null&&(I=H);break}e&&I&&ae.alternate===null&&t(g,I),y=i(ae,y,M),$===null?R=ae:$.sibling=ae,$=ae,I=H}if(M===N.length)return n(g,I),Jt&&eo(g,M),R;if(I===null){for(;M<N.length;M++)I=h(g,N[M],A),I!==null&&(y=i(I,y,M),$===null?R=I:$.sibling=I,$=I);return Jt&&eo(g,M),R}for(I=r(g,I);M<N.length;M++)H=p(I,g,M,N[M],A),H!==null&&(e&&H.alternate!==null&&I.delete(H.key===null?M:H.key),y=i(H,y,M),$===null?R=H:$.sibling=H,$=H);return e&&I.forEach(function(E){return t(g,E)}),Jt&&eo(g,M),R}function w(g,y,N,A){var R=Ac(N);if(typeof R!="function")throw Error(Ee(150));if(N=R.call(N),N==null)throw Error(Ee(151));for(var $=R=null,I=y,M=y=0,H=null,ae=N.next();I!==null&&!ae.done;M++,ae=N.next()){I.index>M?(H=I,I=null):H=I.sibling;var E=v(g,I,ae.value,A);if(E===null){I===null&&(I=H);break}e&&I&&E.alternate===null&&t(g,I),y=i(E,y,M),$===null?R=E:$.sibling=E,$=E,I=H}if(ae.done)return n(g,I),Jt&&eo(g,M),R;if(I===null){for(;!ae.done;M++,ae=N.next())ae=h(g,ae.value,A),ae!==null&&(y=i(ae,y,M),$===null?R=ae:$.sibling=ae,$=ae);return Jt&&eo(g,M),R}for(I=r(g,I);!ae.done;M++,ae=N.next())ae=p(I,g,M,ae.value,A),ae!==null&&(e&&ae.alternate!==null&&I.delete(ae.key===null?M:ae.key),y=i(ae,y,M),$===null?R=ae:$.sibling=ae,$=ae);return e&&I.forEach(function(P){return t(g,P)}),Jt&&eo(g,M),R}function S(g,y,N,A){if(typeof N=="object"&&N!==null&&N.type===hl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Od:e:{for(var R=N.key,$=y;$!==null;){if($.key===R){if(R=N.type,R===hl){if($.tag===7){n(g,$.sibling),y=a($,N.props.children),y.return=g,g=y;break e}}else if($.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===os&&R2(R)===$.type){n(g,$.sibling),y=a($,N.props),y.ref=Ic(g,$,N),y.return=g,g=y;break e}n(g,$);break}else t(g,$);$=$.sibling}N.type===hl?(y=uo(N.props.children,g.mode,A,N.key),y.return=g,g=y):(A=Nh(N.type,N.key,N.props,null,g.mode,A),A.ref=Ic(g,y,N),A.return=g,g=A)}return o(g);case dl:e:{for($=N.key;y!==null;){if(y.key===$)if(y.tag===4&&y.stateNode.containerInfo===N.containerInfo&&y.stateNode.implementation===N.implementation){n(g,y.sibling),y=a(y,N.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else t(g,y);y=y.sibling}y=hm(N,g.mode,A),y.return=g,g=y}return o(g);case os:return $=N._init,S(g,y,$(N._payload),A)}if(Bc(N))return j(g,y,N,A);if(Ac(N))return w(g,y,N,A);Gd(g,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,y!==null&&y.tag===6?(n(g,y.sibling),y=a(y,N),y.return=g,g=y):(n(g,y),y=dm(N,g.mode,A),y.return=g,g=y),o(g)):n(g,y)}return S}var zl=wy(!0),Ny=wy(!1),Gh=Rs(null),Yh=null,bl=null,F1=null;function O1(){F1=bl=Yh=null}function R1(e){var t=Gh.current;Kt(Gh),e._currentValue=t}function sp(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pl(e,t){Yh=e,F1=bl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(kr=!0),e.firstContext=null)}function ma(e){var t=e._currentValue;if(F1!==e)if(e={context:e,memoizedValue:t,next:null},bl===null){if(Yh===null)throw Error(Ee(308));bl=e,Yh.dependencies={lanes:0,firstContext:e}}else bl=bl.next=e;return t}var so=null;function B1(e){so===null?so=[e]:so.push(e)}function jy(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,B1(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ti(e,r)}function Ti(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ls=!1;function $1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ss(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Pt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ti(e,n)}return a=r.interleaved,a===null?(t.next=t,B1(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ti(e,n)}function gh(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,k1(e,n)}}function B2(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xh(e,t,n,r){var a=e.updateQueue;ls=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,m=d=c=null,l=i;do{var v=l.lane,p=l.eventTime;if((r&v)===v){m!==null&&(m=m.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,w=l;switch(v=t,p=n,w.tag){case 1:if(j=w.payload,typeof j=="function"){h=j.call(p,h,v);break e}h=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=w.payload,v=typeof j=="function"?j.call(p,h,v):j,v==null)break e;h=tn({},h,v);break e;case 2:ls=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,v=a.effects,v===null?a.effects=[l]:v.push(l))}else p={eventTime:p,lane:v,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=p,c=h):m=m.next=p,o|=v;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;v=l,l=v.next,v.next=null,a.lastBaseUpdate=v,a.shared.pending=null}}while(1);if(m===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);bo|=o,e.lanes=o,e.memoizedState=h}}function $2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ee(191,a));a.call(r)}}}var Bu={},ei=Rs(Bu),gu=Rs(Bu),vu=Rs(Bu);function oo(e){if(e===Bu)throw Error(Ee(174));return e}function z1(e,t){switch(Ut(vu,t),Ut(gu,e),Ut(ei,Bu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$m(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$m(t,e)}Kt(ei),Ut(ei,t)}function ql(){Kt(ei),Kt(gu),Kt(vu)}function ky(e){oo(vu.current);var t=oo(ei.current),n=$m(t,e.type);t!==n&&(Ut(gu,e),Ut(ei,n))}function q1(e){gu.current===e&&(Kt(ei),Kt(gu))}var Zt=Rs(0);function Jh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var im=[];function U1(){for(var e=0;e<im.length;e++)im[e]._workInProgressVersionPrimary=null;im.length=0}var vh=Bi.ReactCurrentDispatcher,sm=Bi.ReactCurrentBatchConfig,yo=0,en=null,An=null,On=null,Qh=!1,Yc=!1,xu=0,V3=0;function Gn(){throw Error(Ee(321))}function W1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ma(e[n],t[n]))return!1;return!0}function H1(e,t,n,r,a,i){if(yo=i,en=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vh.current=e===null||e.memoizedState===null?X3:J3,e=n(r,a),Yc){i=0;do{if(Yc=!1,xu=0,25<=i)throw Error(Ee(301));i+=1,On=An=null,t.updateQueue=null,vh.current=Q3,e=n(r,a)}while(Yc)}if(vh.current=Zh,t=An!==null&&An.next!==null,yo=0,On=An=en=null,Qh=!1,t)throw Error(Ee(300));return e}function V1(){var e=xu!==0;return xu=0,e}function Va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?en.memoizedState=On=e:On=On.next=e,On}function pa(){if(An===null){var e=en.alternate;e=e!==null?e.memoizedState:null}else e=An.next;var t=On===null?en.memoizedState:On.next;if(t!==null)On=t,An=e;else{if(e===null)throw Error(Ee(310));An=e,e={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},On===null?en.memoizedState=On=e:On=On.next=e}return On}function yu(e,t){return typeof t=="function"?t(e):t}function om(e){var t=pa(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var r=An,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,d=i;do{var m=d.lane;if((yo&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,en.lanes|=m,bo|=m}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,Ma(r,t.memoizedState)||(kr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,en.lanes|=i,bo|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lm(e){var t=pa(),n=t.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Ma(i,t.memoizedState)||(kr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Cy(){}function Ay(e,t){var n=en,r=pa(),a=t(),i=!Ma(r.memoizedState,a);if(i&&(r.memoizedState=a,kr=!0),r=r.queue,K1(Ly.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||On!==null&&On.memoizedState.tag&1){if(n.flags|=2048,bu(9,_y.bind(null,n,r,a,t),void 0,null),Bn===null)throw Error(Ee(349));yo&30||Py(n,t,a)}return a}function Py(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=en.updateQueue,t===null?(t={lastEffect:null,stores:null},en.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function _y(e,t,n,r){t.value=n,t.getSnapshot=r,Ey(t)&&Iy(e)}function Ly(e,t,n){return n(function(){Ey(t)&&Iy(e)})}function Ey(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ma(e,n)}catch{return!0}}function Iy(e){var t=Ti(e,1);t!==null&&Da(t,e,1,-1)}function z2(e){var t=Va();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yu,lastRenderedState:e},t.queue=e,e=e.dispatch=Y3.bind(null,en,e),[t.memoizedState,e]}function bu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=en.updateQueue,t===null?(t={lastEffect:null,stores:null},en.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Dy(){return pa().memoizedState}function xh(e,t,n,r){var a=Va();en.flags|=e,a.memoizedState=bu(1|t,n,void 0,r===void 0?null:r)}function Tf(e,t,n,r){var a=pa();r=r===void 0?null:r;var i=void 0;if(An!==null){var o=An.memoizedState;if(i=o.destroy,r!==null&&W1(r,o.deps)){a.memoizedState=bu(t,n,i,r);return}}en.flags|=e,a.memoizedState=bu(1|t,n,i,r)}function q2(e,t){return xh(8390656,8,e,t)}function K1(e,t){return Tf(2048,8,e,t)}function Ty(e,t){return Tf(4,2,e,t)}function My(e,t){return Tf(4,4,e,t)}function Fy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Oy(e,t,n){return n=n!=null?n.concat([e]):null,Tf(4,4,Fy.bind(null,t,e),n)}function G1(){}function Ry(e,t){var n=pa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&W1(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function By(e,t){var n=pa();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&W1(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $y(e,t,n){return yo&21?(Ma(n,t)||(n=Hx(),en.lanes|=n,bo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,kr=!0),e.memoizedState=n)}function K3(e,t){var n=Ft;Ft=n!==0&&4>n?n:4,e(!0);var r=sm.transition;sm.transition={};try{e(!1),t()}finally{Ft=n,sm.transition=r}}function zy(){return pa().memoizedState}function G3(e,t,n){var r=Cs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qy(e))Uy(t,n);else if(n=jy(e,t,n,r),n!==null){var a=fr();Da(n,e,r,a),Wy(n,t,r)}}function Y3(e,t,n){var r=Cs(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qy(e))Uy(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,Ma(l,o)){var c=t.interleaved;c===null?(a.next=a,B1(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=jy(e,t,a,r),n!==null&&(a=fr(),Da(n,e,r,a),Wy(n,t,r))}}function qy(e){var t=e.alternate;return e===en||t!==null&&t===en}function Uy(e,t){Yc=Qh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wy(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,k1(e,n)}}var Zh={readContext:ma,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},X3={readContext:ma,useCallback:function(e,t){return Va().memoizedState=[e,t===void 0?null:t],e},useContext:ma,useEffect:q2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xh(4194308,4,Fy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xh(4194308,4,e,t)},useInsertionEffect:function(e,t){return xh(4,2,e,t)},useMemo:function(e,t){var n=Va();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Va();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=G3.bind(null,en,e),[r.memoizedState,e]},useRef:function(e){var t=Va();return e={current:e},t.memoizedState=e},useState:z2,useDebugValue:G1,useDeferredValue:function(e){return Va().memoizedState=e},useTransition:function(){var e=z2(!1),t=e[0];return e=K3.bind(null,e[1]),Va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=en,a=Va();if(Jt){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=t(),Bn===null)throw Error(Ee(349));yo&30||Py(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,q2(Ly.bind(null,r,i,e),[e]),r.flags|=2048,bu(9,_y.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Va(),t=Bn.identifierPrefix;if(Jt){var n=Ai,r=Ci;n=(r&~(1<<32-Ia(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=xu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=V3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},J3={readContext:ma,useCallback:Ry,useContext:ma,useEffect:K1,useImperativeHandle:Oy,useInsertionEffect:Ty,useLayoutEffect:My,useMemo:By,useReducer:om,useRef:Dy,useState:function(){return om(yu)},useDebugValue:G1,useDeferredValue:function(e){var t=pa();return $y(t,An.memoizedState,e)},useTransition:function(){var e=om(yu)[0],t=pa().memoizedState;return[e,t]},useMutableSource:Cy,useSyncExternalStore:Ay,useId:zy,unstable_isNewReconciler:!1},Q3={readContext:ma,useCallback:Ry,useContext:ma,useEffect:K1,useImperativeHandle:Oy,useInsertionEffect:Ty,useLayoutEffect:My,useMemo:By,useReducer:lm,useRef:Dy,useState:function(){return lm(yu)},useDebugValue:G1,useDeferredValue:function(e){var t=pa();return An===null?t.memoizedState=e:$y(t,An.memoizedState,e)},useTransition:function(){var e=lm(yu)[0],t=pa().memoizedState;return[e,t]},useMutableSource:Cy,useSyncExternalStore:Ay,useId:zy,unstable_isNewReconciler:!1};function Aa(e,t){if(e&&e.defaultProps){t=tn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function op(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:tn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Mf={isMounted:function(e){return(e=e._reactInternals)?Co(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fr(),a=Cs(e),i=_i(r,a);i.payload=t,n!=null&&(i.callback=n),t=Ss(e,i,a),t!==null&&(Da(t,e,a,r),gh(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fr(),a=Cs(e),i=_i(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ss(e,i,a),t!==null&&(Da(t,e,a,r),gh(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fr(),r=Cs(e),a=_i(n,r);a.tag=2,t!=null&&(a.callback=t),t=Ss(e,a,r),t!==null&&(Da(t,e,r,n),gh(t,e,r))}};function U2(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!hu(n,r)||!hu(a,i):!0}function Hy(e,t,n){var r=!1,a=Ls,i=t.contextType;return typeof i=="object"&&i!==null?i=ma(i):(a=Ar(t)?vo:ar.current,r=t.contextTypes,i=(r=r!=null)?Bl(e,a):Ls),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Mf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function W2(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Mf.enqueueReplaceState(t,t.state,null)}function lp(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},$1(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ma(i):(i=Ar(t)?vo:ar.current,a.context=Bl(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(op(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Mf.enqueueReplaceState(a,a.state,null),Xh(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ul(e,t){try{var n="",r=t;do n+=C4(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function cm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function cp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Z3=typeof WeakMap=="function"?WeakMap:Map;function Vy(e,t,n){n=_i(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){tf||(tf=!0,yp=r),cp(e,t)},n}function Ky(e,t,n){n=_i(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){cp(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cp(e,t),typeof r!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function H2(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Z3;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=fN.bind(null,e,t,n),t.then(e,e))}function V2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function K2(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_i(-1,1),t.tag=2,Ss(n,t,1))),n.lanes|=1),e)}var eN=Bi.ReactCurrentOwner,kr=!1;function dr(e,t,n,r){t.child=e===null?Ny(t,null,n,r):zl(t,e.child,n,r)}function G2(e,t,n,r,a){n=n.render;var i=t.ref;return Pl(t,a),r=H1(e,t,n,r,i,a),n=V1(),e!==null&&!kr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mi(e,t,a)):(Jt&&n&&D1(t),t.flags|=1,dr(e,t,r,a),t.child)}function Y2(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!ng(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Gy(e,t,i,r,a)):(e=Nh(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:hu,n(o,r)&&e.ref===t.ref)return Mi(e,t,a)}return t.flags|=1,e=As(i,r),e.ref=t.ref,e.return=t,t.child=e}function Gy(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(hu(i,r)&&e.ref===t.ref)if(kr=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(kr=!0);else return t.lanes=e.lanes,Mi(e,t,a)}return up(e,t,n,r,a)}function Yy(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(Nl,qr),qr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ut(Nl,qr),qr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ut(Nl,qr),qr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ut(Nl,qr),qr|=r;return dr(e,t,a,n),t.child}function Xy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function up(e,t,n,r,a){var i=Ar(n)?vo:ar.current;return i=Bl(t,i),Pl(t,a),n=H1(e,t,n,r,i,a),r=V1(),e!==null&&!kr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mi(e,t,a)):(Jt&&r&&D1(t),t.flags|=1,dr(e,t,n,a),t.child)}function X2(e,t,n,r,a){if(Ar(n)){var i=!0;Hh(t)}else i=!1;if(Pl(t,a),t.stateNode===null)yh(e,t),Hy(t,n,r),lp(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=ma(d):(d=Ar(n)?vo:ar.current,d=Bl(t,d));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&W2(t,o,r,d),ls=!1;var v=t.memoizedState;o.state=v,Xh(t,r,o,a),c=t.memoizedState,l!==r||v!==c||Cr.current||ls?(typeof m=="function"&&(op(t,n,m,r),c=t.memoizedState),(l=ls||U2(t,n,l,r,v,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Sy(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Aa(t.type,l),o.props=d,h=t.pendingProps,v=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ma(c):(c=Ar(n)?vo:ar.current,c=Bl(t,c));var p=n.getDerivedStateFromProps;(m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||v!==c)&&W2(t,o,r,c),ls=!1,v=t.memoizedState,o.state=v,Xh(t,r,o,a);var j=t.memoizedState;l!==h||v!==j||Cr.current||ls?(typeof p=="function"&&(op(t,n,p,r),j=t.memoizedState),(d=ls||U2(t,n,d,r,v,j,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),o.props=r,o.state=j,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return dp(e,t,n,r,i,a)}function dp(e,t,n,r,a,i){Xy(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&M2(t,n,!1),Mi(e,t,i);r=t.stateNode,eN.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=zl(t,e.child,null,i),t.child=zl(t,null,l,i)):dr(e,t,l,i),t.memoizedState=r.state,a&&M2(t,n,!0),t.child}function Jy(e){var t=e.stateNode;t.pendingContext?T2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&T2(e,t.context,!1),z1(e,t.containerInfo)}function J2(e,t,n,r,a){return $l(),M1(a),t.flags|=256,dr(e,t,n,r),t.child}var hp={dehydrated:null,treeContext:null,retryLane:0};function fp(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qy(e,t,n){var r=t.pendingProps,a=Zt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ut(Zt,a&1),e===null)return ip(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Rf(o,r,0,null),e=uo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=fp(n),t.memoizedState=hp,e):Y1(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return tN(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=As(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=As(l,i):(i=uo(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?fp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=hp,r}return i=e.child,e=i.sibling,r=As(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Y1(e,t){return t=Rf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yd(e,t,n,r){return r!==null&&M1(r),zl(t,e.child,null,n),e=Y1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function tN(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=cm(Error(Ee(422))),Yd(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Rf({mode:"visible",children:r.children},a,0,null),i=uo(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&zl(t,e.child,null,o),t.child.memoizedState=fp(o),t.memoizedState=hp,i);if(!(t.mode&1))return Yd(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Ee(419)),r=cm(i,r,void 0),Yd(e,t,o,r)}if(l=(o&e.childLanes)!==0,kr||l){if(r=Bn,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ti(e,a),Da(r,e,a,-1))}return tg(),r=cm(Error(Ee(421))),Yd(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=mN.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ur=js(a.nextSibling),Hr=t,Jt=!0,La=null,e!==null&&(ca[ua++]=Ci,ca[ua++]=Ai,ca[ua++]=xo,Ci=e.id,Ai=e.overflow,xo=t),t=Y1(t,r.children),t.flags|=4096,t)}function Q2(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sp(e.return,t,n)}function um(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Zy(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(dr(e,t,r.children,n),r=Zt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Q2(e,n,t);else if(e.tag===19)Q2(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ut(Zt,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Jh(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),um(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Jh(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}um(t,!0,n,null,i);break;case"together":um(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),bo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ee(153));if(t.child!==null){for(e=t.child,n=As(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=As(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nN(e,t,n){switch(t.tag){case 3:Jy(t),$l();break;case 5:ky(t);break;case 1:Ar(t.type)&&Hh(t);break;case 4:z1(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ut(Gh,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ut(Zt,Zt.current&1),t.flags|=128,null):n&t.child.childLanes?Qy(e,t,n):(Ut(Zt,Zt.current&1),e=Mi(e,t,n),e!==null?e.sibling:null);Ut(Zt,Zt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Zy(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ut(Zt,Zt.current),r)break;return null;case 22:case 23:return t.lanes=0,Yy(e,t,n)}return Mi(e,t,n)}var e5,mp,t5,n5;e5=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mp=function(){};t5=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,oo(ei.current);var i=null;switch(n){case"input":a=Fm(e,a),r=Fm(e,r),i=[];break;case"select":a=tn({},a,{value:void 0}),r=tn({},r,{value:void 0}),i=[];break;case"textarea":a=Bm(e,a),r=Bm(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Uh)}zm(n,r);var o;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(iu.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(iu.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Wt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};n5=function(e,t,n,r){n!==r&&(t.flags|=4)};function Dc(e,t){if(!Jt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rN(e,t,n){var r=t.pendingProps;switch(T1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(t),null;case 1:return Ar(t.type)&&Wh(),Yn(t),null;case 3:return r=t.stateNode,ql(),Kt(Cr),Kt(ar),U1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Kd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,La!==null&&(Np(La),La=null))),mp(e,t),Yn(t),null;case 5:q1(t);var a=oo(vu.current);if(n=t.type,e!==null&&t.stateNode!=null)t5(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ee(166));return Yn(t),null}if(e=oo(ei.current),Kd(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ga]=t,r[pu]=i,e=(t.mode&1)!==0,n){case"dialog":Wt("cancel",r),Wt("close",r);break;case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(a=0;a<zc.length;a++)Wt(zc[a],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"details":Wt("toggle",r);break;case"input":o2(r,i),Wt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Wt("invalid",r);break;case"textarea":c2(r,i),Wt("invalid",r)}zm(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Vd(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Vd(r.textContent,l,e),a=["children",""+l]):iu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Wt("scroll",r)}switch(n){case"input":Rd(r),l2(r,i,!0);break;case"textarea":Rd(r),u2(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uh)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lx(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ga]=t,e[pu]=r,e5(e,t,!1,!1),t.stateNode=e;e:{switch(o=qm(n,r),n){case"dialog":Wt("cancel",e),Wt("close",e),a=r;break;case"iframe":case"object":case"embed":Wt("load",e),a=r;break;case"video":case"audio":for(a=0;a<zc.length;a++)Wt(zc[a],e);a=r;break;case"source":Wt("error",e),a=r;break;case"img":case"image":case"link":Wt("error",e),Wt("load",e),a=r;break;case"details":Wt("toggle",e),a=r;break;case"input":o2(e,r),a=Fm(e,r),Wt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=tn({},r,{value:void 0}),Wt("invalid",e);break;case"textarea":c2(e,r),a=Bm(e,r),Wt("invalid",e);break;default:a=r}zm(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Dx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ex(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&su(e,c):typeof c=="number"&&su(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(iu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Wt("scroll",e):c!=null&&y1(e,i,c,o))}switch(n){case"input":Rd(e),l2(e,r,!1);break;case"textarea":Rd(e),u2(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_s(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Sl(e,!!r.multiple,i,!1):r.defaultValue!=null&&Sl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Uh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yn(t),null;case 6:if(e&&t.stateNode!=null)n5(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ee(166));if(n=oo(vu.current),oo(ei.current),Kd(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ga]=t,(i=r.nodeValue!==n)&&(e=Hr,e!==null))switch(e.tag){case 3:Vd(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vd(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ga]=t,t.stateNode=r}return Yn(t),null;case 13:if(Kt(Zt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Jt&&Ur!==null&&t.mode&1&&!(t.flags&128))by(),$l(),t.flags|=98560,i=!1;else if(i=Kd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Ee(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[Ga]=t}else $l(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yn(t),i=!1}else La!==null&&(Np(La),La=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Zt.current&1?Ln===0&&(Ln=3):tg())),t.updateQueue!==null&&(t.flags|=4),Yn(t),null);case 4:return ql(),mp(e,t),e===null&&fu(t.stateNode.containerInfo),Yn(t),null;case 10:return R1(t.type._context),Yn(t),null;case 17:return Ar(t.type)&&Wh(),Yn(t),null;case 19:if(Kt(Zt),i=t.memoizedState,i===null)return Yn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Dc(i,!1);else{if(Ln!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Jh(e),o!==null){for(t.flags|=128,Dc(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ut(Zt,Zt.current&1|2),t.child}e=e.sibling}i.tail!==null&&fn()>Wl&&(t.flags|=128,r=!0,Dc(i,!1),t.lanes=4194304)}else{if(!r)if(e=Jh(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Dc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Jt)return Yn(t),null}else 2*fn()-i.renderingStartTime>Wl&&n!==1073741824&&(t.flags|=128,r=!0,Dc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=fn(),t.sibling=null,n=Zt.current,Ut(Zt,r?n&1|2:n&1),t):(Yn(t),null);case 22:case 23:return eg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?qr&1073741824&&(Yn(t),t.subtreeFlags&6&&(t.flags|=8192)):Yn(t),null;case 24:return null;case 25:return null}throw Error(Ee(156,t.tag))}function aN(e,t){switch(T1(t),t.tag){case 1:return Ar(t.type)&&Wh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ql(),Kt(Cr),Kt(ar),U1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return q1(t),null;case 13:if(Kt(Zt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ee(340));$l()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kt(Zt),null;case 4:return ql(),null;case 10:return R1(t.type._context),null;case 22:case 23:return eg(),null;case 24:return null;default:return null}}var Xd=!1,er=!1,iN=typeof WeakSet=="function"?WeakSet:Set,He=null;function wl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){on(e,t,r)}else n.current=null}function pp(e,t,n){try{n()}catch(r){on(e,t,r)}}var Z2=!1;function sN(e,t){if(Qm=$h,e=oy(),I1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,m=0,h=e,v=null;t:for(;;){for(var p;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)v=h,h=p;for(;;){if(h===e)break t;if(v===n&&++d===a&&(l=o),v===i&&++m===r&&(c=o),(p=h.nextSibling)!==null)break;h=v,v=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zm={focusedElem:e,selectionRange:n},$h=!1,He=t;He!==null;)if(t=He,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,He=e;else for(;He!==null;){t=He;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var w=j.memoizedProps,S=j.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:Aa(t.type,w),S);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(A){on(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,He=e;break}He=t.return}return j=Z2,Z2=!1,j}function Xc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&pp(t,n,i)}a=a.next}while(a!==r)}}function Ff(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function gp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function r5(e){var t=e.alternate;t!==null&&(e.alternate=null,r5(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ga],delete t[pu],delete t[np],delete t[q3],delete t[U3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function a5(e){return e.tag===5||e.tag===3||e.tag===4}function ev(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||a5(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Uh));else if(r!==4&&(e=e.child,e!==null))for(vp(e,t,n),e=e.sibling;e!==null;)vp(e,t,n),e=e.sibling}function xp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xp(e,t,n),e=e.sibling;e!==null;)xp(e,t,n),e=e.sibling}var qn=null,_a=!1;function ns(e,t,n){for(n=n.child;n!==null;)i5(e,t,n),n=n.sibling}function i5(e,t,n){if(Za&&typeof Za.onCommitFiberUnmount=="function")try{Za.onCommitFiberUnmount(Pf,n)}catch{}switch(n.tag){case 5:er||wl(n,t);case 6:var r=qn,a=_a;qn=null,ns(e,t,n),qn=r,_a=a,qn!==null&&(_a?(e=qn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qn.removeChild(n.stateNode));break;case 18:qn!==null&&(_a?(e=qn,n=n.stateNode,e.nodeType===8?rm(e.parentNode,n):e.nodeType===1&&rm(e,n),uu(e)):rm(qn,n.stateNode));break;case 4:r=qn,a=_a,qn=n.stateNode.containerInfo,_a=!0,ns(e,t,n),qn=r,_a=a;break;case 0:case 11:case 14:case 15:if(!er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pp(n,t,o),a=a.next}while(a!==r)}ns(e,t,n);break;case 1:if(!er&&(wl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){on(n,t,l)}ns(e,t,n);break;case 21:ns(e,t,n);break;case 22:n.mode&1?(er=(r=er)||n.memoizedState!==null,ns(e,t,n),er=r):ns(e,t,n);break;default:ns(e,t,n)}}function tv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new iN),t.forEach(function(r){var a=pN.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Sa(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:qn=l.stateNode,_a=!1;break e;case 3:qn=l.stateNode.containerInfo,_a=!0;break e;case 4:qn=l.stateNode.containerInfo,_a=!0;break e}l=l.return}if(qn===null)throw Error(Ee(160));i5(i,o,a),qn=null,_a=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){on(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)s5(t,e),t=t.sibling}function s5(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sa(t,e),Wa(e),r&4){try{Xc(3,e,e.return),Ff(3,e)}catch(w){on(e,e.return,w)}try{Xc(5,e,e.return)}catch(w){on(e,e.return,w)}}break;case 1:Sa(t,e),Wa(e),r&512&&n!==null&&wl(n,n.return);break;case 5:if(Sa(t,e),Wa(e),r&512&&n!==null&&wl(n,n.return),e.flags&32){var a=e.stateNode;try{su(a,"")}catch(w){on(e,e.return,w)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Px(a,i),qm(l,o);var d=qm(l,i);for(o=0;o<c.length;o+=2){var m=c[o],h=c[o+1];m==="style"?Dx(a,h):m==="dangerouslySetInnerHTML"?Ex(a,h):m==="children"?su(a,h):y1(a,m,h,d)}switch(l){case"input":Om(a,i);break;case"textarea":_x(a,i);break;case"select":var v=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Sl(a,!!i.multiple,p,!1):v!==!!i.multiple&&(i.defaultValue!=null?Sl(a,!!i.multiple,i.defaultValue,!0):Sl(a,!!i.multiple,i.multiple?[]:"",!1))}a[pu]=i}catch(w){on(e,e.return,w)}}break;case 6:if(Sa(t,e),Wa(e),r&4){if(e.stateNode===null)throw Error(Ee(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(w){on(e,e.return,w)}}break;case 3:if(Sa(t,e),Wa(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uu(t.containerInfo)}catch(w){on(e,e.return,w)}break;case 4:Sa(t,e),Wa(e);break;case 13:Sa(t,e),Wa(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Q1=fn())),r&4&&tv(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(er=(d=er)||m,Sa(t,e),er=d):Sa(t,e),Wa(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(He=e,m=e.child;m!==null;){for(h=He=m;He!==null;){switch(v=He,p=v.child,v.tag){case 0:case 11:case 14:case 15:Xc(4,v,v.return);break;case 1:wl(v,v.return);var j=v.stateNode;if(typeof j.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(w){on(r,n,w)}}break;case 5:wl(v,v.return);break;case 22:if(v.memoizedState!==null){rv(h);continue}}p!==null?(p.return=v,He=p):rv(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ix("display",o))}catch(w){on(e,e.return,w)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(w){on(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Sa(t,e),Wa(e),r&4&&tv(e);break;case 21:break;default:Sa(t,e),Wa(e)}}function Wa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(a5(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(su(a,""),r.flags&=-33);var i=ev(e);xp(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ev(e);vp(e,l,o);break;default:throw Error(Ee(161))}}catch(c){on(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oN(e,t,n){He=e,o5(e)}function o5(e,t,n){for(var r=(e.mode&1)!==0;He!==null;){var a=He,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Xd;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||er;l=Xd;var d=er;if(Xd=o,(er=c)&&!d)for(He=a;He!==null;)o=He,c=o.child,o.tag===22&&o.memoizedState!==null?av(a):c!==null?(c.return=o,He=c):av(a);for(;i!==null;)He=i,o5(i),i=i.sibling;He=a,Xd=l,er=d}nv(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,He=i):nv(e)}}function nv(e){for(;He!==null;){var t=He;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:er||Ff(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!er)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Aa(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&$2(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$2(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&uu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}er||t.flags&512&&gp(t)}catch(v){on(t,t.return,v)}}if(t===e){He=null;break}if(n=t.sibling,n!==null){n.return=t.return,He=n;break}He=t.return}}function rv(e){for(;He!==null;){var t=He;if(t===e){He=null;break}var n=t.sibling;if(n!==null){n.return=t.return,He=n;break}He=t.return}}function av(e){for(;He!==null;){var t=He;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ff(4,t)}catch(c){on(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){on(t,a,c)}}var i=t.return;try{gp(t)}catch(c){on(t,i,c)}break;case 5:var o=t.return;try{gp(t)}catch(c){on(t,o,c)}}}catch(c){on(t,t.return,c)}if(t===e){He=null;break}var l=t.sibling;if(l!==null){l.return=t.return,He=l;break}He=t.return}}var lN=Math.ceil,ef=Bi.ReactCurrentDispatcher,X1=Bi.ReactCurrentOwner,ha=Bi.ReactCurrentBatchConfig,Pt=0,Bn=null,jn=null,Un=0,qr=0,Nl=Rs(0),Ln=0,wu=null,bo=0,Of=0,J1=0,Jc=null,Sr=null,Q1=0,Wl=1/0,Ni=null,tf=!1,yp=null,ks=null,Jd=!1,ps=null,nf=0,Qc=0,bp=null,bh=-1,wh=0;function fr(){return Pt&6?fn():bh!==-1?bh:bh=fn()}function Cs(e){return e.mode&1?Pt&2&&Un!==0?Un&-Un:H3.transition!==null?(wh===0&&(wh=Hx()),wh):(e=Ft,e!==0||(e=window.event,e=e===void 0?16:Qx(e.type)),e):1}function Da(e,t,n,r){if(50<Qc)throw Qc=0,bp=null,Error(Ee(185));Fu(e,n,r),(!(Pt&2)||e!==Bn)&&(e===Bn&&(!(Pt&2)&&(Of|=n),Ln===4&&ds(e,Un)),Pr(e,r),n===1&&Pt===0&&!(t.mode&1)&&(Wl=fn()+500,Df&&Bs()))}function Pr(e,t){var n=e.callbackNode;H4(e,t);var r=Bh(e,e===Bn?Un:0);if(r===0)n!==null&&f2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&f2(n),t===1)e.tag===0?W3(iv.bind(null,e)):vy(iv.bind(null,e)),$3(function(){!(Pt&6)&&Bs()}),n=null;else{switch(Vx(r)){case 1:n=S1;break;case 4:n=Ux;break;case 16:n=Rh;break;case 536870912:n=Wx;break;default:n=Rh}n=p5(n,l5.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function l5(e,t){if(bh=-1,wh=0,Pt&6)throw Error(Ee(327));var n=e.callbackNode;if(_l()&&e.callbackNode!==n)return null;var r=Bh(e,e===Bn?Un:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=rf(e,r);else{t=r;var a=Pt;Pt|=2;var i=u5();(Bn!==e||Un!==t)&&(Ni=null,Wl=fn()+500,co(e,t));do try{dN();break}catch(l){c5(e,l)}while(1);O1(),ef.current=i,Pt=a,jn!==null?t=0:(Bn=null,Un=0,t=Ln)}if(t!==0){if(t===2&&(a=Km(e),a!==0&&(r=a,t=wp(e,a))),t===1)throw n=wu,co(e,0),ds(e,r),Pr(e,fn()),n;if(t===6)ds(e,r);else{if(a=e.current.alternate,!(r&30)&&!cN(a)&&(t=rf(e,r),t===2&&(i=Km(e),i!==0&&(r=i,t=wp(e,i))),t===1))throw n=wu,co(e,0),ds(e,r),Pr(e,fn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Ee(345));case 2:to(e,Sr,Ni);break;case 3:if(ds(e,r),(r&130023424)===r&&(t=Q1+500-fn(),10<t)){if(Bh(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){fr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=tp(to.bind(null,e,Sr,Ni),t);break}to(e,Sr,Ni);break;case 4:if(ds(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Ia(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lN(r/1960))-r,10<r){e.timeoutHandle=tp(to.bind(null,e,Sr,Ni),r);break}to(e,Sr,Ni);break;case 5:to(e,Sr,Ni);break;default:throw Error(Ee(329))}}}return Pr(e,fn()),e.callbackNode===n?l5.bind(null,e):null}function wp(e,t){var n=Jc;return e.current.memoizedState.isDehydrated&&(co(e,t).flags|=256),e=rf(e,t),e!==2&&(t=Sr,Sr=n,t!==null&&Np(t)),e}function Np(e){Sr===null?Sr=e:Sr.push.apply(Sr,e)}function cN(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Ma(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ds(e,t){for(t&=~J1,t&=~Of,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ia(t),r=1<<n;e[n]=-1,t&=~r}}function iv(e){if(Pt&6)throw Error(Ee(327));_l();var t=Bh(e,0);if(!(t&1))return Pr(e,fn()),null;var n=rf(e,t);if(e.tag!==0&&n===2){var r=Km(e);r!==0&&(t=r,n=wp(e,r))}if(n===1)throw n=wu,co(e,0),ds(e,t),Pr(e,fn()),n;if(n===6)throw Error(Ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,to(e,Sr,Ni),Pr(e,fn()),null}function Z1(e,t){var n=Pt;Pt|=1;try{return e(t)}finally{Pt=n,Pt===0&&(Wl=fn()+500,Df&&Bs())}}function wo(e){ps!==null&&ps.tag===0&&!(Pt&6)&&_l();var t=Pt;Pt|=1;var n=ha.transition,r=Ft;try{if(ha.transition=null,Ft=1,e)return e()}finally{Ft=r,ha.transition=n,Pt=t,!(Pt&6)&&Bs()}}function eg(){qr=Nl.current,Kt(Nl)}function co(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,B3(n)),jn!==null)for(n=jn.return;n!==null;){var r=n;switch(T1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wh();break;case 3:ql(),Kt(Cr),Kt(ar),U1();break;case 5:q1(r);break;case 4:ql();break;case 13:Kt(Zt);break;case 19:Kt(Zt);break;case 10:R1(r.type._context);break;case 22:case 23:eg()}n=n.return}if(Bn=e,jn=e=As(e.current,null),Un=qr=t,Ln=0,wu=null,J1=Of=bo=0,Sr=Jc=null,so!==null){for(t=0;t<so.length;t++)if(n=so[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}so=null}return e}function c5(e,t){do{var n=jn;try{if(O1(),vh.current=Zh,Qh){for(var r=en.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Qh=!1}if(yo=0,On=An=en=null,Yc=!1,xu=0,X1.current=null,n===null||n.return===null){Ln=1,wu=t,jn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Un,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=l,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var p=V2(o);if(p!==null){p.flags&=-257,K2(p,o,l,i,t),p.mode&1&&H2(i,d,t),t=p,c=d;var j=t.updateQueue;if(j===null){var w=new Set;w.add(c),t.updateQueue=w}else j.add(c);break e}else{if(!(t&1)){H2(i,d,t),tg();break e}c=Error(Ee(426))}}else if(Jt&&l.mode&1){var S=V2(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),K2(S,o,l,i,t),M1(Ul(c,l));break e}}i=c=Ul(c,l),Ln!==4&&(Ln=2),Jc===null?Jc=[i]:Jc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Vy(i,c,t);B2(i,g);break e;case 1:l=c;var y=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ks===null||!ks.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var A=Ky(i,l,t);B2(i,A);break e}}i=i.return}while(i!==null)}h5(n)}catch(R){t=R,jn===n&&n!==null&&(jn=n=n.return);continue}break}while(1)}function u5(){var e=ef.current;return ef.current=Zh,e===null?Zh:e}function tg(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Bn===null||!(bo&268435455)&&!(Of&268435455)||ds(Bn,Un)}function rf(e,t){var n=Pt;Pt|=2;var r=u5();(Bn!==e||Un!==t)&&(Ni=null,co(e,t));do try{uN();break}catch(a){c5(e,a)}while(1);if(O1(),Pt=n,ef.current=r,jn!==null)throw Error(Ee(261));return Bn=null,Un=0,Ln}function uN(){for(;jn!==null;)d5(jn)}function dN(){for(;jn!==null&&!F4();)d5(jn)}function d5(e){var t=m5(e.alternate,e,qr);e.memoizedProps=e.pendingProps,t===null?h5(e):jn=t,X1.current=null}function h5(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=aN(n,t),n!==null){n.flags&=32767,jn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ln=6,jn=null;return}}else if(n=rN(n,t,qr),n!==null){jn=n;return}if(t=t.sibling,t!==null){jn=t;return}jn=t=e}while(t!==null);Ln===0&&(Ln=5)}function to(e,t,n){var r=Ft,a=ha.transition;try{ha.transition=null,Ft=1,hN(e,t,n,r)}finally{ha.transition=a,Ft=r}return null}function hN(e,t,n,r){do _l();while(ps!==null);if(Pt&6)throw Error(Ee(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ee(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(V4(e,i),e===Bn&&(jn=Bn=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jd||(Jd=!0,p5(Rh,function(){return _l(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ha.transition,ha.transition=null;var o=Ft;Ft=1;var l=Pt;Pt|=4,X1.current=null,sN(e,n),s5(n,e),I3(Zm),$h=!!Qm,Zm=Qm=null,e.current=n,oN(n),O4(),Pt=l,Ft=o,ha.transition=i}else e.current=n;if(Jd&&(Jd=!1,ps=e,nf=a),i=e.pendingLanes,i===0&&(ks=null),$4(n.stateNode),Pr(e,fn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(tf)throw tf=!1,e=yp,yp=null,e;return nf&1&&e.tag!==0&&_l(),i=e.pendingLanes,i&1?e===bp?Qc++:(Qc=0,bp=e):Qc=0,Bs(),null}function _l(){if(ps!==null){var e=Vx(nf),t=ha.transition,n=Ft;try{if(ha.transition=null,Ft=16>e?16:e,ps===null)var r=!1;else{if(e=ps,ps=null,nf=0,Pt&6)throw Error(Ee(331));var a=Pt;for(Pt|=4,He=e.current;He!==null;){var i=He,o=i.child;if(He.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(He=d;He!==null;){var m=He;switch(m.tag){case 0:case 11:case 15:Xc(8,m,i)}var h=m.child;if(h!==null)h.return=m,He=h;else for(;He!==null;){m=He;var v=m.sibling,p=m.return;if(r5(m),m===d){He=null;break}if(v!==null){v.return=p,He=v;break}He=p}}}var j=i.alternate;if(j!==null){var w=j.child;if(w!==null){j.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}He=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,He=o;else e:for(;He!==null;){if(i=He,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xc(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,He=g;break e}He=i.return}}var y=e.current;for(He=y;He!==null;){o=He;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,He=N;else e:for(o=y;He!==null;){if(l=He,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ff(9,l)}}catch(R){on(l,l.return,R)}if(l===o){He=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,He=A;break e}He=l.return}}if(Pt=a,Bs(),Za&&typeof Za.onPostCommitFiberRoot=="function")try{Za.onPostCommitFiberRoot(Pf,e)}catch{}r=!0}return r}finally{Ft=n,ha.transition=t}}return!1}function sv(e,t,n){t=Ul(n,t),t=Vy(e,t,1),e=Ss(e,t,1),t=fr(),e!==null&&(Fu(e,1,t),Pr(e,t))}function on(e,t,n){if(e.tag===3)sv(e,e,n);else for(;t!==null;){if(t.tag===3){sv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ks===null||!ks.has(r))){e=Ul(n,e),e=Ky(t,e,1),t=Ss(t,e,1),e=fr(),t!==null&&(Fu(t,1,e),Pr(t,e));break}}t=t.return}}function fN(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=fr(),e.pingedLanes|=e.suspendedLanes&n,Bn===e&&(Un&n)===n&&(Ln===4||Ln===3&&(Un&130023424)===Un&&500>fn()-Q1?co(e,0):J1|=n),Pr(e,t)}function f5(e,t){t===0&&(e.mode&1?(t=zd,zd<<=1,!(zd&130023424)&&(zd=4194304)):t=1);var n=fr();e=Ti(e,t),e!==null&&(Fu(e,t,n),Pr(e,n))}function mN(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),f5(e,n)}function pN(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(t),f5(e,n)}var m5;m5=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Cr.current)kr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return kr=!1,nN(e,t,n);kr=!!(e.flags&131072)}else kr=!1,Jt&&t.flags&1048576&&xy(t,Kh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;yh(e,t),e=t.pendingProps;var a=Bl(t,ar.current);Pl(t,n),a=H1(null,t,r,e,a,n);var i=V1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ar(r)?(i=!0,Hh(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,$1(t),a.updater=Mf,t.stateNode=a,a._reactInternals=t,lp(t,r,e,n),t=dp(null,t,r,!0,i,n)):(t.tag=0,Jt&&i&&D1(t),dr(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(yh(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=vN(r),e=Aa(r,e),a){case 0:t=up(null,t,r,e,n);break e;case 1:t=X2(null,t,r,e,n);break e;case 11:t=G2(null,t,r,e,n);break e;case 14:t=Y2(null,t,r,Aa(r.type,e),n);break e}throw Error(Ee(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Aa(r,a),up(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Aa(r,a),X2(e,t,r,a,n);case 3:e:{if(Jy(t),e===null)throw Error(Ee(387));r=t.pendingProps,i=t.memoizedState,a=i.element,Sy(e,t),Xh(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ul(Error(Ee(423)),t),t=J2(e,t,r,n,a);break e}else if(r!==a){a=Ul(Error(Ee(424)),t),t=J2(e,t,r,n,a);break e}else for(Ur=js(t.stateNode.containerInfo.firstChild),Hr=t,Jt=!0,La=null,n=Ny(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($l(),r===a){t=Mi(e,t,n);break e}dr(e,t,r,n)}t=t.child}return t;case 5:return ky(t),e===null&&ip(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,ep(r,a)?o=null:i!==null&&ep(r,i)&&(t.flags|=32),Xy(e,t),dr(e,t,o,n),t.child;case 6:return e===null&&ip(t),null;case 13:return Qy(e,t,n);case 4:return z1(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=zl(t,null,r,n):dr(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Aa(r,a),G2(e,t,r,a,n);case 7:return dr(e,t,t.pendingProps,n),t.child;case 8:return dr(e,t,t.pendingProps.children,n),t.child;case 12:return dr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ut(Gh,r._currentValue),r._currentValue=o,i!==null)if(Ma(i.value,o)){if(i.children===a.children&&!Cr.current){t=Mi(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=_i(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),sp(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),sp(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Pl(t,n),a=ma(a),r=r(a),t.flags|=1,dr(e,t,r,n),t.child;case 14:return r=t.type,a=Aa(r,t.pendingProps),a=Aa(r.type,a),Y2(e,t,r,a,n);case 15:return Gy(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Aa(r,a),yh(e,t),t.tag=1,Ar(r)?(e=!0,Hh(t)):e=!1,Pl(t,n),Hy(t,r,a),lp(t,r,a,n),dp(null,t,r,!0,e,n);case 19:return Zy(e,t,n);case 22:return Yy(e,t,n)}throw Error(Ee(156,t.tag))};function p5(e,t){return qx(e,t)}function gN(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function da(e,t,n,r){return new gN(e,t,n,r)}function ng(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vN(e){if(typeof e=="function")return ng(e)?1:0;if(e!=null){if(e=e.$$typeof,e===w1)return 11;if(e===N1)return 14}return 2}function As(e,t){var n=e.alternate;return n===null?(n=da(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nh(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")ng(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case hl:return uo(n.children,a,i,t);case b1:o=8,a|=8;break;case Im:return e=da(12,n,t,a|2),e.elementType=Im,e.lanes=i,e;case Dm:return e=da(13,n,t,a),e.elementType=Dm,e.lanes=i,e;case Tm:return e=da(19,n,t,a),e.elementType=Tm,e.lanes=i,e;case kx:return Rf(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jx:o=10;break e;case Sx:o=9;break e;case w1:o=11;break e;case N1:o=14;break e;case os:o=16,r=null;break e}throw Error(Ee(130,e==null?e:typeof e,""))}return t=da(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function uo(e,t,n,r){return e=da(7,e,r,t),e.lanes=n,e}function Rf(e,t,n,r){return e=da(22,e,r,t),e.elementType=kx,e.lanes=n,e.stateNode={isHidden:!1},e}function dm(e,t,n){return e=da(6,e,null,t),e.lanes=n,e}function hm(e,t,n){return t=da(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xN(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=V0(0),this.expirationTimes=V0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=V0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function rg(e,t,n,r,a,i,o,l,c){return e=new xN(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=da(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$1(i),e}function yN(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function g5(e){if(!e)return Ls;e=e._reactInternals;e:{if(Co(e)!==e||e.tag!==1)throw Error(Ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ar(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ee(171))}if(e.tag===1){var n=e.type;if(Ar(n))return gy(e,n,t)}return t}function v5(e,t,n,r,a,i,o,l,c){return e=rg(n,r,!0,e,a,i,o,l,c),e.context=g5(null),n=e.current,r=fr(),a=Cs(n),i=_i(r,a),i.callback=t??null,Ss(n,i,a),e.current.lanes=a,Fu(e,a,r),Pr(e,r),e}function Bf(e,t,n,r){var a=t.current,i=fr(),o=Cs(a);return n=g5(n),t.context===null?t.context=n:t.pendingContext=n,t=_i(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ss(a,t,o),e!==null&&(Da(e,a,o,i),gh(e,a,o)),o}function af(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ov(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ag(e,t){ov(e,t),(e=e.alternate)&&ov(e,t)}function bN(){return null}var x5=typeof reportError=="function"?reportError:function(e){console.error(e)};function ig(e){this._internalRoot=e}$f.prototype.render=ig.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ee(409));Bf(e,t,null,null)};$f.prototype.unmount=ig.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wo(function(){Bf(null,e,null,null)}),t[Di]=null}};function $f(e){this._internalRoot=e}$f.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<us.length&&t!==0&&t<us[n].priority;n++);us.splice(n,0,e),n===0&&Jx(e)}};function sg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lv(){}function wN(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=af(o);i.call(d)}}var o=v5(t,r,e,0,null,!1,!1,"",lv);return e._reactRootContainer=o,e[Di]=o.current,fu(e.nodeType===8?e.parentNode:e),wo(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var d=af(c);l.call(d)}}var c=rg(e,0,!1,null,null,!1,!1,"",lv);return e._reactRootContainer=c,e[Di]=c.current,fu(e.nodeType===8?e.parentNode:e),wo(function(){Bf(t,c,n,r)}),c}function qf(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=af(o);l.call(c)}}Bf(t,o,e,a)}else o=wN(n,t,e,a,r);return af(o)}Kx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$c(t.pendingLanes);n!==0&&(k1(t,n|1),Pr(t,fn()),!(Pt&6)&&(Wl=fn()+500,Bs()))}break;case 13:wo(function(){var r=Ti(e,1);if(r!==null){var a=fr();Da(r,e,1,a)}}),ag(e,1)}};C1=function(e){if(e.tag===13){var t=Ti(e,134217728);if(t!==null){var n=fr();Da(t,e,134217728,n)}ag(e,134217728)}};Gx=function(e){if(e.tag===13){var t=Cs(e),n=Ti(e,t);if(n!==null){var r=fr();Da(n,e,t,r)}ag(e,t)}};Yx=function(){return Ft};Xx=function(e,t){var n=Ft;try{return Ft=e,t()}finally{Ft=n}};Wm=function(e,t,n){switch(t){case"input":if(Om(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=If(r);if(!a)throw Error(Ee(90));Ax(r),Om(r,a)}}}break;case"textarea":_x(e,n);break;case"select":t=n.value,t!=null&&Sl(e,!!n.multiple,t,!1)}};Fx=Z1;Ox=wo;var NN={usingClientEntryPoint:!1,Events:[Ru,gl,If,Tx,Mx,Z1]},Tc={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jN={bundleType:Tc.bundleType,version:Tc.version,rendererPackageName:Tc.rendererPackageName,rendererConfig:Tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$x(e),e===null?null:e.stateNode},findFiberByHostInstance:Tc.findFiberByHostInstance||bN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qd.isDisabled&&Qd.supportsFiber)try{Pf=Qd.inject(jN),Za=Qd}catch{}}Gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NN;Gr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sg(t))throw Error(Ee(200));return yN(e,t,null,n)};Gr.createRoot=function(e,t){if(!sg(e))throw Error(Ee(299));var n=!1,r="",a=x5;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=rg(e,1,!1,null,null,n,!1,r,a),e[Di]=t.current,fu(e.nodeType===8?e.parentNode:e),new ig(t)};Gr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ee(188)):(e=Object.keys(e).join(","),Error(Ee(268,e)));return e=$x(t),e=e===null?null:e.stateNode,e};Gr.flushSync=function(e){return wo(e)};Gr.hydrate=function(e,t,n){if(!zf(t))throw Error(Ee(200));return qf(null,e,t,!0,n)};Gr.hydrateRoot=function(e,t,n){if(!sg(e))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=x5;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=v5(t,null,e,1,n??null,a,!1,i,o),e[Di]=t.current,fu(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new $f(t)};Gr.render=function(e,t,n){if(!zf(t))throw Error(Ee(200));return qf(null,e,t,!1,n)};Gr.unmountComponentAtNode=function(e){if(!zf(e))throw Error(Ee(40));return e._reactRootContainer?(wo(function(){qf(null,null,e,!1,function(){e._reactRootContainer=null,e[Di]=null})}),!0):!1};Gr.unstable_batchedUpdates=Z1;Gr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!zf(n))throw Error(Ee(200));if(e==null||e._reactInternals===void 0)throw Error(Ee(38));return qf(e,t,n,!1,r)};Gr.version="18.3.1-next-f1338f8080-20240426";function y5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y5)}catch(e){console.error(e)}}y5(),yx.exports=Gr;var SN=yx.exports,cv=SN;Lm.createRoot=cv.createRoot,Lm.hydrateRoot=cv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nu(){return Nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nu.apply(this,arguments)}var gs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gs||(gs={}));const uv="popstate";function kN(e){e===void 0&&(e={});function t(a,i){let{pathname:o="/",search:l="",hash:c=""}=Ao(a.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),jp("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(a,i){let o=a.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=a.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:sf(i))}function r(a,i){og(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return AN(t,n,r,e)}function ln(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function og(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function CN(){return Math.random().toString(36).substr(2,8)}function dv(e,t){return{usr:e.state,key:e.key,idx:t}}function jp(e,t,n,r){return n===void 0&&(n=null),Nu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ao(t):t,{state:n,key:t&&t.key||r||CN()})}function sf(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ao(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function AN(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=gs.Pop,c=null,d=m();d==null&&(d=0,o.replaceState(Nu({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function h(){l=gs.Pop;let S=m(),g=S==null?null:S-d;d=S,c&&c({action:l,location:w.location,delta:g})}function v(S,g){l=gs.Push;let y=jp(w.location,S,g);n&&n(y,S),d=m()+1;let N=dv(y,d),A=w.createHref(y);try{o.pushState(N,"",A)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(A)}i&&c&&c({action:l,location:w.location,delta:1})}function p(S,g){l=gs.Replace;let y=jp(w.location,S,g);n&&n(y,S),d=m();let N=dv(y,d),A=w.createHref(y);o.replaceState(N,"",A),i&&c&&c({action:l,location:w.location,delta:0})}function j(S){let g=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof S=="string"?S:sf(S);return y=y.replace(/ $/,"%20"),ln(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let w={get action(){return l},get location(){return e(a,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(uv,h),c=S,()=>{a.removeEventListener(uv,h),c=null}},createHref(S){return t(a,S)},createURL:j,encodeLocation(S){let g=j(S);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:v,replace:p,go(S){return o.go(S)}};return w}var hv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hv||(hv={}));function PN(e,t,n){return n===void 0&&(n="/"),_N(e,t,n,!1)}function _N(e,t,n,r){let a=typeof t=="string"?Ao(t):t,i=Hl(a.pathname||"/",n);if(i==null)return null;let o=b5(e);LN(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=zN(i);l=BN(o[c],d,r)}return l}function b5(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ln(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Ps([r,c.relativePath]),m=n.concat(c);i.children&&i.children.length>0&&(ln(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),b5(i.children,t,m,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:ON(d,i.index),routesMeta:m})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of w5(i.path))a(i,o,c)}),t}function w5(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=w5(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function LN(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:RN(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const EN=/^:[\w-]+$/,IN=3,DN=2,TN=1,MN=10,FN=-2,fv=e=>e==="*";function ON(e,t){let n=e.split("/"),r=n.length;return n.some(fv)&&(r+=FN),t&&(r+=DN),n.filter(a=>!fv(a)).reduce((a,i)=>a+(EN.test(i)?IN:i===""?TN:MN),r)}function RN(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function BN(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=of({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),v=c.route;if(!h&&d&&n&&!r[r.length-1].route.index&&(h=of({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:Ps([i,h.pathname]),pathnameBase:HN(Ps([i,h.pathnameBase])),route:v}),h.pathnameBase!=="/"&&(i=Ps([i,h.pathnameBase]))}return o}function of(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=$N(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((d,m,h)=>{let{paramName:v,isOptional:p}=m;if(v==="*"){let w=l[h]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const j=l[h];return p&&!j?d[v]=void 0:d[v]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function $N(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),og(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function zN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return og(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Hl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function qN(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Ao(e):e;return{pathname:n?n.startsWith("/")?n:UN(n,t):t,search:VN(r),hash:KN(a)}}function UN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function fm(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WN(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function N5(e,t){let n=WN(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function j5(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Ao(e):(a=Nu({},e),ln(!a.pathname||!a.pathname.includes("?"),fm("?","pathname","search",a)),ln(!a.pathname||!a.pathname.includes("#"),fm("#","pathname","hash",a)),ln(!a.search||!a.search.includes("#"),fm("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),h-=1;a.pathname=v.join("/")}l=h>=0?t[h]:"/"}let c=qN(a,l),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const Ps=e=>e.join("/").replace(/\/\/+/g,"/"),HN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),VN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,KN=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function GN(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const S5=["post","put","patch","delete"];new Set(S5);const YN=["get",...S5];new Set(YN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ju.apply(this,arguments)}const Uf=q.createContext(null),k5=q.createContext(null),$s=q.createContext(null),Wf=q.createContext(null),Po=q.createContext({outlet:null,matches:[],isDataRoute:!1}),C5=q.createContext(null);function XN(e,t){let{relative:n}=t===void 0?{}:t;$u()||ln(!1);let{basename:r,navigator:a}=q.useContext($s),{hash:i,pathname:o,search:l}=Hf(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Ps([r,o])),a.createHref({pathname:c,search:l,hash:i})}function $u(){return q.useContext(Wf)!=null}function $i(){return $u()||ln(!1),q.useContext(Wf).location}function A5(e){q.useContext($s).static||q.useLayoutEffect(e)}function zu(){let{isDataRoute:e}=q.useContext(Po);return e?c6():JN()}function JN(){$u()||ln(!1);let e=q.useContext(Uf),{basename:t,future:n,navigator:r}=q.useContext($s),{matches:a}=q.useContext(Po),{pathname:i}=$i(),o=JSON.stringify(N5(a,n.v7_relativeSplatPath)),l=q.useRef(!1);return A5(()=>{l.current=!0}),q.useCallback(function(d,m){if(m===void 0&&(m={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let h=j5(d,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ps([t,h.pathname])),(m.replace?r.replace:r.push)(h,m.state,m)},[t,r,o,i,e])}function Hf(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=q.useContext($s),{matches:a}=q.useContext(Po),{pathname:i}=$i(),o=JSON.stringify(N5(a,r.v7_relativeSplatPath));return q.useMemo(()=>j5(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function QN(e,t){return ZN(e,t)}function ZN(e,t,n,r){$u()||ln(!1);let{navigator:a}=q.useContext($s),{matches:i}=q.useContext(Po),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=$i(),m;if(t){var h;let S=typeof t=="string"?Ao(t):t;c==="/"||(h=S.pathname)!=null&&h.startsWith(c)||ln(!1),m=S}else m=d;let v=m.pathname||"/",p=v;if(c!=="/"){let S=c.replace(/^\//,"").split("/");p="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let j=PN(e,{pathname:p}),w=a6(j&&j.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Ps([c,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Ps([c,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return t&&w?q.createElement(Wf.Provider,{value:{location:ju({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:gs.Pop}},w):w}function e6(){let e=l6(),t=GN(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),n?q.createElement("pre",{style:a},n):null,i)}const t6=q.createElement(e6,null);class n6 extends q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?q.createElement(Po.Provider,{value:this.props.routeContext},q.createElement(C5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function r6(e){let{routeContext:t,match:n,children:r}=e,a=q.useContext(Uf);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Po.Provider,{value:t},r)}function a6(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let m=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);m>=0||ln(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let h=o[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=m),h.route.id){let{loaderData:v,errors:p}=n,j=h.route.loader&&v[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||j){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,h,v)=>{let p,j=!1,w=null,S=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||t6,c&&(d<0&&v===0?(u6("route-fallback",!1),j=!0,S=null):d===v&&(j=!0,S=h.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,v+1)),y=()=>{let N;return p?N=w:j?N=S:h.route.Component?N=q.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=m,q.createElement(r6,{match:h,routeContext:{outlet:m,matches:g,isDataRoute:n!=null},children:N})};return n&&(h.route.ErrorBoundary||h.route.errorElement||v===0)?q.createElement(n6,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var P5=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(P5||{}),lf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(lf||{});function i6(e){let t=q.useContext(Uf);return t||ln(!1),t}function s6(e){let t=q.useContext(k5);return t||ln(!1),t}function o6(e){let t=q.useContext(Po);return t||ln(!1),t}function _5(e){let t=o6(),n=t.matches[t.matches.length-1];return n.route.id||ln(!1),n.route.id}function l6(){var e;let t=q.useContext(C5),n=s6(lf.UseRouteError),r=_5(lf.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function c6(){let{router:e}=i6(P5.UseNavigateStable),t=_5(lf.UseNavigateStable),n=q.useRef(!1);return A5(()=>{n.current=!0}),q.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ju({fromRouteId:t},i)))},[e,t])}const mv={};function u6(e,t,n){!t&&!mv[e]&&(mv[e]=!0)}function d6(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function $r(e){ln(!1)}function h6(e){let{basename:t="/",children:n=null,location:r,navigationType:a=gs.Pop,navigator:i,static:o=!1,future:l}=e;$u()&&ln(!1);let c=t.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:c,navigator:i,static:o,future:ju({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Ao(r));let{pathname:m="/",search:h="",hash:v="",state:p=null,key:j="default"}=r,w=q.useMemo(()=>{let S=Hl(m,c);return S==null?null:{location:{pathname:S,search:h,hash:v,state:p,key:j},navigationType:a}},[c,m,h,v,p,j,a]);return w==null?null:q.createElement($s.Provider,{value:d},q.createElement(Wf.Provider,{children:n,value:w}))}function f6(e){let{children:t,location:n}=e;return QN(Sp(t),n)}new Promise(()=>{});function Sp(e,t){t===void 0&&(t=[]);let n=[];return q.Children.forEach(e,(r,a)=>{if(!q.isValidElement(r))return;let i=[...t,a];if(r.type===q.Fragment){n.push.apply(n,Sp(r.props.children,i));return}r.type!==$r&&ln(!1),!r.props.index||!r.props.children||ln(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sp(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cf(){return cf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cf.apply(this,arguments)}function L5(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function m6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function p6(e,t){return e.button===0&&(!t||t==="_self")&&!m6(e)}const g6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],v6=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],x6="6";try{window.__reactRouterVersion=x6}catch{}const y6=q.createContext({isTransitioning:!1}),b6="startTransition",pv=f4[b6];function w6(e){let{basename:t,children:n,future:r,window:a}=e,i=q.useRef();i.current==null&&(i.current=kN({window:a,v5Compat:!0}));let o=i.current,[l,c]=q.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=q.useCallback(h=>{d&&pv?pv(()=>c(h)):c(h)},[c,d]);return q.useLayoutEffect(()=>o.listen(m),[o,m]),q.useEffect(()=>d6(r),[r]),q.createElement(h6,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const N6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",j6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,S6=q.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:m,viewTransition:h}=t,v=L5(t,g6),{basename:p}=q.useContext($s),j,w=!1;if(typeof d=="string"&&j6.test(d)&&(j=d,N6))try{let N=new URL(window.location.href),A=d.startsWith("//")?new URL(N.protocol+d):new URL(d),R=Hl(A.pathname,p);A.origin===N.origin&&R!=null?d=R+A.search+A.hash:w=!0}catch{}let S=XN(d,{relative:a}),g=C6(d,{replace:o,state:l,target:c,preventScrollReset:m,relative:a,viewTransition:h});function y(N){r&&r(N),N.defaultPrevented||g(N)}return q.createElement("a",cf({},v,{href:j||S,onClick:w||i?r:y,ref:n,target:c}))}),gv=q.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:m}=t,h=L5(t,v6),v=Hf(c,{relative:h.relative}),p=$i(),j=q.useContext(k5),{navigator:w,basename:S}=q.useContext($s),g=j!=null&&A6(v)&&d===!0,y=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,N=p.pathname,A=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;a||(N=N.toLowerCase(),A=A?A.toLowerCase():null,y=y.toLowerCase()),A&&S&&(A=Hl(A,S)||A);const R=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let $=N===y||!o&&N.startsWith(y)&&N.charAt(R)==="/",I=A!=null&&(A===y||!o&&A.startsWith(y)&&A.charAt(y.length)==="/"),M={isActive:$,isPending:I,isTransitioning:g},H=$?r:void 0,ae;typeof i=="function"?ae=i(M):ae=[i,$?"active":null,I?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let E=typeof l=="function"?l(M):l;return q.createElement(S6,cf({},h,{"aria-current":H,className:ae,ref:n,style:E,to:c,viewTransition:d}),typeof m=="function"?m(M):m)});var kp;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(kp||(kp={}));var vv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vv||(vv={}));function k6(e){let t=q.useContext(Uf);return t||ln(!1),t}function C6(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=zu(),d=$i(),m=Hf(e,{relative:o});return q.useCallback(h=>{if(p6(h,n)){h.preventDefault();let v=r!==void 0?r:sf(d)===sf(m);c(e,{replace:v,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,m,r,a,n,e,i,o,l])}function A6(e,t){t===void 0&&(t={});let n=q.useContext(y6);n==null&&ln(!1);let{basename:r}=k6(kp.useViewTransitionState),a=Hf(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Hl(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Hl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return of(a.pathname,o)!=null||of(a.pathname,i)!=null}let P6={data:""},_6=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||P6,L6=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,E6=/\/\*[^]*?\*\/|  +/g,xv=/\n+/g,hs=(e,t)=>{let n="",r="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?hs(o,i):i+"{"+hs(o,i[1]=="k"?"":t)+"}":typeof o=="object"?r+=hs(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=hs.p?hs.p(i,o):i+":"+o+";")}return n+(t&&a?t+"{"+a+"}":a)+r},yi={},E5=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+E5(e[n]);return t}return e},I6=(e,t,n,r,a)=>{let i=E5(e),o=yi[i]||(yi[i]=(c=>{let d=0,m=11;for(;d<c.length;)m=101*m+c.charCodeAt(d++)>>>0;return"go"+m})(i));if(!yi[o]){let c=i!==e?e:(d=>{let m,h,v=[{}];for(;m=L6.exec(d.replace(E6,""));)m[4]?v.shift():m[3]?(h=m[3].replace(xv," ").trim(),v.unshift(v[0][h]=v[0][h]||{})):v[0][m[1]]=m[2].replace(xv," ").trim();return v[0]})(e);yi[o]=hs(a?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&yi.g?yi.g:null;return n&&(yi.g=yi[o]),((c,d,m,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=m?c+d.data:d.data+c)})(yi[o],t,r,l),o},D6=(e,t,n)=>e.reduce((r,a,i)=>{let o=t[i];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":hs(l,""):l===!1?"":l}return r+a+(o??"")},"");function Vf(e){let t=this||{},n=e.call?e(t.p):e;return I6(n.unshift?n.raw?D6(n,[].slice.call(arguments,1),t.p):n.reduce((r,a)=>Object.assign(r,a&&a.call?a(t.p):a),{}):n,_6(t.target),t.g,t.o,t.k)}let I5,Cp,Ap;Vf.bind({g:1});let Fi=Vf.bind({k:1});function T6(e,t,n,r){hs.p=t,I5=e,Cp=n,Ap=r}function zs(e,t){let n=this||{};return function(){let r=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;n.p=Object.assign({theme:Cp&&Cp()},l),n.o=/ *go\d+/.test(c),l.className=Vf.apply(n,r)+(c?" "+c:""),t&&(l.ref=o);let d=e;return e[0]&&(d=l.as||e,delete l.as),Ap&&d[0]&&Ap(l),I5(d,l)}return t?t(a):a}}var M6=e=>typeof e=="function",uf=(e,t)=>M6(e)?e(t):e,F6=(()=>{let e=0;return()=>(++e).toString()})(),D5=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),O6=20,lg="default",T5=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return T5(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},jh=[],M5={toasts:[],pausedAt:void 0,settings:{toastLimit:O6}},Ja={},F5=(e,t=lg)=>{Ja[t]=T5(Ja[t]||M5,e),jh.forEach(([n,r])=>{n===t&&r(Ja[t])})},O5=e=>Object.keys(Ja).forEach(t=>F5(e,t)),R6=e=>Object.keys(Ja).find(t=>Ja[t].toasts.some(n=>n.id===e)),Kf=(e=lg)=>t=>{F5(t,e)},B6={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},$6=(e={},t=lg)=>{let[n,r]=q.useState(Ja[t]||M5),a=q.useRef(Ja[t]);q.useEffect(()=>(a.current!==Ja[t]&&r(Ja[t]),jh.push([t,r]),()=>{let o=jh.findIndex(([l])=>l===t);o>-1&&jh.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||B6[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:i}},z6=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||F6()}),qu=e=>(t,n)=>{let r=z6(t,e,n);return Kf(r.toasterId||R6(r.id))({type:2,toast:r}),r.id},Pn=(e,t)=>qu("blank")(e,t);Pn.error=qu("error");Pn.success=qu("success");Pn.loading=qu("loading");Pn.custom=qu("custom");Pn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Kf(t)(n):O5(n)};Pn.dismissAll=e=>Pn.dismiss(void 0,e);Pn.remove=(e,t)=>{let n={type:4,toastId:e};t?Kf(t)(n):O5(n)};Pn.removeAll=e=>Pn.remove(void 0,e);Pn.promise=(e,t,n)=>{let r=Pn.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?uf(t.success,a):void 0;return i?Pn.success(i,{id:r,...n,...n==null?void 0:n.success}):Pn.dismiss(r),a}).catch(a=>{let i=t.error?uf(t.error,a):void 0;i?Pn.error(i,{id:r,...n,...n==null?void 0:n.error}):Pn.dismiss(r)}),e};var q6=1e3,U6=(e,t="default")=>{let{toasts:n,pausedAt:r}=$6(e,t),a=q.useRef(new Map).current,i=q.useCallback((h,v=q6)=>{if(a.has(h))return;let p=setTimeout(()=>{a.delete(h),o({type:4,toastId:h})},v);a.set(h,p)},[]);q.useEffect(()=>{if(r)return;let h=Date.now(),v=n.map(p=>{if(p.duration===1/0)return;let j=(p.duration||0)+p.pauseDuration-(h-p.createdAt);if(j<0){p.visible&&Pn.dismiss(p.id);return}return setTimeout(()=>Pn.dismiss(p.id,t),j)});return()=>{v.forEach(p=>p&&clearTimeout(p))}},[n,r,t]);let o=q.useCallback(Kf(t),[t]),l=q.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=q.useCallback((h,v)=>{o({type:1,toast:{id:h,height:v}})},[o]),d=q.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),m=q.useCallback((h,v)=>{let{reverseOrder:p=!1,gutter:j=8,defaultPosition:w}=v||{},S=n.filter(N=>(N.position||w)===(h.position||w)&&N.height),g=S.findIndex(N=>N.id===h.id),y=S.filter((N,A)=>A<g&&N.visible).length;return S.filter(N=>N.visible).slice(...p?[y+1]:[0,y]).reduce((N,A)=>N+(A.height||0)+j,0)},[n]);return q.useEffect(()=>{n.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let v=a.get(h.id);v&&(clearTimeout(v),a.delete(h.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:m}}},W6=Fi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,H6=Fi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,V6=Fi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,K6=zs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${W6} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${H6} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${V6} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,G6=Fi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Y6=zs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${G6} 1s linear infinite;
`,X6=Fi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,J6=Fi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Q6=zs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${X6} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${J6} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Z6=zs("div")`
  position: absolute;
`,ej=zs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,tj=Fi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nj=zs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${tj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,rj=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?q.createElement(nj,null,t):t:n==="blank"?null:q.createElement(ej,null,q.createElement(Y6,{...r}),n!=="loading"&&q.createElement(Z6,null,n==="error"?q.createElement(K6,{...r}):q.createElement(Q6,{...r})))},aj=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ij=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,sj="0%{opacity:0;} 100%{opacity:1;}",oj="0%{opacity:1;} 100%{opacity:0;}",lj=zs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,cj=zs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,uj=(e,t)=>{let n=e.includes("top")?1:-1,[r,a]=D5()?[sj,oj]:[aj(n),ij(n)];return{animation:t?`${Fi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fi(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},dj=q.memo(({toast:e,position:t,style:n,children:r})=>{let a=e.height?uj(e.position||t||"top-center",e.visible):{opacity:0},i=q.createElement(rj,{toast:e}),o=q.createElement(cj,{...e.ariaProps},uf(e.message,e));return q.createElement(lj,{className:e.className,style:{...a,...n,...e.style}},typeof r=="function"?r({icon:i,message:o}):q.createElement(q.Fragment,null,i,o))});T6(q.createElement);var hj=({id:e,className:t,style:n,onHeightUpdate:r,children:a})=>{let i=q.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return q.createElement("div",{ref:i,className:t,style:n},a)},fj=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:D5()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...a}},mj=Vf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Zd=16,pj=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:a,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=U6(n,i);return q.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Zd,left:Zd,right:Zd,bottom:Zd,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(m=>{let h=m.position||t,v=d.calculateOffset(m,{reverseOrder:e,gutter:r,defaultPosition:t}),p=fj(h,v);return q.createElement(hj,{id:m.id,key:m.id,onHeightUpdate:d.updateHeight,className:m.visible?mj:"",style:p},m.type==="custom"?uf(m.message,m):a?a(m):q.createElement(dj,{toast:m,position:h}))}))},ke=Pn,gj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xj=(e,t)=>{const n=q.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>q.createElement("svg",{ref:d,...gj,width:a,height:a,stroke:r,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${vj(e)}`,...c},[...t.map(([m,h])=>q.createElement(m,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var at=xj;const Su=at("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),yj=at("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),bj=at("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Gf=at("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),wj=at("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ku=at("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),R5=at("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),Nj=at("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Uu=at("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),fa=at("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),jj=at("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),B5=at("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$5=at("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Sj=at("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),kj=at("Flower",[["path",{d:"M12 7.5a4.5 4.5 0 1 1 4.5 4.5M12 7.5A4.5 4.5 0 1 0 7.5 12M12 7.5V9m-4.5 3a4.5 4.5 0 1 0 4.5 4.5M7.5 12H9m7.5 0a4.5 4.5 0 1 1-4.5 4.5m4.5-4.5H15m-3 4.5V15",key:"51z86h"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m8 16 1.5-1.5",key:"ce6zph"}],["path",{d:"M14.5 9.5 16 8",key:"1kzrzb"}],["path",{d:"m8 8 1.5 1.5",key:"1yv88w"}],["path",{d:"M14.5 14.5 16 16",key:"12xhjh"}]]),Yf=at("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),Cj=at("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),z5=at("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Pp=at("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),df=at("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),q5=at("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),cg=at("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Es=at("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Aj=at("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),U5=at("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),_p=at("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Pj=at("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Cu=at("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),W5=at("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),ug=at("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),_j=at("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),_n=at("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Lj=at("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),Ej=at("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),ho=at("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),Ij=at("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Dj=at("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Tj=at("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),_o=at("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Lo=at("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Xf=at("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),H5=at("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),V5=at("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),Mj=at("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),yv=at("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),ga=at("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Nn=at("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hf=at("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Fj=at("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),Oj=at("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Rj=at("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),In=at("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),K5=q.createContext(void 0),Bj=({children:e})=>{const[t,n]=q.useState(!1),[r,a]=q.useState(navigator.onLine),[i,o]=q.useState(null);q.useEffect(()=>{(async()=>{try{console.log("Inicializando aplicación..."),await new Promise(d=>setTimeout(d,500)),n(!0),console.log("Aplicación inicializada correctamente")}catch(d){console.error("Error de inicialización:",d),n(!0)}})()},[]),q.useEffect(()=>{const c=()=>a(!0),d=()=>a(!1);return window.addEventListener("online",c),window.addEventListener("offline",d),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}},[]);const l={isReady:t,isOnline:r,lastSync:i};return s.jsx(K5.Provider,{value:l,children:e})},G5=()=>{const e=q.useContext(K5);if(e===void 0)throw new Error("useDatabase must be used within a DatabaseProvider");return e};function Et(e){"@babel/helpers - typeof";return Et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(e)}function No(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function vr(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ni(e){vr(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Et(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function $j(e,t){vr(2,arguments);var n=ni(e).getTime(),r=No(t);return new Date(n+r)}var zj={};function Jf(){return zj}function qj(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Uj(e){return vr(1,arguments),e instanceof Date||Et(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Wj(e){if(vr(1,arguments),!Uj(e)&&typeof e!="number")return!1;var t=ni(e);return!isNaN(Number(t))}function Hj(e,t){vr(2,arguments);var n=No(t);return $j(e,-n)}var Vj=864e5;function Kj(e){vr(1,arguments);var t=ni(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/Vj)+1}function ff(e){vr(1,arguments);var t=1,n=ni(e),r=n.getUTCDay(),a=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function Y5(e){vr(1,arguments);var t=ni(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=ff(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=ff(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Gj(e){vr(1,arguments);var t=Y5(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=ff(n);return r}var Yj=6048e5;function Xj(e){vr(1,arguments);var t=ni(e),n=ff(t).getTime()-Gj(t).getTime();return Math.round(n/Yj)+1}function mf(e,t){var n,r,a,i,o,l,c,d;vr(1,arguments);var m=Jf(),h=No((n=(r=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:m.weekStartsOn)!==null&&r!==void 0?r:(c=m.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=ni(e),p=v.getUTCDay(),j=(p<h?7:0)+p-h;return v.setUTCDate(v.getUTCDate()-j),v.setUTCHours(0,0,0,0),v}function X5(e,t){var n,r,a,i,o,l,c,d;vr(1,arguments);var m=ni(e),h=m.getUTCFullYear(),v=Jf(),p=No((n=(r=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:v.firstWeekContainsDate)!==null&&r!==void 0?r:(c=v.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=new Date(0);j.setUTCFullYear(h+1,0,p),j.setUTCHours(0,0,0,0);var w=mf(j,t),S=new Date(0);S.setUTCFullYear(h,0,p),S.setUTCHours(0,0,0,0);var g=mf(S,t);return m.getTime()>=w.getTime()?h+1:m.getTime()>=g.getTime()?h:h-1}function Jj(e,t){var n,r,a,i,o,l,c,d;vr(1,arguments);var m=Jf(),h=No((n=(r=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:m.firstWeekContainsDate)!==null&&r!==void 0?r:(c=m.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),v=X5(e,t),p=new Date(0);p.setUTCFullYear(v,0,h),p.setUTCHours(0,0,0,0);var j=mf(p,t);return j}var Qj=6048e5;function Zj(e,t){vr(1,arguments);var n=ni(e),r=mf(n,t).getTime()-Jj(n,t).getTime();return Math.round(r/Qj)+1}function Mt(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var eS={y:function(t,n){var r=t.getUTCFullYear(),a=r>0?r:1-r;return Mt(n==="yy"?a%100:a,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):Mt(r+1,2)},d:function(t,n){return Mt(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return Mt(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Mt(t.getUTCHours(),n.length)},m:function(t,n){return Mt(t.getUTCMinutes(),n.length)},s:function(t,n){return Mt(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,r-3));return Mt(i,n.length)}};const rs=eS;var nl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tS={G:function(t,n,r){var a=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return r.ordinalNumber(i,{unit:"year"})}return rs.y(t,n)},Y:function(t,n,r,a){var i=X5(t,a),o=i>0?i:1-i;if(n==="YY"){var l=o%100;return Mt(l,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Mt(o,n.length)},R:function(t,n){var r=Y5(t);return Mt(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return Mt(r,n.length)},Q:function(t,n,r){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(a);case"QQ":return Mt(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,n,r){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(a);case"qq":return Mt(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,n,r){var a=t.getUTCMonth();switch(n){case"M":case"MM":return rs.M(t,n);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,n,r){var a=t.getUTCMonth();switch(n){case"L":return String(a+1);case"LL":return Mt(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,n,r,a){var i=Zj(t,a);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):Mt(i,n.length)},I:function(t,n,r){var a=Xj(t);return n==="Io"?r.ordinalNumber(a,{unit:"week"}):Mt(a,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):rs.d(t,n)},D:function(t,n,r){var a=Kj(t);return n==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Mt(a,n.length)},E:function(t,n,r){var a=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,n,r,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Mt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,r,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Mt(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,r){var a=t.getUTCDay(),i=a===0?7:a;switch(n){case"i":return String(i);case"ii":return Mt(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,n,r){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,r){var a=t.getUTCHours(),i;switch(a===12?i=nl.noon:a===0?i=nl.midnight:i=a/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,r){var a=t.getUTCHours(),i;switch(a>=17?i=nl.evening:a>=12?i=nl.afternoon:a>=4?i=nl.morning:i=nl.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return rs.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):rs.H(t,n)},K:function(t,n,r){var a=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Mt(a,n.length)},k:function(t,n,r){var a=t.getUTCHours();return a===0&&(a=24),n==="ko"?r.ordinalNumber(a,{unit:"hour"}):Mt(a,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):rs.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):rs.s(t,n)},S:function(t,n){return rs.S(t,n)},X:function(t,n,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return wv(o);case"XXXX":case"XX":return no(o);case"XXXXX":case"XXX":default:return no(o,":")}},x:function(t,n,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(n){case"x":return wv(o);case"xxxx":case"xx":return no(o);case"xxxxx":case"xxx":default:return no(o,":")}},O:function(t,n,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+bv(o,":");case"OOOO":default:return"GMT"+no(o,":")}},z:function(t,n,r,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+bv(o,":");case"zzzz":default:return"GMT"+no(o,":")}},t:function(t,n,r,a){var i=a._originalDate||t,o=Math.floor(i.getTime()/1e3);return Mt(o,n.length)},T:function(t,n,r,a){var i=a._originalDate||t,o=i.getTime();return Mt(o,n.length)}};function bv(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(i===0)return n+String(a);var o=t||"";return n+String(a)+o+Mt(i,2)}function wv(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Mt(Math.abs(e)/60,2)}return no(e,t)}function no(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e),i=Mt(Math.floor(a/60),2),o=Mt(a%60,2);return r+i+n+o}const nS=tS;var Nv=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},J5=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},rS=function(t,n){var r=t.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return Nv(t,n);var o;switch(a){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Nv(a,n)).replace("{{time}}",J5(i,n))},aS={p:J5,P:rS};const iS=aS;var sS=["D","DD"],oS=["YY","YYYY"];function lS(e){return sS.indexOf(e)!==-1}function cS(e){return oS.indexOf(e)!==-1}function jv(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var uS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dS=function(t,n,r){var a,i=uS[t];return typeof i=="string"?a=i:n===1?a=i.one:a=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};const hS=dS;function Ll(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var fS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mS={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gS={date:Ll({formats:fS,defaultWidth:"full"}),time:Ll({formats:mS,defaultWidth:"full"}),dateTime:Ll({formats:pS,defaultWidth:"full"})};const vS=gS;var xS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yS=function(t,n,r,a){return xS[t]};const bS=yS;function Ya(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",a;if(r==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[c]||e.values[l]}var d=e.argumentCallback?e.argumentCallback(t):t;return a[d]}}var wS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},NS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},CS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},AS=function(t,n){var r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},PS={ordinalNumber:AS,era:Ya({values:wS,defaultWidth:"wide"}),quarter:Ya({values:NS,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ya({values:jS,defaultWidth:"wide"}),day:Ya({values:SS,defaultWidth:"wide"}),dayPeriod:Ya({values:kS,defaultWidth:"wide",formattingValues:CS,defaultFormattingWidth:"wide"})};const _S=PS;function Xa(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?ES(l,function(h){return h.test(o)}):LS(l,function(h){return h.test(o)}),d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;var m=t.slice(o.length);return{value:d,rest:m}}}function LS(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function ES(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function Q5(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var a=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var l=t.slice(a.length);return{value:o,rest:l}}}var IS=/^(\d+)(th|st|nd|rd)?/i,DS=/\d+/i,TS={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},MS={any:[/^b/i,/^(a|c)/i]},FS={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},OS={any:[/1/i,/2/i,/3/i,/4/i]},RS={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},BS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$S={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qS={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},US={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WS={ordinalNumber:Q5({matchPattern:IS,parsePattern:DS,valueCallback:function(t){return parseInt(t,10)}}),era:Xa({matchPatterns:TS,defaultMatchWidth:"wide",parsePatterns:MS,defaultParseWidth:"any"}),quarter:Xa({matchPatterns:FS,defaultMatchWidth:"wide",parsePatterns:OS,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Xa({matchPatterns:RS,defaultMatchWidth:"wide",parsePatterns:BS,defaultParseWidth:"any"}),day:Xa({matchPatterns:$S,defaultMatchWidth:"wide",parsePatterns:zS,defaultParseWidth:"any"}),dayPeriod:Xa({matchPatterns:qS,defaultMatchWidth:"any",parsePatterns:US,defaultParseWidth:"any"})};const HS=WS;var VS={code:"en-US",formatDistance:hS,formatLong:vS,formatRelative:bS,localize:_S,match:HS,options:{weekStartsOn:0,firstWeekContainsDate:1}};const KS=VS;var GS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,XS=/^'([^]*?)'?$/,JS=/''/g,QS=/[a-zA-Z]/;function pf(e,t,n){var r,a,i,o,l,c,d,m,h,v,p,j,w,S,g,y,N,A;vr(2,arguments);var R=String(t),$=Jf(),I=(r=(a=n==null?void 0:n.locale)!==null&&a!==void 0?a:$.locale)!==null&&r!==void 0?r:KS,M=No((i=(o=(l=(c=n==null?void 0:n.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(d=n.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&l!==void 0?l:$.firstWeekContainsDate)!==null&&o!==void 0?o:(h=$.locale)===null||h===void 0||(v=h.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var H=No((p=(j=(w=(S=n==null?void 0:n.weekStartsOn)!==null&&S!==void 0?S:n==null||(g=n.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&w!==void 0?w:$.weekStartsOn)!==null&&j!==void 0?j:(N=$.locale)===null||N===void 0||(A=N.options)===null||A===void 0?void 0:A.weekStartsOn)!==null&&p!==void 0?p:0);if(!(H>=0&&H<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!I.localize)throw new RangeError("locale must contain localize property");if(!I.formatLong)throw new RangeError("locale must contain formatLong property");var ae=ni(e);if(!Wj(ae))throw new RangeError("Invalid time value");var E=qj(ae),P=Hj(ae,E),J={firstWeekContainsDate:M,weekStartsOn:H,locale:I,_originalDate:ae},V=R.match(YS).map(function(X){var Z=X[0];if(Z==="p"||Z==="P"){var ee=iS[Z];return ee(X,I.formatLong)}return X}).join("").match(GS).map(function(X){if(X==="''")return"'";var Z=X[0];if(Z==="'")return ZS(X);var ee=nS[Z];if(ee)return!(n!=null&&n.useAdditionalWeekYearTokens)&&cS(X)&&jv(X,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&lS(X)&&jv(X,t,String(e)),ee(P,X,I.localize,J);if(Z.match(QS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Z+"`");return X}).join("");return V}function ZS(e){var t=e.match(XS);return t?t[1].replace(JS,"'"):e}var ek={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},tk=function(t,n,r){var a,i=ek[t];return typeof i=="string"?a=i:n===1?a=i.one:a=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"en "+a:"hace "+a:a};const nk=tk;var rk={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},ak={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},ik={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sk={date:Ll({formats:rk,defaultWidth:"full"}),time:Ll({formats:ak,defaultWidth:"full"}),dateTime:Ll({formats:ik,defaultWidth:"full"})};const ok=sk;var lk={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},ck={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},uk=function(t,n,r,a){return n.getUTCHours()!==1?ck[t]:lk[t]};const dk=uk;var hk={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},fk={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},mk={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},pk={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},gk={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},vk={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},xk=function(t,n){var r=Number(t);return r+"º"},yk={ordinalNumber:xk,era:Ya({values:hk,defaultWidth:"wide"}),quarter:Ya({values:fk,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Ya({values:mk,defaultWidth:"wide"}),day:Ya({values:pk,defaultWidth:"wide"}),dayPeriod:Ya({values:gk,defaultWidth:"wide",formattingValues:vk,defaultFormattingWidth:"wide"})};const bk=yk;var wk=/^(\d+)(º)?/i,Nk=/\d+/i,jk={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},Sk={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},kk={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Ck={any:[/1/i,/2/i,/3/i,/4/i]},Ak={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Pk={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},_k={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Lk={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Ek={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Ik={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Dk={ordinalNumber:Q5({matchPattern:wk,parsePattern:Nk,valueCallback:function(t){return parseInt(t,10)}}),era:Xa({matchPatterns:jk,defaultMatchWidth:"wide",parsePatterns:Sk,defaultParseWidth:"any"}),quarter:Xa({matchPatterns:kk,defaultMatchWidth:"wide",parsePatterns:Ck,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Xa({matchPatterns:Ak,defaultMatchWidth:"wide",parsePatterns:Pk,defaultParseWidth:"any"}),day:Xa({matchPatterns:_k,defaultMatchWidth:"wide",parsePatterns:Lk,defaultParseWidth:"any"}),dayPeriod:Xa({matchPatterns:Ek,defaultMatchWidth:"any",parsePatterns:Ik,defaultParseWidth:"any"})};const Tk=Dk;var Mk={code:"es",formatDistance:nk,formatLong:ok,formatRelative:dk,localize:bk,match:Tk,options:{weekStartsOn:1,firstWeekContainsDate:1}};const gf=Mk,Fk=({onMenuClick:e,showMenu:t})=>{const n=zu(),r=$i(),{isOnline:a,lastSync:i}=G5(),[o,l]=Ea.useState(new Date);Ea.useEffect(()=>{const d=setInterval(()=>l(new Date),1e3);return()=>clearInterval(d)},[]);const c=()=>{switch(r.pathname){case"/":return"Punto de Venta";case"/products":return"Productos";case"/categories":return"Categorías";case"/tables":return"Mesas y Salones";case"/orders":return"Pedidos";case"/configuration":return"Configuración";default:return"KimiPOS"}};return s.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[t&&s.jsx("button",{onClick:e,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 lg:hidden",children:s.jsx(Aj,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"K"})}),s.jsx("div",{children:s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:c()})})]})]}),s.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[a?s.jsx(Rj,{className:"w-4 h-4 text-green-600"}):s.jsx(Oj,{className:"w-4 h-4 text-red-600"}),s.jsx("span",{className:`text-sm font-medium ${a?"text-green-600":"text-red-600"}`,children:a?"En línea":"Sin conexión"})]}),i&&s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[s.jsx(ku,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm",children:["Sync: ",pf(i,"HH:mm",{locale:gf})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-gray-600",children:[s.jsx(ku,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:pf(o,"HH:mm:ss",{locale:gf})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[r.pathname!=="/"&&s.jsx("button",{onClick:()=>n("/"),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors",title:"Ir al POS",children:s.jsx(z5,{className:"w-5 h-5"})}),r.pathname!=="/configuration"&&s.jsx("button",{onClick:()=>n("/configuration"),className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors",title:"Configuración",children:s.jsx(Xf,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg px-3 py-2",children:[s.jsx(Nn,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Administrador"})]})]})]})})},Ok=({isOpen:e,onClose:t})=>{const n=$i(),r=[{name:"Punto de Venta",href:"/",icon:z5,description:"Interfaz principal del POS"},{name:"Productos",href:"/products",icon:_p,description:"Gestión de productos"},{name:"Modificadores",href:"/modifiers",icon:V5,description:"Gestión de modificadores"},{name:"Categorías",href:"/categories",icon:Cj,description:"Organización de categorías"},{name:"Mesas y Salones",href:"/configuration/salons",icon:Pp,description:"Editor de salones y mesas"},{name:"Pedidos",href:"/orders",icon:H5,description:"Historial de pedidos"},{name:"Clientes",href:"/customers",icon:hf,description:"Base de datos de clientes"},{name:"Incentivos de Saldo",href:"/configuration/incentives",icon:Yf,description:"Configuración de incentivos"},{name:"Reportes",href:"/reports",icon:yj,description:"Análisis y estadísticas"},{name:"Facturas",href:"/invoices",icon:ho,description:"Gestión de facturas"},{name:"Configuración",href:"/configuration",icon:Xf,description:"Configuración del sistema"}];return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden lg:flex lg:flex-shrink-0",children:s.jsx("div",{className:"flex flex-col w-64",children:s.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200 pt-5 pb-4 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center flex-shrink-0 px-4 mb-8",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"K"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"KimiPOS"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Sistema de Gestión"})]})]}),s.jsx("nav",{className:"flex-1 px-2 space-y-1",children:r.map(a=>{const i=a.icon,o=n.pathname===a.href;return s.jsxs(gv,{to:a.href,className:`group flex items-center px-2 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${o?"bg-primary-50 text-primary-700 border-r-2 border-primary-500":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(i,{className:`mr-3 h-5 w-5 transition-colors ${o?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`font-medium ${o?"text-primary-700":""}`,children:a.name}),s.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:a.description})]})]},a.name)})})]})})}),s.jsx("div",{className:`lg:hidden fixed inset-y-0 left-0 z-50 w-64 bg-white transform transition-transform duration-300 ease-in-out ${e?"translate-x-0":"-translate-x-full"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"K"})}),s.jsx("div",{className:"ml-3",children:s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"KimiPOS"})})]}),s.jsx("button",{onClick:t,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto",children:r.map(a=>{const i=a.icon,o=n.pathname===a.href;return s.jsxs(gv,{to:a.href,onClick:t,className:`group flex items-center px-2 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${o?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(i,{className:`mr-3 h-5 w-5 transition-colors ${o?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`font-medium ${o?"text-primary-700":""}`,children:a.name}),s.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:a.description})]})]},a.name)})})]})})]})},Rk=({children:e})=>{const[t,n]=q.useState(!1),{isReady:r}=G5(),a=$i();if(!r)return s.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Inicializando KimiPOS"}),s.jsx("p",{className:"text-gray-600",children:"Preparando la base de datos..."})]})});const i=a.pathname==="/";return s.jsxs("div",{className:"h-full flex",children:[!i&&s.jsxs(s.Fragment,{children:[s.jsx(Ok,{isOpen:t,onClose:()=>n(!1)}),t&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>n(!1)})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx(Fk,{onMenuClick:()=>n(!t),showMenu:!i}),s.jsx("main",{className:"flex-1 overflow-hidden",children:e})]})]})},Z5=({visible:e,currentRotation:t,onRotationChange:n,elementRect:r})=>{const[a,i]=q.useState(!1),o=q.useRef(null),l=c=>{c.preventDefault(),c.stopPropagation(),i(!0);let d=c.clientX,m=t;const h=p=>{const j=p.clientX-d;m+=j*1;const S=(m%360+360)%360;n(S),d=p.clientX},v=()=>{i(!1);const p=15,w=(Math.round(m/p)*p%360+360)%360;n(w),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",v)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",v)};return e?s.jsx("div",{ref:o,className:`rotation-handle absolute z-50 w-8 h-8 bg-blue-500 hover:bg-blue-600 rounded-full flex items-center justify-center cursor-grab shadow-xl border-2 border-white transition-all duration-200 ${a?"cursor-grabbing scale-125 bg-blue-600":"hover:scale-110"}`,style:{left:r.width-10,top:-10,transform:"translate(-50%, -50%)"},onMouseDown:l,title:`Rotar elemento (${Math.round(t)}°)`,children:s.jsx(Tj,{className:"w-4 h-4 text-white"})}):null},eb=({table:e,isSelected:t=!1,onClick:n,onLongPress:r,onDragStart:a,onDragEnd:i,onRotationChange:o,onDelete:l,showDeleteButton:c=!1,isDraggable:d=!1,scale:m=1})=>{const[h,v]=q.useState(!1),[p,j]=q.useState(!1),[w,S]=q.useState({x:0,y:0}),[g,y]=q.useState({x:isNaN(e.x)?100:e.x,y:isNaN(e.y)?100:e.y}),[N,A]=q.useState(e.rotation||0),R=q.useRef(null),[$,I]=q.useState(null),[M,H]=q.useState(!1);q.useEffect(()=>{y({x:isNaN(e.x)?100:e.x,y:isNaN(e.y)?100:e.y}),A(e.rotation||0)},[e.x,e.y,e.rotation]);const ae=C=>{const D=["border-purple-400 bg-purple-100 text-purple-800","border-indigo-400 bg-indigo-100 text-indigo-800","border-pink-400 bg-pink-100 text-pink-800","border-orange-400 bg-orange-100 text-orange-800","border-cyan-400 bg-cyan-100 text-cyan-800","border-emerald-400 bg-emerald-100 text-emerald-800"],W=C.split("").reduce((Q,ie)=>(Q=(Q<<5)-Q+ie.charCodeAt(0),Q&Q),0);return D[Math.abs(W)%D.length]},E=()=>{if(e.id.startsWith("account-"))return"bg-yellow-100 border-yellow-400 text-yellow-800";if(e.mergeGroup)return ae(e.mergeGroup);switch(e.status){case"available":return"bg-green-100 border-green-300 text-green-800";case"occupied":return"bg-red-100 border-red-300 text-red-800";case"reserved":return"bg-yellow-100 border-yellow-300 text-yellow-800";default:return"bg-gray-100 border-gray-300 text-gray-800"}},P=()=>{if(!e.occupiedSince)return null;const D=new Date().getTime()-e.occupiedSince.getTime(),W=Math.floor(D/6e4),Q=Math.floor(W/60);return Q>0?`${Q}h ${W%60}m`:`${W}m`},J=C=>{$&&clearTimeout($);const D=setTimeout(()=>{H(!0),r==null||r(e)},1e3);I(D)},V=()=>{$&&(clearTimeout($),I(null)),H(!1)},X=C=>{if(!d){J();return}C.target.closest(".rotation-handle")||(C.preventDefault(),C.stopPropagation(),v(!0),S({x:C.clientX-g.x*m,y:C.clientY-g.y*m}),a==null||a(e))},Z=C=>{if(!h||!d)return;C.preventDefault();const D=document.querySelector(".relative");if(!D)return;const W=D.getBoundingClientRect(),Q=W.width,ie=W.height,de=(C.clientX-w.x)/m,re=(C.clientY-w.y)/m,B=(Q-ne)/m,oe=(ie-ne)/m,ye=Math.max(0,Math.min(de,B)),Pe=Math.max(0,Math.min(re,oe));!isNaN(ye)&&!isNaN(Pe)&&y({x:ye,y:Pe})},ee=()=>{if(h){v(!1);const C=isNaN(g.x)?100:g.x,D=isNaN(g.y)?100:g.y;i==null||i(e,C,D)}else V()},U=C=>{d||J()},te=()=>{h||V()},ne=80*m,pe=C=>{A(C),o==null||o(e,C)};return q.useEffect(()=>{if(h)return document.addEventListener("mousemove",Z),document.addEventListener("mouseup",ee),()=>{document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",ee)}},[h,w,m,ne,g]),q.useEffect(()=>()=>{$&&clearTimeout($)},[$]),s.jsxs("div",{ref:R,className:`absolute transition-all duration-200 ${t?"ring-4 ring-primary-500":""}`,style:{left:isNaN(g.x)?100:g.x*m,top:isNaN(g.y)?100:g.y*m,width:ne,height:ne,cursor:d?h?"grabbing":"grab":"pointer",zIndex:h?1e3:1,transform:`rotate(${N}deg)`,transformOrigin:"center"},onClick:C=>{C.stopPropagation(),M||n==null||n(e)},onMouseDown:X,onMouseUp:ee,onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),onTouchStart:U,onTouchEnd:te,onContextMenu:C=>{C.preventDefault(),r==null||r(e)},children:[s.jsxs("div",{className:`w-full h-full border-2 shadow-lg flex flex-col items-center justify-center relative ${E()} hover:shadow-xl transition-shadow ${e.id.startsWith("account-")?"rounded-lg":"rounded-full"}`,style:{pointerEvents:"none"},children:[s.jsx("div",{className:"text-lg font-bold",children:e.number}),e.temporaryName?s.jsx("div",{className:"text-sm font-bold text-center bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e.temporaryName}):e.name?s.jsx("div",{className:"text-sm font-bold opacity-75 text-center",children:e.name}):null,e.assignedCustomer&&s.jsxs("div",{className:"text-xs font-medium text-center bg-green-100 text-green-800 px-2 py-1 rounded mt-1",children:["👤 ",e.assignedCustomer.name," ",e.assignedCustomer.lastName]}),e.mergedWith&&s.jsxs("div",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full border-2 border-white shadow-lg",children:["🔗",e.mergedWith]}),e.mergeGroup&&e.isMaster&&s.jsx("div",{className:"absolute -left-2 -top-2 bg-yellow-500 text-white text-xs px-1.5 py-0.5 rounded-full border border-white shadow-sm",children:"★"}),e.status==="occupied"&&s.jsxs(s.Fragment,{children:[e.occupiedSince&&(!e.mergeGroup||e.isMaster)&&s.jsxs("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-red-600 to-rose-600 text-white text-xs font-bold px-2 py-1 rounded-md shadow-md border border-white flex items-center space-x-1",children:[s.jsx(ku,{className:"w-3 h-3"}),s.jsx("span",{children:P()})]}),e.currentOrder&&(!e.mergeGroup||e.isMaster)&&s.jsxs("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 bg-black text-white text-xs font-bold px-2 py-1 rounded-md shadow-md border border-white",children:["€",e.currentOrder.total.toFixed(2)]}),e.mergeGroup&&!e.isMaster&&s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white text-xs px-1 py-0.5 rounded-full",children:"🔗"})]}),e.capacity&&s.jsx("div",{className:"absolute -right-2 -top-2 bg-gray-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:s.jsx(hf,{className:"w-3 h-3"})}),s.jsx("div",{className:`absolute -right-1 -bottom-1 w-4 h-4 rounded-full border-2 border-white ${e.status==="available"?"bg-green-500":e.status==="occupied"?"bg-red-500":"bg-yellow-500"}`})]}),d&&p&&!h&&o&&s.jsx(Z5,{visible:!0,currentRotation:N,onRotationChange:pe,elementRect:{x:0,y:0,width:ne,height:ne}})]})},Bk=""+new URL("bar-fda04224.svg",import.meta.url).href,$k=""+new URL("plant-658fec4b.svg",import.meta.url).href,tb=({item:e,isSelected:t,isDraggable:n=!1,onDragEnd:r,onRotationChange:a})=>{const[i,o]=q.useState(!1),[l,c]=q.useState(!1),[d,m]=q.useState({x:0,y:0}),[h,v]=q.useState(e.rotation||0),p=q.useRef(null),j=y=>{var R;if(!n||y.target.closest(".rotation-handle"))return;y.preventDefault(),o(!0);const A=(R=p.current)==null?void 0:R.getBoundingClientRect();A&&m({x:y.clientX-A.left,y:y.clientY-A.top})},w=y=>{if(!i||!n)return;const N=document.querySelector(".salon-canvas");if(N){const A=N.getBoundingClientRect(),R=Math.max(0,y.clientX-A.left-d.x),$=Math.max(0,y.clientY-A.top-d.y);r==null||r(e,R,$)}},S=()=>o(!1),g=y=>{v(y),a==null||a(e,y)};return q.useEffect(()=>{v(e.rotation||0)},[e.rotation]),q.useEffect(()=>{if(i)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S)}},[i,d,e,n]),s.jsxs("div",{ref:p,className:`absolute ${t?"ring-2 ring-primary-500":""} `,style:{left:e.x,top:e.y,transform:`rotate(${h}deg)`,transformOrigin:"center"},onMouseDown:j,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[e.kind==="plant"?s.jsx("img",{src:$k,alt:"Planta",style:{width:e.width||80,height:e.height||110,pointerEvents:"none"},draggable:!1,className:"select-none drop-shadow"}):s.jsx("img",{src:Bk,alt:"Barra de bar",style:{width:e.width||240,height:e.height||90,pointerEvents:"none"},draggable:!1,className:"select-none drop-shadow"}),n&&l&&!i&&a&&s.jsx(Z5,{visible:!0,currentRotation:h,onRotationChange:g,elementRect:{x:0,y:0,width:e.width||(e.kind==="plant"?80:240),height:e.height||(e.kind==="plant"?110:90)}})]})},zk=({tables:e,scale:t=1})=>{const n=a=>{const i=["#8b5cf6","#6366f1","#ec4899","#f97316","#06b6d4","#10b981"],o=a.split("").reduce((l,c)=>(l=(l<<5)-l+c.charCodeAt(0),l&l),0);return i[Math.abs(o)%i.length]},r=e.reduce((a,i)=>(i.mergeGroup&&(a[i.mergeGroup]||(a[i.mergeGroup]=[]),a[i.mergeGroup].push(i)),a),{});return s.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:5},width:"100%",height:"100%",children:Object.entries(r).map(([a,i])=>{if(i.length<2)return null;const o=n(a),l=i.find(h=>h.isMaster),c=i.filter(h=>!h.isMaster);if(!l)return null;const d=(l.x+40)*t,m=(l.y+40)*t;return c.map((h,v)=>{const p=(h.x+40)*t,j=(h.y+40)*t,w=(d+p)/2,S=(m+j)/2,g=w+(m-j)*.2,y=S+(p-d)*.2;return s.jsxs("g",{children:[s.jsx("path",{d:`M ${d} ${m} Q ${g} ${y} ${p} ${j}`,stroke:o,strokeWidth:"3",fill:"none",strokeDasharray:"6,4",opacity:"0.8"}),s.jsx("circle",{cx:p,cy:j,r:"4",fill:o,opacity:"0.9"}),s.jsx("circle",{cx:d,cy:m,r:"6",fill:"#fbbf24",opacity:"0.9"}),s.jsx("text",{x:d,y:m+2,textAnchor:"middle",fontSize:"8",fill:"white",fontWeight:"bold",children:"★"})]},`${a}-${v}`)})})})},nb=q.createContext(void 0),qk=({children:e})=>{const[t,n]=q.useState([]),[r,a]=q.useState("salon-1");q.useEffect(()=>{try{const X=localStorage.getItem("kimipos_salons"),Z=localStorage.getItem("kimipos_active_salon");if(X){const U=JSON.parse(X).map(ne=>({...ne,tables:(ne.tables||[]).map(pe=>({...pe,rotation:pe.rotation||0,occupiedSince:pe.occupiedSince?new Date(pe.occupiedSince):void 0})),decor:(ne.decor||[]).map(pe=>({id:pe.id,kind:(pe.kind||pe.type)??"plant",x:pe.x??100,y:pe.y??100,rotation:pe.rotation||0,width:pe.width,height:pe.height}))}));if(!U.some(ne=>ne.id==="named-accounts")){const ne={id:"named-accounts",name:"Cuentas por nombre",width:800,height:600,tables:[],decor:[]};U.push(ne)}n(U)}else n([{id:"salon-1",name:"Salón Principal",width:800,height:600,tables:[{id:"1",number:"1",name:"Entrada",status:"available",x:100,y:100,capacity:4},{id:"2",number:"2",name:"Ventana",status:"available",x:250,y:120,capacity:2},{id:"3",number:"3",name:"Central",status:"available",x:180,y:250,capacity:6},{id:"4",number:"4",name:"Terraza",status:"available",x:350,y:200,capacity:4},{id:"5",number:"5",name:"VIP",status:"available",x:120,y:350,capacity:8},{id:"6",number:"6",status:"available",x:300,y:320,capacity:2}],decor:[]},{id:"named-accounts",name:"Cuentas por nombre",width:800,height:600,tables:[],decor:[]}]);Z&&a(Z)}catch{}},[]),q.useEffect(()=>{if(t.length>0)try{localStorage.setItem("kimipos_salons",JSON.stringify(t)),localStorage.setItem("kimipos_active_salon",r)}catch{}},[t,r]);const[i,o]=q.useState({});q.useEffect(()=>{try{const X=localStorage.getItem("kimipos_table_orders");if(console.log("Cargando pedidos guardados:",X),X){const Z=JSON.parse(X);console.log("Pedidos parseados:",Z),o(Z)}else console.log("No hay pedidos guardados, usando datos demo"),o({2:[{productId:"1",productName:"Coca Cola",quantity:2,unitPrice:25,totalPrice:50,status:"pending"},{productId:"3",productName:"Corona",quantity:1,unitPrice:45,totalPrice:45,status:"pending"},{productId:"5",productName:"Jack Daniels",quantity:1,unitPrice:120,totalPrice:120,status:"pending"}]})}catch{}},[]),q.useEffect(()=>{if(Object.keys(i).length>0)try{localStorage.setItem("kimipos_table_orders",JSON.stringify(i))}catch{}},[i]);const l=t.find(X=>X.id===r)||t[0],c=(X,Z,ee)=>{const te=X.startsWith("account-")?"named-accounts":r;n(ne=>ne.map(pe=>pe.id!==te?pe:{...pe,tables:pe.tables.map(C=>C.id===X?{...C,status:Z,occupiedSince:Z==="occupied"?new Date:void 0,currentOrder:ee||C.currentOrder}:C)}))},d=(X,Z,ee,U)=>{console.log("Añadiendo pedido a mesa:",X,ee,U);const ne=X.startsWith("account-")?"named-accounts":r;n(pe=>pe.map(C=>C.id!==ne?C:{...C,tables:C.tables.map(D=>D.id===X?{...D,status:"occupied",occupiedSince:new Date,currentOrder:{id:`order-${Date.now()}`,total:Z,itemCount:(ee==null?void 0:ee.length)||1},assignedCustomer:U||D.assignedCustomer,temporaryName:U?void 0:D.temporaryName}:D)})),ee&&o(pe=>{const C={...pe,[X]:ee};return console.log("Guardando pedidos:",C),C})},m=X=>{const Z=h(X);let ee=[X];if(Z&&Z.mergeGroup&&(ee=E(X).map(pe=>pe.id)),X.startsWith("account-")){J(X);return}const te=X.startsWith("account-")?"named-accounts":r;n(ne=>ne.map(pe=>pe.id!==te?pe:{...pe,tables:pe.tables.map(C=>ee.includes(C.id)?{...C,status:"available",occupiedSince:void 0,currentOrder:void 0,temporaryName:void 0,assignedCustomer:void 0,mergedWith:void 0,isMaster:void 0,mergeGroup:void 0}:C)})),o(ne=>{const pe={...ne};return ee.forEach(C=>{delete pe[C]}),pe})},h=X=>{for(const Z of t){const ee=Z.tables.find(U=>U.id===X);if(ee)return ee}},v=X=>i[X]||[],p=X=>{n(Z=>Z.map(ee=>{if(ee.id!==r)return ee;const U=new Set(ee.tables.map(pe=>parseInt(pe.number)).filter(pe=>!Number.isNaN(pe)));let te=Number.isNaN(parseInt(X.number))?1:parseInt(X.number);for(;U.has(te);)te+=1;const ne=X.id||`table-${Date.now()}`;return{...ee,tables:[...ee.tables,{...X,id:ne,number:String(te)}]}}))},j=X=>{const Z=h(X);return Z&&Z.status==="occupied"?!1:(n(ee=>ee.map(U=>U.id!==r?U:{...U,tables:U.tables.filter(te=>te.id!==X)})),o(ee=>{const U={...ee};return delete U[X],U}),!0)},w=(X,Z,ee)=>{const U=isNaN(Z)?100:Z,te=isNaN(ee)?100:ee;n(ne=>ne.map(pe=>pe.id!==r?pe:{...pe,tables:pe.tables.map(C=>C.id===X?{...C,x:U,y:te}:C)}))},S=(X,Z)=>{const ee=isNaN(Z)?0:Z;n(U=>U.map(te=>te.id!==r?te:{...te,tables:te.tables.map(ne=>ne.id===X?{...ne,rotation:ee}:ne)}))},g=X=>{n(Z=>Z.map(ee=>ee.id!==r?ee:{...ee,decor:[...ee.decor,X]}))},y=(X,Z,ee)=>{n(U=>U.map(te=>te.id!==r?te:{...te,decor:te.decor.map(ne=>ne.id===X?{...ne,x:Z,y:ee}:ne)}))},N=(X,Z)=>{const ee=isNaN(Z)?0:Z;n(U=>U.map(te=>te.id!==r?te:{...te,decor:te.decor.map(ne=>ne.id===X?{...ne,rotation:ee}:ne)}))},A=(X=`Salón ${t.length+1}`)=>{const Z=`salon-${Date.now()}`;return n(ee=>[...ee,{id:Z,name:X,width:800,height:600,tables:[],decor:[]}]),a(Z),Z},R=X=>{n(Z=>Z.filter(ee=>ee.id!==X)),r===X&&t.length>1&&a(t[0].id)},$=(X,Z)=>{n(ee=>ee.map(U=>U.id===X?{...U,name:Z}:U))},I=(X,Z)=>{const ee=h(X);let U=ee==null?void 0:ee.mergeGroup;U||(U=`merge-${X}-${Date.now()}`),n(C=>C.map(D=>D.id!==r?D:{...D,tables:D.tables.map(W=>W.id===X?{...W,mergedWith:Z,isMaster:!0,mergeGroup:U}:W.id===Z?{...W,mergedWith:X,isMaster:!1,mergeGroup:U}:W)}));const te=v(X),ne=v(Z),pe=[...te,...ne];if(pe.length>0){const C=pe.reduce((D,W)=>D+W.totalPrice,0);n(D=>D.map(W=>W.id!==r?W:{...W,tables:W.tables.map(Q=>Q.id===X?{...Q,status:"occupied",currentOrder:{id:`merged-order-${Date.now()}`,total:C,itemCount:pe.length}}:Q)})),o(D=>({...D,[X]:pe,[Z]:[]}))}},M=X=>{const Z=h(X);if(!Z||!Z.mergedWith)return;const ee=Z.mergedWith;n(U=>U.map(te=>te.id!==r?te:{...te,tables:te.tables.map(ne=>ne.id===X||ne.id===ee?{...ne,mergedWith:void 0,isMaster:void 0,mergeGroup:void 0}:ne)})),Z.isMaster||o(U=>{const te={...U};return delete te[X],te})},H=X=>{n(Z=>Z.map(ee=>ee.id!==r?ee:{...ee,tables:ee.tables.map(U=>U.id===X?{...U,mergedWith:void 0,isMaster:void 0,mergeGroup:void 0}:U)}))},ae=(X,Z)=>{n(ee=>ee.map(U=>U.id!==r?U:{...U,tables:U.tables.map(te=>te.id===X?{...te,temporaryName:Z}:te)}))},E=X=>{const Z=h(X);return!Z||!Z.mergeGroup?[Z]:(l==null?void 0:l.tables.filter(ee=>ee.mergeGroup===Z.mergeGroup))||[]},P=X=>{var de,re;if((de=t.find(B=>B.id==="named-accounts"))==null?void 0:de.tables.find(B=>B.name===X))throw new Error(`Ya existe una cuenta para ${X}`);const ee=((re=t.find(B=>B.id==="named-accounts"))==null?void 0:re.tables)||[],U=4,te=Math.floor(ee.length/U),ne=ee.length%U,pe=120,C=120,D=120,W=120,Q=`account-${Date.now()}`,ie={id:Q,number:X,name:X,status:"occupied",x:pe+ne*D,y:C+te*W,capacity:1,occupiedSince:new Date,temporaryName:X};return n(B=>B.map(oe=>oe.id!=="named-accounts"?oe:{...oe,tables:[...oe.tables,ie]})),Q},J=X=>{n(Z=>Z.map(ee=>ee.id!=="named-accounts"?ee:{...ee,tables:ee.tables.filter(U=>U.id!==X)})),o(Z=>{const ee={...Z};return delete ee[X],ee})},V={salons:t,activeSalonId:r,setActiveSalon:a,tables:t.flatMap(X=>X.tables),decor:(l==null?void 0:l.decor)||[],addSalon:A,removeSalon:R,renameSalon:$,updateTableStatus:c,addOrderToTable:d,clearTableOrder:m,getTableById:h,getTableOrderItems:v,addTable:p,removeTable:j,updateTablePosition:w,updateTableRotation:S,mergeTables:I,unmergeTables:M,forceUnmergeTable:H,getTableMergeGroup:E,updateTableTemporaryName:ae,addDecor:g,updateDecorPosition:y,updateDecorRotation:N,addNamedAccount:P,removeNamedAccount:J};return s.jsx(nb.Provider,{value:V,children:e})},Qf=()=>{const e=q.useContext(nb);if(e===void 0)throw new Error("useTables must be used within a TableProvider");return e},Ht=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Sn=Object.keys,rr=Array.isArray;function mr(e,t){return typeof t!="object"||Sn(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||Ht.Promise||(Ht.Promise=Promise);const Au=Object.getPrototypeOf,Uk={}.hasOwnProperty;function Kr(e,t){return Uk.call(e,t)}function Vl(e,t){typeof t=="function"&&(t=t(Au(e))),(typeof Reflect>"u"?Sn:Reflect.ownKeys)(t).forEach(n=>{Li(e,n,t[n])})}const rb=Object.defineProperty;function Li(e,t,n,r){rb(e,t,mr(n&&Kr(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function El(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Li(e.prototype,"constructor",e),{extend:Vl.bind(null,e.prototype)}}}}const Wk=Object.getOwnPropertyDescriptor;function dg(e,t){let n;return Wk(e,t)||(n=Au(e))&&dg(n,t)}const Hk=[].slice;function vf(e,t,n){return Hk.call(e,t,n)}function ab(e,t){return t(e)}function qc(e){if(!e)throw new Error("Assertion Failed")}function ib(e){Ht.setImmediate?setImmediate(e):setTimeout(e,0)}function sb(e,t){return e.reduce((n,r,a)=>{var i=t(r,a);return i&&(n[i[0]]=i[1]),n},{})}function Ei(e,t){if(typeof t=="string"&&Kr(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,a=t.length;r<a;++r){var i=Ei(e,t[r]);n.push(i)}return n}var o=t.indexOf(".");if(o!==-1){var l=e[t.substr(0,o)];return l==null?void 0:Ei(l,t.substr(o+1))}}function Ta(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){qc(typeof n!="string"&&"length"in n);for(var r=0,a=t.length;r<a;++r)Ta(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var o=t.substr(0,i),l=t.substr(i+1);if(l==="")n===void 0?rr(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var c=e[o];c&&Kr(e,o)||(c=e[o]={}),Ta(c,l,n)}}else n===void 0?rr(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ob(e){var t={};for(var n in e)Kr(e,n)&&(t[n]=e[n]);return t}const Vk=[].concat;function lb(e){return Vk.apply([],e)}const cb="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(lb([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Ht[e]),Kk=cb.map(e=>Ht[e]);sb(cb,e=>[e,!0]);let cs=null;function Wu(e){cs=typeof WeakMap<"u"&&new WeakMap;const t=Lp(e);return cs=null,t}function Lp(e){if(!e||typeof e!="object")return e;let t=cs&&cs.get(e);if(t)return t;if(rr(e)){t=[],cs&&cs.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Lp(e[n]))}else if(Kk.indexOf(e.constructor)>=0)t=e;else{const i=Au(e);for(var a in t=i===Object.prototype?{}:Object.create(i),cs&&cs.set(e,t),e)Kr(e,a)&&(t[a]=Lp(e[a]))}return t}const{toString:Gk}={};function Ep(e){return Gk.call(e).slice(8,-1)}const Ip=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Yk=typeof Ip=="symbol"?function(e){var t;return e!=null&&(t=e[Ip])&&t.apply(e)}:function(){return null},ll={};function ki(e){var t,n,r,a;if(arguments.length===1){if(rr(e))return e.slice();if(this===ll&&typeof e=="string")return[e];if(a=Yk(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const hg=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var ri=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ub(e,t){ri=e,db=t}var db=()=>!0;const Xk=!new Error("").stack;function Eo(){if(Xk)try{throw Eo.arguments,new Error}catch(e){return e}return new Error}function Dp(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(db).map(r=>`
`+r).join("")):""}var hb=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],fg=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(hb),Jk={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Il(e,t){this._e=Eo(),this.name=e,this.message=t}function fb(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,a)=>a.indexOf(n)===r).join(`
`)}function xf(e,t,n,r){this._e=Eo(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=fb(e,t)}function Zc(e,t){this._e=Eo(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=fb(e,t)}El(Il).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Dp(this._e,2))}},toString:function(){return this.name+": "+this.message}}),El(xf).from(Il),El(Zc).from(Il);var mg=fg.reduce((e,t)=>(e[t]=t+"Error",e),{});const Qk=Il;var ct=fg.reduce((e,t)=>{var n=t+"Error";function r(a,i){this._e=Eo(),this.name=n,a?typeof a=="string"?(this.message=`${a}${i?`
 `+i:""}`,this.inner=i||null):typeof a=="object"&&(this.message=`${a.name} ${a.message}`,this.inner=a):(this.message=Jk[t]||n,this.inner=null)}return El(r).from(Qk),e[t]=r,e},{});ct.Syntax=SyntaxError,ct.Type=TypeError,ct.Range=RangeError;var Sv=hb.reduce((e,t)=>(e[t+"Error"]=ct[t],e),{}),Sh=fg.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ct[t]),e),{});function $t(){}function Pu(e){return e}function Zk(e,t){return e==null||e===Pu?t:function(n){return t(e(n))}}function jo(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function eC(e,t){return e===$t?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?jo(r,this.onsuccess):r),a&&(this.onerror=this.onerror?jo(a,this.onerror):a),i!==void 0?i:n}}function tC(e,t){return e===$t?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?jo(n,this.onsuccess):n),r&&(this.onerror=this.onerror?jo(r,this.onerror):r)}}function nC(e,t){return e===$t?t:function(n){var r=e.apply(this,arguments);mr(n,r);var a=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?jo(a,this.onsuccess):a),i&&(this.onerror=this.onerror?jo(i,this.onerror):i),r===void 0?o===void 0?void 0:o:mr(r,o)}}function rC(e,t){return e===$t?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function pg(e,t){return e===$t?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,a=arguments.length,i=new Array(a);a--;)i[a]=arguments[a];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}Sh.ModifyError=xf,Sh.DexieError=Il,Sh.BulkError=Zc;var _u={};const mb=100,[Tp,yf,Mp]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Au(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Au(t),e]})(),pb=yf&&yf.then,kh=Tp&&Tp.constructor,gg=!!Mp;var Fp=!1,aC=Mp?()=>{Mp.then(eh)}:Ht.setImmediate?setImmediate.bind(null,eh):Ht.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{eh(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(eh,0)},eu=function(e,t){Uc.push([e,t]),bf&&(aC(),bf=!1)},Op=!0,bf=!0,fo=[],Ch=[],Rp=null,Bp=Pu,Dl={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Av,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Av(e[0],e[1])}catch{}})}},tt=Dl,Uc=[],mo=0,Ah=[];function We(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=$t,this._lib=!1;var t=this._PSD=tt;if(ri&&(this._stackHolder=Eo(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==_u)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&zp(this,this._value))}this._state=null,this._value=null,++t.ref,vb(this,e)}const $p={get:function(){var e=tt,t=wf;function n(r,a){var i=!e.global&&(e!==tt||t!==wf);const o=i&&!Oi();var l=new We((c,d)=>{vg(this,new gb(Nf(r,e,i,o),Nf(a,e,i,o),c,d,e))});return ri&&bb(l,this),l}return n.prototype=_u,n},set:function(e){Li(this,"then",e&&e.prototype===_u?$p:{get:function(){return e},set:$p.set})}};function gb(e,t,n,r,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=a}function vb(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Hu();n&&typeof n.then=="function"?vb(e,(a,i)=>{n instanceof We?n._then(a,i):n.then(a,i)}):(e._state=!0,e._value=n,xb(e)),r&&Vu()}},zp.bind(null,e))}catch(n){zp(e,n)}}function zp(e,t){if(Ch.push(t),e._state===null){var n=e._lib&&Hu();t=Bp(t),e._state=!1,e._value=t,ri&&t!==null&&typeof t=="object"&&!t._promise&&function(r,a,i){try{r.apply(null,i)}catch(o){a&&a(o)}}(()=>{var r=dg(t,"stack");t._promise=e,Li(t,"stack",{get:()=>Fp?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){fo.some(a=>a._value===r._value)||fo.push(r)}(e),xb(e),n&&Vu()}}function xb(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)vg(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),mo===0&&(++mo,eu(()=>{--mo==0&&xg()},[]))}function vg(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++mo,eu(iC,[n,e,t])}else e._listeners.push(t)}function iC(e,t,n){try{Rp=t;var r,a=t._value;t._state?r=e(a):(Ch.length&&(Ch=[]),r=e(a),Ch.indexOf(a)===-1&&function(i){for(var o=fo.length;o;)if(fo[--o]._value===i._value)return void fo.splice(o,1)}(t)),n.resolve(r)}catch(i){n.reject(i)}finally{Rp=null,--mo==0&&xg(),--n.psd.ref||n.psd.finalize()}}function yb(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var a,i,o=e._value;o!=null?(a=o.name||"Error",i=o.message||o,r=Dp(o,0)):(a=o,i=""),t.push(a+(i?": "+i:"")+r)}return ri&&((r=Dp(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&yb(e._prev,t,n)),t}function bb(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function eh(){Hu()&&Vu()}function Hu(){var e=Op;return Op=!1,bf=!1,e}function Vu(){var e,t,n;do for(;Uc.length>0;)for(e=Uc,Uc=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Uc.length>0);Op=!0,bf=!0}function xg(){var e=fo;fo=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ah.slice(0),n=t.length;n;)t[--n]()}function th(e){return new We(_u,!1,e)}function Xt(e,t){var n=tt;return function(){var r=Hu(),a=tt;try{return Ds(n,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{Ds(a,!1),r&&Vu()}}}Vl(We.prototype,{then:$p,_then:function(e,t){vg(this,new gb(null,null,e,t,tt))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):th(r)):this.then(null,r=>r&&r.name===t?n(r):th(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),th(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Fp=!0;var e=yb(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Fp=!1}}},timeout:function(e,t){return e<1/0?new We((n,r)=>{var a=setTimeout(()=>r(new ct.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Li(We.prototype,Symbol.toStringTag,"Dexie.Promise"),Dl.env=wb(),Vl(We,{all:function(){var e=ki.apply(null,arguments).map(nh);return new We(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((a,i)=>We.resolve(a).then(o=>{e[i]=o,--r||t(e)},n))})},resolve:e=>{if(e instanceof We)return e;if(e&&typeof e.then=="function")return new We((n,r)=>{e.then(n,r)});var t=new We(_u,!0,e);return bb(t,Rp),t},reject:th,race:function(){var e=ki.apply(null,arguments).map(nh);return new We((t,n)=>{e.map(r=>We.resolve(r).then(t,n))})},PSD:{get:()=>tt,set:e=>tt=e},totalEchoes:{get:()=>wf},newPSD:Is,usePSD:Jl,scheduler:{get:()=>eu,set:e=>{eu=e}},rejectionMapper:{get:()=>Bp,set:e=>{Bp=e}},follow:(e,t)=>new We((n,r)=>Is((a,i)=>{var o=tt;o.unhandleds=[],o.onunhandled=i,o.finalize=jo(function(){(function(l){function c(){l(),Ah.splice(Ah.indexOf(c),1)}Ah.push(c),++mo,eu(()=>{--mo==0&&xg()},[])})(()=>{this.unhandleds.length===0?a():i(this.unhandleds[0])})},o.finalize),e()},t,n,r))}),kh&&(kh.allSettled&&Li(We,"allSettled",function(){const e=ki.apply(null,arguments).map(nh);return new We(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((a,i)=>We.resolve(a).then(o=>r[i]={status:"fulfilled",value:o},o=>r[i]={status:"rejected",reason:o}).then(()=>--n||t(r)))})}),kh.any&&typeof AggregateError<"u"&&Li(We,"any",function(){const e=ki.apply(null,arguments).map(nh);return new We((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const a=new Array(r);e.forEach((i,o)=>We.resolve(i).then(l=>t(l),l=>{a[o]=l,--r||n(new AggregateError(a))}))})}));const tr={awaits:0,echoes:0,id:0};var sC=0,Ph=[],mm=0,wf=0,oC=0;function Is(e,t,n,r){var a=tt,i=Object.create(a);i.parent=a,i.ref=0,i.global=!1,i.id=++oC;var o=Dl.env;i.env=gg?{Promise:We,PromiseProp:{value:We,configurable:!0,writable:!0},all:We.all,race:We.race,allSettled:We.allSettled,any:We.any,resolve:We.resolve,reject:We.reject,nthen:kv(o.nthen,i),gthen:kv(o.gthen,i)}:{},t&&mr(i,t),++a.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Jl(i,e,n,r);return i.ref===0&&i.finalize(),l}function Xl(){return tr.id||(tr.id=++sC),++tr.awaits,tr.echoes+=mb,tr.id}function Oi(){return!!tr.awaits&&(--tr.awaits==0&&(tr.id=0),tr.echoes=tr.awaits*mb,!0)}function nh(e){return tr.echoes&&e&&e.constructor===kh?(Xl(),e.then(t=>(Oi(),t),t=>(Oi(),En(t)))):e}function lC(e){++wf,tr.echoes&&--tr.echoes!=0||(tr.echoes=tr.id=0),Ph.push(tt),Ds(e,!0)}function cC(){var e=Ph[Ph.length-1];Ph.pop(),Ds(e,!1)}function Ds(e,t){var n=tt;if((t?!tr.echoes||mm++&&e===tt:!mm||--mm&&e===tt)||Nb(t?lC.bind(null,e):cC),e!==tt&&(tt=e,n===Dl&&(Dl.env=wb()),gg)){var r=Dl.env.Promise,a=e.env;yf.then=a.nthen,r.prototype.then=a.gthen,(n.global||e.global)&&(Object.defineProperty(Ht,"Promise",a.PromiseProp),r.all=a.all,r.race=a.race,r.resolve=a.resolve,r.reject=a.reject,a.allSettled&&(r.allSettled=a.allSettled),a.any&&(r.any=a.any))}}function wb(){var e=Ht.Promise;return gg?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Ht,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:yf.then,gthen:e.prototype.then}:{}}function Jl(e,t,n,r,a){var i=tt;try{return Ds(e,!0),t(n,r,a)}finally{Ds(i,!1)}}function Nb(e){pb.call(Tp,e)}function Nf(e,t,n,r){return typeof e!="function"?e:function(){var a=tt;n&&Xl(),Ds(t,!0);try{return e.apply(this,arguments)}finally{Ds(a,!1),r&&Nb(Oi)}}}function kv(e,t){return function(n,r){return e.call(this,Nf(n,t),Nf(r,t))}}(""+pb).indexOf("[native code]")===-1&&(Xl=Oi=$t);const Cv="unhandledrejection";function Av(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,a={promise:t,reason:e};if(Ht.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Cv,!0,!0),mr(r,a)):Ht.CustomEvent&&mr(r=new CustomEvent(Cv,{detail:a}),a),r&&Ht.dispatchEvent&&(dispatchEvent(r),!Ht.PromiseRejectionEvent&&Ht.onunhandledrejection))try{Ht.onunhandledrejection(r)}catch{}ri&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var En=We.reject;function qp(e,t,n,r){if(e.idbdb&&(e._state.openComplete||tt.letThrough||e._vip)){var a=e._createTransaction(t,n,e._dbSchema);try{a.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===mg.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>qp(e,t,n,r))):En(i)}return a._promise(t,(i,o)=>Is(()=>(tt.trans=a,r(i,o,a)))).then(i=>a._completion.then(()=>i))}if(e._state.openComplete)return En(new ct.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return En(new ct.DatabaseClosed);e.open().catch($t)}return e._state.dbReadyPromise.then(()=>qp(e,t,n,r))}const Pv="3.2.7",lo=String.fromCharCode(65535),Up=-1/0,bi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",jb="String expected.",tu=[],Zf=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),uC=Zf,dC=Zf,Sb=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),e0="__dbnames",pm="readonly",gm="readwrite";function So(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const kb={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function rh(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=Wu(t))[e],t)}let hC=class{_trans(t,n,r){const a=this._tx||tt.trans,i=this.name;function o(c,d,m){if(!m.schema[i])throw new ct.NotFound("Table "+i+" not part of transaction");return n(m.idbtrans,m)}const l=Hu();try{return a&&a.db===this.db?a===tt.trans?a._promise(t,o,r):Is(()=>a._promise(t,o,r),{trans:a,transless:tt.transless||tt}):qp(this.db,t,[this.name],o)}finally{l&&Vu()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(a=>this.hook.reading.fire(a))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(rr(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=Sn(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(d=>{if(d.compound&&n.every(m=>d.keyPath.indexOf(m)>=0)){for(let m=0;m<n.length;++m)if(n.indexOf(d.keyPath[m])===-1)return!1;return!0}return!1}).sort((d,m)=>d.keyPath.length-m.keyPath.length)[0];if(r&&this.db._maxKey!==lo){const d=r.keyPath.slice(0,n.length);return this.where(d).equals(d.map(m=>t[m]))}!r&&ri&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:a}=this.schema,i=this.db._deps.indexedDB;function o(d,m){try{return i.cmp(d,m)===0}catch{return!1}}const[l,c]=n.reduce(([d,m],h)=>{const v=a[h],p=t[h];return[d||v,d||!v?So(m,v&&v.multi?j=>{const w=Ei(j,h);return rr(w)&&w.some(S=>o(p,S))}:j=>o(p,Ei(j,h))):m]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,rr(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const a=Object.create(t.prototype);for(var i in r)if(Kr(r,i))try{a[i]=r[i]}catch{}return a};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){mr(this,t)})}add(t,n){const{auto:r,keyPath:a}=this.schema.primKey;let i=t;return a&&r&&(i=rh(a)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[i]})).then(o=>o.numFailures?We.reject(o.failures[0]):o.lastResult).then(o=>{if(a)try{Ta(t,a,o)}catch{}return o})}update(t,n){if(typeof t!="object"||rr(t))return this.where(":id").equals(t).modify(n);{const r=Ei(t,this.schema.primKey.keyPath);if(r===void 0)return En(new ct.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Sn(n).forEach(a=>{Ta(t,a,n[a])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:a}=this.schema.primKey;let i=t;return a&&r&&(i=rh(a)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[i],keys:n!=null?[n]:null})).then(o=>o.numFailures?We.reject(o.failures[0]):o.lastResult).then(o=>{if(a)try{Ta(t,a,o)}catch{}return o})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?We.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:kb})).then(t=>t.numFailures?We.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(a=>this.hook.reading.fire(a))))}bulkAdd(t,n,r){const a=Array.isArray(n)?n:void 0,i=(r=r||(a?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&a)throw new ct.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new ct.InvalidArgument("Arguments objects and keys must have the same length");const d=t.length;let m=c&&l?t.map(rh(c)):t;return this.core.mutate({trans:o,type:"add",keys:a,values:m,wantResults:i}).then(({numFailures:h,results:v,lastResult:p,failures:j})=>{if(h===0)return i?v:p;throw new Zc(`${this.name}.bulkAdd(): ${h} of ${d} operations failed`,j)})})}bulkPut(t,n,r){const a=Array.isArray(n)?n:void 0,i=(r=r||(a?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&a)throw new ct.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new ct.InvalidArgument("Arguments objects and keys must have the same length");const d=t.length;let m=c&&l?t.map(rh(c)):t;return this.core.mutate({trans:o,type:"put",keys:a,values:m,wantResults:i}).then(({numFailures:h,results:v,lastResult:p,failures:j})=>{if(h===0)return i?v:p;throw new Zc(`${this.name}.bulkPut(): ${h} of ${d} operations failed`,j)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:a,failures:i})=>{if(r===0)return a;throw new Zc(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}};function nu(e){var t={},n=function(o,l){if(l){for(var c=arguments.length,d=new Array(c-1);--c;)d[c-1]=arguments[c];return t[o].subscribe.apply(null,d),e}if(typeof o=="string")return t[o]};n.addEventType=i;for(var r=1,a=arguments.length;r<a;++r)i(arguments[r]);return n;function i(o,l,c){if(typeof o!="object"){var d;l||(l=rC),c||(c=$t);var m={subscribers:[],fire:c,subscribe:function(h){m.subscribers.indexOf(h)===-1&&(m.subscribers.push(h),m.fire=l(m.fire,h))},unsubscribe:function(h){m.subscribers=m.subscribers.filter(function(v){return v!==h}),m.fire=m.subscribers.reduce(l,c)}};return t[o]=n[o]=m,m}Sn(d=o).forEach(function(h){var v=d[h];if(rr(v))i(h,d[h][0],d[h][1]);else{if(v!=="asap")throw new ct.InvalidArgument("Invalid event config");var p=i(h,Pu,function(){for(var j=arguments.length,w=new Array(j);j--;)w[j]=arguments[j];p.subscribers.forEach(function(S){ib(function(){S.apply(null,w)})})})}})}}function Mc(e,t){return El(t).from({prototype:e}),t}function rl(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vm(e,t){e.filter=So(e.filter,t)}function xm(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>So(r(),t()):t,e.justLimit=n&&!r}function _h(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ct.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function _v(e,t,n){const r=_h(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function ah(e,t,n,r){const a=e.replayFilter?So(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},o=(l,c,d)=>{if(!a||a(c,d,v=>c.stop(v),v=>c.fail(v))){var m=c.primaryKey,h=""+m;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(m)),Kr(i,h)||(i[h]=!0,t(l,c,d))}};return Promise.all([e.or._iterate(o,n),Lv(_v(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Lv(_v(e,r,n),So(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function Lv(e,t,n,r){var a=Xt(r?(i,o,l)=>n(r(i),o,l):n);return e.then(i=>{if(i)return i.start(()=>{var o=()=>i.continue();t&&!t(i,l=>o=l,l=>{i.stop(l),o=$t},l=>{i.fail(l),o=$t})||a(i.value,i,l=>o=l),o()})})}function hr(e,t){try{const n=Ev(e),r=Ev(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(a,i){const o=a.length,l=i.length,c=o<l?o:l;for(let d=0;d<c;++d)if(a[d]!==i[d])return a[d]<i[d]?-1:1;return o===l?0:o<l?-1:1}(Iv(e),Iv(t));case"Array":return function(a,i){const o=a.length,l=i.length,c=o<l?o:l;for(let d=0;d<c;++d){const m=hr(a[d],i[d]);if(m!==0)return m}return o===l?0:o<l?-1:1}(e,t)}}catch{}return NaN}function Ev(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=Ep(e);return n==="ArrayBuffer"?"binary":n}function Iv(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}let fC=class{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,En.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,En.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=So(n.algorithm,t)}_iterate(t,n){return ah(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&mr(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>ah(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,a=r.table.core;if(rl(r,!0))return a.count({trans:n,query:{index:_h(r,a.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var i=0;return ah(r,()=>(++i,!1),n,a).then(()=>i)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),a=r[0],i=r.length-1;function o(d,m){return m?o(d[r[m]],m-1):d[a]}var l=this._ctx.dir==="next"?1:-1;function c(d,m){var h=o(d,i),v=o(m,i);return h<v?-l:h>v?l:0}return this.toArray(function(d){return d.sort(c)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&rl(r,!0)&&r.limit>0){const{valueMapper:a}=r,i=_h(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:o})=>a?o.map(a):o)}{const a=[];return ah(r,i=>a.push(i),n,r.table.core).then(()=>a)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,rl(n)?xm(n,()=>{var r=t;return(a,i)=>r===0||(r===1?(--r,!1):(i(()=>{a.advance(r),r=0}),!1))}):xm(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),xm(this._ctx,()=>{var n=t;return function(r,a,i){return--n<=0&&a(i),n>=0}},!0),this}until(t,n){return vm(this._ctx,function(r,a,i){return!t(r.value)||(a(i),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return vm(this._ctx,function(a){return t(a.value)}),n=this._ctx,r=t,n.isMatch=So(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,a){t(a.key,a)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,a){t(a.primaryKey,a)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(a,i){r.push(i.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&rl(n,!0)&&n.limit>0)return this._read(a=>{var i=_h(n,n.table.core.schema);return n.table.core.query({trans:a,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:a})=>a).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(a,i){r.push(i.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return vm(this._ctx,function(a){var i=a.primaryKey.toString(),o=Kr(r,i);return r[i]=!0,!o}),this}modify(t){var n=this._ctx;return this._write(r=>{var a;if(typeof t=="function")a=t;else{var i=Sn(t),o=i.length;a=function(w){for(var S=!1,g=0;g<o;++g){var y=i[g],N=t[y];Ei(w,y)!==N&&(Ta(w,y,N),S=!0)}return S}}const l=n.table.core,{outbound:c,extractKey:d}=l.schema.primaryKey,m=this.db._options.modifyChunkSize||200,h=[];let v=0;const p=[],j=(w,S)=>{const{failures:g,numFailures:y}=S;v+=w-y;for(let N of Sn(g))h.push(g[N])};return this.clone().primaryKeys().then(w=>{const S=g=>{const y=Math.min(m,w.length-g);return l.getMany({trans:r,keys:w.slice(g,g+y),cache:"immutable"}).then(N=>{const A=[],R=[],$=c?[]:null,I=[];for(let H=0;H<y;++H){const ae=N[H],E={value:Wu(ae),primKey:w[g+H]};a.call(E,E.value,E)!==!1&&(E.value==null?I.push(w[g+H]):c||hr(d(ae),d(E.value))===0?(R.push(E.value),c&&$.push(w[g+H])):(I.push(w[g+H]),A.push(E.value)))}const M=rl(n)&&n.limit===1/0&&(typeof t!="function"||t===ym)&&{index:n.index,range:n.range};return Promise.resolve(A.length>0&&l.mutate({trans:r,type:"add",values:A}).then(H=>{for(let ae in H.failures)I.splice(parseInt(ae),1);j(A.length,H)})).then(()=>(R.length>0||M&&typeof t=="object")&&l.mutate({trans:r,type:"put",keys:$,values:R,criteria:M,changeSpec:typeof t!="function"&&t}).then(H=>j(R.length,H))).then(()=>(I.length>0||M&&t===ym)&&l.mutate({trans:r,type:"delete",keys:I,criteria:M}).then(H=>j(I.length,H))).then(()=>w.length>g+y&&S(g+m))})};return S(0).then(()=>{if(h.length>0)throw new xf("Error modifying one or more objects",h,v,p);return w.length})})})}delete(){var t=this._ctx,n=t.range;return rl(t)&&(t.isPrimKey&&!dC||n.type===3)?this._write(r=>{const{primaryKey:a}=t.table.core.schema,i=n;return t.table.core.count({trans:r,query:{index:a,range:i}}).then(o=>t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:l,lastResult:c,results:d,numFailures:m})=>{if(m)throw new xf("Could not delete some values",Object.keys(l).map(h=>l[h]),o-m);return o-m}))}):this.modify(ym)}};const ym=(e,t)=>t.value=null;function mC(e,t){return e<t?-1:e===t?0:1}function pC(e,t){return e>t?-1:e===t?0:1}function zr(e,t,n){var r=e instanceof Ab?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function al(e){return new e.Collection(e,()=>Cb("")).limit(0)}function gC(e,t,n,r,a,i){for(var o=Math.min(e.length,r.length),l=-1,c=0;c<o;++c){var d=t[c];if(d!==r[c])return a(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):a(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;a(e[c],d)<0&&(l=c)}return o<r.length&&i==="next"?e+n.substr(e.length):o<e.length&&i==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function ih(e,t,n,r){var a,i,o,l,c,d,m,h=n.length;if(!n.every(w=>typeof w=="string"))return zr(e,jb);function v(w){a=function(g){return g==="next"?y=>y.toUpperCase():y=>y.toLowerCase()}(w),i=function(g){return g==="next"?y=>y.toLowerCase():y=>y.toUpperCase()}(w),o=w==="next"?mC:pC;var S=n.map(function(g){return{lower:i(g),upper:a(g)}}).sort(function(g,y){return o(g.lower,y.lower)});l=S.map(function(g){return g.upper}),c=S.map(function(g){return g.lower}),d=w,m=w==="next"?"":r}v("next");var p=new e.Collection(e,()=>ss(l[0],c[h-1]+r));p._ondirectionchange=function(w){v(w)};var j=0;return p._addAlgorithm(function(w,S,g){var y=w.key;if(typeof y!="string")return!1;var N=i(y);if(t(N,c,j))return!0;for(var A=null,R=j;R<h;++R){var $=gC(y,N,l[R],c[R],o,d);$===null&&A===null?j=R+1:(A===null||o(A,$)>0)&&(A=$)}return S(A!==null?function(){w.continue(A+m)}:g),!1}),p}function ss(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Cb(e){return{type:1,lower:e,upper:e}}class Ab{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,a){r=r!==!1,a=a===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||a)&&(!r||!a)?al(this):new this.Collection(this,()=>ss(t,n,!r,!a))}catch{return zr(this,bi)}}equals(t){return t==null?zr(this,bi):new this.Collection(this,()=>Cb(t))}above(t){return t==null?zr(this,bi):new this.Collection(this,()=>ss(t,void 0,!0))}aboveOrEqual(t){return t==null?zr(this,bi):new this.Collection(this,()=>ss(t,void 0,!1))}below(t){return t==null?zr(this,bi):new this.Collection(this,()=>ss(void 0,t,!1,!0))}belowOrEqual(t){return t==null?zr(this,bi):new this.Collection(this,()=>ss(void 0,t))}startsWith(t){return typeof t!="string"?zr(this,jb):this.between(t,t+lo,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):ih(this,(n,r)=>n.indexOf(r[0])===0,[t],lo)}equalsIgnoreCase(t){return ih(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=ki.apply(ll,arguments);return t.length===0?al(this):ih(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=ki.apply(ll,arguments);return t.length===0?al(this):ih(this,(n,r)=>r.some(a=>n.indexOf(a)===0),t,lo)}anyOf(){const t=ki.apply(ll,arguments);let n=this._cmp;try{t.sort(n)}catch{return zr(this,bi)}if(t.length===0)return al(this);const r=new this.Collection(this,()=>ss(t[0],t[t.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,t.sort(n)};let a=0;return r._addAlgorithm((i,o,l)=>{const c=i.key;for(;n(c,t[a])>0;)if(++a,a===t.length)return o(l),!1;return n(c,t[a])===0||(o(()=>{i.continue(t[a])}),!1)}),r}notEqual(t){return this.inAnyRange([[Up,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=ki.apply(ll,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return zr(this,bi)}const n=t.reduce((r,a)=>r?r.concat([[r[r.length-1][1],a]]):[[Up,a]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,a=this._ascending,i=this._descending,o=this._min,l=this._max;if(t.length===0)return al(this);if(!t.every(y=>y[0]!==void 0&&y[1]!==void 0&&a(y[0],y[1])<=0))return zr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ct.InvalidArgument);const c=!n||n.includeLowers!==!1,d=n&&n.includeUppers===!0;let m,h=a;function v(y,N){return h(y[0],N[0])}try{m=t.reduce(function(y,N){let A=0,R=y.length;for(;A<R;++A){const $=y[A];if(r(N[0],$[1])<0&&r(N[1],$[0])>0){$[0]=o($[0],N[0]),$[1]=l($[1],N[1]);break}}return A===R&&y.push(N),y},[]),m.sort(v)}catch{return zr(this,bi)}let p=0;const j=d?y=>a(y,m[p][1])>0:y=>a(y,m[p][1])>=0,w=c?y=>i(y,m[p][0])>0:y=>i(y,m[p][0])>=0;let S=j;const g=new this.Collection(this,()=>ss(m[0][0],m[m.length-1][1],!c,!d));return g._ondirectionchange=y=>{y==="next"?(S=j,h=a):(S=w,h=i),m.sort(v)},g._addAlgorithm((y,N,A)=>{for(var R=y.key;S(R);)if(++p,p===m.length)return N(A),!1;return!!function($){return!j($)&&!w($)}(R)||(this._cmp(R,m[p][1])===0||this._cmp(R,m[p][0])===0||N(()=>{h===a?y.continue(m[p][0]):y.continue(m[p][1])}),!1)}),g}startsWithAnyOf(){const t=ki.apply(ll,arguments);return t.every(n=>typeof n=="string")?t.length===0?al(this):this.inAnyRange(t.map(n=>[n,n+lo])):zr(this,"startsWithAnyOf() only works with strings")}}function Ka(e){return Xt(function(t){return Lu(t),e(t.target.error),!1})}function Lu(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Eu="storagemutated",fs="x-storagemutated-1",Ts=nu(null,Eu);class vC{_lock(){return qc(!tt.global),++this._reculock,this._reculock!==1||tt.global||(tt.lockOwnerFor=this),this}_unlock(){if(qc(!tt.global),--this._reculock==0)for(tt.global||(tt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Jl(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&tt.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(qc(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ct.DatabaseClosed(r);case"MissingAPIError":throw new ct.MissingAPI(r.message,r);default:throw new ct.OpenFailed(r)}if(!this.active)throw new ct.TransactionInactive;return qc(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Xt(a=>{Lu(a),this._reject(t.error)}),t.onabort=Xt(a=>{Lu(a),this.active&&this._reject(new ct.Abort(t.error)),this.active=!1,this.on("abort").fire(a)}),t.oncomplete=Xt(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Ts.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return En(new ct.ReadOnly("Transaction is readonly"));if(!this.active)return En(new ct.TransactionInactive);if(this._locked())return new We((i,o)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(i,o)},tt])});if(r)return Is(()=>{var i=new We((o,l)=>{this._lock();const c=n(o,l,this);c&&c.then&&c.then(o,l)});return i.finally(()=>this._unlock()),i._lib=!0,i});var a=new We((i,o)=>{var l=n(i,o,this);l&&l.then&&l.then(i,o)});return a._lib=!0,a}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=We.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var a=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(a.get(-1/0).onsuccess=o)})()}var i=n._waitingFor;return new We((o,l)=>{r.then(c=>n._waitingQueue.push(Xt(o.bind(null,c))),c=>n._waitingQueue.push(Xt(l.bind(null,c)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ct.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(Kr(n,t))return n[t];const r=this.schema[t];if(!r)throw new ct.NotFound("Table "+t+" not part of transaction");const a=new this.db.Table(t,r,this);return a.core=this.db.core.table(t),n[t]=a,a}}function Wp(e,t,n,r,a,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(a?"++":"")+Pb(t)}}function Pb(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function _b(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:sb(n,r=>[r.name,r])}}let Iu=e=>{try{return e.only([[]]),Iu=()=>[[]],[[]]}catch{return Iu=()=>lo,lo}};function Hp(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>Ei(r,t)}(e):t=>Ei(t,e)}function Dv(e){return[].slice.call(e)}let xC=0;function ru(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function yC(e,t,n){function r(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:d,upper:m,lowerOpen:h,upperOpen:v}=c;return d===void 0?m===void 0?null:t.upperBound(m,!!v):m===void 0?t.lowerBound(d,!!h):t.bound(d,m,!!h,!!v)}const{schema:a,hasGetAll:i}=function(c,d){const m=Dv(c.objectStoreNames);return{schema:{name:c.name,tables:m.map(h=>d.objectStore(h)).map(h=>{const{keyPath:v,autoIncrement:p}=h,j=rr(v),w=v==null,S={},g={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:j,keyPath:v,autoIncrement:p,unique:!0,extractKey:Hp(v)},indexes:Dv(h.indexNames).map(y=>h.index(y)).map(y=>{const{name:N,unique:A,multiEntry:R,keyPath:$}=y,I={name:N,compound:rr($),keyPath:$,unique:A,multiEntry:R,extractKey:Hp($)};return S[ru($)]=I,I}),getIndexByKeyPath:y=>S[ru(y)]};return S[":id"]=g.primaryKey,v!=null&&(S[ru(v)]=g.primaryKey),g})},hasGetAll:m.length>0&&"getAll"in d.objectStore(m[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=a.tables.map(c=>function(d){const m=d.name;return{name:m,schema:d,mutate:function({trans:h,type:v,keys:p,values:j,range:w}){return new Promise((S,g)=>{S=Xt(S);const y=h.objectStore(m),N=y.keyPath==null,A=v==="put"||v==="add";if(!A&&v!=="delete"&&v!=="deleteRange")throw new Error("Invalid operation type: "+v);const{length:R}=p||j||{length:1};if(p&&j&&p.length!==j.length)throw new Error("Given keys array must have same length as given values array.");if(R===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});let $;const I=[],M=[];let H=0;const ae=P=>{++H,Lu(P)};if(v==="deleteRange"){if(w.type===4)return S({numFailures:H,failures:M,results:[],lastResult:void 0});w.type===3?I.push($=y.clear()):I.push($=y.delete(r(w)))}else{const[P,J]=A?N?[j,p]:[j,null]:[p,null];if(A)for(let V=0;V<R;++V)I.push($=J&&J[V]!==void 0?y[v](P[V],J[V]):y[v](P[V])),$.onerror=ae;else for(let V=0;V<R;++V)I.push($=y[v](P[V])),$.onerror=ae}const E=P=>{const J=P.target.result;I.forEach((V,X)=>V.error!=null&&(M[X]=V.error)),S({numFailures:H,failures:M,results:v==="delete"?p:I.map(V=>V.result),lastResult:J})};$.onerror=P=>{ae(P),E(P)},$.onsuccess=E})},getMany:({trans:h,keys:v})=>new Promise((p,j)=>{p=Xt(p);const w=h.objectStore(m),S=v.length,g=new Array(S);let y,N=0,A=0;const R=I=>{const M=I.target;g[M._pos]=M.result,++A===N&&p(g)},$=Ka(j);for(let I=0;I<S;++I)v[I]!=null&&(y=w.get(v[I]),y._pos=I,y.onsuccess=R,y.onerror=$,++N);N===0&&p(g)}),get:({trans:h,key:v})=>new Promise((p,j)=>{p=Xt(p);const w=h.objectStore(m).get(v);w.onsuccess=S=>p(S.target.result),w.onerror=Ka(j)}),query:function(h){return v=>new Promise((p,j)=>{p=Xt(p);const{trans:w,values:S,limit:g,query:y}=v,N=g===1/0?void 0:g,{index:A,range:R}=y,$=w.objectStore(m),I=A.isPrimaryKey?$:$.index(A.name),M=r(R);if(g===0)return p({result:[]});if(h){const H=S?I.getAll(M,N):I.getAllKeys(M,N);H.onsuccess=ae=>p({result:ae.target.result}),H.onerror=Ka(j)}else{let H=0;const ae=S||!("openKeyCursor"in I)?I.openCursor(M):I.openKeyCursor(M),E=[];ae.onsuccess=P=>{const J=ae.result;return J?(E.push(S?J.value:J.primaryKey),++H===g?p({result:E}):void J.continue()):p({result:E})},ae.onerror=Ka(j)}})}(i),openCursor:function({trans:h,values:v,query:p,reverse:j,unique:w}){return new Promise((S,g)=>{S=Xt(S);const{index:y,range:N}=p,A=h.objectStore(m),R=y.isPrimaryKey?A:A.index(y.name),$=j?w?"prevunique":"prev":w?"nextunique":"next",I=v||!("openKeyCursor"in R)?R.openCursor(r(N),$):R.openKeyCursor(r(N),$);I.onerror=Ka(g),I.onsuccess=Xt(M=>{const H=I.result;if(!H)return void S(null);H.___id=++xC,H.done=!1;const ae=H.continue.bind(H);let E=H.continuePrimaryKey;E&&(E=E.bind(H));const P=H.advance.bind(H),J=()=>{throw new Error("Cursor not stopped")};H.trans=h,H.stop=H.continue=H.continuePrimaryKey=H.advance=()=>{throw new Error("Cursor not started")},H.fail=Xt(g),H.next=function(){let V=1;return this.start(()=>V--?this.continue():this.stop()).then(()=>this)},H.start=V=>{const X=new Promise((ee,U)=>{ee=Xt(ee),I.onerror=Ka(U),H.fail=U,H.stop=te=>{H.stop=H.continue=H.continuePrimaryKey=H.advance=J,ee(te)}}),Z=()=>{if(I.result)try{V()}catch(ee){H.fail(ee)}else H.done=!0,H.start=()=>{throw new Error("Cursor behind last entry")},H.stop()};return I.onsuccess=Xt(ee=>{I.onsuccess=Z,Z()}),H.continue=ae,H.continuePrimaryKey=E,H.advance=P,Z(),X},S(H)},g)})},count({query:h,trans:v}){const{index:p,range:j}=h;return new Promise((w,S)=>{const g=v.objectStore(m),y=p.isPrimaryKey?g:g.index(p.name),N=r(j),A=N?y.count(N):y.count();A.onsuccess=Xt(R=>w(R.target.result)),A.onerror=Ka(S)})}}}(c)),l={};return o.forEach(c=>l[c.name]=c),{stack:"dbcore",transaction:e.transaction.bind(e),table(c){if(!l[c])throw new Error(`Table '${c}' not found`);return l[c]},MIN_KEY:-1/0,MAX_KEY:Iu(t),schema:a}}function Vp({_novip:e},t){const n=t.db,r=function(a,i,{IDBKeyRange:o,indexedDB:l},c){return{dbcore:function(m,h){return h.reduce((v,{create:p})=>({...v,...p(v)}),m)}(yC(i,o,c),a.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(a=>{const i=a.name;e.core.schema.tables.some(o=>o.name===i)&&(a.core=e.core.table(i),e[i]instanceof e.Table&&(e[i].core=a.core))})}function jf({_novip:e},t,n,r){n.forEach(a=>{const i=r[a];t.forEach(o=>{const l=dg(o,a);(!l||"value"in l&&l.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?Li(o,a,{get(){return this.table(a)},set(c){rb(this,a,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):o[a]=new e.Table(a,i))})})}function Kp({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function bC(e,t){return e._cfg.version-t._cfg.version}function wC(e,t,n,r){const a=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,a);i.create(n),i._completion.catch(r);const o=i._reject.bind(i),l=tt.transless||tt;Is(()=>{tt.trans=i,tt.transless=l,t===0?(Sn(a).forEach(c=>{bm(n,c,a[c].primKey,a[c].indexes)}),Vp(e,n),We.follow(()=>e.on.populate.fire(i)).catch(o)):function({_novip:c},d,m,h){const v=[],p=c._versions;let j=c._dbSchema=Yp(c,c.idbdb,h),w=!1;const S=p.filter(y=>y._cfg.version>=d);function g(){return v.length?We.resolve(v.shift()(m.idbtrans)).then(g):We.resolve()}return S.forEach(y=>{v.push(()=>{const N=j,A=y._cfg.dbschema;Xp(c,N,h),Xp(c,A,h),j=c._dbSchema=A;const R=Lb(N,A);R.add.forEach(I=>{bm(h,I[0],I[1].primKey,I[1].indexes)}),R.change.forEach(I=>{if(I.recreate)throw new ct.Upgrade("Not yet support for changing primary key");{const M=h.objectStore(I.name);I.add.forEach(H=>Gp(M,H)),I.change.forEach(H=>{M.deleteIndex(H.name),Gp(M,H)}),I.del.forEach(H=>M.deleteIndex(H))}});const $=y._cfg.contentUpgrade;if($&&y._cfg.version>d){Vp(c,h),m._memoizedTables={},w=!0;let I=ob(A);R.del.forEach(E=>{I[E]=N[E]}),Kp(c,[c.Transaction.prototype]),jf(c,[c.Transaction.prototype],Sn(I),I),m.schema=I;const M=hg($);let H;M&&Xl();const ae=We.follow(()=>{if(H=$(m),H&&M){var E=Oi.bind(null,null);H.then(E,E)}});return H&&typeof H.then=="function"?We.resolve(H):ae.then(()=>H)}}),v.push(N=>{(!w||!uC)&&function(A,R){[].slice.call(R.db.objectStoreNames).forEach($=>A[$]==null&&R.db.deleteObjectStore($))}(y._cfg.dbschema,N),Kp(c,[c.Transaction.prototype]),jf(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),m.schema=c._dbSchema})}),g().then(()=>{var y,N;N=h,Sn(y=j).forEach(A=>{N.db.objectStoreNames.contains(A)||bm(N,A,y[A].primKey,y[A].indexes)})})}(e,t,i,n).catch(o)})}function Lb(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const a=e[r],i=t[r];if(a){const o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||a.primKey.auto!==i.primKey.auto&&!Zf)o.recreate=!0,n.change.push(o);else{const l=a.idxByName,c=i.idxByName;let d;for(d in l)c[d]||o.del.push(d);for(d in c){const m=l[d],h=c[d];m?m.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,i])}return n}function bm(e,t,n,r){const a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>Gp(a,i)),a}function Gp(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Yp(e,t,n){const r={};return vf(t.objectStoreNames,0).forEach(a=>{const i=n.objectStore(a);let o=i.keyPath;const l=Wp(Pb(o),o||"",!1,!1,!!i.autoIncrement,o&&typeof o!="string",!0),c=[];for(let m=0;m<i.indexNames.length;++m){const h=i.index(i.indexNames[m]);o=h.keyPath;var d=Wp(h.name,o,!!h.unique,!!h.multiEntry,!1,o&&typeof o!="string",!1);c.push(d)}r[a]=_b(a,l,c)}),r}function Xp({_novip:e},t,n){const r=n.db.objectStoreNames;for(let a=0;a<r.length;++a){const i=r[a],o=n.objectStore(i);e._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const c=o.indexNames[l],d=o.index(c).keyPath,m=typeof d=="string"?d:"["+vf(d).join("+")+"]";if(t[i]){const h=t[i].idxByName[m];h&&(h.name=c,delete t[i].idxByName[m],t[i].idxByName[c]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ht.WorkerGlobalScope&&Ht instanceof Ht.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class NC{_parseStoresSpec(t,n){Sn(t).forEach(r=>{if(t[r]!==null){var a=t[r].split(",").map((o,l)=>{const c=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Wp(c,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),rr(d),l===0)}),i=a.shift();if(i.multi)throw new ct.Schema("Primary key cannot be multi-valued");a.forEach(o=>{if(o.auto)throw new ct.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new ct.Schema("Index must have a name and cannot be an empty string")}),n[r]=_b(r,i,a)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?mr(this._cfg.storesSource,t):t;const r=n._versions,a={};let i={};return r.forEach(o=>{mr(a,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(a,i)}),n._dbSchema=i,Kp(n,[n._allTables,n,n.Transaction.prototype]),jf(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Sn(i),i),n._storeNames=Sn(i),this}upgrade(t){return this._cfg.contentUpgrade=pg(this._cfg.contentUpgrade||$t,t),this}}function yg(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new po(e0,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function bg(e){return e&&typeof e.databases=="function"}function Jp(e){return Is(function(){return tt.letThrough=!0,e()})}function jC(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function SC(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?En(t.dbOpenError):e);ri&&(t.openCanceller._stackHolder=Eo()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function a(){if(t.openCanceller!==r)throw new ct.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,o=null,l=!1;const c=()=>new We((d,m)=>{if(a(),!n)throw new ct.MissingAPI;const h=e.name,v=t.autoSchema?n.open(h):n.open(h,Math.round(10*e.verno));if(!v)throw new ct.MissingAPI;v.onerror=Ka(m),v.onblocked=Xt(e._fireOnBlocked),v.onupgradeneeded=Xt(p=>{if(o=v.transaction,t.autoSchema&&!e._options.allowEmptyDB){v.onerror=Lu,o.abort(),v.result.close();const w=n.deleteDatabase(h);w.onsuccess=w.onerror=Xt(()=>{m(new ct.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=Ka(m);var j=p.oldVersion>Math.pow(2,62)?0:p.oldVersion;l=j<1,e._novip.idbdb=v.result,wC(e,j/10,o,m)}},m),v.onsuccess=Xt(()=>{o=null;const p=e._novip.idbdb=v.result,j=vf(p.objectStoreNames);if(j.length>0)try{const S=p.transaction((w=j).length===1?w[0]:w,"readonly");t.autoSchema?function({_novip:g},y,N){g.verno=y.version/10;const A=g._dbSchema=Yp(0,y,N);g._storeNames=vf(y.objectStoreNames,0),jf(g,[g._allTables],Sn(A),A)}(e,p,S):(Xp(e,e._dbSchema,S),function(g,y){const N=Lb(Yp(0,g.idbdb,y),g._dbSchema);return!(N.add.length||N.change.some(A=>A.add.length||A.change.length))}(e,S)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Vp(e,S)}catch{}var w;tu.push(e),p.onversionchange=Xt(S=>{t.vcFired=!0,e.on("versionchange").fire(S)}),p.onclose=Xt(S=>{e.on("close").fire(S)}),l&&function({indexedDB:S,IDBKeyRange:g},y){!bg(S)&&y!==e0&&yg(S,g).put({name:y}).catch($t)}(e._deps,h),d()},m)}).catch(d=>d&&d.name==="UnknownError"&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c()):We.reject(d));return We.race([r,(typeof navigator>"u"?We.resolve():jC()).then(c)]).then(()=>(a(),t.onReadyBeingFired=[],We.resolve(Jp(()=>e.on.ready.fire(e.vip))).then(function d(){if(t.onReadyBeingFired.length>0){let m=t.onReadyBeingFired.reduce(pg,$t);return t.onReadyBeingFired=[],We.resolve(Jp(()=>m(e.vip))).then(d)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(d=>{t.dbOpenError=d;try{o&&o.abort()}catch{}return r===t.openCanceller&&e._close(),En(d)}).finally(()=>{t.openComplete=!0,i()})}function Qp(e){var t=i=>e.next(i),n=a(t),r=a(i=>e.throw(i));function a(i){return o=>{var l=i(o),c=l.value;return l.done?c:c&&typeof c.then=="function"?c.then(n,r):rr(c)?Promise.all(c).then(n,r):n(c)}}return a(t)()}function kC(e,t,n){var r=arguments.length;if(r<2)throw new ct.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];return n=a.pop(),[e,lb(a),n]}function Eb(e,t,n,r,a){return We.resolve().then(()=>{const i=tt.transless||tt,o=e._createTransaction(t,n,e._dbSchema,r),l={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(h){return h.name===mg.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Eb(e,t,n,null,a))):En(h)}const c=hg(a);let d;c&&Xl();const m=We.follow(()=>{if(d=a.call(o,o),d)if(c){var h=Oi.bind(null,null);d.then(h,h)}else typeof d.next=="function"&&typeof d.throw=="function"&&(d=Qp(d))},l);return(d&&typeof d.then=="function"?We.resolve(d).then(h=>o.active?h:En(new ct.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):m.then(()=>d)).then(h=>(r&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),En(h)))})}function sh(e,t,n){const r=rr(e)?e.slice():[e];for(let a=0;a<n;++a)r.push(t);return r}const CC={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,a={},i=[];function o(m,h,v){const p=ru(m),j=a[p]=a[p]||[],w=m==null?0:typeof m=="string"?1:m.length,S=h>0,g={...v,isVirtual:S,keyTail:h,keyLength:w,extractKey:Hp(m),unique:!S&&v.unique};return j.push(g),g.isPrimaryKey||i.push(g),w>1&&o(w===2?m[0]:m.slice(0,w-1),h+1,v),j.sort((y,N)=>y.keyTail-N.keyTail),g}const l=o(r.primaryKey.keyPath,0,r.primaryKey);a[":id"]=[l];for(const m of r.indexes)o(m.keyPath,0,m);function c(m){const h=m.query.index;return h.isVirtual?{...m,query:{index:h,range:(v=m.query.range,p=h.keyTail,{type:v.type===1?2:v.type,lower:sh(v.lower,v.lowerOpen?e.MAX_KEY:e.MIN_KEY,p),lowerOpen:!0,upper:sh(v.upper,v.upperOpen?e.MIN_KEY:e.MAX_KEY,p),upperOpen:!0})}}:m;var v,p}return{...n,schema:{...r,primaryKey:l,indexes:i,getIndexByKeyPath:function(m){const h=a[ru(m)];return h&&h[0]}},count:m=>n.count(c(m)),query:m=>n.query(c(m)),openCursor(m){const{keyTail:h,isVirtual:v,keyLength:p}=m.query.index;return v?n.openCursor(c(m)).then(j=>j&&function(w){return Object.create(w,{continue:{value:function(g){g!=null?w.continue(sh(g,m.reverse?e.MAX_KEY:e.MIN_KEY,h)):m.unique?w.continue(w.key.slice(0,p).concat(m.reverse?e.MIN_KEY:e.MAX_KEY,h)):w.continue()}},continuePrimaryKey:{value(g,y){w.continuePrimaryKey(sh(g,e.MAX_KEY,h),y)}},primaryKey:{get:()=>w.primaryKey},key:{get(){const g=w.key;return p===1?g[0]:g.slice(0,p)}},value:{get:()=>w.value}})}(j)):n.openCursor(m)}}}}}};function wg(e,t,n,r){return n=n||{},r=r||"",Sn(e).forEach(a=>{if(Kr(t,a)){var i=e[a],o=t[a];if(typeof i=="object"&&typeof o=="object"&&i&&o){const l=Ep(i);l!==Ep(o)?n[r+a]=t[a]:l==="Object"?wg(i,o,n,r+a+"."):i!==o&&(n[r+a]=t[a])}else i!==o&&(n[r+a]=t[a])}else n[r+a]=void 0}),Sn(t).forEach(a=>{Kr(e,a)||(n[r+a]=t[a])}),n}const AC={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(i){const o=tt.trans,{deleting:l,creating:c,updating:d}=o.table(t).hook;switch(i.type){case"add":if(c.fire===$t)break;return o._promise("readwrite",()=>m(i),!0);case"put":if(c.fire===$t&&d.fire===$t)break;return o._promise("readwrite",()=>m(i),!0);case"delete":if(l.fire===$t)break;return o._promise("readwrite",()=>m(i),!0);case"deleteRange":if(l.fire===$t)break;return o._promise("readwrite",()=>function(v){return h(v.trans,v.range,1e4)}(i),!0)}return n.mutate(i);function m(v){const p=tt.trans,j=v.keys||function(w,S){return S.type==="delete"?S.keys:S.keys||S.values.map(w.extractKey)}(r,v);if(!j)throw new Error("Keys missing");return(v=v.type==="add"||v.type==="put"?{...v,keys:j}:{...v}).type!=="delete"&&(v.values=[...v.values]),v.keys&&(v.keys=[...v.keys]),function(w,S,g){return S.type==="add"?Promise.resolve([]):w.getMany({trans:S.trans,keys:g,cache:"immutable"})}(n,v,j).then(w=>{const S=j.map((g,y)=>{const N=w[y],A={onerror:null,onsuccess:null};if(v.type==="delete")l.fire.call(A,g,N,p);else if(v.type==="add"||N===void 0){const R=c.fire.call(A,g,v.values[y],p);g==null&&R!=null&&(g=R,v.keys[y]=g,r.outbound||Ta(v.values[y],r.keyPath,g))}else{const R=wg(N,v.values[y]),$=d.fire.call(A,R,g,N,p);if($){const I=v.values[y];Object.keys($).forEach(M=>{Kr(I,M)?I[M]=$[M]:Ta(I,M,$[M])})}}return A});return n.mutate(v).then(({failures:g,results:y,numFailures:N,lastResult:A})=>{for(let R=0;R<j.length;++R){const $=y?y[R]:j[R],I=S[R];$==null?I.onerror&&I.onerror(g[R]):I.onsuccess&&I.onsuccess(v.type==="put"&&w[R]?v.values[R]:$)}return{failures:g,results:y,numFailures:N,lastResult:A}}).catch(g=>(S.forEach(y=>y.onerror&&y.onerror(g)),Promise.reject(g)))})}function h(v,p,j){return n.query({trans:v,values:!1,query:{index:r,range:p},limit:j}).then(({result:w})=>m({type:"delete",keys:w,trans:v}).then(S=>S.numFailures>0?Promise.reject(S.failures[0]):w.length<j?{failures:[],numFailures:0,lastResult:void 0}:h(v,{...p,lower:w[w.length-1],lowerOpen:!0},j)))}}}}})};function Ib(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let a=0,i=0;a<t.keys.length&&i<e.length;++a)hr(t.keys[a],e[i])===0&&(r.push(n?Wu(t.values[a]):t.values[a]),++i);return r.length===e.length?r:null}catch{return null}}const PC={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const a=Ib(r.keys,r.trans._cache,r.cache==="clone");return a?We.resolve(a):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Wu(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Ng(e){return!("from"in e)}const Si=function(e,t){if(!this){const n=new Si;return e&&"d"in e&&mr(n,e),n}mr(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Du(e,t,n){const r=hr(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Ng(e))return mr(e,{from:t,to:n,d:1});const a=e.l,i=e.r;if(hr(n,e.from)<0)return a?Du(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Tv(e);if(hr(t,e.to)>0)return i?Du(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Tv(e);hr(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),hr(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;a&&!e.l&&Sf(e,a),i&&o&&Sf(e,i)}function Sf(e,t){Ng(t)||function n(r,{from:a,to:i,l:o,r:l}){Du(r,a,i),o&&n(r,o),l&&n(r,l)}(e,t)}function _C(e,t){const n=Zp(t);let r=n.next();if(r.done)return!1;let a=r.value;const i=Zp(e);let o=i.next(a.from),l=o.value;for(;!r.done&&!o.done;){if(hr(l.from,a.to)<=0&&hr(l.to,a.from)>=0)return!0;hr(a.from,l.from)<0?a=(r=n.next(l.from)).value:l=(o=i.next(a.from)).value}return!1}function Zp(e){let t=Ng(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&hr(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||hr(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Tv(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=r>1?"r":r<-1?"l":"";if(a){const i=a==="r"?"l":"r",o={...e},l=e[a];e.from=l.from,e.to=l.to,e[a]=l[a],o[a]=l[i],e[i]=o,o.d=Mv(o)}e.d=Mv(e)}function Mv({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Vl(Si.prototype,{add(e){return Sf(this,e),this},addKey(e){return Du(this,e,e),this},addKeys(e){return e.forEach(t=>Du(this,t,t)),this},[Ip](){return Zp(this)}});const LC={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Si(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const a=e.table(r),{schema:i}=a,{primaryKey:o}=i,{extractKey:l,outbound:c}=o,d={...a,mutate:v=>{const p=v.trans,j=p.mutatedParts||(p.mutatedParts={}),w=$=>{const I=`idb://${t}/${r}/${$}`;return j[I]||(j[I]=new Si)},S=w(""),g=w(":dels"),{type:y}=v;let[N,A]=v.type==="deleteRange"?[v.range]:v.type==="delete"?[v.keys]:v.values.length<50?[[],v.values]:[];const R=v.trans._cache;return a.mutate(v).then($=>{if(rr(N)){y!=="delete"&&(N=$.results),S.addKeys(N);const I=Ib(N,R);I||y==="add"||g.addKeys(N),(I||A)&&function(M,H,ae,E){function P(J){const V=M(J.name||"");function X(ee){return ee!=null?J.extractKey(ee):null}const Z=ee=>J.multiEntry&&rr(ee)?ee.forEach(U=>V.addKey(U)):V.addKey(ee);(ae||E).forEach((ee,U)=>{const te=ae&&X(ae[U]),ne=E&&X(E[U]);hr(te,ne)!==0&&(te!=null&&Z(te),ne!=null&&Z(ne))})}H.indexes.forEach(P)}(w,i,I,A)}else if(N){const I={from:N.lower,to:N.upper};g.add(I),S.add(I)}else S.add(n),g.add(n),i.indexes.forEach(I=>w(I.name).add(n));return $})}},m=({query:{index:v,range:p}})=>{var j,w;return[v,new Si((j=p.lower)!==null&&j!==void 0?j:e.MIN_KEY,(w=p.upper)!==null&&w!==void 0?w:e.MAX_KEY)]},h={get:v=>[o,new Si(v.key)],getMany:v=>[o,new Si().addKeys(v.keys)],count:m,query:m,openCursor:m};return Sn(h).forEach(v=>{d[v]=function(p){const{subscr:j}=tt;if(j){const w=A=>{const R=`idb://${t}/${r}/${A}`;return j[R]||(j[R]=new Si)},S=w(""),g=w(":dels"),[y,N]=h[v](p);if(w(y.name||"").add(N),!y.isPrimaryKey){if(v!=="count"){const A=v==="query"&&c&&p.values&&a.query({...p,values:!1});return a[v].apply(this,arguments).then(R=>{if(v==="query"){if(c&&p.values)return A.then(({result:I})=>(S.addKeys(I),R));const $=p.values?R.result.map(l):R.result;p.values?S.addKeys($):g.addKeys($)}else if(v==="openCursor"){const $=R,I=p.values;return $&&Object.create($,{key:{get:()=>(g.addKey($.primaryKey),$.key)},primaryKey:{get(){const M=$.primaryKey;return g.addKey(M),M}},value:{get:()=>(I&&S.addKey($.primaryKey),$.value)}})}return R})}g.add(n)}}return a[v].apply(this,arguments)}}),d}}}};class po{constructor(t,n){this._middlewares={},this.verno=0;const r=po.dependencies;this._options=n={addons:po.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:a}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:$t,dbReadyPromise:null,cancelOpen:$t,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new We(l=>{i.dbReadyResolve=l}),i.openCanceller=new We((l,c)=>{i.cancelOpen=c}),this._state=i,this.name=t,this.on=nu(this,"populate","blocked","versionchange","close",{ready:[pg,$t]}),this.on.ready.subscribe=ab(this.on.ready.subscribe,l=>(c,d)=>{po.vip(()=>{const m=this._state;if(m.openComplete)m.dbOpenError||We.resolve().then(c),d&&l(c);else if(m.onReadyBeingFired)m.onReadyBeingFired.push(c),d&&l(c);else{l(c);const h=this;d||l(function v(){h.on.ready.unsubscribe(c),h.on.ready.unsubscribe(v)})}})}),this.Collection=(o=this,Mc(fC.prototype,function(l,c){this.db=o;let d=kb,m=null;if(c)try{d=c()}catch(j){m=j}const h=l._ctx,v=h.table,p=v.hook.reading.fire;this._ctx={table:v,index:h.index,isPrimKey:!h.index||v.schema.primKey.keyPath&&h.index===v.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:m,or:h.or,valueMapper:p!==Pu?p:null}})),this.Table=function(l){return Mc(hC.prototype,function(c,d,m){this.db=l,this._tx=m,this.name=c,this.schema=d,this.hook=l._allTables[c]?l._allTables[c].hook:nu(null,{creating:[eC,$t],reading:[Zk,Pu],updating:[nC,$t],deleting:[tC,$t]})})}(this),this.Transaction=function(l){return Mc(vC.prototype,function(c,d,m,h,v){this.db=l,this.mode=c,this.storeNames=d,this.schema=m,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=nu(this,"complete","error","abort"),this.parent=v||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new We((p,j)=>{this._resolve=p,this._reject=j}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},p=>{var j=this.active;return this.active=!1,this.on.error.fire(p),this.parent?this.parent._reject(p):j&&this.idbtrans&&this.idbtrans.abort(),En(p)})})}(this),this.Version=function(l){return Mc(NC.prototype,function(c){this.db=l,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return Mc(Ab.prototype,function(c,d,m){this.db=l,this._ctx={table:c,index:d===":id"?null:d,or:m};const h=l._deps.indexedDB;if(!h)throw new ct.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(v,p)=>h.cmp(p,v),this._max=(v,p)=>h.cmp(v,p)>0?v:p,this._min=(v,p)=>h.cmp(v,p)<0?v:p,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=Iu(n.IDBKeyRange),this._createTransaction=(l,c,d,m)=>new this.Transaction(l,c,d,this._options.chromeTransactionDurability,m),this._fireOnBlocked=l=>{this.on("blocked").fire(l),tu.filter(c=>c.name===this.name&&c!==this&&!c._state.vcFired).map(c=>c.on("versionchange").fire(l))},this.use(CC),this.use(AC),this.use(LC),this.use(PC),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new ct.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new ct.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(a=>a._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(bC),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||tt.letThrough||this._vip)?t():new We((n,r)=>{if(this._state.openComplete)return r(new ct.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new ct.DatabaseClosed);this.open().catch($t)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:a}){a&&this.unuse({stack:t,name:a});const i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:r??10,name:a}),i.sort((o,l)=>o.level-l.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(a=>r?a.create!==r:!!n&&a.name!==n)),this}open(){return SC(this)}_close(){const t=this._state,n=tu.indexOf(this);if(n>=0&&tu.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new We(r=>{t.dbReadyResolve=r}),t.openCanceller=new We((r,a)=>{t.cancelOpen=a})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new ct.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new We((r,a)=>{const i=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=Xt(()=>{(function({indexedDB:l,IDBKeyRange:c},d){!bg(l)&&d!==e0&&yg(l,c).delete(d).catch($t)})(this._deps,this.name),r()}),o.onerror=Ka(a),o.onblocked=this._fireOnBlocked};if(t)throw new ct.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Sn(this._allTables).map(t=>this._allTables[t])}transaction(){const t=kC.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let a=tt.trans;a&&a.db===this&&t.indexOf("!")===-1||(a=null);const i=t.indexOf("?")!==-1;let o,l;t=t.replace("!","").replace("?","");try{if(l=n.map(d=>{var m=d instanceof this.Table?d.name:d;if(typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),t=="r"||t===pm)o=pm;else{if(t!="rw"&&t!=gm)throw new ct.InvalidArgument("Invalid transaction mode: "+t);o=gm}if(a){if(a.mode===pm&&o===gm){if(!i)throw new ct.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&l.forEach(d=>{if(a&&a.storeNames.indexOf(d)===-1){if(!i)throw new ct.SubTransaction("Table "+d+" not included in parent transaction.");a=null}}),i&&a&&!a.active&&(a=null)}}catch(d){return a?a._promise(null,(m,h)=>{h(d)}):En(d)}const c=Eb.bind(null,this,o,l,a,r);return a?a._promise(o,c,"lock"):tt.trans?Jl(tt.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!Kr(this._allTables,t))throw new ct.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const EC=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class IC{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[EC](){return this}}function Db(e,t){return Sn(t).forEach(n=>{Sf(e[n]||(e[n]=new Si),t[n])}),e}function Tb(e){let t,n=!1;const r=new IC(a=>{const i=hg(e);let o=!1,l={},c={};const d={get closed(){return o},unsubscribe:()=>{o=!0,Ts.storagemutated.unsubscribe(p)}};a.start&&a.start(d);let m=!1,h=!1;function v(){return Sn(c).some(w=>l[w]&&_C(l[w],c[w]))}const p=w=>{Db(l,w),v()&&j()},j=()=>{if(m||o)return;l={};const w={},S=function(g){i&&Xl();const y=()=>Is(e,{subscr:g,trans:null}),N=tt.trans?Jl(tt.transless,y):y();return i&&N.then(Oi,Oi),N}(w);h||(Ts(Eu,p),h=!0),m=!0,Promise.resolve(S).then(g=>{n=!0,t=g,m=!1,o||(v()?j():(l={},c=w,a.next&&a.next(g)))},g=>{m=!1,n=!1,a.error&&a.error(g),d.unsubscribe()})};return j(),d});return r.hasValue=()=>n,r.getValue=()=>t,r}let e1;try{e1={indexedDB:Ht.indexedDB||Ht.mozIndexedDB||Ht.webkitIndexedDB||Ht.msIndexedDB,IDBKeyRange:Ht.IDBKeyRange||Ht.webkitIDBKeyRange}}catch{e1={indexedDB:null,IDBKeyRange:null}}const Zs=po;function Lh(e){let t=Pi;try{Pi=!0,Ts.storagemutated.fire(e)}finally{Pi=t}}Vl(Zs,{...Sh,delete:e=>new Zs(e,{addons:[]}).delete(),exists:e=>new Zs(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return bg(t)?Promise.resolve(t.databases()).then(r=>r.map(a=>a.name).filter(a=>a!==e0)):yg(t,n).toCollection().primaryKeys()}(Zs.dependencies).then(e)}catch{return En(new ct.MissingAPI)}},defineClass:()=>function(e){mr(this,e)},ignoreTransaction:e=>tt.trans?Jl(tt.transless,e):e(),vip:Jp,async:function(e){return function(){try{var t=Qp(e.apply(this,arguments));return t&&typeof t.then=="function"?t:We.resolve(t)}catch(n){return En(n)}}},spawn:function(e,t,n){try{var r=Qp(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:We.resolve(r)}catch(a){return En(a)}},currentTransaction:{get:()=>tt.trans||null},waitFor:function(e,t){const n=We.resolve(typeof e=="function"?Zs.ignoreTransaction(e):e).timeout(t||6e4);return tt.trans?tt.trans.waitFor(n):n},Promise:We,debug:{get:()=>ri,set:e=>{ub(e,e==="dexie"?()=>!0:Sb)}},derive:El,extend:mr,props:Vl,override:ab,Events:nu,on:Ts,liveQuery:Tb,extendObservabilitySet:Db,getByKeyPath:Ei,setByKeyPath:Ta,delByKeyPath:function(e,t){typeof t=="string"?Ta(e,t,void 0):"length"in t&&[].map.call(t,function(n){Ta(e,n,void 0)})},shallowClone:ob,deepClone:Wu,getObjectDiff:wg,cmp:hr,asap:ib,minKey:Up,addons:[],connections:tu,errnames:mg,dependencies:e1,semVer:Pv,version:Pv.split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Zs.maxKey=Iu(Zs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ts(Eu,e=>{if(!Pi){let t;Zf?(t=document.createEvent("CustomEvent"),t.initCustomEvent(fs,!0,!0,e)):t=new CustomEvent(fs,{detail:e}),Pi=!0,dispatchEvent(t),Pi=!1}}),addEventListener(fs,({detail:e})=>{Pi||Lh(e)}));let Pi=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(fs);typeof e.unref=="function"&&e.unref(),Ts(Eu,t=>{Pi||e.postMessage(t)}),e.onmessage=t=>{t.data&&Lh(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ts(Eu,t=>{try{Pi||(typeof localStorage<"u"&&localStorage.setItem(fs,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:fs,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===fs){const n=JSON.parse(t.newValue);n&&Lh(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===fs&&Lh(t.changedParts)})}We.rejectionMapper=function(e,t){if(!e||e instanceof Il||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Sv[e.name])return e;var n=new Sv[e.name](t||e.message,e);return"stack"in e&&Li(n,"stack",{get:function(){return this.inner.stack}}),n},ub(ri,Sb);class DC extends po{constructor(){super("KimiPOSDatabase");la(this,"categories");la(this,"products");la(this,"posTables");la(this,"salons");la(this,"orders");la(this,"orderItems");la(this,"customers");la(this,"configuration");la(this,"syncLogs");la(this,"namedAccounts");la(this,"balanceIncentives");this.version(1).stores({categories:"++id, name, order, isActive, syncStatus",products:"++id, name, categoryId, isActive, price, syncStatus",posTables:"++id, number, salonId, status, currentOrderId, syncStatus",salons:"++id, name, isActive, syncStatus",orders:"++id, tableId, status, createdAt, syncStatus",orderItems:"++id, orderId, productId, status",customers:"++id, name, email, phone, syncStatus",configuration:"++id, key, category, syncStatus",syncLogs:"++id, table, recordId, status, createdAt"}),this.version(2).stores({namedAccounts:"++id, name, salonId, status, syncStatus"}),this.version(3).stores({customers:"++id, name, lastName, email, phone, cardCode, syncStatus"}),this.version(4).stores({balanceIncentives:"++id, customerPayment, totalBalance, isActive, syncStatus"}),this.version(5).stores({balanceIncentives:"++id, customerPayment, totalBalance, isActive, syncStatus"}),this.categories.hook("creating",function(n,r,a){r.createdAt=new Date,r.updatedAt=new Date,r.syncStatus="pending"}),this.categories.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"}),this.products.hook("creating",function(n,r,a){r.createdAt=new Date,r.updatedAt=new Date,r.syncStatus="pending"}),this.products.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"}),this.posTables.hook("creating",function(n,r,a){r.createdAt=new Date,r.updatedAt=new Date,r.syncStatus="pending"}),this.posTables.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"}),this.salons.hook("creating",function(n,r,a){r.createdAt=new Date,r.updatedAt=new Date,r.syncStatus="pending"}),this.salons.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"}),this.customers.hook("creating",function(n,r,a){r.createdAt=new Date,r.updatedAt=new Date,r.syncStatus="pending"}),this.customers.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"}),this.orders.hook("creating",function(n,r,a){r.createdAt=new Date,r.updatedAt=new Date,r.syncStatus="pending"}),this.orders.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"}),this.customers.hook("creating",function(n,r,a){r.createdAt=new Date,r.updatedAt=new Date,r.syncStatus="pending"}),this.customers.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"}),this.configuration.hook("creating",function(n,r,a){r.updatedAt=new Date,r.syncStatus="pending"}),this.configuration.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"}),this.syncLogs.hook("creating",function(n,r,a){r.createdAt=new Date}),this.namedAccounts.hook("creating",function(n,r,a){r.createdAt=new Date,r.updatedAt=new Date,r.syncStatus="pending"}),this.namedAccounts.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"}),this.balanceIncentives.hook("creating",function(n,r,a){r.createdAt=new Date,r.updatedAt=new Date,r.syncStatus="pending"}),this.balanceIncentives.hook("updating",function(n,r,a,i){n.updatedAt=new Date,n.syncStatus="pending"})}async addSyncLog(n,r,a,i){return await this.syncLogs.add({table:n,recordId:r,action:a,data:i,status:"pending",attempts:0,createdAt:new Date})}async getPendingSyncLogs(){return await this.syncLogs.where("status").equals("pending").toArray()}async markSyncSuccess(n){return await this.syncLogs.update(n,{status:"success",lastAttempt:new Date})}async markSyncError(n,r){const a=await this.syncLogs.get(n);if(a)return await this.syncLogs.update(n,{status:"error",error:r,attempts:a.attempts+1,lastAttempt:new Date})}}const xt=new DC,Mb=q.createContext(void 0),Ku=()=>{const e=q.useContext(Mb);if(!e)throw new Error("useCustomers must be used within a CustomerProvider");return e},TC=({children:e})=>{const[t,n]=q.useState([]),r=async()=>{try{const v=await xt.customers.toArray();n(v)}catch(v){console.error("Error loading customers:",v),ke.error("Error al cargar los clientes")}},a=async()=>{await r()},i=async v=>{try{if(v.cardCode&&await xt.customers.where("cardCode").equals(v.cardCode).first()){ke.error("Ya existe un cliente con ese código de tarjeta");return}const p={...v,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};await xt.customers.add(p),await r(),ke.success("Cliente agregado exitosamente")}catch(p){console.error("Error adding customer:",p),ke.error("Error al agregar el cliente")}},o=async(v,p)=>{try{if(p.cardCode&&await xt.customers.where("cardCode").equals(p.cardCode).filter(S=>S.id!==v).first()){ke.error("Ya existe un cliente con ese código de tarjeta");return}const j={...p,updatedAt:new Date};await xt.customers.update(v,j),await r(),ke.success("Cliente actualizado exitosamente")}catch(j){console.error("Error updating customer:",j),ke.error("Error al actualizar el cliente")}},l=async v=>{try{const p=await xt.customers.get(v);if(p&&await xt.orders.where("customerName").equals(p.name).count()>0){ke.error("No se puede eliminar el cliente porque tiene pedidos asociados");return}await xt.customers.delete(v),await r(),ke.success("Cliente eliminado exitosamente")}catch(p){console.error("Error deleting customer:",p),ke.error("Error al eliminar el cliente")}},c=v=>{if(!v.trim())return t;const p=v.toLowerCase();return t.filter(j=>j.name.toLowerCase().includes(p)||j.lastName.toLowerCase().includes(p)||j.email.toLowerCase().includes(p)||j.phone.toLowerCase().includes(p)||j.cardCode.toLowerCase().includes(p))},d=v=>t.find(p=>p.id===v),m=v=>t.find(p=>p.cardCode===v);q.useEffect(()=>{r()},[]);const h={customers:t,addCustomer:i,updateCustomer:o,deleteCustomer:l,searchCustomers:c,loadCustomers:r,refreshCustomers:a,getCustomerById:d,getCustomerByCardCode:m};return s.jsx(Mb.Provider,{value:h,children:e})},MC=({isOpen:e,onClose:t,onSelectTable:n,selectedTableId:r,forceOpen:a=!1,onTicketWithoutTable:i})=>{const[o,l]=q.useState(""),[c,d]=q.useState("all"),[m,h]=q.useState(!1),[v,p]=q.useState(null),[j,w]=q.useState(""),[S,g]=q.useState(!1),[y,N]=q.useState(""),[A,R]=q.useState(!1),[$,I]=q.useState(null),{salons:M,activeSalonId:H,setActiveSalon:ae,tables:E,decor:P,updateTableTemporaryName:J,updateTableStatus:V,addNamedAccount:X}=Qf(),{customers:Z}=Ku(),ee=zu();q.useEffect(()=>{e||(h(!1),p(null),w(""))},[e]);const U=E.filter(re=>{var ye,Pe;const B=!o||re.number.toLowerCase().includes(o.toLowerCase())||((ye=re.name)==null?void 0:ye.toLowerCase().includes(o.toLowerCase()))||((Pe=re.temporaryName)==null?void 0:Pe.toLowerCase().includes(o.toLowerCase())),oe=c==="all"||re.status===c;return B&&oe}),te=re=>{if(console.log("Click en mesa:",re.number,"Estado:",re.status,"Modal abierto:",m),m){h(!1),p(null),w("");return}(re.status==="available"||re.status==="occupied"||re.status==="reserved")&&(l(""),n(re),t())},ne=re=>{ae(re)},pe=re=>{console.log("Long press en mesa:",re.number,"Estado:",re.status),p(re),w(re.temporaryName||""),h(!0)},C=()=>{if(v){const re=j.trim()||null;J(v.id,re),h(!1),p(null),w(""),re&&setTimeout(()=>{console.log(`Nombre temporal "${re}" asignado a la Mesa ${v.number}`)},100)}},D=()=>{h(!1),p(null),w("")},W=re=>{if(re.preventDefault(),!y.trim()&&!$){ke.error("Por favor ingresa el nombre del cliente o selecciona uno existente");return}try{let B="",oe=null;$?(B=`${$.name} ${$.lastName}`,oe=$):B=y.trim();const ye=X(B);ke.success(`Cuenta creada para ${B}`);const Pe={id:ye,number:B,name:B,status:"occupied",x:0,y:0,capacity:1,occupiedSince:new Date,temporaryName:B,assignedCustomer:oe};g(!1),N(""),I(null),n(Pe),t()}catch(B){console.error("Error creating named account:",B),B instanceof Error&&B.message.includes("Ya existe una cuenta")?ke.error(B.message):ke.error("Error al crear la cuenta")}},Q=()=>{g(!1),N(""),I(null)},ie=(re,B)=>{V(re.id,B),console.log(`Mesa ${re.number} cambiada a estado: ${B}`)},de=()=>{h(!1),p(null),w(""),t()};return e?s.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:a?void 0:de}),s.jsxs("div",{className:"inline-block w-full h-screen max-w-none my-0 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-none",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Es,{className:"w-6 h-6 text-primary-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Seleccionar Mesa"})]}),i&&s.jsxs("button",{onClick:i,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-violet-600 hover:from-purple-700 hover:to-violet-700 text-white font-bold rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 text-base border-2 border-purple-400 ring-2 ring-purple-200",children:[s.jsx(fa,{className:"w-5 h-5"}),s.jsx("span",{children:"Ticket sin Mesa"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:()=>{t(),ee("/configuration")},className:"px-3 py-2 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2 text-sm",title:"Configuración",children:[s.jsx(Xf,{className:"w-4 h-4"}),s.jsx("span",{children:"Configuración"})]}),!a&&s.jsx("button",{onClick:de,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-2 font-medium",children:"SELECCIONAR SALÓN"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:M.map(re=>s.jsx("button",{onClick:()=>ne(re.id),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md ${H===re.id?re.id==="named-accounts"?"bg-gradient-to-r from-yellow-500 to-amber-600 text-white shadow-lg transform scale-105":"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg transform scale-105":re.id==="named-accounts"?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200 border border-yellow-300 hover:border-yellow-400":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200 hover:border-gray-300"}`,children:re.name},re.id))})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-end",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar mesa por número o nombre...",value:o,onChange:re=>l(re.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sj,{className:"w-5 h-5 text-gray-400"}),s.jsxs("select",{value:c,onChange:re=>d(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"all",children:"Todas"}),s.jsx("option",{value:"available",children:"Disponibles"}),s.jsx("option",{value:"occupied",children:"Ocupadas"}),s.jsx("option",{value:"reserved",children:"Reservadas"})]})]})]})]}),s.jsxs("div",{className:"p-4 h-[calc(100vh-120px)]",children:[s.jsx("div",{className:"relative bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 h-full overflow-hidden",children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-gray-100",children:s.jsxs("div",{className:"salon-canvas relative w-full h-full",children:[P.map(re=>s.jsx(tb,{item:re},re.id)),s.jsx(zk,{tables:U,scale:1}),U.map(re=>s.jsx(eb,{table:re,isSelected:r===re.id,onClick:te,onLongPress:pe,scale:1},re.id)),H==="named-accounts"&&U.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center p-8 bg-white bg-opacity-90 rounded-xl shadow-lg max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Nn,{className:"w-8 h-8 text-yellow-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay cuentas creadas"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Haz clic en el botón flotante (+) para crear tu primera cuenta por nombre"}),s.jsxs("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-600 hover:to-amber-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 flex items-center space-x-2 mx-auto",children:[s.jsx(Nn,{className:"w-5 h-5"}),s.jsx("span",{children:"Crear Primera Cuenta"})]})]})})]})})}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),s.jsx("span",{children:"Disponible"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full"}),s.jsx("span",{children:"Ocupada"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),s.jsx("span",{children:"Reservada"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded-full border-2 border-purple-600"}),s.jsx("span",{children:"Mesas Unidas"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center text-xs",children:"★"}),s.jsx("span",{children:"Mesa Principal"})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-gray-100 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Debug - Cambiar Estado de Mesas:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(re=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Mesa ",re.number,":"]}),s.jsx("button",{onClick:()=>ie(re,"available"),className:`px-2 py-1 text-xs rounded ${re.status==="available"?"bg-green-500 text-white":"bg-gray-200"}`,children:"Disp"}),s.jsx("button",{onClick:()=>ie(re,"occupied"),className:`px-2 py-1 text-xs rounded ${re.status==="occupied"?"bg-red-500 text-white":"bg-gray-200"}`,children:"Ocup"}),s.jsx("button",{onClick:()=>ie(re,"reserved"),className:`px-2 py-1 text-xs rounded ${re.status==="reserved"?"bg-yellow-500 text-white":"bg-gray-200"}`,children:"Res"})]},re.id))})]})]}),H==="named-accounts"&&s.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:s.jsxs("button",{onClick:()=>g(!0),className:"px-6 py-4 bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-600 hover:to-amber-700 text-white rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 hover:scale-110 flex items-center space-x-2",title:"Crear Nueva Cuenta",children:[s.jsx(Nn,{className:"w-6 h-6"}),s.jsx("span",{className:"font-semibold text-sm",children:"Nueva Cuenta"})]})}),H==="named-accounts"&&s.jsx("div",{className:"px-4 py-3 bg-yellow-50 border-t border-yellow-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-semibold",children:"📋 Salón de Cuentas por Nombre"}),s.jsx("p",{className:"text-xs",children:"Haz clic en el botón flotante (+) para crear una nueva cuenta"})]}),s.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-600 hover:to-amber-700 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2",children:[s.jsx(Nn,{className:"w-4 h-4"}),s.jsx("span",{children:"Nueva Cuenta"})]})]})}),s.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("p",{children:"Haz clic en una mesa disponible u ocupada para seleccionarla"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["💡 ",s.jsx("strong",{children:"Pulsación sostenida (1s)"})," o ",s.jsx("strong",{children:"clic derecho"})," para asignar nombre temporal"]})]}),s.jsx("button",{onClick:de,className:"btn btn-secondary",children:"Cancelar"})]})})]})]}),m&&v&&s.jsx("div",{className:"fixed inset-0 z-[55] overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:D}),s.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Nn,{className:"w-6 h-6 text-blue-600"}),s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Nombre Temporal - Mesa ",v.number]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del cliente (opcional)"}),s.jsx("input",{type:"text",value:j,onChange:re=>w(re.target.value),placeholder:"Ej: Juanito, María, etc.",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",autoFocus:!0,onKeyPress:re=>{re.key==="Enter"&&C()}}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Este nombre se mantendrá hasta que se cierre la cuenta de la mesa"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:D,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:C,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl font-medium transition-all duration-200 hover:scale-105",children:"Guardar"})]})]})]})}),S&&s.jsx("div",{className:"fixed inset-0 z-[55] overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:Q}),s.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Nn,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nueva Cuenta por Nombre"})]}),s.jsxs("form",{onSubmit:W,children:[$&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Cliente seleccionado:"}),s.jsxs("p",{className:"text-sm text-blue-700",children:[$.name," ",$.lastName]})]}),s.jsx("button",{type:"button",onClick:()=>I(null),className:"text-blue-500 hover:text-blue-700",children:"✕"})]})}),!$&&s.jsx("div",{className:"mb-4",children:s.jsx("button",{type:"button",onClick:()=>R(!0),className:"w-full px-4 py-3 border-2 border-dashed border-blue-300 rounded-xl text-blue-600 hover:border-blue-400 hover:bg-blue-50 transition-colors text-sm font-medium",children:"📋 Seleccionar Cliente Existente"})}),!$&&s.jsxs("div",{className:"mb-4 flex items-center",children:[s.jsx("div",{className:"flex-1 border-t border-gray-300"}),s.jsx("span",{className:"px-3 text-sm text-gray-500",children:"o"}),s.jsx("div",{className:"flex-1 border-t border-gray-300"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:$?"Nombre adicional (opcional)":"Nombre del Cliente *"}),s.jsx("input",{type:"text",required:!$,value:y,onChange:re=>N(re.target.value),placeholder:$?"Nombre adicional...":"Juan Pérez, María García...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 text-sm",autoFocus:!$})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:Q,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-600 hover:to-amber-700 text-white rounded-xl font-medium transition-all duration-200 hover:scale-105",children:"Crear Cuenta"})]})]})]})]})}),A&&s.jsx("div",{className:"fixed inset-0 z-[60] overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:()=>R(!1)}),s.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Seleccionar Cliente"}),s.jsx("button",{onClick:()=>R(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:Z.length===0?s.jsx("p",{className:"text-center text-gray-500 py-4",children:"No hay clientes registrados"}):Z.map(re=>s.jsxs("button",{onClick:()=>{I(re),R(!1)},className:"w-full p-3 text-left border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[re.name," ",re.lastName]}),re.email&&s.jsx("div",{className:"text-sm text-gray-600",children:re.email}),re.balance>0&&s.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["Saldo: €",re.balance.toFixed(2)]})]},re.id))})]})]})})]}):null},Fb=q.createContext(void 0),FC=({children:e})=>{const[t,n]=q.useState(()=>{const d=localStorage.getItem("restaurantConfig");if(d){const m=JSON.parse(d);return{restaurantName:m.restaurantName??"Mi Restaurante",currency:m.currency??"MXN",taxRate:m.taxRate??.16,modifiers:m.modifiers??{global:[],byCategory:{}}}}return{restaurantName:"Mi Restaurante",currency:"MXN",taxRate:.16,modifiers:{global:[],byCategory:{}}}}),c={config:t,updateConfig:d=>{const m={...t,...d};n(m),localStorage.setItem("restaurantConfig",JSON.stringify(m))},getCurrencySymbol:()=>{switch(t.currency){case"MXN":return"$";case"USD":return"$";case"EUR":return"€";default:return"$"}},getTaxRate:()=>t.taxRate,getModifiersForCategory:d=>{if(!t.modifiers)return[];const m=d&&t.modifiers.byCategory[d]||[],h=t.modifiers.global||[];return Array.from(new Set([...h,...m]))},updateCategoryModifiers:(d,m)=>{var v,p;const h={...t,modifiers:{global:((v=t.modifiers)==null?void 0:v.global)||[],byCategory:{...((p=t.modifiers)==null?void 0:p.byCategory)||{},[d]:m}}};n(h),localStorage.setItem("restaurantConfig",JSON.stringify(h))}};return s.jsx(Fb.Provider,{value:c,children:e})},Ri=()=>{const e=q.useContext(Fb);if(e===void 0)throw new Error("useConfig must be used within a ConfigProvider");return e},OC=.21,Ob=e=>e/(1+OC),RC=e=>e-Ob(e),vs=e=>e.toFixed(2),BC=e=>e.reduce((t,n)=>{const r=Ob(n.unitPrice);return t+r*n.quantity},0),$C=e=>e.reduce((t,n)=>{const r=RC(n.unitPrice);return t+r*n.quantity},0),zC=e=>e.reduce((t,n)=>t+n.unitPrice*n.quantity,0),qC="modulepreload",UC=function(e,t){return new URL(e,t).href},Fv={},t1=function(t,n,r){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=UC(i,r),i in Fv)return;Fv[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let m=a.length-1;m>=0;m--){const h=a[m];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":qC,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((m,h)=>{d.addEventListener("load",m),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var nr=Uint8Array,Wr=Uint16Array,jg=Int32Array,t0=new nr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n0=new nr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),n1=new nr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rb=function(e,t){for(var n=new Wr(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var a=new jg(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return{b:n,r:a}},Bb=Rb(t0,2),$b=Bb.b,r1=Bb.r;$b[28]=258,r1[258]=28;var zb=Rb(n0,0),WC=zb.b,Ov=zb.r,a1=new Wr(32768);for(var Vt=0;Vt<32768;++Vt){var as=(Vt&43690)>>1|(Vt&21845)<<1;as=(as&52428)>>2|(as&13107)<<2,as=(as&61680)>>4|(as&3855)<<4,a1[Vt]=((as&65280)>>8|(as&255)<<8)>>1}var ti=function(e,t,n){for(var r=e.length,a=0,i=new Wr(t);a<r;++a)e[a]&&++i[e[a]-1];var o=new Wr(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(n){l=new Wr(1<<t);var c=15-t;for(a=0;a<r;++a)if(e[a])for(var d=a<<4|e[a],m=t-e[a],h=o[e[a]-1]++<<m,v=h|(1<<m)-1;h<=v;++h)l[a1[h]>>c]=d}else for(l=new Wr(r),a=0;a<r;++a)e[a]&&(l[a]=a1[o[e[a]-1]++]>>15-e[a]);return l},Ms=new nr(288);for(var Vt=0;Vt<144;++Vt)Ms[Vt]=8;for(var Vt=144;Vt<256;++Vt)Ms[Vt]=9;for(var Vt=256;Vt<280;++Vt)Ms[Vt]=7;for(var Vt=280;Vt<288;++Vt)Ms[Vt]=8;var Tu=new nr(32);for(var Vt=0;Vt<32;++Vt)Tu[Vt]=5;var HC=ti(Ms,9,0),VC=ti(Ms,9,1),KC=ti(Tu,5,0),GC=ti(Tu,5,1),wm=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},ka=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Nm=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Sg=function(e){return(e+7)/8|0},qb=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new nr(e.subarray(t,n))},YC=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pa=function(e,t,n){var r=new Error(t||YC[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Pa),!n)throw r;return r},XC=function(e,t,n,r){var a=e.length,i=r?r.length:0;if(!a||t.f&&!t.l)return n||new nr(0);var o=!n,l=o||t.i!=2,c=t.i;o&&(n=new nr(a*3));var d=function(ye){var Pe=n.length;if(ye>Pe){var Ie=new nr(Math.max(Pe*2,ye));Ie.set(n),n=Ie}},m=t.f||0,h=t.p||0,v=t.b||0,p=t.l,j=t.d,w=t.m,S=t.n,g=a*8;do{if(!p){m=ka(e,h,1);var y=ka(e,h+1,3);if(h+=3,y)if(y==1)p=VC,j=GC,w=9,S=5;else if(y==2){var $=ka(e,h,31)+257,I=ka(e,h+10,15)+4,M=$+ka(e,h+5,31)+1;h+=14;for(var H=new nr(M),ae=new nr(19),E=0;E<I;++E)ae[n1[E]]=ka(e,h+E*3,7);h+=I*3;for(var P=wm(ae),J=(1<<P)-1,V=ti(ae,P,1),E=0;E<M;){var X=V[ka(e,h,J)];h+=X&15;var N=X>>4;if(N<16)H[E++]=N;else{var Z=0,ee=0;for(N==16?(ee=3+ka(e,h,3),h+=2,Z=H[E-1]):N==17?(ee=3+ka(e,h,7),h+=3):N==18&&(ee=11+ka(e,h,127),h+=7);ee--;)H[E++]=Z}}var U=H.subarray(0,$),te=H.subarray($);w=wm(U),S=wm(te),p=ti(U,w,1),j=ti(te,S,1)}else Pa(1);else{var N=Sg(h)+4,A=e[N-4]|e[N-3]<<8,R=N+A;if(R>a){c&&Pa(0);break}l&&d(v+A),n.set(e.subarray(N,R),v),t.b=v+=A,t.p=h=R*8,t.f=m;continue}if(h>g){c&&Pa(0);break}}l&&d(v+131072);for(var ne=(1<<w)-1,pe=(1<<S)-1,C=h;;C=h){var Z=p[Nm(e,h)&ne],D=Z>>4;if(h+=Z&15,h>g){c&&Pa(0);break}if(Z||Pa(2),D<256)n[v++]=D;else if(D==256){C=h,p=null;break}else{var W=D-254;if(D>264){var E=D-257,Q=t0[E];W=ka(e,h,(1<<Q)-1)+$b[E],h+=Q}var ie=j[Nm(e,h)&pe],de=ie>>4;ie||Pa(3),h+=ie&15;var te=WC[de];if(de>3){var Q=n0[de];te+=Nm(e,h)&(1<<Q)-1,h+=Q}if(h>g){c&&Pa(0);break}l&&d(v+131072);var re=v+W;if(v<te){var B=i-te,oe=Math.min(te,re);for(B+v<0&&Pa(3);v<oe;++v)n[v]=r[B+v]}for(;v<re;++v)n[v]=n[v-te]}}t.l=p,t.p=C,t.b=v,t.f=m,p&&(m=1,t.m=w,t.d=j,t.n=S)}while(!m);return v!=n.length&&o?qb(n,0,v):n.subarray(0,v)},wi=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Fc=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},jm=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,i=n.slice();if(!a)return{t:Wb,l:0};if(a==1){var o=new nr(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(R,$){return R.f-$.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,m=1,h=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};m!=a-1;)l=n[n[d].f<n[h].f?d++:h++],c=n[d!=m&&n[d].f<n[h].f?d++:h++],n[m++]={s:-1,f:l.f+c.f,l,r:c};for(var v=i[0].s,r=1;r<a;++r)i[r].s>v&&(v=i[r].s);var p=new Wr(v+1),j=i1(n[m-1],p,0);if(j>t){var r=0,w=0,S=j-t,g=1<<S;for(i.sort(function($,I){return p[I.s]-p[$.s]||$.f-I.f});r<a;++r){var y=i[r].s;if(p[y]>t)w+=g-(1<<j-p[y]),p[y]=t;else break}for(w>>=S;w>0;){var N=i[r].s;p[N]<t?w-=1<<t-p[N]++-1:++r}for(;r>=0&&w;--r){var A=i[r].s;p[A]==t&&(--p[A],++w)}j=t}return{t:new nr(p),l:j}},i1=function(e,t,n){return e.s==-1?Math.max(i1(e.l,t,n+1),i1(e.r,t,n+1)):t[e.s]=n},Rv=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Wr(++t),r=0,a=e[0],i=1,o=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:n.subarray(0,r),n:t}},Oc=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Ub=function(e,t,n){var r=n.length,a=Sg(t+2);e[a]=r&255,e[a+1]=r>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<r;++i)e[a+i+4]=n[i];return(a+4+r)*8},Bv=function(e,t,n,r,a,i,o,l,c,d,m){wi(t,m++,n),++a[256];for(var h=jm(a,15),v=h.t,p=h.l,j=jm(i,15),w=j.t,S=j.l,g=Rv(v),y=g.c,N=g.n,A=Rv(w),R=A.c,$=A.n,I=new Wr(19),M=0;M<y.length;++M)++I[y[M]&31];for(var M=0;M<R.length;++M)++I[R[M]&31];for(var H=jm(I,7),ae=H.t,E=H.l,P=19;P>4&&!ae[n1[P-1]];--P);var J=d+5<<3,V=Oc(a,Ms)+Oc(i,Tu)+o,X=Oc(a,v)+Oc(i,w)+o+14+3*P+Oc(I,ae)+2*I[16]+3*I[17]+7*I[18];if(c>=0&&J<=V&&J<=X)return Ub(t,m,e.subarray(c,c+d));var Z,ee,U,te;if(wi(t,m,1+(X<V)),m+=2,X<V){Z=ti(v,p,0),ee=v,U=ti(w,S,0),te=w;var ne=ti(ae,E,0);wi(t,m,N-257),wi(t,m+5,$-1),wi(t,m+10,P-4),m+=14;for(var M=0;M<P;++M)wi(t,m+3*M,ae[n1[M]]);m+=3*P;for(var pe=[y,R],C=0;C<2;++C)for(var D=pe[C],M=0;M<D.length;++M){var W=D[M]&31;wi(t,m,ne[W]),m+=ae[W],W>15&&(wi(t,m,D[M]>>5&127),m+=D[M]>>12)}}else Z=HC,ee=Ms,U=KC,te=Tu;for(var M=0;M<l;++M){var Q=r[M];if(Q>255){var W=Q>>18&31;Fc(t,m,Z[W+257]),m+=ee[W+257],W>7&&(wi(t,m,Q>>23&31),m+=t0[W]);var ie=Q&31;Fc(t,m,U[ie]),m+=te[ie],ie>3&&(Fc(t,m,Q>>5&8191),m+=n0[ie])}else Fc(t,m,Z[Q]),m+=ee[Q]}return Fc(t,m,Z[256]),m+ee[256]},JC=new jg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wb=new nr(0),QC=function(e,t,n,r,a,i){var o=i.z||e.length,l=new nr(r+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(r,l.length-a),d=i.l,m=(i.r||0)&7;if(t){m&&(c[0]=i.r>>3);for(var h=JC[t-1],v=h>>13,p=h&8191,j=(1<<n)-1,w=i.p||new Wr(32768),S=i.h||new Wr(j+1),g=Math.ceil(n/3),y=2*g,N=function(Ve){return(e[Ve]^e[Ve+1]<<g^e[Ve+2]<<y)&j},A=new jg(25e3),R=new Wr(288),$=new Wr(32),I=0,M=0,H=i.i||0,ae=0,E=i.w||0,P=0;H+2<o;++H){var J=N(H),V=H&32767,X=S[J];if(w[V]=X,S[J]=V,E<=H){var Z=o-H;if((I>7e3||ae>24576)&&(Z>423||!d)){m=Bv(e,c,0,A,R,$,M,ae,P,H-P,m),ae=I=M=0,P=H;for(var ee=0;ee<286;++ee)R[ee]=0;for(var ee=0;ee<30;++ee)$[ee]=0}var U=2,te=0,ne=p,pe=V-X&32767;if(Z>2&&J==N(H-pe))for(var C=Math.min(v,Z)-1,D=Math.min(32767,H),W=Math.min(258,Z);pe<=D&&--ne&&V!=X;){if(e[H+U]==e[H+U-pe]){for(var Q=0;Q<W&&e[H+Q]==e[H+Q-pe];++Q);if(Q>U){if(U=Q,te=pe,Q>C)break;for(var ie=Math.min(pe,Q-2),de=0,ee=0;ee<ie;++ee){var re=H-pe+ee&32767,B=w[re],oe=re-B&32767;oe>de&&(de=oe,X=re)}}}V=X,X=w[V],pe+=V-X&32767}if(te){A[ae++]=268435456|r1[U]<<18|Ov[te];var ye=r1[U]&31,Pe=Ov[te]&31;M+=t0[ye]+n0[Pe],++R[257+ye],++$[Pe],E=H+U,++I}else A[ae++]=e[H],++R[e[H]]}}for(H=Math.max(H,E);H<o;++H)A[ae++]=e[H],++R[e[H]];m=Bv(e,c,d,A,R,$,M,ae,P,H-P,m),d||(i.r=m&7|c[m/8|0]<<3,m-=7,i.h=S,i.p=w,i.i=H,i.w=E)}else{for(var H=i.w||0;H<o+d;H+=65535){var Ie=H+65535;Ie>=o&&(c[m/8|0]=d,Ie=o),m=Ub(c,m+1,e.subarray(H,Ie))}i.i=o}return qb(l,0,r+Sg(m)+a)},Hb=function(){var e=1,t=0;return{p:function(n){for(var r=e,a=t,i=n.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=r+=n[o];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}e=r,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},ZC=function(e,t,n,r,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new nr(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return QC(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,a)},Vb=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},e8=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=Hb();a.p(t.dictionary),Vb(e,2,a.d())}},t8=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Pa(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Pa(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function s1(e,t){t||(t={});var n=Hb();n.p(e);var r=ZC(e,t,t.dictionary?6:2,4);return e8(r,t),Vb(r,r.length-4,n.d()),r}function n8(e,t){return XC(e.subarray(t8(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var r8=typeof TextDecoder<"u"&&new TextDecoder,a8=0;try{r8.decode(Wb,{stream:!0}),a8=1}catch{}var ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Sm(){ot.console&&typeof ot.console.log=="function"&&ot.console.log.apply(ot.console,arguments)}var Bt={log:Sm,warn:function(e){ot.console&&(typeof ot.console.warn=="function"?ot.console.warn.apply(ot.console,arguments):Sm.call(null,arguments))},error:function(e){ot.console&&(typeof ot.console.error=="function"?ot.console.error.apply(ot.console,arguments):Sm(e))}};function km(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){ro(r.response,t,n)},r.onerror=function(){Bt.error("could not download file")},r.send()}function $v(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function oh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var au,o1,ro=ot.saveAs||((typeof window>"u"?"undefined":Et(window))!=="object"||window!==ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=ot.URL||ot.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?$v(a.href)?km(e,t,n):oh(a,a.target="_blank"):oh(a)):(a.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){oh(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if($v(e))km(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){oh(r)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:Et(i)!=="object"&&(Bt.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return km(e,t,n);var a=e.type==="application/octet-stream",i=/constructor/i.test(ot.HTMLElement)||ot.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Et(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var m=l.result;m=o?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},l.readAsDataURL(e)}else{var c=ot.URL||ot.webkitURL,d=c.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Kb(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,i=n[r].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Cm(e,t){var n=e[0],r=e[1],a=e[2],i=e[3];n=Xn(n,r,a,i,t[0],7,-680876936),i=Xn(i,n,r,a,t[1],12,-389564586),a=Xn(a,i,n,r,t[2],17,606105819),r=Xn(r,a,i,n,t[3],22,-1044525330),n=Xn(n,r,a,i,t[4],7,-176418897),i=Xn(i,n,r,a,t[5],12,1200080426),a=Xn(a,i,n,r,t[6],17,-1473231341),r=Xn(r,a,i,n,t[7],22,-45705983),n=Xn(n,r,a,i,t[8],7,1770035416),i=Xn(i,n,r,a,t[9],12,-1958414417),a=Xn(a,i,n,r,t[10],17,-42063),r=Xn(r,a,i,n,t[11],22,-1990404162),n=Xn(n,r,a,i,t[12],7,1804603682),i=Xn(i,n,r,a,t[13],12,-40341101),a=Xn(a,i,n,r,t[14],17,-1502002290),n=Jn(n,r=Xn(r,a,i,n,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Jn(i,n,r,a,t[6],9,-1069501632),a=Jn(a,i,n,r,t[11],14,643717713),r=Jn(r,a,i,n,t[0],20,-373897302),n=Jn(n,r,a,i,t[5],5,-701558691),i=Jn(i,n,r,a,t[10],9,38016083),a=Jn(a,i,n,r,t[15],14,-660478335),r=Jn(r,a,i,n,t[4],20,-405537848),n=Jn(n,r,a,i,t[9],5,568446438),i=Jn(i,n,r,a,t[14],9,-1019803690),a=Jn(a,i,n,r,t[3],14,-187363961),r=Jn(r,a,i,n,t[8],20,1163531501),n=Jn(n,r,a,i,t[13],5,-1444681467),i=Jn(i,n,r,a,t[2],9,-51403784),a=Jn(a,i,n,r,t[7],14,1735328473),n=Qn(n,r=Jn(r,a,i,n,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Qn(i,n,r,a,t[8],11,-2022574463),a=Qn(a,i,n,r,t[11],16,1839030562),r=Qn(r,a,i,n,t[14],23,-35309556),n=Qn(n,r,a,i,t[1],4,-1530992060),i=Qn(i,n,r,a,t[4],11,1272893353),a=Qn(a,i,n,r,t[7],16,-155497632),r=Qn(r,a,i,n,t[10],23,-1094730640),n=Qn(n,r,a,i,t[13],4,681279174),i=Qn(i,n,r,a,t[0],11,-358537222),a=Qn(a,i,n,r,t[3],16,-722521979),r=Qn(r,a,i,n,t[6],23,76029189),n=Qn(n,r,a,i,t[9],4,-640364487),i=Qn(i,n,r,a,t[12],11,-421815835),a=Qn(a,i,n,r,t[15],16,530742520),n=Zn(n,r=Qn(r,a,i,n,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Zn(i,n,r,a,t[7],10,1126891415),a=Zn(a,i,n,r,t[14],15,-1416354905),r=Zn(r,a,i,n,t[5],21,-57434055),n=Zn(n,r,a,i,t[12],6,1700485571),i=Zn(i,n,r,a,t[3],10,-1894986606),a=Zn(a,i,n,r,t[10],15,-1051523),r=Zn(r,a,i,n,t[1],21,-2054922799),n=Zn(n,r,a,i,t[8],6,1873313359),i=Zn(i,n,r,a,t[15],10,-30611744),a=Zn(a,i,n,r,t[6],15,-1560198380),r=Zn(r,a,i,n,t[13],21,1309151649),n=Zn(n,r,a,i,t[4],6,-145523070),i=Zn(i,n,r,a,t[11],10,-1120210379),a=Zn(a,i,n,r,t[2],15,718787259),r=Zn(r,a,i,n,t[9],21,-343485551),e[0]=xs(n,e[0]),e[1]=xs(r,e[1]),e[2]=xs(a,e[2]),e[3]=xs(i,e[3])}function r0(e,t,n,r,a,i){return t=xs(xs(t,e),xs(r,i)),xs(t<<a|t>>>32-a,n)}function Xn(e,t,n,r,a,i,o){return r0(t&n|~t&r,e,t,a,i,o)}function Jn(e,t,n,r,a,i,o){return r0(t&r|n&~r,e,t,a,i,o)}function Qn(e,t,n,r,a,i,o){return r0(t^n^r,e,t,a,i,o)}function Zn(e,t,n,r,a,i,o){return r0(n^(t|~r),e,t,a,i,o)}function Gb(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Cm(r,i8(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(Cm(r,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,Cm(r,a),r}function i8(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}au=ot.atob.bind(ot),o1=ot.btoa.bind(ot);var zv="0123456789abcdef".split("");function s8(e){for(var t="",n=0;n<4;n++)t+=zv[e>>8*n+4&15]+zv[e>>8*n&15];return t}function o8(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function l1(e){return Gb(e).map(o8).join("")}var l8=function(e){for(var t=0;t<e.length;t++)e[t]=s8(e[t]);return e.join("")}(Gb("hello"))!="5d41402abc4b2a76b9719d911017c592";function xs(e,t){if(l8){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function c1(e,t){var n,r,a,i;if(e!==n){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var m=l[c];d=(d+m+o.charCodeAt(c))%256,l[c]=l[d],l[d]=m}n=e,r=l}else l=r;var h=t.length,v=0,p=0,j="";for(c=0;c<h;c++)p=(p+(m=l[v=(v+1)%256]))%256,l[v]=l[p],l[p]=m,o=l[(l[v]+l[p])%256],j+=String.fromCharCode(t.charCodeAt(c)^o);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var qv={print:4,modify:8,copy:16,"annot-forms":32};function cl(e,t,n,r){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(qv.perm!==void 0)throw new Error("Invalid permission: "+l);a+=qv[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=l1(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=c1(this.encryptionKey,this.padding)}function ul(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[r]}return t}function Uv(e){if(Et(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,a){if(a=a||!1,typeof n!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[r,!!a],i},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[n]){var o=t[n][i];try{o[0].apply(e,r)}catch(l){ot.console&&Bt.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function kf(e){if(!(this instanceof kf))return new kf(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Yb(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function ao(e,t,n,r,a){if(!(this instanceof ao))return new ao(e,t,n,r,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,Yb.call(this,r,a)}function jl(e,t,n,r,a){if(!(this instanceof jl))return new jl(e,t,n,r,a);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Yb.call(this,r,a)}function st(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",m=null;Et(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,a=e.format||a,i=e.compress||e.compressPdf||i,(m=e.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=Uv;var j="1.3",w=p.__private__.getPdfVersion=function(){return j};p.__private__.setPdfVersion=function(x){j=x};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return S};var g=p.__private__.getPageFormat=function(x){return S[x]};a=a||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},N=y.COMPAT;function A(){this.saveGraphicsState(),G(new nt(Te,0,0,-Te,0,Wi()*Te).toString()+" cm"),this.setFontSize(this.getFontSize()/Te),d="n",N=y.ADVANCED}function R(){this.restoreGraphicsState(),d="S",N=y.COMPAT}var $=p.__private__.combineFontStyleAndFontWeight=function(x,L){if(x=="bold"&&L=="normal"||x=="bold"&&L==400||x=="normal"&&L=="italic"||x=="bold"&&L=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return L&&(x=L==400||L==="normal"?x==="italic"?"italic":"normal":L!=700&&L!=="bold"||x!=="normal"?(L==700?"bold":L)+""+x:"bold"),x};p.advancedAPI=function(x){var L=N===y.COMPAT;return L&&A.call(this),typeof x!="function"||(x(this),L&&R.call(this)),this},p.compatAPI=function(x){var L=N===y.ADVANCED;return L&&R.call(this),typeof x!="function"||(x(this),L&&A.call(this)),this},p.isAdvancedAPI=function(){return N===y.ADVANCED};var I,M=function(x){if(N!==y.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},H=p.roundToPrecision=p.__private__.roundToPrecision=function(x,L){var Y=t||L;if(isNaN(x)||isNaN(Y))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(Y).replace(/0+$/,"")};I=p.hpf=p.__private__.hpf=typeof c=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return H(x,c)}:c==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return H(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return H(x,16)};var ae=p.f2=p.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return H(x,2)},E=p.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return H(x,3)},P=p.scale=p.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return N===y.COMPAT?x*Te:N===y.ADVANCED?x:void 0},J=function(x){return N===y.COMPAT?Wi()-x:N===y.ADVANCED?x:void 0},V=function(x){return P(J(x))};p.__private__.setPrecision=p.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var X,Z="00000000000000000000000000000000",ee=p.__private__.getFileId=function(){return Z},U=p.__private__.setFileId=function(x){return Z=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Vn=new cl(m.userPermissions,m.userPassword,m.ownerPassword,Z)),Z};p.setFileId=function(x){return U(x),this},p.getFileId=function(){return ee()};var te=p.__private__.convertDateToPDFDate=function(x){var L=x.getTimezoneOffset(),Y=L<0?"+":"-",se=Math.floor(Math.abs(L/60)),me=Math.abs(L%60),we=[Y,W(se),"'",W(me),"'"].join("");return["D:",x.getFullYear(),W(x.getMonth()+1),W(x.getDate()),W(x.getHours()),W(x.getMinutes()),W(x.getSeconds()),we].join("")},ne=p.__private__.convertPDFDateToDate=function(x){var L=parseInt(x.substr(2,4),10),Y=parseInt(x.substr(6,2),10)-1,se=parseInt(x.substr(8,2),10),me=parseInt(x.substr(10,2),10),we=parseInt(x.substr(12,2),10),Le=parseInt(x.substr(14,2),10);return new Date(L,Y,se,me,we,Le,0)},pe=p.__private__.setCreationDate=function(x){var L;if(x===void 0&&(x=new Date),x instanceof Date)L=te(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");L=x}return X=L},C=p.__private__.getCreationDate=function(x){var L=X;return x==="jsDate"&&(L=ne(X)),L};p.setCreationDate=function(x){return pe(x),this},p.getCreationDate=function(x){return C(x)};var D,W=p.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},Q=p.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},ie=0,de=[],re=[],B=0,oe=[],ye=[],Pe=!1,Ie=re,Ve=function(){ie=0,B=0,re=[],de=[],oe=[],xa=nn(),Ir=nn()};p.__private__.setCustomOutputDestination=function(x){Pe=!0,Ie=x};var xe=function(x){Pe||(Ie=x)};p.__private__.resetCustomOutputDestination=function(){Pe=!1,Ie=re};var G=p.__private__.out=function(x){return x=x.toString(),B+=x.length+1,Ie.push(x),Ie},Xe=p.__private__.write=function(x){return G(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},Ue=p.__private__.getArrayBuffer=function(x){for(var L=x.length,Y=new ArrayBuffer(L),se=new Uint8Array(Y);L--;)se[L]=x.charCodeAt(L);return Y},Ae=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ae};var De=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(x){return De=N===y.ADVANCED?x/Te:x,this};var Me,Fe=p.__private__.getFontSize=p.getFontSize=function(){return N===y.COMPAT?De:De*Te},Ye=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(x){return Ye=x,this},p.__private__.getR2L=p.getR2L=function(){return Ye};var lt,_e=p.__private__.setZoomMode=function(x){var L=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Me=x;else if(isNaN(x)){if(L.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Me=x}else Me=parseInt(x,10)};p.__private__.getZoomMode=function(){return Me};var Ge,Ze=p.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');lt=x};p.__private__.getPageMode=function(){return lt};var yt=p.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');Ge=x};p.__private__.getLayoutMode=function(){return Ge},p.__private__.setDisplayMode=p.setDisplayMode=function(x,L,Y){return _e(x),yt(L),Ze(Y),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(x){if(Object.keys(et).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[x]},p.__private__.getDocumentProperties=function(){return et},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(x){for(var L in et)et.hasOwnProperty(L)&&x[L]&&(et[L]=x[L]);return this},p.__private__.setDocumentProperty=function(x,L){if(Object.keys(et).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[x]=L};var ht,Te,vn,wt,it,bt={},kt={},Dn=[],_t={},ii={},Gt={},Lr={},va=null,Yt=0,ut=[],Ct=new Uv(p),si=e.hotfixes||[],kn={},Xr={},Jr=[],nt=function x(L,Y,se,me,we,Le){if(!(this instanceof x))return new x(L,Y,se,me,we,Le);isNaN(L)&&(L=1),isNaN(Y)&&(Y=0),isNaN(se)&&(se=0),isNaN(me)&&(me=1),isNaN(we)&&(we=0),isNaN(Le)&&(Le=0),this._matrix=[L,Y,se,me,we,Le]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(x)},nt.prototype.multiply=function(x){var L=x.sx*this.sx+x.shy*this.shx,Y=x.sx*this.shy+x.shy*this.sy,se=x.shx*this.sx+x.sy*this.shx,me=x.shx*this.shy+x.sy*this.sy,we=x.tx*this.sx+x.ty*this.shx+this.tx,Le=x.tx*this.shy+x.ty*this.sy+this.ty;return new nt(L,Y,se,me,we,Le)},nt.prototype.decompose=function(){var x=this.sx,L=this.shy,Y=this.shx,se=this.sy,me=this.tx,we=this.ty,Le=Math.sqrt(x*x+L*L),ze=(x/=Le)*Y+(L/=Le)*se;Y-=x*ze,se-=L*ze;var Qe=Math.sqrt(Y*Y+se*se);return ze/=Qe,x*(se/=Qe)<L*(Y/=Qe)&&(x=-x,L=-L,ze=-ze,Le=-Le),{scale:new nt(Le,0,0,Qe,0,0),translate:new nt(1,0,0,1,me,we),rotate:new nt(x,L,-L,x,0,0),skew:new nt(1,0,ze,1,0,0)}},nt.prototype.toString=function(x){return this.join(" ")},nt.prototype.inversed=function(){var x=this.sx,L=this.shy,Y=this.shx,se=this.sy,me=this.tx,we=this.ty,Le=1/(x*se-L*Y),ze=se*Le,Qe=-L*Le,gt=-Y*Le,ft=x*Le;return new nt(ze,Qe,gt,ft,-ze*me-gt*we,-Qe*me-ft*we)},nt.prototype.applyToPoint=function(x){var L=x.x*this.sx+x.y*this.shx+this.tx,Y=x.x*this.shy+x.y*this.sy+this.ty;return new Bo(L,Y)},nt.prototype.applyToRectangle=function(x){var L=this.applyToPoint(x),Y=this.applyToPoint(new Bo(x.x+x.w,x.y+x.h));return new oc(L.x,L.y,Y.x-L.x,Y.y-L.y)},nt.prototype.clone=function(){var x=this.sx,L=this.shy,Y=this.shx,se=this.sy,me=this.tx,we=this.ty;return new nt(x,L,Y,se,me,we)},p.Matrix=nt;var Er=p.matrixMult=function(x,L){return L.multiply(x)},Qr=new nt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Qr;var Hn=function(x,L){if(!ii[x]){var Y=(L instanceof ao?"Sh":"P")+(Object.keys(_t).length+1).toString(10);L.id=Y,ii[x]=Y,_t[Y]=L,Ct.publish("addPattern",L)}};p.ShadingPattern=ao,p.TilingPattern=jl,p.addShadingPattern=function(x,L){return M("addShadingPattern()"),Hn(x,L),this},p.beginTilingPattern=function(x){M("beginTilingPattern()"),ud(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},p.endTilingPattern=function(x,L){M("endTilingPattern()"),L.stream=ye[D].join(`
`),Hn(x,L),Ct.publish("endTilingPattern",L),Jr.pop().restore()};var cn=p.__private__.newObject=function(){var x=nn();return ir(x,!0),x},nn=p.__private__.newObjectDeferred=function(){return ie++,de[ie]=function(){return B},ie},ir=function(x,L){return L=typeof L=="boolean"&&L,de[x]=B,L&&G(x+" 0 obj"),x},zi=p.__private__.newAdditionalObject=function(){var x={objId:nn(),content:""};return oe.push(x),x},xa=nn(),Ir=nn(),sr=p.__private__.decodeColorString=function(x){var L=x.split(" ");if(L.length!==2||L[1]!=="g"&&L[1]!=="G")L.length===5&&(L[4]==="k"||L[4]==="K")&&(L=[(1-L[0])*(1-L[3]),(1-L[1])*(1-L[3]),(1-L[2])*(1-L[3]),"r"]);else{var Y=parseFloat(L[0]);L=[Y,Y,Y,"r"]}for(var se="#",me=0;me<3;me++)se+=("0"+Math.floor(255*parseFloat(L[me])).toString(16)).slice(-2);return se},Dr=p.__private__.encodeColorString=function(x){var L;typeof x=="string"&&(x={ch1:x});var Y=x.ch1,se=x.ch2,me=x.ch3,we=x.ch4,Le=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Y=="string"&&Y.charAt(0)!=="#"){var ze=new Kb(Y);if(ze.ok)Y=ze.toHex();else if(!/^\d*\.?\d*$/.test(Y))throw new Error('Invalid color "'+Y+'" passed to jsPDF.encodeColorString.')}if(typeof Y=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Y)&&(Y="#"+Y[1]+Y[1]+Y[2]+Y[2]+Y[3]+Y[3]),typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y)){var Qe=parseInt(Y.substr(1),16);Y=Qe>>16&255,se=Qe>>8&255,me=255&Qe}if(se===void 0||we===void 0&&Y===se&&se===me)if(typeof Y=="string")L=Y+" "+Le[0];else switch(x.precision){case 2:L=ae(Y/255)+" "+Le[0];break;case 3:default:L=E(Y/255)+" "+Le[0]}else if(we===void 0||Et(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return L=["1.","1.","1.",Le[1]].join(" ");if(typeof Y=="string")L=[Y,se,me,Le[1]].join(" ");else switch(x.precision){case 2:L=[ae(Y/255),ae(se/255),ae(me/255),Le[1]].join(" ");break;default:case 3:L=[E(Y/255),E(se/255),E(me/255),Le[1]].join(" ")}}else if(typeof Y=="string")L=[Y,se,me,we,Le[2]].join(" ");else switch(x.precision){case 2:L=[ae(Y),ae(se),ae(me),ae(we),Le[2]].join(" ");break;case 3:default:L=[E(Y),E(se),E(me),E(we),Le[2]].join(" ")}return L},Zr=p.__private__.getFilters=function(){return o},xr=p.__private__.putStream=function(x){var L=(x=x||{}).data||"",Y=x.filters||Zr(),se=x.alreadyAppliedFilters||[],me=x.addLength1||!1,we=L.length,Le=x.objectId,ze=function(Kn){return Kn};if(m!==null&&Le===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(ze=Vn.encryptor(Le,0));var Qe={};Y===!0&&(Y=["FlateEncode"]);var gt=x.additionalKeyValues||[],ft=(Qe=st.API.processDataByFilters!==void 0?st.API.processDataByFilters(L,Y):{data:L,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(Qe.data.length!==0&&(gt.push({key:"Length",value:Qe.data.length}),me===!0&&gt.push({key:"Length1",value:we})),ft.length!=0)if(ft.split("/").length-1==1)gt.push({key:"Filter",value:ft});else{gt.push({key:"Filter",value:"["+ft+"]"});for(var St=0;St<gt.length;St+=1)if(gt[St].key==="DecodeParms"){for(var Qt=[],rn=0;rn<Qe.reverseChain.split("/").length-1;rn+=1)Qt.push("null");Qt.push(gt[St].value),gt[St].value="["+Qt.join(" ")+"]"}}G("<<");for(var yn=0;yn<gt.length;yn++)G("/"+gt[yn].key+" "+gt[yn].value);G(">>"),Qe.data.length!==0&&(G("stream"),G(ze(Qe.data)),G("endstream"))},Tr=p.__private__.putPage=function(x){var L=x.number,Y=x.data,se=x.objId,me=x.contentsObjId;ir(se,!0),G("<</Type /Page"),G("/Parent "+x.rootDictionaryObjId+" 0 R"),G("/Resources "+x.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(I(x.mediaBox.bottomLeftX))+" "+parseFloat(I(x.mediaBox.bottomLeftY))+" "+I(x.mediaBox.topRightX)+" "+I(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&G("/CropBox ["+I(x.cropBox.bottomLeftX)+" "+I(x.cropBox.bottomLeftY)+" "+I(x.cropBox.topRightX)+" "+I(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&G("/BleedBox ["+I(x.bleedBox.bottomLeftX)+" "+I(x.bleedBox.bottomLeftY)+" "+I(x.bleedBox.topRightX)+" "+I(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&G("/TrimBox ["+I(x.trimBox.bottomLeftX)+" "+I(x.trimBox.bottomLeftY)+" "+I(x.trimBox.topRightX)+" "+I(x.trimBox.topRightY)+"]"),x.artBox!==null&&G("/ArtBox ["+I(x.artBox.bottomLeftX)+" "+I(x.artBox.bottomLeftY)+" "+I(x.artBox.topRightX)+" "+I(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&G("/UserUnit "+x.userUnit),Ct.publish("putPage",{objId:se,pageContext:ut[L],pageNumber:L,page:Y}),G("/Contents "+me+" 0 R"),G(">>"),G("endobj");var we=Y.join(`
`);return N===y.ADVANCED&&(we+=`
Q`),ir(me,!0),xr({data:we,filters:Zr(),objectId:me}),G("endobj"),se},Ra=p.__private__.putPages=function(){var x,L,Y=[];for(x=1;x<=Yt;x++)ut[x].objId=nn(),ut[x].contentsObjId=nn();for(x=1;x<=Yt;x++)Y.push(Tr({number:x,data:ye[x],objId:ut[x].objId,contentsObjId:ut[x].contentsObjId,mediaBox:ut[x].mediaBox,cropBox:ut[x].cropBox,bleedBox:ut[x].bleedBox,trimBox:ut[x].trimBox,artBox:ut[x].artBox,userUnit:ut[x].userUnit,rootDictionaryObjId:xa,resourceDictionaryObjId:Ir}));ir(xa,!0),G("<</Type /Pages");var se="/Kids [";for(L=0;L<Yt;L++)se+=Y[L]+" 0 R ";G(se+"]"),G("/Count "+Yt),G(">>"),G("endobj"),Ct.publish("postPutPages")},oi=function(x){Ct.publish("putFont",{font:x,out:G,newObject:cn,putStream:xr}),x.isAlreadyPutted!==!0&&(x.objectNumber=cn(),G("<<"),G("/Type /Font"),G("/BaseFont /"+ul(x.postScriptName)),G("/Subtype /Type1"),typeof x.encoding=="string"&&G("/Encoding /"+x.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},li=function(){for(var x in bt)bt.hasOwnProperty(x)&&(h===!1||h===!0&&v.hasOwnProperty(x))&&oi(bt[x])},ci=function(x){x.objectNumber=cn();var L=[];L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Form"}),L.push({key:"BBox",value:"["+[I(x.x),I(x.y),I(x.x+x.width),I(x.y+x.height)].join(" ")+"]"}),L.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var Y=x.pages[1].join(`
`);xr({data:Y,additionalKeyValues:L,objectId:x.objectNumber}),G("endobj")},fe=function(){for(var x in kn)kn.hasOwnProperty(x)&&ci(kn[x])},Be=function(x,L){var Y,se=[],me=1/(L-1);for(Y=0;Y<1;Y+=me)se.push(Y);if(se.push(1),x[0].offset!=0){var we={offset:0,color:x[0].color};x.unshift(we)}if(x[x.length-1].offset!=1){var Le={offset:1,color:x[x.length-1].color};x.push(Le)}for(var ze="",Qe=0,gt=0;gt<se.length;gt++){for(Y=se[gt];Y>x[Qe+1].offset;)Qe++;var ft=x[Qe].offset,St=(Y-ft)/(x[Qe+1].offset-ft),Qt=x[Qe].color,rn=x[Qe+1].color;ze+=Q(Math.round((1-St)*Qt[0]+St*rn[0]).toString(16))+Q(Math.round((1-St)*Qt[1]+St*rn[1]).toString(16))+Q(Math.round((1-St)*Qt[2]+St*rn[2]).toString(16))}return ze.trim()},Oe=function(x,L){L||(L=21);var Y=cn(),se=Be(x.colors,L),me=[];me.push({key:"FunctionType",value:"0"}),me.push({key:"Domain",value:"[0.0 1.0]"}),me.push({key:"Size",value:"["+L+"]"}),me.push({key:"BitsPerSample",value:"8"}),me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xr({data:se,additionalKeyValues:me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Y}),G("endobj"),x.objectNumber=cn(),G("<< /ShadingType "+x.type),G("/ColorSpace /DeviceRGB");var we="/Coords ["+I(parseFloat(x.coords[0]))+" "+I(parseFloat(x.coords[1]))+" ";x.type===2?we+=I(parseFloat(x.coords[2]))+" "+I(parseFloat(x.coords[3])):we+=I(parseFloat(x.coords[2]))+" "+I(parseFloat(x.coords[3]))+" "+I(parseFloat(x.coords[4]))+" "+I(parseFloat(x.coords[5])),G(we+="]"),x.matrix&&G("/Matrix ["+x.matrix.toString()+"]"),G("/Function "+Y+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Je=function(x,L){var Y=nn(),se=cn();L.push({resourcesOid:Y,objectOid:se}),x.objectNumber=se;var me=[];me.push({key:"Type",value:"/Pattern"}),me.push({key:"PatternType",value:"1"}),me.push({key:"PaintType",value:"1"}),me.push({key:"TilingType",value:"1"}),me.push({key:"BBox",value:"["+x.boundingBox.map(I).join(" ")+"]"}),me.push({key:"XStep",value:I(x.xStep)}),me.push({key:"YStep",value:I(x.yStep)}),me.push({key:"Resources",value:Y+" 0 R"}),x.matrix&&me.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),xr({data:x.stream,additionalKeyValues:me,objectId:x.objectNumber}),G("endobj")},pt=function(x){var L;for(L in _t)_t.hasOwnProperty(L)&&(_t[L]instanceof ao?Oe(_t[L]):_t[L]instanceof jl&&Je(_t[L],x))},It=function(x){for(var L in x.objectNumber=cn(),G("<<"),x)switch(L){case"opacity":G("/ca "+ae(x[L]));break;case"stroke-opacity":G("/CA "+ae(x[L]))}G(">>"),G("endobj")},Mr=function(){var x;for(x in Gt)Gt.hasOwnProperty(x)&&It(Gt[x])},or=function(){for(var x in G("/XObject <<"),kn)kn.hasOwnProperty(x)&&kn[x].objectNumber>=0&&G("/"+x+" "+kn[x].objectNumber+" 0 R");Ct.publish("putXobjectDict"),G(">>")},xn=function(){Vn.oid=cn(),G("<<"),G("/Filter /Standard"),G("/V "+Vn.v),G("/R "+Vn.r),G("/U <"+Vn.toHexString(Vn.U)+">"),G("/O <"+Vn.toHexString(Vn.O)+">"),G("/P "+Vn.P),G(">>"),G("endobj")},ea=function(){for(var x in G("/Font <<"),bt)bt.hasOwnProperty(x)&&(h===!1||h===!0&&v.hasOwnProperty(x))&&G("/"+x+" "+bt[x].objectNumber+" 0 R");G(">>")},qs=function(){if(Object.keys(_t).length>0){for(var x in G("/Shading <<"),_t)_t.hasOwnProperty(x)&&_t[x]instanceof ao&&_t[x].objectNumber>=0&&G("/"+x+" "+_t[x].objectNumber+" 0 R");Ct.publish("putShadingPatternDict"),G(">>")}},Ba=function(x){if(Object.keys(_t).length>0){for(var L in G("/Pattern <<"),_t)_t.hasOwnProperty(L)&&_t[L]instanceof p.TilingPattern&&_t[L].objectNumber>=0&&_t[L].objectNumber<x&&G("/"+L+" "+_t[L].objectNumber+" 0 R");Ct.publish("putTilingPatternDict"),G(">>")}},a0=function(){if(Object.keys(Gt).length>0){var x;for(x in G("/ExtGState <<"),Gt)Gt.hasOwnProperty(x)&&Gt[x].objectNumber>=0&&G("/"+x+" "+Gt[x].objectNumber+" 0 R");Ct.publish("putGStateDict"),G(">>")}},un=function(x){ir(x.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ea(),qs(),Ba(x.objectOid),a0(),or(),G(">>"),G("endobj")},Yu=function(){var x=[];li(),Mr(),fe(),pt(x),Ct.publish("putResources"),x.forEach(un),un({resourcesOid:Ir,objectOid:Number.MAX_SAFE_INTEGER}),Ct.publish("postPutResources")},Xu=function(){Ct.publish("putAdditionalObjects");for(var x=0;x<oe.length;x++){var L=oe[x];ir(L.objId,!0),G(L.content),G("endobj")}Ct.publish("postPutAdditionalObjects")},Ju=function(x){kt[x.fontName]=kt[x.fontName]||{},kt[x.fontName][x.fontStyle]=x.id},Ql=function(x,L,Y,se,me){var we={id:"F"+(Object.keys(bt).length+1).toString(10),postScriptName:x,fontName:L,fontStyle:Y,encoding:se,isStandardFont:me||!1,metadata:{}};return Ct.publish("addFont",{font:we,instance:this}),bt[we.id]=we,Ju(we),we.id},i0=function(x){for(var L=0,Y=Ae.length;L<Y;L++){var se=Ql.call(this,x[L][0],x[L][1],x[L][2],Ae[L][3],!0);h===!1&&(v[se]=!0);var me=x[L][0].split("-");Ju({id:se,fontName:me[0],fontStyle:me[1]||""})}Ct.publish("addFonts",{fonts:bt,dictionary:kt})},ya=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(se){var L=se.stack||"";~L.indexOf(" at ")&&(L=L.split(" at ")[1]);var Y="Error in function "+L.split(`
`)[0].split("<")[0]+": "+se.message;if(!ot.console)throw new Error(Y);ot.console.error(Y,se),ot.alert&&alert(Y)}},x.foo.bar=x,x.foo},Do=function(x,L){var Y,se,me,we,Le,ze,Qe,gt,ft;if(me=(L=L||{}).sourceEncoding||"Unicode",Le=L.outputEncoding,(L.autoencode||Le)&&bt[ht].metadata&&bt[ht].metadata[me]&&bt[ht].metadata[me].encoding&&(we=bt[ht].metadata[me].encoding,!Le&&bt[ht].encoding&&(Le=bt[ht].encoding),!Le&&we.codePages&&(Le=we.codePages[0]),typeof Le=="string"&&(Le=we[Le]),Le)){for(Qe=!1,ze=[],Y=0,se=x.length;Y<se;Y++)(gt=Le[x.charCodeAt(Y)])?ze.push(String.fromCharCode(gt)):ze.push(x[Y]),ze[Y].charCodeAt(0)>>8&&(Qe=!0);x=ze.join("")}for(Y=x.length;Qe===void 0&&Y!==0;)x.charCodeAt(Y-1)>>8&&(Qe=!0),Y--;if(!Qe)return x;for(ze=L.noBOM?[]:[254,255],Y=0,se=x.length;Y<se;Y++){if((ft=(gt=x.charCodeAt(Y))>>8)>>8)throw new Error("Character at position "+Y+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ze.push(ft),ze.push(gt-(ft<<8))}return String.fromCharCode.apply(void 0,ze)},yr=p.__private__.pdfEscape=p.pdfEscape=function(x,L){return Do(x,L).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zl=p.__private__.beginPage=function(x){ye[++Yt]=[],ut[Yt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},Zu(Yt),xe(ye[D])},Qu=function(x,L){var Y,se,me;switch(n=L||n,typeof x=="string"&&(Y=g(x.toLowerCase()),Array.isArray(Y)&&(se=Y[0],me=Y[1])),Array.isArray(x)&&(se=x[0]*Te,me=x[1]*Te),isNaN(se)&&(se=a[0],me=a[1]),(se>14400||me>14400)&&(Bt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),me=Math.min(14400,me)),a=[se,me],n.substr(0,1)){case"l":me>se&&(a=[me,se]);break;case"p":se>me&&(a=[me,se])}Zl(a),id(rc),G(ba),ic!==0&&G(ic+" J"),sc!==0&&G(sc+" j"),Ct.publish("addPage",{pageNumber:Yt})},s0=function(x){x>0&&x<=Yt&&(ye.splice(x,1),ut.splice(x,1),Yt--,D>Yt&&(D=Yt),this.setPage(D))},Zu=function(x){x>0&&x<=Yt&&(D=x)},o0=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ye.length-1},ed=function(x,L,Y){var se,me=void 0;return Y=Y||{},x=x!==void 0?x:bt[ht].fontName,L=L!==void 0?L:bt[ht].fontStyle,se=x.toLowerCase(),kt[se]!==void 0&&kt[se][L]!==void 0?me=kt[se][L]:kt[x]!==void 0&&kt[x][L]!==void 0?me=kt[x][L]:Y.disableWarning===!1&&Bt.warn("Unable to look up font label for font '"+x+"', '"+L+"'. Refer to getFontList() for available fonts."),me||Y.noFallback||(me=kt.times[L])==null&&(me=kt.times.normal),me},l0=p.__private__.putInfo=function(){var x=cn(),L=function(se){return se};for(var Y in m!==null&&(L=Vn.encryptor(x,0)),G("<<"),G("/Producer ("+yr(L("jsPDF "+st.version))+")"),et)et.hasOwnProperty(Y)&&et[Y]&&G("/"+Y.substr(0,1).toUpperCase()+Y.substr(1)+" ("+yr(L(et[Y]))+")");G("/CreationDate ("+yr(L(X))+")"),G(">>"),G("endobj")},ec=p.__private__.putCatalog=function(x){var L=(x=x||{}).rootDictionaryObjId||xa;switch(cn(),G("<<"),G("/Type /Catalog"),G("/Pages "+L+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Y=""+Me;Y.substr(Y.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&G("/OpenAction [3 0 R /XYZ null null "+ae(Me)+"]")}switch(Ge||(Ge="continuous"),Ge){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}lt&&G("/PageMode /"+lt),Ct.publish("putCatalog"),G(">>"),G("endobj")},c0=p.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(ie+1)),G("/Root "+ie+" 0 R"),G("/Info "+(ie-1)+" 0 R"),m!==null&&G("/Encrypt "+Vn.oid+" 0 R"),G("/ID [ <"+Z+"> <"+Z+"> ]"),G(">>")},u0=p.__private__.putHeader=function(){G("%PDF-"+j),G("%ºß¬à")},d0=p.__private__.putXRef=function(){var x="0000000000";G("xref"),G("0 "+(ie+1)),G("0000000000 65535 f ");for(var L=1;L<=ie;L++)typeof de[L]=="function"?G((x+de[L]()).slice(-10)+" 00000 n "):de[L]!==void 0?G((x+de[L]).slice(-10)+" 00000 n "):G("0000000000 00000 n ")},ui=p.__private__.buildDocument=function(){Ve(),xe(re),Ct.publish("buildDocument"),u0(),Ra(),Xu(),Yu(),m!==null&&xn(),l0(),ec();var x=B;return d0(),c0(),G("startxref"),G(""+x),G("%%EOF"),xe(ye[D]),re.join(`
`)},To=p.__private__.getBlob=function(x){return new Blob([Ue(x)],{type:"application/pdf"})},Mo=p.output=p.__private__.output=ya(function(x,L){switch(typeof(L=L||{})=="string"?L={filename:L}:L.filename=L.filename||"generated.pdf",x){case void 0:return ui();case"save":p.save(L.filename);break;case"arraybuffer":return Ue(ui());case"blob":return To(ui());case"bloburi":case"bloburl":if(ot.URL!==void 0&&typeof ot.URL.createObjectURL=="function")return ot.URL&&ot.URL.createObjectURL(To(ui()))||void 0;Bt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Y="",se=ui();try{Y=o1(se)}catch{Y=o1(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+L.filename+";base64,"+Y;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ot)==="[object Window]"){var me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';L.pdfObjectUrl&&(me=L.pdfObjectUrl,we="");var Le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+me+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(L)+");<\/script></body></html>",ze=ot.open();return ze!==null&&ze.document.write(Le),ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ot)==="[object Window]"){var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(L.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+L.filename+'" width="500px" height="400px" /></body></html>',gt=ot.open();if(gt!==null){gt.document.write(Qe);var ft=this;gt.document.documentElement.querySelector("#pdfViewer").onload=function(){gt.document.title=L.filename,gt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ft.output("bloburl"))}}return gt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",L)+'"></iframe></body></html>',Qt=ot.open();if(Qt!==null&&(Qt.document.write(St),Qt.document.title=L.filename),Qt||typeof safari>"u")return Qt;break;case"datauri":case"dataurl":return ot.document.location.href=this.output("datauristring",L);default:return null}}),td=function(x){return Array.isArray(si)===!0&&si.indexOf(x)>-1};switch(r){case"pt":Te=1;break;case"mm":Te=72/25.4;break;case"cm":Te=72/2.54;break;case"in":Te=72;break;case"px":Te=td("px_scaling")==1?.75:96/72;break;case"pc":case"em":Te=12;break;case"ex":Te=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Te=r}var Vn=null;pe(),U();var h0=function(x){return m!==null?Vn.encryptor(x,0):function(L){return L}},nd=p.__private__.getPageInfo=p.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[x].objId,pageNumber:x,pageContext:ut[x]}},dt=p.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var L in ut)if(ut[L].objId===x)break;return nd(L)},f0=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:ut[D].objId,pageNumber:D,pageContext:ut[D]}};p.addPage=function(){return Qu.apply(this,arguments),this},p.setPage=function(){return Zu.apply(this,arguments),xe.call(this,ye[D]),this},p.insertPage=function(x){return this.addPage(),this.movePage(D,x),this},p.movePage=function(x,L){var Y,se;if(x>L){Y=ye[x],se=ut[x];for(var me=x;me>L;me--)ye[me]=ye[me-1],ut[me]=ut[me-1];ye[L]=Y,ut[L]=se,this.setPage(L)}else if(x<L){Y=ye[x],se=ut[x];for(var we=x;we<L;we++)ye[we]=ye[we+1],ut[we]=ut[we+1];ye[L]=Y,ut[L]=se,this.setPage(L)}return this},p.deletePage=function(){return s0.apply(this,arguments),this},p.__private__.text=p.text=function(x,L,Y,se,me){var we,Le,ze,Qe,gt,ft,St,Qt,rn,yn=(se=se||{}).scope||this;if(typeof x=="number"&&typeof L=="number"&&(typeof Y=="string"||Array.isArray(Y))){var Kn=Y;Y=L,L=x,x=Kn}if(arguments[3]instanceof nt?(M("The transform parameter of text() with a Matrix value"),rn=me):(ze=arguments[4],Qe=arguments[5],Et(St=arguments[3])==="object"&&St!==null||(typeof ze=="string"&&(Qe=ze,ze=null),typeof St=="string"&&(Qe=St,St=null),typeof St=="number"&&(ze=St,St=null),se={flags:St,angle:ze,align:Qe})),isNaN(L)||isNaN(Y)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return yn;var Tn="",wa=!1,Fr=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:Ws,qa=yn.internal.scaleFactor;function dd(zt){return zt=zt.split("	").join(Array(se.TabLen||9).join(" ")),yr(zt,St)}function dc(zt){for(var qt,hn=zt.concat(),Cn=[],pi=hn.length;pi--;)typeof(qt=hn.shift())=="string"?Cn.push(qt):Array.isArray(zt)&&(qt.length===1||qt[1]===void 0&&qt[2]===void 0)?Cn.push(qt[0]):Cn.push([qt[0],qt[1],qt[2]]);return Cn}function hc(zt,qt){var hn;if(typeof zt=="string")hn=qt(zt)[0];else if(Array.isArray(zt)){for(var Cn,pi,bc=zt.concat(),Xo=[],gd=bc.length;gd--;)typeof(Cn=bc.shift())=="string"?Xo.push(qt(Cn)[0]):Array.isArray(Cn)&&typeof Cn[0]=="string"&&(pi=qt(Cn[0],Cn[1],Cn[2]),Xo.push([pi[0],pi[1],pi[2]]));hn=Xo}return hn}var zo=!1,fc=!0;if(typeof x=="string")zo=!0;else if(Array.isArray(x)){var mc=x.concat();Le=[];for(var qo,$n=mc.length;$n--;)(typeof(qo=mc.shift())!="string"||Array.isArray(qo)&&typeof qo[0]!="string")&&(fc=!1);zo=fc}if(zo===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var Uo=De/yn.internal.scaleFactor,Wo=Uo*(Fr-1);switch(se.baseline){case"bottom":Y-=Wo;break;case"top":Y+=Uo-Wo;break;case"hanging":Y+=Uo-2*Wo;break;case"middle":Y+=Uo/2-Wo}if((ft=se.maxWidth||0)>0&&(typeof x=="string"?x=yn.splitTextToSize(x,ft):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(zt,qt){return zt.concat(yn.splitTextToSize(qt,ft))},[]))),we={text:x,x:L,y:Y,options:se,mutex:{pdfEscape:yr,activeFontKey:ht,fonts:bt,activeFontSize:De}},Ct.publish("preProcessText",we),x=we.text,ze=(se=we.options).angle,!(rn instanceof nt)&&ze&&typeof ze=="number"){ze*=Math.PI/180,se.rotationDirection===0&&(ze=-ze),N===y.ADVANCED&&(ze=-ze);var Ho=Math.cos(ze),pc=Math.sin(ze);rn=new nt(Ho,pc,-pc,Ho,0,0)}else ze&&ze instanceof nt&&(rn=ze);N!==y.ADVANCED||rn||(rn=Qr),(gt=se.charSpace||Ro)!==void 0&&(Tn+=I(P(gt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qt=se.horizontalScale)!==void 0&&(Tn+=I(100*Qt)+` Tz
`),se.lang;var br=-1,j0=se.renderingMode!==void 0?se.renderingMode:se.stroke,gc=yn.internal.getCurrentPageInfo().pageContext;switch(j0){case 0:case!1:case"fill":br=0;break;case 1:case!0:case"stroke":br=1;break;case 2:case"fillThenStroke":br=2;break;case 3:case"invisible":br=3;break;case 4:case"fillAndAddForClipping":br=4;break;case 5:case"strokeAndAddPathForClipping":br=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":br=6;break;case 7:case"addToPathForClipping":br=7}var hd=gc.usedRenderingMode!==void 0?gc.usedRenderingMode:-1;br!==-1?Tn+=br+` Tr
`:hd!==-1&&(Tn+=`0 Tr
`),br!==-1&&(gc.usedRenderingMode=br),Qe=se.align||"left";var ta,Vo=De*Fr,fd=yn.internal.pageSize.getWidth(),md=bt[ht];gt=se.charSpace||Ro,ft=se.maxWidth||0,St=Object.assign({autoencode:!0,noBOM:!0},se.flags);var Hi=[],Ks=function(zt){return yn.getStringUnitWidth(zt,{font:md,charSpace:gt,fontSize:De,doKerning:!1})*De/qa};if(Object.prototype.toString.call(x)==="[object Array]"){var wr;Le=dc(x),Qe!=="left"&&(ta=Le.map(Ks));var lr,Vi=0;if(Qe==="right"){L-=ta[0],x=[],$n=Le.length;for(var hi=0;hi<$n;hi++)hi===0?(lr=za(L),wr=di(Y)):(lr=P(Vi-ta[hi]),wr=-Vo),x.push([Le[hi],lr,wr]),Vi=ta[hi]}else if(Qe==="center"){L-=ta[0]/2,x=[],$n=Le.length;for(var fi=0;fi<$n;fi++)fi===0?(lr=za(L),wr=di(Y)):(lr=P((Vi-ta[fi])/2),wr=-Vo),x.push([Le[fi],lr,wr]),Vi=ta[fi]}else if(Qe==="left"){x=[],$n=Le.length;for(var Ko=0;Ko<$n;Ko++)x.push(Le[Ko])}else if(Qe==="justify"&&md.encoding==="Identity-H"){x=[],$n=Le.length,ft=ft!==0?ft:fd;for(var mi=0,dn=0;dn<$n;dn++)if(wr=dn===0?di(Y):-Vo,lr=dn===0?za(L):mi,dn<$n-1){var vc=P((ft-ta[dn])/(Le[dn].split(" ").length-1)),cr=Le[dn].split(" ");x.push([cr[0]+" ",lr,wr]),mi=0;for(var na=1;na<cr.length;na++){var Go=(Ks(cr[na-1]+" "+cr[na])-Ks(cr[na]))*qa+vc;na==cr.length-1?x.push([cr[na],Go,0]):x.push([cr[na]+" ",Go,0]),mi-=Go}}else x.push([Le[dn],lr,wr]);x.push(["",mi,0])}else{if(Qe!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],$n=Le.length,ft=ft!==0?ft:fd,dn=0;dn<$n;dn++)wr=dn===0?di(Y):-Vo,lr=dn===0?za(L):0,dn<$n-1?Hi.push(I(P((ft-ta[dn])/(Le[dn].split(" ").length-1)))):Hi.push(0),x.push([Le[dn],lr,wr])}}var pd=typeof se.R2L=="boolean"?se.R2L:Ye;pd===!0&&(x=hc(x,function(zt,qt,hn){return[zt.split("").reverse().join(""),qt,hn]})),we={text:x,x:L,y:Y,options:se,mutex:{pdfEscape:yr,activeFontKey:ht,fonts:bt,activeFontSize:De}},Ct.publish("postProcessText",we),x=we.text,wa=we.mutex.isHex||!1;var xc=bt[ht].encoding;xc!=="WinAnsiEncoding"&&xc!=="StandardEncoding"||(x=hc(x,function(zt,qt,hn){return[dd(zt),qt,hn]})),Le=dc(x),x=[];for(var Gs,Ys,Ki,Xs=0,Yo=1,Js=Array.isArray(Le[0])?Yo:Xs,Gi="",yc=function(zt,qt,hn){var Cn="";return hn instanceof nt?(hn=typeof se.angle=="number"?Er(hn,new nt(1,0,0,1,zt,qt)):Er(new nt(1,0,0,1,zt,qt),hn),N===y.ADVANCED&&(hn=Er(new nt(1,0,0,-1,0,0),hn)),Cn=hn.join(" ")+` Tm
`):Cn=I(zt)+" "+I(qt)+` Td
`,Cn},ra=0;ra<Le.length;ra++){switch(Gi="",Js){case Yo:Ki=(wa?"<":"(")+Le[ra][0]+(wa?">":")"),Gs=parseFloat(Le[ra][1]),Ys=parseFloat(Le[ra][2]);break;case Xs:Ki=(wa?"<":"(")+Le[ra]+(wa?">":")"),Gs=za(L),Ys=di(Y)}Hi!==void 0&&Hi[ra]!==void 0&&(Gi=Hi[ra]+` Tw
`),ra===0?x.push(Gi+yc(Gs,Ys,rn)+Ki):Js===Xs?x.push(Gi+Ki):Js===Yo&&x.push(Gi+yc(Gs,Ys,rn)+Ki)}x=Js===Xs?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var aa=`BT
/`;return aa+=ht+" "+De+` Tf
`,aa+=I(De*Fr)+` TL
`,aa+=Hs+`
`,aa+=Tn,aa+=x,G(aa+="ET"),v[ht]=!0,yn};var m0=p.__private__.clip=p.clip=function(x){return G(x==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return m0("evenodd")},p.__private__.discardPath=p.discardPath=function(){return G("n"),this};var $a=p.__private__.isValidStyle=function(x){var L=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(L=!0),L};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(x){return $a(x)&&(d=x),this};var rd=p.__private__.getStyle=p.getStyle=function(x){var L=d;switch(x){case"D":case"S":L="S";break;case"F":L="f";break;case"FD":case"DF":L="B";break;case"f":case"f*":case"B":case"B*":L=x}return L},ad=p.close=function(){return G("h"),this};p.stroke=function(){return G("S"),this},p.fill=function(x){return Fo("f",x),this},p.fillEvenOdd=function(x){return Fo("f*",x),this},p.fillStroke=function(x){return Fo("B",x),this},p.fillStrokeEvenOdd=function(x){return Fo("B*",x),this};var Fo=function(x,L){Et(L)==="object"?g0(L,x):G(x)},tc=function(x){x===null||N===y.ADVANCED&&x===void 0||(x=rd(x),G(x))};function p0(x,L,Y,se,me){var we=new jl(L||this.boundingBox,Y||this.xStep,se||this.yStep,this.gState,me||this.matrix);we.stream=this.stream;var Le=x+"$$"+this.cloneIndex+++"$$";return Hn(Le,we),we}var g0=function(x,L){var Y=ii[x.key],se=_t[Y];if(se instanceof ao)G("q"),G(v0(L)),se.gState&&p.setGState(se.gState),G(x.matrix.toString()+" cm"),G("/"+Y+" sh"),G("Q");else if(se instanceof jl){var me=new nt(1,0,0,-1,0,Wi());x.matrix&&(me=me.multiply(x.matrix||Qr),Y=p0.call(se,x.key,x.boundingBox,x.xStep,x.yStep,me).id),G("q"),G("/Pattern cs"),G("/"+Y+" scn"),se.gState&&p.setGState(se.gState),G(L),G("Q")}},v0=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},nc=p.moveTo=function(x,L){return G(I(P(x))+" "+I(V(L))+" m"),this},Us=p.lineTo=function(x,L){return G(I(P(x))+" "+I(V(L))+" l"),this},qi=p.curveTo=function(x,L,Y,se,me,we){return G([I(P(x)),I(V(L)),I(P(Y)),I(V(se)),I(P(me)),I(V(we)),"c"].join(" ")),this};p.__private__.line=p.line=function(x,L,Y,se,me){if(isNaN(x)||isNaN(L)||isNaN(Y)||isNaN(se)||!$a(me))throw new Error("Invalid arguments passed to jsPDF.line");return N===y.COMPAT?this.lines([[Y-x,se-L]],x,L,[1,1],me||"S"):this.lines([[Y-x,se-L]],x,L,[1,1]).stroke()},p.__private__.lines=p.lines=function(x,L,Y,se,me,we){var Le,ze,Qe,gt,ft,St,Qt,rn,yn,Kn,Tn,wa;if(typeof x=="number"&&(wa=Y,Y=L,L=x,x=wa),se=se||[1,1],we=we||!1,isNaN(L)||isNaN(Y)||!Array.isArray(x)||!Array.isArray(se)||!$a(me)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(nc(L,Y),Le=se[0],ze=se[1],gt=x.length,Kn=L,Tn=Y,Qe=0;Qe<gt;Qe++)(ft=x[Qe]).length===2?(Kn=ft[0]*Le+Kn,Tn=ft[1]*ze+Tn,Us(Kn,Tn)):(St=ft[0]*Le+Kn,Qt=ft[1]*ze+Tn,rn=ft[2]*Le+Kn,yn=ft[3]*ze+Tn,Kn=ft[4]*Le+Kn,Tn=ft[5]*ze+Tn,qi(St,Qt,rn,yn,Kn,Tn));return we&&ad(),tc(me),this},p.path=function(x){for(var L=0;L<x.length;L++){var Y=x[L],se=Y.c;switch(Y.op){case"m":nc(se[0],se[1]);break;case"l":Us(se[0],se[1]);break;case"c":qi.apply(this,se);break;case"h":ad()}}return this},p.__private__.rect=p.rect=function(x,L,Y,se,me){if(isNaN(x)||isNaN(L)||isNaN(Y)||isNaN(se)||!$a(me))throw new Error("Invalid arguments passed to jsPDF.rect");return N===y.COMPAT&&(se=-se),G([I(P(x)),I(V(L)),I(P(Y)),I(P(se)),"re"].join(" ")),tc(me),this},p.__private__.triangle=p.triangle=function(x,L,Y,se,me,we,Le){if(isNaN(x)||isNaN(L)||isNaN(Y)||isNaN(se)||isNaN(me)||isNaN(we)||!$a(Le))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Y-x,se-L],[me-Y,we-se],[x-me,L-we]],x,L,[1,1],Le,!0),this},p.__private__.roundedRect=p.roundedRect=function(x,L,Y,se,me,we,Le){if(isNaN(x)||isNaN(L)||isNaN(Y)||isNaN(se)||isNaN(me)||isNaN(we)||!$a(Le))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ze=4/3*(Math.SQRT2-1);return me=Math.min(me,.5*Y),we=Math.min(we,.5*se),this.lines([[Y-2*me,0],[me*ze,0,me,we-we*ze,me,we],[0,se-2*we],[0,we*ze,-me*ze,we,-me,we],[2*me-Y,0],[-me*ze,0,-me,-we*ze,-me,-we],[0,2*we-se],[0,-we*ze,me*ze,-we,me,-we]],x+me,L,[1,1],Le,!0),this},p.__private__.ellipse=p.ellipse=function(x,L,Y,se,me){if(isNaN(x)||isNaN(L)||isNaN(Y)||isNaN(se)||!$a(me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*Y,Le=4/3*(Math.SQRT2-1)*se;return nc(x+Y,L),qi(x+Y,L-Le,x+we,L-se,x,L-se),qi(x-we,L-se,x-Y,L-Le,x-Y,L),qi(x-Y,L+Le,x-we,L+se,x,L+se),qi(x+we,L+se,x+Y,L+Le,x+Y,L),tc(me),this},p.__private__.circle=p.circle=function(x,L,Y,se){if(isNaN(x)||isNaN(L)||isNaN(Y)||!$a(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,L,Y,Y,se)},p.setFont=function(x,L,Y){return Y&&(L=$(L,Y)),ht=ed(x,L,{disableWarning:!1}),this};var x0=p.__private__.getFont=p.getFont=function(){return bt[ed.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var x,L,Y={};for(x in kt)if(kt.hasOwnProperty(x))for(L in Y[x]=[],kt[x])kt[x].hasOwnProperty(L)&&Y[x].push(L);return Y},p.addFont=function(x,L,Y,se,me){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?me=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(Y=$(Y,se)),me=me||"Identity-H",Ql.call(this,x,L,Y,me)};var Ws,rc=e.lineWidth||.200025,Oo=p.__private__.getLineWidth=p.getLineWidth=function(){return rc},id=p.__private__.setLineWidth=p.setLineWidth=function(x){return rc=x,G(I(P(x))+" w"),this};p.__private__.setLineDash=st.API.setLineDash=st.API.setLineDashPattern=function(x,L){if(x=x||[],L=L||0,isNaN(L)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(Y){return I(P(Y))}).join(" "),L=I(P(L)),G("["+x+"] "+L+" d"),this};var sd=p.__private__.getLineHeight=p.getLineHeight=function(){return De*Ws};p.__private__.getLineHeight=p.getLineHeight=function(){return De*Ws};var od=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Ws=x),this},ld=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ws};od(e.lineHeight);var za=p.__private__.getHorizontalCoordinate=function(x){return P(x)},di=p.__private__.getVerticalCoordinate=function(x){return N===y.ADVANCED?x:ut[D].mediaBox.topRightY-ut[D].mediaBox.bottomLeftY-P(x)},y0=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(x){return I(za(x))},Ui=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(x){return I(di(x))},ba=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return sr(ba)},p.__private__.setStrokeColor=p.setDrawColor=function(x,L,Y,se){return ba=Dr({ch1:x,ch2:L,ch3:Y,ch4:se,pdfColorType:"draw",precision:2}),G(ba),this};var ac=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return sr(ac)},p.__private__.setFillColor=p.setFillColor=function(x,L,Y,se){return ac=Dr({ch1:x,ch2:L,ch3:Y,ch4:se,pdfColorType:"fill",precision:2}),G(ac),this};var Hs=e.textColor||"0 g",b0=p.__private__.getTextColor=p.getTextColor=function(){return sr(Hs)};p.__private__.setTextColor=p.setTextColor=function(x,L,Y,se){return Hs=Dr({ch1:x,ch2:L,ch3:Y,ch4:se,pdfColorType:"text",precision:3}),this};var Ro=e.charSpace,w0=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ro||0)};p.__private__.setCharSpace=p.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ro=x,this};var ic=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(x){var L=p.CapJoinStyles[x];if(L===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ic=L,G(L+" J"),this};var sc=0;p.__private__.setLineJoin=p.setLineJoin=function(x){var L=p.CapJoinStyles[x];if(L===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sc=L,G(L+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(I(P(x))+" M"),this},p.GState=kf,p.setGState=function(x){(x=typeof x=="string"?Gt[Lr[x]]:cd(null,x)).equals(va)||(G("/"+x.id+" gs"),va=x)};var cd=function(x,L){if(!x||!Lr[x]){var Y=!1;for(var se in Gt)if(Gt.hasOwnProperty(se)&&Gt[se].equals(L)){Y=!0;break}if(Y)L=Gt[se];else{var me="GS"+(Object.keys(Gt).length+1).toString(10);Gt[me]=L,L.id=me}return x&&(Lr[x]=L.id),Ct.publish("addGState",L),L}};p.addGState=function(x,L){return cd(x,L),this},p.saveGraphicsState=function(){return G("q"),Dn.push({key:ht,size:De,color:Hs}),this},p.restoreGraphicsState=function(){G("Q");var x=Dn.pop();return ht=x.key,De=x.size,Hs=x.color,va=null,this},p.setCurrentTransformationMatrix=function(x){return G(x.toString()+" cm"),this},p.comment=function(x){return G("#"+x),this};var Bo=function(x,L){var Y=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Y},set:function(we){isNaN(we)||(Y=parseFloat(we))}});var se=L||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(we){isNaN(we)||(se=parseFloat(we))}});var me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return me},set:function(we){me=we.toString()}}),this},oc=function(x,L,Y,se){Bo.call(this,x,L),this.type="rect";var me=Y||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return me},set:function(Le){isNaN(Le)||(me=parseFloat(Le))}});var we=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Le){isNaN(Le)||(we=parseFloat(Le))}}),this},lc=function(){this.page=Yt,this.currentPage=D,this.pages=ye.slice(0),this.pagesContext=ut.slice(0),this.x=vn,this.y=wt,this.matrix=it,this.width=Vs(D),this.height=Wi(D),this.outputDestination=Ie,this.id="",this.objectNumber=-1};lc.prototype.restore=function(){Yt=this.page,D=this.currentPage,ut=this.pagesContext,ye=this.pages,vn=this.x,wt=this.y,it=this.matrix,cc(D,this.width),uc(D,this.height),Ie=this.outputDestination};var ud=function(x,L,Y,se,me){Jr.push(new lc),Yt=D=0,ye=[],vn=x,wt=L,it=me,Zl([Y,se])},N0=function(x){if(Xr[x])Jr.pop().restore();else{var L=new lc,Y="Xo"+(Object.keys(kn).length+1).toString(10);L.id=Y,Xr[x]=Y,kn[Y]=L,Ct.publish("addFormObject",L),Jr.pop().restore()}};for(var $o in p.beginFormObject=function(x,L,Y,se,me){return ud(x,L,Y,se,me),this},p.endFormObject=function(x){return N0(x),this},p.doFormObject=function(x,L){var Y=kn[Xr[x]];return G("q"),G(L.toString()+" cm"),G("/"+Y.id+" Do"),G("Q"),this},p.getFormObject=function(x){var L=kn[Xr[x]];return{x:L.x,y:L.y,width:L.width,height:L.height,matrix:L.matrix}},p.save=function(x,L){return x=x||"generated.pdf",(L=L||{}).returnPromise=L.returnPromise||!1,L.returnPromise===!1?(ro(To(ui()),x),typeof ro.unload=="function"&&ot.setTimeout&&setTimeout(ro.unload,911),this):new Promise(function(Y,se){try{var me=ro(To(ui()),x);typeof ro.unload=="function"&&ot.setTimeout&&setTimeout(ro.unload,911),Y(me)}catch(we){se(we.message)}})},st.API)st.API.hasOwnProperty($o)&&($o==="events"&&st.API.events.length?function(x,L){var Y,se,me;for(me=L.length-1;me!==-1;me--)Y=L[me][0],se=L[me][1],x.subscribe.apply(x,[Y].concat(typeof se=="function"?[se]:se))}(Ct,st.API.events):p[$o]=st.API[$o]);var Vs=p.getPageWidth=function(x){return(ut[x=x||D].mediaBox.topRightX-ut[x].mediaBox.bottomLeftX)/Te},cc=p.setPageWidth=function(x,L){ut[x].mediaBox.topRightX=L*Te+ut[x].mediaBox.bottomLeftX},Wi=p.getPageHeight=function(x){return(ut[x=x||D].mediaBox.topRightY-ut[x].mediaBox.bottomLeftY)/Te},uc=p.setPageHeight=function(x,L){ut[x].mediaBox.topRightY=L*Te+ut[x].mediaBox.bottomLeftY};return p.internal={pdfEscape:yr,getStyle:rd,getFont:x0,getFontSize:Fe,getCharSpace:w0,getTextColor:b0,getLineHeight:sd,getLineHeightFactor:ld,getLineWidth:Oo,write:Xe,getHorizontalCoordinate:za,getVerticalCoordinate:di,getCoordinateString:y0,getVerticalCoordinateString:Ui,collections:{},newObject:cn,newAdditionalObject:zi,newObjectDeferred:nn,newObjectDeferredBegin:ir,getFilters:Zr,putStream:xr,events:Ct,scaleFactor:Te,pageSize:{getWidth:function(){return Vs(D)},setWidth:function(x){cc(D,x)},getHeight:function(){return Wi(D)},setHeight:function(x){uc(D,x)}},encryptionOptions:m,encryption:Vn,getEncryptor:h0,output:Mo,getNumberOfPages:o0,pages:ye,out:G,f2:ae,f3:E,getPageInfo:nd,getPageInfoByObjId:dt,getCurrentPageInfo:f0,getPDFVersion:w,Point:Bo,Rectangle:oc,Matrix:nt,hasHotfix:td},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Vs(D)},set:function(x){cc(D,x)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Wi(D)},set:function(x){uc(D,x)},enumerable:!0,configurable:!0}),i0.call(p,Ae),ht="F1",Qu(a,n),Ct.publish("initialized"),p}cl.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},cl.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},cl.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},cl.prototype.processOwnerPassword=function(e,t){return c1(l1(t).substr(0,5),e)},cl.prototype.encryptor=function(e,t){var n=l1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return c1(n,r)}},kf.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||Et(e)!==Et(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},st.API={events:[]},st.version="3.0.1";var sn=st.API,kg=1,Io=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},il=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mt=function(e){return e.toFixed(2)},is=function(e){return e.toFixed(5)};sn.__acroform__={};var _r=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Wv=function(e){return e*kg},Ha=function(e){var t=new Jb,n=Ke.internal.getHeight(e)||0,r=Ke.internal.getWidth(e)||0;return t.BBox=[0,0,Number(mt(r)),Number(mt(n))],t},c8=sn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},u8=sn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},d8=sn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},mn=sn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return d8(e,t-1)},pn=sn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return c8(e,t-1)},gn=sn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return u8(e,t-1)},h8=sn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=n(a)||0,c.lowerLeft_Y=r(i+l)||0,c.upperRight_X=n(a+o)||0,c.upperRight_Y=r(i)||0,[Number(mt(c.lowerLeft_X)),Number(mt(c.lowerLeft_Y)),Number(mt(c.upperRight_X)),Number(mt(c.upperRight_Y))]},f8=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=u1(e,n),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+mt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Ha(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},u1=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(E){return E.split(`
`)}):a.map(function(E){return[E]});var i=n,o=Ke.internal.getHeight(e)||0;o=o<0?-o:o;var l=Ke.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(E,P,J){if(E+1<a.length){var V=P+" "+a[E+1][0];return lh(V,e,J).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,m,h=lh("3",e,i).height,v=e.multiline?o-i:(o-h)/2,p=v+=2,j=0,w=0,S=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+lh(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var g="",y=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var A=!1;if(a[N].length!==1&&S!==a[N].length-1){if((h+2)*(y+2)+2>o)continue e;g+=a[N][S],A=!0,w=N,N--}else{g=(g+=a[N][S]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var R=parseInt(N),$=c(R,g,i),I=N>=a.length-1;if($&&!I){g+=" ",S=0;continue}if($||I){if(I)w=R;else if(e.multiline&&(h+2)*(y+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(y+2)+2>o)continue e;w=R}}for(var M="",H=j;H<=w;H++){var ae=a[H];if(e.multiline){if(H===w){M+=ae[S]+" ",S=(S+1)%ae.length;continue}if(H===j){M+=ae[ae.length-1]+" ";continue}}M+=ae[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,m=lh(M,e,i).width,e.textAlign){case"right":d=l-m-2;break;case"center":d=(l-m)/2;break;case"left":default:d=2}t+=mt(d)+" "+mt(p)+` Td
`,t+="("+Io(M)+`) Tj
`,t+=-mt(d)+` 0 Td
`,p=-(i+2),m=0,j=A?w:w+1,y++,g=""}break}return r.text=t,r.fontSize=i,r},lh=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},m8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},p8=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},g8=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,a=e[n];t.internal.newObjectDeferredBegin(a.objId,!0),Et(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[r]}},v8=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Fa.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(m8)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");kg=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Qb,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var i=r[a];i.objId=void 0,i.hasAnnotation&&p8(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,a){var i=!r;for(var o in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=h8(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ke.createDefaultAppearanceStream(l),Et(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var m=f8(l);c.push({key:"AP",value:"<</N "+m+">>"}),a.internal.acroformPlugin.xForms.push(m)}if(l.appearanceStreamContent){var h="";for(var v in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(v)){var p=l.appearanceStreamContent[v];if(h+="/"+v+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var j=p[o];typeof j=="function"&&(j=j.call(a,l)),h+="/"+o+" "+j+" ",a.internal.acroformPlugin.xForms.indexOf(j)>=0||a.internal.acroformPlugin.xForms.push(j)}}else typeof(j=p)=="function"&&(j=j.call(a,l)),h+="/"+o+" "+j,a.internal.acroformPlugin.xForms.indexOf(j)>=0||a.internal.acroformPlugin.xForms.push(j);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&g8(a.internal.acroformPlugin.xForms,a)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},Xb=sn.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Et(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),a+="("+Io(r(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Am=function(e,t,n){var r=function(a){return a};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Io(r(e))+")"},Qa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Qa.prototype.toString=function(){return this.objId+" 0 R"},Qa.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Qa.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],a=this[r];a&&(Array.isArray(a)?e.push({key:r,value:Xb(a,this.objId,this.scope)}):a instanceof Qa?(a.scope=this.scope,e.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:r,value:a}))}return e};var Jb=function(){Qa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};_r(Jb,Qa);var Qb=function(){Qa.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Io(n(e))+")"}},set:function(n){e=n}})};_r(Qb,Qa);var Fa=function e(){Qa.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');t=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!mn(t,3)},set:function(g){g?this.F=pn(t,3):this.F=gn(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');n=g}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(g){r=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(g){r[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(g){r[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(g){r[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(g){r[3]=g}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Cf)return;i="FieldObject"+e.FieldNum++}var g=function(y){return y};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+Io(g(i))+")"},set:function(g){i=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(g){i=g}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(g){c=g}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/kg:d},set:function(g){d=g}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(g){m=g}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Cf||this instanceof go))return Am(h,this.objId,this.scope)},set:function(g){g=g.toString(),h=g}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Rn?v:Am(v,this.objId,this.scope)},set:function(g){g=g.toString(),v=this instanceof Rn?g:g.substr(0,1)==="("?il(g.substr(1,g.length-2)):il(g)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Rn?il(v.substr(1,v.length-1)):v},set:function(g){g=g.toString(),v=this instanceof Rn?"/"+g:g}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Rn?p:Am(p,this.objId,this.scope)},set:function(g){g=g.toString(),p=this instanceof Rn?g:g.substr(0,1)==="("?il(g.substr(1,g.length-2)):il(g)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Rn?il(p.substr(1,p.length-1)):p},set:function(g){g=g.toString(),p=this instanceof Rn?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(g){g=!!g,w=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(g){j=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,1)},set:function(g){g?this.Ff=pn(this.Ff,1):this.Ff=gn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,2)},set:function(g){g?this.Ff=pn(this.Ff,2):this.Ff=gn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,3)},set:function(g){g?this.Ff=pn(this.Ff,3):this.Ff=gn(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');S=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(S){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};_r(Fa,Qa);var Tl=function(){Fa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Xb(t,this.objId,this.scope)},set:function(n){var r,a;a=[],typeof(r=n)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(r,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,18)},set:function(n){n?this.Ff=pn(this.Ff,18):this.Ff=gn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=pn(this.Ff,19):this.Ff=gn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,20)},set:function(n){n?(this.Ff=pn(this.Ff,20),t.sort()):this.Ff=gn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,22)},set:function(n){n?this.Ff=pn(this.Ff,22):this.Ff=gn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,23)},set:function(n){n?this.Ff=pn(this.Ff,23):this.Ff=gn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,27)},set:function(n){n?this.Ff=pn(this.Ff,27):this.Ff=gn(this.Ff,27)}}),this.hasAppearanceStream=!1};_r(Tl,Fa);var Ml=function(){Tl.call(this),this.fontName="helvetica",this.combo=!1};_r(Ml,Tl);var Fl=function(){Ml.call(this),this.combo=!0};_r(Fl,Ml);var Eh=function(){Fl.call(this),this.edit=!0};_r(Eh,Fl);var Rn=function(){Fa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,15)},set:function(n){n?this.Ff=pn(this.Ff,15):this.Ff=gn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,16)},set:function(n){n?this.Ff=pn(this.Ff,16):this.Ff=gn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,17)},set:function(n){n?this.Ff=pn(this.Ff,17):this.Ff=gn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,26)},set:function(n){n?this.Ff=pn(this.Ff,26):this.Ff=gn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,a=[];for(r in a.push("<<"),t)a.push("/"+r+" ("+Io(n(t[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){Et(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};_r(Rn,Fa);var Ih=function(){Rn.call(this),this.pushButton=!0};_r(Ih,Rn);var Ol=function(){Rn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};_r(Ol,Rn);var Cf=function(){var e,t;Fa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+Io(a(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Et(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ke.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_r(Cf,Fa),Ol.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Ol.prototype.createOption=function(e){var t=new Cf;return t.Parent=this,t.optionName=e,this.Kids.push(t),x8.call(this.scope,t),t};var Dh=function(){Rn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ke.CheckBox.createAppearanceStream()};_r(Dh,Rn);var go=function(){Fa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,13)},set:function(t){t?this.Ff=pn(this.Ff,13):this.Ff=gn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,21)},set:function(t){t?this.Ff=pn(this.Ff,21):this.Ff=gn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,23)},set:function(t){t?this.Ff=pn(this.Ff,23):this.Ff=gn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,24)},set:function(t){t?this.Ff=pn(this.Ff,24):this.Ff=gn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,25)},set:function(t){t?this.Ff=pn(this.Ff,25):this.Ff=gn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,26)},set:function(t){t?this.Ff=pn(this.Ff,26):this.Ff=gn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_r(go,Fa);var Th=function(){go.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!mn(this.Ff,14)},set:function(e){e?this.Ff=pn(this.Ff,14):this.Ff=gn(this.Ff,14)}}),this.password=!0};_r(Th,go);var Ke={CheckBox:{createAppearanceStream:function(){return{N:{On:Ke.CheckBox.YesNormal},D:{On:Ke.CheckBox.YesPushDown,Off:Ke.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ha(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=u1(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+mt(Ke.internal.getWidth(e))+" "+mt(Ke.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+mt(i.fontSize)+" Tf "+a),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Ha(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),a=[],i=Ke.internal.getHeight(e),o=Ke.internal.getWidth(e),l=u1(e,e.caption);return a.push("1 g"),a.push("0 0 "+mt(o)+" "+mt(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+mt(o-1)+" "+mt(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+mt(l.fontSize)+" Tf "+r),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Ha(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+mt(Ke.internal.getWidth(e))+" "+mt(Ke.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ke.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ke.RadioButton.Circle.YesNormal,t.D[e]=Ke.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ha(e);t.scope=e.scope;var n=[],r=Ke.internal.getWidth(e)<=Ke.internal.getHeight(e)?Ke.internal.getWidth(e)/4:Ke.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Ke.internal.Bezier_C,i=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+is(Ke.internal.getWidth(e)/2)+" "+is(Ke.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ha(e);t.scope=e.scope;var n=[],r=Ke.internal.getWidth(e)<=Ke.internal.getHeight(e)?Ke.internal.getWidth(e)/4:Ke.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*Ke.internal.Bezier_C).toFixed(5)),o=Number((r*Ke.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+is(Ke.internal.getWidth(e)/2)+" "+is(Ke.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+is(Ke.internal.getWidth(e)/2)+" "+is(Ke.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ha(e);t.scope=e.scope;var n=[],r=Ke.internal.getWidth(e)<=Ke.internal.getHeight(e)?Ke.internal.getWidth(e)/4:Ke.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*Ke.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+is(Ke.internal.getWidth(e)/2)+" "+is(Ke.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ke.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ke.RadioButton.Cross.YesNormal,t.D[e]=Ke.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ha(e);t.scope=e.scope;var n=[],r=Ke.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+mt(Ke.internal.getWidth(e)-2)+" "+mt(Ke.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(mt(r.x1.x)+" "+mt(r.x1.y)+" m"),n.push(mt(r.x2.x)+" "+mt(r.x2.y)+" l"),n.push(mt(r.x4.x)+" "+mt(r.x4.y)+" m"),n.push(mt(r.x3.x)+" "+mt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ha(e);t.scope=e.scope;var n=Ke.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+mt(Ke.internal.getWidth(e))+" "+mt(Ke.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+mt(Ke.internal.getWidth(e)-2)+" "+mt(Ke.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(mt(n.x1.x)+" "+mt(n.x1.y)+" m"),r.push(mt(n.x2.x)+" "+mt(n.x2.y)+" l"),r.push(mt(n.x4.x)+" "+mt(n.x4.y)+" m"),r.push(mt(n.x3.x)+" "+mt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ha(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+mt(Ke.internal.getWidth(e))+" "+mt(Ke.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Ke.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ke.internal.getWidth(e),n=Ke.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Ke.internal.getWidth=function(e){var t=0;return Et(e)==="object"&&(t=Wv(e.Rect[2])),t},Ke.internal.getHeight=function(e){var t=0;return Et(e)==="object"&&(t=Wv(e.Rect[3])),t};var x8=sn.addField=function(e){if(v8(this,e),!(e instanceof Fa))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};sn.AcroFormChoiceField=Tl,sn.AcroFormListBox=Ml,sn.AcroFormComboBox=Fl,sn.AcroFormEditBox=Eh,sn.AcroFormButton=Rn,sn.AcroFormPushButton=Ih,sn.AcroFormRadioButton=Ol,sn.AcroFormCheckBox=Dh,sn.AcroFormTextField=go,sn.AcroFormPasswordField=Th,sn.AcroFormAppearance=Ke,sn.AcroForm={ChoiceField:Tl,ListBox:Ml,ComboBox:Fl,EditBox:Eh,Button:Rn,PushButton:Ih,RadioButton:Ol,CheckBox:Dh,TextField:go,PasswordField:Th,Appearance:Ke},st.AcroForm={ChoiceField:Tl,ListBox:Ml,ComboBox:Fl,EditBox:Eh,Button:Rn,PushButton:Ih,RadioButton:Ol,CheckBox:Dh,TextField:go,PasswordField:Th,Appearance:Ke};function Zb(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(E,P){var J,V,X,Z,ee,U=t;if((P=P||t)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if($(E))for(ee in n)for(X=n[ee],J=0;J<X.length;J+=1){for(Z=!0,V=0;V<X[J].length;V+=1)if(X[J][V]!==void 0&&X[J][V]!==E[V]){Z=!1;break}if(Z===!0){U=ee;break}}else for(ee in n)for(X=n[ee],J=0;J<X.length;J+=1){for(Z=!0,V=0;V<X[J].length;V+=1)if(X[J][V]!==void 0&&X[J][V]!==E.charCodeAt(V)){Z=!1;break}if(Z===!0){U=ee;break}}return U===t&&P!==t&&(U=P),U},a=function E(P){for(var J=this.internal.write,V=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:P.width}),Z.push({key:"Height",value:P.height}),P.colorSpace===S.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===S.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var ee="",U=0,te=P.transparency.length;U<te;U++)ee+=P.transparency[U]+" "+P.transparency[U]+" ";Z.push({key:"Mask",value:"["+ee+"]"})}P.sMask!==void 0&&Z.push({key:"SMask",value:P.objectId+1+" 0 R"});var ne=P.filter!==void 0?["/"+P.filter]:void 0;if(V({data:P.data,additionalKeyValues:Z,alreadyAppliedFilters:ne,objectId:P.objectId}),J("endobj"),"sMask"in P&&P.sMask!==void 0){var pe="/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,C={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:pe,data:P.sMask};"filter"in P&&(C.filter=P.filter),E.call(this,C)}if(P.colorSpace===S.INDEXED){var D=this.internal.newObject();V({data:M(new Uint8Array(P.palette)),objectId:D}),J("endobj")}},i=function(){var E=this.internal.collections.addImage_images;for(var P in E)a.call(this,E[P])},o=function(){var E,P=this.internal.collections.addImage_images,J=this.internal.write;for(var V in P)J("/I"+(E=P[V]).index,E.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var E=this.internal.collections.addImage_images;return l.call(this),E},d=function(){return Object.keys(this.internal.collections.addImage_images).length},m=function(E){return typeof e["process"+E.toUpperCase()]=="function"},h=function(E){return Et(E)==="object"&&E.nodeType===1},v=function(E,P){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var J=""+E.getAttribute("src");if(J.indexOf("data:image/")===0)return au(unescape(J).split("base64,").pop());var V=e.loadFile(J,!0);if(V!==void 0)return V}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var X;switch(P){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;case"JPEG":case"JPG":default:X="image/jpeg"}return au(E.toDataURL(X,1).split("base64,").pop())}},p=function(E){var P=this.internal.collections.addImage_images;if(P){for(var J in P)if(E===P[J].alias)return P[J]}},j=function(E,P,J){return E||P||(E=-96,P=-96),E<0&&(E=-1*J.width*72/E/this.internal.scaleFactor),P<0&&(P=-1*J.height*72/P/this.internal.scaleFactor),E===0&&(E=P*J.width/J.height),P===0&&(P=E*J.height/J.width),[E,P]},w=function(E,P,J,V,X,Z){var ee=j.call(this,J,V,X),U=this.internal.getCoordinateString,te=this.internal.getVerticalCoordinateString,ne=c.call(this);if(J=ee[0],V=ee[1],ne[X.index]=X,Z){Z*=Math.PI/180;var pe=Math.cos(Z),C=Math.sin(Z),D=function(Q){return Q.toFixed(4)},W=[D(pe),D(C),D(-1*C),D(pe),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,U(E),te(P+V),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([U(J),"0","0",U(V),"0","0","cm"].join(" "))):this.internal.write([U(J),"0","0",U(V),U(E),te(P+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},S=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(E){var P,J,V=0;if(typeof E=="string")for(J=E.length,P=0;P<J;P++)V=(V<<5)-V+E.charCodeAt(P),V|=0;else if($(E))for(J=E.byteLength/2,P=0;P<J;P++)V=(V<<5)-V+E[P],V|=0;return V},N=e.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var P=!0;return E.length===0&&(P=!1),E.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(P=!1),P},A=e.__addimage__.extractImageFromDataUrl=function(E){if(E==null||!(E=E.trim()).startsWith("data:"))return null;var P=E.indexOf(",");return P<0?null:E.substring(0,P).trim().endsWith("base64")?E.substring(P+1):null},R=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(E){return R()&&E instanceof ArrayBuffer};var $=e.__addimage__.isArrayBufferView=function(E){return R()&&typeof Uint32Array<"u"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},I=e.__addimage__.binaryStringToUint8Array=function(E){for(var P=E.length,J=new Uint8Array(P),V=0;V<P;V++)J[V]=E.charCodeAt(V);return J},M=e.__addimage__.arrayBufferToBinaryString=function(E){for(var P="",J=$(E)?E:new Uint8Array(E),V=0;V<J.length;V+=8192)P+=String.fromCharCode.apply(null,J.subarray(V,V+8192));return P};e.addImage=function(){var E,P,J,V,X,Z,ee,U,te;if(typeof arguments[1]=="number"?(P=t,J=arguments[1],V=arguments[2],X=arguments[3],Z=arguments[4],ee=arguments[5],U=arguments[6],te=arguments[7]):(P=arguments[1],J=arguments[2],V=arguments[3],X=arguments[4],Z=arguments[5],ee=arguments[6],U=arguments[7],te=arguments[8]),Et(E=arguments[0])==="object"&&!h(E)&&"imageData"in E){var ne=E;E=ne.imageData,P=ne.format||P||t,J=ne.x||J||0,V=ne.y||V||0,X=ne.w||ne.width||X,Z=ne.h||ne.height||Z,ee=ne.alias||ee,U=ne.compression||U,te=ne.rotation||ne.angle||te}var pe=this.internal.getFilters();if(U===void 0&&pe.indexOf("FlateEncode")!==-1&&(U="SLOW"),isNaN(J)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var C=H.call(this,E,P,ee,U);return w.call(this,J,V,X,Z,C,te),this};var H=function(E,P,J,V){var X,Z,ee;if(typeof E=="string"&&r(E)===t){E=unescape(E);var U=ae(E,!1);(U!==""||(U=e.loadFile(E,!0))!==void 0)&&(E=U)}if(h(E)&&(E=v(E,P)),P=r(E,P),!m(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((ee=J)==null||ee.length===0)&&(J=function(te){return typeof te=="string"||$(te)?y(te):$(te.data)?y(te.data):null}(E)),(X=p.call(this,J))||(R()&&(E instanceof Uint8Array||P==="RGBA"||(Z=E,E=I(E))),X=this["process"+P.toUpperCase()](E,d.call(this),J,function(te){return te&&typeof te=="string"&&(te=te.toUpperCase()),te in e.image_compression?te:g.NONE}(V),Z)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},ae=e.__addimage__.convertBase64ToBinaryString=function(E,P){P=typeof P!="boolean"||P;var J,V="";if(typeof E=="string"){var X;J=(X=A(E))!==null&&X!==void 0?X:E;try{V=au(J)}catch(Z){if(P)throw N(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};e.getImageProperties=function(E){var P,J,V="";if(h(E)&&(E=v(E)),typeof E=="string"&&r(E)===t&&((V=ae(E,!1))===""&&(V=e.loadFile(E)||""),E=V),J=r(E),!m(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(!R()||E instanceof Uint8Array||(E=I(E)),!(P=this["process"+J.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=J,P}})(st.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};st.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,m=!1,h=0;h<d.length&&!m;h++)switch((r=d[h]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var v=0;v<d.length;v++){r=d[v];var p=this.internal.pdfEscape,j=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(w.objId),y=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+p(g(r.contents))+")",i+=" /Popup "+S.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(g(y))+") >>",w.content=i;var N=w.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(i+=" /Open true"),i+=" >>",S.content=i,this.internal.write(w.objId,"0 R",S.objId,"0 R");break;case"freetext":a="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var A=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(j(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var R=this.annotations._nameMap[r.options.name];r.options.pageNumber=R.page,r.options.top=R.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(j(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var $=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+$+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(r),w:c(n+a),h:d(r+i)},options:o,type:"link"})},e.textWithLink=function(n,r,a,i){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var m=this.splitTextToSize(n,l).length;o=Math.ceil(d*m)}else l=c,o=d;return this.text(n,r,a,i),a+=.2*d,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,a-d,l,o,i),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(st.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},l=e.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&a.indexOf(w.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length>=3};var m=e.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(w){var S=0,g=n,y="",N=0;for(S=0;S<w.length;S+=1)g[w.charCodeAt(S)]!==void 0?(N++,typeof(g=g[w.charCodeAt(S)])=="number"&&(y+=String.fromCharCode(g),g=n,N=0),S===w.length-1&&(g=n,y+=w.charAt(S-(N-1)),S-=N-1,N=0)):(g=n,y+=w.charAt(S-N),S-=N,N=0);return y};e.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var v=e.__arabicParser__.getCorrectForm=function(w,S,g){return o(w)?i(w)===!1?-1:!d(w)||!o(S)&&!o(g)||!o(g)&&l(S)||l(w)&&!o(S)||l(w)&&c(S)||l(w)&&l(S)?0:m(w)&&o(S)&&!l(S)&&o(g)&&d(g)?3:l(w)||!o(g)?1:2:-1},p=function(w){var S=0,g=0,y=0,N="",A="",R="",$=(w=w||"").split("\\s+"),I=[];for(S=0;S<$.length;S+=1){for(I.push(""),g=0;g<$[S].length;g+=1)N=$[S][g],A=$[S][g-1],R=$[S][g+1],o(N)?(y=v(N,A,R),I[S]+=y!==-1?String.fromCharCode(t[N.charCodeAt(0)][y]):N):I[S]+=N;I[S]=h(I[S])}return I.join(" ")},j=e.__arabicParser__.processArabic=e.processArabic=function(){var w,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(S)){var y=0;for(g=[],y=0;y<S.length;y+=1)Array.isArray(S[y])?g.push([p(S[y][0]),S[y][1],S[y][2]]):g.push([p(S[y])]);w=g}else w=p(S);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};e.events.push(["preProcessText",j])}(st.API),st.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var a;if((n=n||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(st.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(w){v=w}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(w){j=w}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){r.call(this);var m=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),v=d.scaleFactor||this.internal.scaleFactor,p=0,j=0,w=0,S=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var g=d.maxWidth;g>0?typeof c=="string"?c=this.splitTextToSize(c,g):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,A){return N.concat(S.splitTextToSize(A,g))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)p<(w=this.getStringUnitWidth(c[y],{font:h})*m)&&(p=w);return p!==0&&(j=c.length),{w:p/=v,h:Math.max((j*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/v,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&v&&(this.printHeaderRow(c.lineNumber,!0),c.y+=v[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-m,c.y+m,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+m,{align:"center",baseline:"top",maxWidth:c.width-m-m}):this.text(c.text,c.x+m,c.y+m,{align:"left",baseline:"top",maxWidth:c.width-m-m})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,m,h,v){if(r.call(this),!m)throw new Error("No data for PDF table.");var p,j,w,S,g=[],y=[],N=[],A={},R={},$=[],I=[],M=(v=v||{}).autoSize||!1,H=v.printHeaders!==!1,ae=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,E=v.margins||Object.assign({width:this.getPageWidth()},t),P=typeof v.padding=="number"?v.padding:3,J=v.headerBackgroundColor||"#c8c8c8",V=v.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=H,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=ae,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=V,this.setFontSize(ae),h==null)y=g=Object.keys(m[0]),N=g.map(function(){return"left"});else if(Array.isArray(h)&&Et(h[0])==="object")for(g=h.map(function(ne){return ne.name}),y=h.map(function(ne){return ne.prompt||ne.name||""}),N=h.map(function(ne){return ne.align||"left"}),p=0;p<h.length;p+=1)R[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(y=g=h,N=g.map(function(){return"left"}));if(M||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<g.length;p+=1){for(A[S=g[p]]=m.map(function(ne){return ne[S]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(y[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=A[S],this.setFont(void 0,"normal"),w=0;w<j.length;w+=1)$.push(this.getTextDimensions(j[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[S]=Math.max.apply(null,$)+P+P,$=[]}if(H){var X={};for(p=0;p<g.length;p+=1)X[g[p]]={},X[g[p]].text=y[p],X[g[p]].align=N[p];var Z=l.call(this,X,R);I=g.map(function(ne){return new i(c,d,R[ne],Z,X[ne].text,void 0,X[ne].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var ee=h.reduce(function(ne,pe){return ne[pe.name]=pe.align,ne},{});for(p=0;p<m.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:m[p]},this);var U=l.call(this,m[p],R);for(w=0;w<g.length;w+=1){var te=m[p][g[w]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:w,data:te},this),o.call(this,new i(c,d,R[g[w]],U,te,p+2,ee[g[w]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var m=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(c).map(function(p){var j=c[p];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,d[p]-m-m)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/v+m+m},this).reduce(function(p,j){return Math.max(p,j)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){m=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(m.y=this.internal.__cell__.margins.top||0,v.push(m)),m.lineNumber=c;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,m),this.setTextColor(j)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(st.API);var ew={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tw=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],d1=Zb(tw),nw=[100,200,300,400,500,600,700,800,900],y8=Zb(nw);function h1(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return ew[i=i||"normal"]?i:"normal"}(e.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof d1[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,n,r].join(" ")}}}function Hv(e,t,n,r){var a;for(a=n;a>=0&&a<t.length;a+=r)if(e[t[a]])return e[t[a]];for(a=n;a>=0&&a<t.length;a-=r)if(e[t[a]])return e[t[a]]}var b8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Vv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Kv(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function w8(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},b8,n.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(a[(i=h1(t[l])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+Kv(i)+"' and default family '"+r+"'.");if(o=function(c,d){if(d[c])return d[c];var m=d1[c],h=m<=d1.normal?-1:1,v=Hv(d,tw,m,h);if(!v)throw new Error("Could not find a matching font-stretch value for "+c);return v}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var m=ew[c],h=0;h<m.length;++h)if(d[m[h]])return d[m[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var m=y8[c],h=Hv(d,nw,m,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Kv(i)+"'.");return o}function Gv(e){return e.trimLeft()}function N8(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function j8(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var ch,Yv,Xv,Pm=["times"];(function(e){var t,n,r,a,i,o,l,c,d,m=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new c,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new o,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new o,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new m}]);var h=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=C;Object.defineProperty(this,"pdf",{get:function(){return D}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(xe){W=!!xe}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(xe){Q=!!xe}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(xe){isNaN(xe)||(ie=xe)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(xe){isNaN(xe)||(de=xe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(xe){var G;typeof xe=="number"?G=[xe,xe,xe,xe]:((G=new Array(4))[0]=xe[0],G[1]=xe.length>=2?xe[1]:G[0],G[2]=xe.length>=3?xe[2]:G[0],G[3]=xe.length>=4?xe[3]:G[1]),d.margin=G}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(xe){re=xe}});var B=0;Object.defineProperty(this,"lastBreak",{get:function(){return B},set:function(xe){B=xe}});var oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return oe},set:function(xe){oe=xe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(xe){xe instanceof m&&(d=xe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(xe){d.path=xe}});var ye=[];Object.defineProperty(this,"ctxStack",{get:function(){return ye},set:function(xe){ye=xe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xe){var G;G=v(xe),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=G.a===0,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xe){var G=v(xe);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=G.a===0,this.ctx.strokeOpacity=G.a,G.a===0?this.pdf.setDrawColor(255,255,255):(G.a,this.pdf.setDrawColor(G.r,G.g,G.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xe){["butt","round","square"].indexOf(xe)!==-1&&(this.ctx.lineCap=xe,this.pdf.setLineCap(xe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xe){isNaN(xe)||(this.ctx.lineWidth=xe,this.pdf.setLineWidth(xe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xe){["bevel","round","miter"].indexOf(xe)!==-1&&(this.ctx.lineJoin=xe,this.pdf.setLineJoin(xe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xe){isNaN(xe)||(this.ctx.miterLimit=xe,this.pdf.setMiterLimit(xe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xe){this.ctx.textBaseline=xe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xe){["right","end","center","left","start"].indexOf(xe)!==-1&&(this.ctx.textAlign=xe)}});var Pe=null;function Ie(xe,G){if(Pe===null){var Xe=function(Ue){var Ae=[];return Object.keys(Ue).forEach(function(De){Ue[De].forEach(function(Me){var Fe=null;switch(Me){case"bold":Fe={family:De,weight:"bold"};break;case"italic":Fe={family:De,style:"italic"};break;case"bolditalic":Fe={family:De,weight:"bold",style:"italic"};break;case"":case"normal":Fe={family:De}}Fe!==null&&(Fe.ref={name:De,style:Me},Ae.push(Fe))})}),Ae}(xe.getFontList());Pe=function(Ue){for(var Ae={},De=0;De<Ue.length;++De){var Me=h1(Ue[De]),Fe=Me.family,Ye=Me.stretch,lt=Me.style,_e=Me.weight;Ae[Fe]=Ae[Fe]||{},Ae[Fe][Ye]=Ae[Fe][Ye]||{},Ae[Fe][Ye][lt]=Ae[Fe][Ye][lt]||{},Ae[Fe][Ye][lt][_e]=Me}return Ae}(Xe.concat(G))}return Pe}var Ve=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ve},set:function(xe){Pe=null,Ve=xe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xe){var G;if(this.ctx.font=xe,(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xe))!==null){var Xe=G[1];G[2];var Ue=G[3],Ae=G[4];G[5];var De=G[6],Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ae)[2];Ae=Math.floor(Me==="px"?parseFloat(Ae)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(Ae)*this.pdf.getFontSize():parseFloat(Ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ae);var Fe=function(et){var ht,Te,vn=[],wt=et.trim();if(wt==="")return Pm;if(wt in Vv)return[Vv[wt]];for(;wt!=="";){switch(Te=null,ht=(wt=Gv(wt)).charAt(0)){case'"':case"'":Te=N8(wt.substring(1),ht);break;default:Te=j8(wt)}if(Te===null||(vn.push(Te[0]),(wt=Gv(Te[1]))!==""&&wt.charAt(0)!==","))return Pm;wt=wt.replace(/^,/,"")}return vn}(De);if(this.fontFaces){var Ye=w8(Ie(this.pdf,this.fontFaces),Fe.map(function(et){return{family:et,stretch:"normal",weight:Ue,style:Xe}}));this.pdf.setFont(Ye.ref.name,Ye.ref.style)}else{var lt="";(Ue==="bold"||parseInt(Ue,10)>=700||Xe==="bold")&&(lt="bold"),Xe==="italic"&&(lt+="italic"),lt.length===0&&(lt="normal");for(var _e="",Ge={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ze=0;Ze<Fe.length;Ze++){if(this.pdf.internal.getFont(Fe[Ze],lt,{noFallback:!0,disableWarning:!0})!==void 0){_e=Fe[Ze];break}if(lt==="bolditalic"&&this.pdf.internal.getFont(Fe[Ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_e=Fe[Ze],lt="bold";else if(this.pdf.internal.getFont(Fe[Ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_e=Fe[Ze],lt="normal";break}}if(_e===""){for(var yt=0;yt<Fe.length;yt++)if(Ge[Fe[yt]]){_e=Ge[Fe[yt]];break}}_e=_e===""?"Times":_e,this.pdf.setFont(_e,lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xe){this.ctx.globalCompositeOperation=xe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xe){this.ctx.globalAlpha=xe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xe){this.ctx.lineDashOffset=xe,pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xe){this.ctx.lineDash=xe,pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xe){this.ctx.ignoreClearRect=!!xe}})};h.prototype.setLineDash=function(C){this.lineDash=C},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){A.call(this,"fill",!1)},h.prototype.stroke=function(){A.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(C,D){if(isNaN(C)||isNaN(D))throw Bt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(C,D));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(C,D)},h.prototype.closePath=function(){var C=new o(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&Et(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){C=new o(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(C.x,C.y)},h.prototype.lineTo=function(C,D){if(isNaN(C)||isNaN(D))throw Bt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(C,D));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},h.prototype.quadraticCurveTo=function(C,D,W,Q){if(isNaN(W)||isNaN(Q)||isNaN(C)||isNaN(D))throw Bt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new o(W,Q)),de=this.ctx.transform.applyToPoint(new o(C,D));this.path.push({type:"qct",x1:de.x,y1:de.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},h.prototype.bezierCurveTo=function(C,D,W,Q,ie,de){if(isNaN(ie)||isNaN(de)||isNaN(C)||isNaN(D)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new o(ie,de)),B=this.ctx.transform.applyToPoint(new o(C,D)),oe=this.ctx.transform.applyToPoint(new o(W,Q));this.path.push({type:"bct",x1:B.x,y1:B.y,x2:oe.x,y2:oe.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},h.prototype.arc=function(C,D,W,Q,ie,de){if(isNaN(C)||isNaN(D)||isNaN(W)||isNaN(Q)||isNaN(ie))throw Bt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new o(C,D));C=re.x,D=re.y;var B=this.ctx.transform.applyToPoint(new o(0,W)),oe=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(B.x-oe.x,2)+Math.pow(B.y-oe.y,2))}Math.abs(ie-Q)>=2*Math.PI&&(Q=0,ie=2*Math.PI),this.path.push({type:"arc",x:C,y:D,radius:W,startAngle:Q,endAngle:ie,counterclockwise:de})},h.prototype.arcTo=function(C,D,W,Q,ie){throw new Error("arcTo not implemented.")},h.prototype.rect=function(C,D,W,Q){if(isNaN(C)||isNaN(D)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,D),this.lineTo(C+W,D),this.lineTo(C+W,D+Q),this.lineTo(C,D+Q),this.lineTo(C,D),this.lineTo(C+W,D),this.lineTo(C,D)},h.prototype.fillRect=function(C,D,W,Q){if(isNaN(C)||isNaN(D)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,D,W,Q),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},h.prototype.strokeRect=function(C,D,W,Q){if(isNaN(C)||isNaN(D)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(C,D,W,Q),this.stroke())},h.prototype.clearRect=function(C,D,W,Q){if(isNaN(C)||isNaN(D)||isNaN(W)||isNaN(Q))throw Bt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,D,W,Q))},h.prototype.save=function(C){C=typeof C!="boolean"||C;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},h.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(D),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(C){var D,W,Q,ie;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))D=0,W=0,Q=0,ie=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(de!==null)D=parseInt(de[1]),W=parseInt(de[2]),Q=parseInt(de[3]),ie=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)D=parseInt(de[1]),W=parseInt(de[2]),Q=parseInt(de[3]),ie=parseFloat(de[4]);else{if(ie=1,typeof C=="string"&&C.charAt(0)!=="#"){var re=new Kb(C);C=re.ok?re.toHex():"#000000"}C.length===4?(D=C.substring(1,2),D+=D,W=C.substring(2,3),W+=W,Q=C.substring(3,4),Q+=Q):(D=C.substring(1,3),W=C.substring(3,5),Q=C.substring(5,7)),D=parseInt(D,16),W=parseInt(W,16),Q=parseInt(Q,16)}}return{r:D,g:W,b:Q,a:ie,style:C}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(C,D,W,Q){if(isNaN(D)||isNaN(W)||typeof C!="string")throw Bt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!p.call(this)){var ie=U(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;P.call(this,{text:C,x:D,y:W,scale:de,angle:ie,align:this.textAlign,maxWidth:Q})}},h.prototype.strokeText=function(C,D,W,Q){if(isNaN(D)||isNaN(W)||typeof C!="string")throw Bt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){Q=isNaN(Q)?void 0:Q;var ie=U(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;P.call(this,{text:C,x:D,y:W,scale:de,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:Q})}},h.prototype.measureText=function(C){if(typeof C!="string")throw Bt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,W=this.pdf.internal.scaleFactor,Q=D.internal.getFontSize(),ie=D.getStringUnitWidth(C)*Q/D.internal.scaleFactor,de=function(re){var B=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return B}}),this};return new de({width:ie*=Math.round(96*W/72*1e4)/1e4})},h.prototype.scale=function(C,D){if(isNaN(C)||isNaN(D))throw Bt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new c(C,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.rotate=function(C){if(isNaN(C))throw Bt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new c(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},h.prototype.translate=function(C,D){if(isNaN(C)||isNaN(D))throw Bt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new c(1,0,0,1,C,D);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.transform=function(C,D,W,Q,ie,de){if(isNaN(C)||isNaN(D)||isNaN(W)||isNaN(Q)||isNaN(ie)||isNaN(de))throw Bt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new c(C,D,W,Q,ie,de);this.ctx.transform=this.ctx.transform.multiply(re)},h.prototype.setTransform=function(C,D,W,Q,ie,de){C=isNaN(C)?1:C,D=isNaN(D)?0:D,W=isNaN(W)?0:W,Q=isNaN(Q)?1:Q,ie=isNaN(ie)?0:ie,de=isNaN(de)?0:de,this.ctx.transform=new c(C,D,W,Q,ie,de)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(C,D,W,Q,ie,de,re,B,oe){var ye=this.pdf.getImageProperties(C),Pe=1,Ie=1,Ve=1,xe=1;Q!==void 0&&B!==void 0&&(Ve=B/Q,xe=oe/ie,Pe=ye.width/Q*B/Q,Ie=ye.height/ie*oe/ie),de===void 0&&(de=D,re=W,D=0,W=0),Q!==void 0&&B===void 0&&(B=Q,oe=ie),Q===void 0&&B===void 0&&(B=ye.width,oe=ye.height);for(var G,Xe=this.ctx.transform.decompose(),Ue=U(Xe.rotate.shx),Ae=new c,De=(Ae=(Ae=(Ae=Ae.multiply(Xe.translate)).multiply(Xe.skew)).multiply(Xe.scale)).applyToRectangle(new l(de-D*Ve,re-W*xe,Q*Pe,ie*Ie)),Me=S.call(this,De),Fe=[],Ye=0;Ye<Me.length;Ye+=1)Fe.indexOf(Me[Ye])===-1&&Fe.push(Me[Ye]);if(N(Fe),this.autoPaging)for(var lt=Fe[0],_e=Fe[Fe.length-1],Ge=lt;Ge<_e+1;Ge++){this.pdf.setPage(Ge);var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=Ge===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Te=Ge===1?0:et+(Ge-2)*ht;if(this.ctx.clip_path.length!==0){var vn=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(G,this.posX+this.margin[3],-Te+yt+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=vn}var wt=JSON.parse(JSON.stringify(De));wt=y([wt],this.posX+this.margin[3],-Te+yt+this.ctx.prevPageLastElemOffset)[0];var it=(Ge>lt||Ge<_e)&&w.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,ht,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",wt.x,wt.y,wt.w,wt.h,null,null,Ue),it&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",De.x,De.y,De.w,De.h,null,null,Ue)};var S=function(C,D,W){var Q=[];D=D||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":Q.push(Math.floor((C.y+ie)/W)+1);break;case"arc":Q.push(Math.floor((C.y+ie-C.radius)/W)+1),Q.push(Math.floor((C.y+ie+C.radius)/W)+1);break;case"qct":var de=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);Q.push(Math.floor((de.y+ie)/W)+1),Q.push(Math.floor((de.y+de.h+ie)/W)+1);break;case"bct":var re=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);Q.push(Math.floor((re.y+ie)/W)+1),Q.push(Math.floor((re.y+re.h+ie)/W)+1);break;case"rect":Q.push(Math.floor((C.y+ie)/W)+1),Q.push(Math.floor((C.y+C.h+ie)/W)+1)}for(var B=0;B<Q.length;B+=1)for(;this.pdf.internal.getNumberOfPages()<Q[B];)g.call(this);return Q},g=function(){var C=this.fillStyle,D=this.strokeStyle,W=this.font,Q=this.lineCap,ie=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=D,this.font=W,this.lineCap=Q,this.lineWidth=ie,this.lineJoin=de},y=function(C,D,W){for(var Q=0;Q<C.length;Q++)switch(C[Q].type){case"bct":C[Q].x2+=D,C[Q].y2+=W;case"qct":C[Q].x1+=D,C[Q].y1+=W;case"mt":case"lt":case"arc":default:C[Q].x+=D,C[Q].y+=W}return C},N=function(C){return C.sort(function(D,W){return D-W})},A=function(C,D){for(var W,Q,ie=this.fillStyle,de=this.strokeStyle,re=this.lineCap,B=this.lineWidth,oe=Math.abs(B*this.ctx.transform.scaleX),ye=this.lineJoin,Pe=JSON.parse(JSON.stringify(this.path)),Ie=JSON.parse(JSON.stringify(this.path)),Ve=[],xe=0;xe<Ie.length;xe++)if(Ie[xe].x!==void 0)for(var G=S.call(this,Ie[xe]),Xe=0;Xe<G.length;Xe+=1)Ve.indexOf(G[Xe])===-1&&Ve.push(G[Xe]);for(var Ue=0;Ue<Ve.length;Ue++)for(;this.pdf.internal.getNumberOfPages()<Ve[Ue];)g.call(this);if(N(Ve),this.autoPaging)for(var Ae=Ve[0],De=Ve[Ve.length-1],Me=Ae;Me<De+1;Me++){this.pdf.setPage(Me),this.fillStyle=ie,this.strokeStyle=de,this.lineCap=re,this.lineWidth=oe,this.lineJoin=ye;var Fe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ye=Me===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=Me===1?0:lt+(Me-2)*_e;if(this.ctx.clip_path.length!==0){var Ze=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(W,this.posX+this.margin[3],-Ge+Ye+this.ctx.prevPageLastElemOffset),R.call(this,C,!0),this.path=Ze}if(Q=JSON.parse(JSON.stringify(Pe)),this.path=y(Q,this.posX+this.margin[3],-Ge+Ye+this.ctx.prevPageLastElemOffset),D===!1||Me===0){var yt=(Me>Ae||Me<De)&&w.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fe,_e,null).clip().discardPath()),R.call(this,C,D),yt&&this.pdf.restoreGraphicsState()}this.lineWidth=B}else this.lineWidth=oe,R.call(this,C,D),this.lineWidth=B;this.path=Pe},R=function(C,D){if((C!=="stroke"||D||!j.call(this))&&(C==="stroke"||D||!p.call(this))){for(var W,Q,ie=[],de=this.path,re=0;re<de.length;re++){var B=de[re];switch(B.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:B,deltas:[],abs:[]});break;case"lt":var oe=ie.length;if(de[re-1]&&!isNaN(de[re-1].x)&&(W=[B.x-de[re-1].x,B.y-de[re-1].y],oe>0)){for(;oe>=0;oe--)if(ie[oe-1].close!==!0&&ie[oe-1].begin!==!0){ie[oe-1].deltas.push(W),ie[oe-1].abs.push(B);break}}break;case"bct":W=[B.x1-de[re-1].x,B.y1-de[re-1].y,B.x2-de[re-1].x,B.y2-de[re-1].y,B.x-de[re-1].x,B.y-de[re-1].y],ie[ie.length-1].deltas.push(W);break;case"qct":var ye=de[re-1].x+2/3*(B.x1-de[re-1].x),Pe=de[re-1].y+2/3*(B.y1-de[re-1].y),Ie=B.x+2/3*(B.x1-B.x),Ve=B.y+2/3*(B.y1-B.y),xe=B.x,G=B.y;W=[ye-de[re-1].x,Pe-de[re-1].y,Ie-de[re-1].x,Ve-de[re-1].y,xe-de[re-1].x,G-de[re-1].y],ie[ie.length-1].deltas.push(W);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(B)}}Q=D?null:C==="stroke"?"stroke":"fill";for(var Xe=!1,Ue=0;Ue<ie.length;Ue++)if(ie[Ue].arc)for(var Ae=ie[Ue].abs,De=0;De<Ae.length;De++){var Me=Ae[De];Me.type==="arc"?M.call(this,Me.x,Me.y,Me.radius,Me.startAngle,Me.endAngle,Me.counterclockwise,void 0,D,!Xe):J.call(this,Me.x,Me.y),Xe=!0}else if(ie[Ue].close===!0)this.pdf.internal.out("h"),Xe=!1;else if(ie[Ue].begin!==!0){var Fe=ie[Ue].start.x,Ye=ie[Ue].start.y;V.call(this,ie[Ue].deltas,Fe,Ye),Xe=!0}Q&&H.call(this,Q),D&&ae.call(this)}},$=function(C){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-W;case"top":return C+D-W;case"hanging":return C+D-2*W;case"middle":return C+D/2-W;case"ideographic":return C;case"alphabetic":default:return C}},I=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(D,W){this.colorStops.push([D,W])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(C,D,W,Q,ie,de,re,B,oe){for(var ye=Z.call(this,W,Q,ie,de),Pe=0;Pe<ye.length;Pe++){var Ie=ye[Pe];Pe===0&&(oe?E.call(this,Ie.x1+C,Ie.y1+D):J.call(this,Ie.x1+C,Ie.y1+D)),X.call(this,C,D,Ie.x2,Ie.y2,Ie.x3,Ie.y3,Ie.x4,Ie.y4)}B?ae.call(this):H.call(this,re)},H=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ae=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(C,D){this.pdf.internal.out(n(C)+" "+r(D)+" m")},P=function(C){var D;switch(C.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var W=this.pdf.getTextDimensions(C.text),Q=$.call(this,C.y),ie=I.call(this,Q)-W.h,de=this.ctx.transform.applyToPoint(new o(C.x,Q)),re=this.ctx.transform.decompose(),B=new c;B=(B=(B=B.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var oe,ye,Pe,Ie=this.ctx.transform.applyToRectangle(new l(C.x,Q,W.w,W.h)),Ve=B.applyToRectangle(new l(C.x,ie,W.w,W.h)),xe=S.call(this,Ve),G=[],Xe=0;Xe<xe.length;Xe+=1)G.indexOf(xe[Xe])===-1&&G.push(xe[Xe]);if(N(G),this.autoPaging)for(var Ue=G[0],Ae=G[G.length-1],De=Ue;De<Ae+1;De++){this.pdf.setPage(De);var Me=De===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ye=this.pdf.internal.pageSize.height-this.margin[2],lt=Ye-this.margin[0],_e=this.pdf.internal.pageSize.width-this.margin[1],Ge=_e-this.margin[3],Ze=De===1?0:Fe+(De-2)*lt;if(this.ctx.clip_path.length!==0){var yt=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(oe,this.posX+this.margin[3],-1*Ze+Me),R.call(this,"fill",!0),this.path=yt}var et=y([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-Ze+Me+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*C.scale),Pe=this.lineWidth,this.lineWidth=Pe*C.scale);var ht=this.autoPaging!=="text";if(ht||et.y+et.h<=Ye){if(ht||et.y>=Me&&et.x<=_e){var Te=ht?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||_e-et.x)[0],vn=y([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-Ze+Me+this.ctx.prevPageLastElemOffset)[0],wt=ht&&(De>Ue||De<Ae)&&w.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,lt,null).clip().discardPath()),this.pdf.text(Te,vn.x,vn.y,{angle:C.angle,align:D,renderingMode:C.renderingMode}),wt&&this.pdf.restoreGraphicsState()}}else et.y<Ye&&(this.ctx.prevPageLastElemOffset+=Ye-et.y);C.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=Pe)}else C.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*C.scale),Pe=this.lineWidth,this.lineWidth=Pe*C.scale),this.pdf.text(C.text,de.x+this.posX,de.y+this.posY,{angle:C.angle,align:D,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=Pe)},J=function(C,D,W,Q){W=W||0,Q=Q||0,this.pdf.internal.out(n(C+W)+" "+r(D+Q)+" l")},V=function(C,D,W){return this.pdf.lines(C,D,W,null,null)},X=function(C,D,W,Q,ie,de,re,B){this.pdf.internal.out([t(a(W+C)),t(i(Q+D)),t(a(ie+C)),t(i(de+D)),t(a(re+C)),t(i(B+D)),"c"].join(" "))},Z=function(C,D,W,Q){for(var ie=2*Math.PI,de=Math.PI/2;D>W;)D-=ie;var re=Math.abs(W-D);re<ie&&Q&&(re=ie-re);for(var B=[],oe=Q?-1:1,ye=D;re>1e-5;){var Pe=ye+oe*Math.min(re,de);B.push(ee.call(this,C,ye,Pe)),re-=Math.abs(Pe-ye),ye=Pe}return B},ee=function(C,D,W){var Q=(W-D)/2,ie=C*Math.cos(Q),de=C*Math.sin(Q),re=ie,B=-de,oe=re*re+B*B,ye=oe+re*ie+B*de,Pe=4/3*(Math.sqrt(2*oe*ye)-ye)/(re*de-B*ie),Ie=re-Pe*B,Ve=B+Pe*re,xe=Ie,G=-Ve,Xe=Q+D,Ue=Math.cos(Xe),Ae=Math.sin(Xe);return{x1:C*Math.cos(D),y1:C*Math.sin(D),x2:Ie*Ue-Ve*Ae,y2:Ie*Ae+Ve*Ue,x3:xe*Ue-G*Ae,y3:xe*Ae+G*Ue,x4:C*Math.cos(W),y4:C*Math.sin(W)}},U=function(C){return 180*C/Math.PI},te=function(C,D,W,Q,ie,de){var re=C+.5*(W-C),B=D+.5*(Q-D),oe=ie+.5*(W-ie),ye=de+.5*(Q-de),Pe=Math.min(C,ie,re,oe),Ie=Math.max(C,ie,re,oe),Ve=Math.min(D,de,B,ye),xe=Math.max(D,de,B,ye);return new l(Pe,Ve,Ie-Pe,xe-Ve)},ne=function(C,D,W,Q,ie,de,re,B){var oe,ye,Pe,Ie,Ve,xe,G,Xe,Ue,Ae,De,Me,Fe,Ye,lt=W-C,_e=Q-D,Ge=ie-W,Ze=de-Q,yt=re-ie,et=B-de;for(ye=0;ye<41;ye++)Ue=(G=(Pe=C+(oe=ye/40)*lt)+oe*((Ve=W+oe*Ge)-Pe))+oe*(Ve+oe*(ie+oe*yt-Ve)-G),Ae=(Xe=(Ie=D+oe*_e)+oe*((xe=Q+oe*Ze)-Ie))+oe*(xe+oe*(de+oe*et-xe)-Xe),ye==0?(De=Ue,Me=Ae,Fe=Ue,Ye=Ae):(De=Math.min(De,Ue),Me=Math.min(Me,Ae),Fe=Math.max(Fe,Ue),Ye=Math.max(Ye,Ae));return new l(Math.round(De),Math.round(Me),Math.round(Fe-De),Math.round(Ye-Me))},pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,D,W=(C=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:D}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(st.API),function(e){var t=function(i){var o,l,c,d,m,h,v,p,j,w;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(m=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(m=((m=((m=((m=(m-(w=m%85))/85)-(j=m%85))/85)-(p=m%85))/85)-(v=m%85))/85)%85,l.push(h+33,v+33,p+33,j+33,w+33)):l.push(122);return function(S,g){for(var y=g;y>0;y--)S.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(i){var o,l,c,d,m,h=String,v="length",p=255,j="charCodeAt",w="slice",S="replace";for(i[w](-2),i=i[w](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),c=[],d=0,m=(i+=o="uuuuu"[w](i[v]%5||5))[v];m>d;d+=5)l=52200625*(i[j](d)-33)+614125*(i[j](d+1)-33)+7225*(i[j](d+2)-33)+85*(i[j](d+3)-33)+(i[j](d+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(g,y){for(var N=y;N>0;N--)g.pop()}(c,o[v]),h.fromCharCode.apply(h,c)},r=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=s1(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(m){return("0"+m.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(st.API),function(e){e.loadFile=function(t,n,r){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,m){var h=new XMLHttpRequest,v=0,p=function(j){var w=j.length,S=[],g=String.fromCharCode;for(v=0;v<w;v+=1)S.push(g(255&j.charCodeAt(v)));return S.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?m(p(this.responseText)):m(void 0)}),h.send(null),d&&h.status===200)return p(h.responseText)}(a,i,o)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(st.API),function(e){function t(){return(ot.html2canvas?Promise.resolve(ot.html2canvas):t1(()=>import("./html2canvas.esm-e0a7d97b.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(ot.DOMPurify?Promise.resolve(ot.DOMPurify):t1(()=>import("./purify.es-31816194.js"),[],import.meta.url)).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=Et(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,m){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),v=d.firstChild;v;v=v.nextSibling)m!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||h.appendChild(c(v,m));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var v=0;v<d.length;++v){var p=d[v],j=p.src.find(function(w){return w.format==="truetype"});j&&c.addFont(j.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||st.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,m){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,m).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),m=c.call(d,o,l);return i.convert(m,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,st.getPageSize=function(o,l,c){if(Et(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var m,h=(""+c).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+l}var p,j=0,w=0;if(v.hasOwnProperty(h))j=v[h][1]/m,w=v[h][0]/m;else try{j=c[1],w=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",w>j&&(p=w,w=j,j=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",j>w&&(p=w,w=j,j=p)}return{width:w,height:j,unit:l,k:m,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(h1):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(st.API),st.API.addJS=function(e){return Xv=e,this.internal.events.subscribe("postPutResources",function(){ch=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ch+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Yv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Xv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ch!==void 0&&Yv!==void 0&&this.internal.out("/Names <</JavaScript "+ch+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=r.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,m=[];for(i=0;i<d;i++){var h=n.internal.newObject();m.push(h);var v=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<m.length;i++)n.internal.write("(page_"+(i+1)+")"+m[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,a,i){var o={title:a,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,a){for(var i=0;i<a.children.length;i++)r.count++,this.count_r(r,a.children[i]);return r.count}}])}(st.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,a,i,o,l){var c,d=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(h){for(var v,p=256*h.charCodeAt(4)+h.charCodeAt(5),j=h.length,w={width:0,height:0,numcomponents:1},S=4;S<j;S+=2){if(S+=p,t.indexOf(h.charCodeAt(S+1))!==-1){v=256*h.charCodeAt(S+5)+h.charCodeAt(S+6),w={width:256*h.charCodeAt(S+7)+h.charCodeAt(S+8),height:v,numcomponents:h.charCodeAt(S+9)};break}p=256*h.charCodeAt(S+2)+h.charCodeAt(S+3)}return w}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}m={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:a}}return m}}(st.API);var sl,uh,Jv,Qv,Zv,S8=function(){var e,t,n;function r(i){var o,l,c,d,m,h,v,p,j,w,S,g,y,N;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),j=(function(){var A,R;for(R=[],A=0;A<4;++A)R.push(String.fromCharCode(this.data[this.pos++]));return R}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},m=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*m/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(j==="fdAT"&&(this.pos+=4,o-=4),i=(h!=null?h.data:void 0)||this.imgData,g=0;0<=o?g<o:g>o;0<=o?++g:--g)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((w=c-this.transparency.indexed.length)>0)for(y=0;0<=w?y<w:y>w;0<=w?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(S=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,S.slice(0,v)),this.text[p]=String.fromCharCode.apply(String,S.slice(v+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function m(h,v,p,j){var w,S,g,y,N,A,R,$,I,M,H,ae,E,P,J,V,X,Z,ee,U,te,ne=Math.ceil((d.width-h)/p),pe=Math.ceil((d.height-v)/j),C=d.width==ne&&d.height==pe;for(P=o*ne,ae=C?l:new Uint8Array(P*pe),A=i.length,E=0,S=0;E<pe&&c<A;){switch(i[c++]){case 0:for(y=X=0;X<P;y=X+=1)ae[S++]=i[c++];break;case 1:for(y=Z=0;Z<P;y=Z+=1)w=i[c++],N=y<o?0:ae[S-o],ae[S++]=(w+N)%256;break;case 2:for(y=ee=0;ee<P;y=ee+=1)w=i[c++],g=(y-y%o)/o,J=E&&ae[(E-1)*P+g*o+y%o],ae[S++]=(J+w)%256;break;case 3:for(y=U=0;U<P;y=U+=1)w=i[c++],g=(y-y%o)/o,N=y<o?0:ae[S-o],J=E&&ae[(E-1)*P+g*o+y%o],ae[S++]=(w+Math.floor((N+J)/2))%256;break;case 4:for(y=te=0;te<P;y=te+=1)w=i[c++],g=(y-y%o)/o,N=y<o?0:ae[S-o],E===0?J=V=0:(J=ae[(E-1)*P+g*o+y%o],V=g&&ae[(E-1)*P+(g-1)*o+y%o]),R=N+J-V,$=Math.abs(R-N),M=Math.abs(R-J),H=Math.abs(R-V),I=$<=M&&$<=H?N:M<=H?J:V,ae[S++]=(w+I)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!C){var D=((v+E*j)*d.width+h)*o,W=E*P;for(y=0;y<ne;y+=1){for(var Q=0;Q<o;Q+=1)l[D++]=ae[W++];D+=(p-1)*o}}E++}}return i=n8(i),d.interlaceMethod==1?(m(0,0,8,8),m(4,0,8,8),m(0,4,4,8),m(2,0,4,4),m(0,2,2,4),m(1,0,2,2),m(0,1,1,2)):m(0,0,1,1),l},r.prototype.decodePalette=function(){var i,o,l,c,d,m,h,v,p;for(l=this.palette,m=this.transparency.indexed||[],d=new Uint8Array((m.length||0)+l.length),c=0,i=0,o=h=0,v=l.length;h<v;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(p=m[i++])!=null?p:255;return d},r.prototype.copyToImageData=function(i,o){var l,c,d,m,h,v,p,j,w,S,g;if(c=this.colors,w=null,l=this.hasAlphaChannel,this.palette.length&&(w=(g=this._decodedPalette)!=null?g:this._decodedPalette=this.decodePalette(),c=4,l=!0),j=(d=i.data||i).length,h=w||o,m=v=0,c===1)for(;m<j;)p=w?4*o[m/4]:v,S=h[p++],d[m++]=S,d[m++]=S,d[m++]=S,d[m++]=l?h[p++]:255,v=p;else for(;m<j;)p=w?4*o[m/4]:v,d[m++]=h[p++],d[m++]=h[p++],d[m++]=h[p++],d[m++]=l?h[p++]:255,v=p},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(ot)==="[object Window]"){try{t=ot.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var o,l,c,d,m,h,v,p;if(this.animation){for(p=[],l=m=0,h=(v=this.animation.frames).length;m<h;l=++m)o=v[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,p.push(o.image=e(c));return p}},r.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(i){var o,l,c,d,m,h,v=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,m=h.numPlays,(o=function(){var p,j;if(p=l++%d,j=c[p],v.renderFrame(i,p),d>1&&l/d<m)return v.animation._timeout=setTimeout(o,j.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function k8(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,m=[],h=0,v=null,p=0,j=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,j=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=e[t++];h=e[t++]|e[t++]<<8,v=e[t++],!(1&w)&&(v=null),p=w>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var S=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,A=e[t++],R=A>>6&1,$=1<<(7&A)+1,I=l,M=c,H=!1;A>>7&&(H=!0,I=t,M=$,t+=3*$);var ae=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}m.push({x:S,y:g,width:y,height:N,has_local_palette:H,palette_offset:I,palette_size:M,data_offset:ae,data_length:t-ae,transparent_index:v,interlaced:!!R,delay:h,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return j},this.frameInfo=function(P){if(P<0||P>=m.length)throw new Error("Frame index out of range.");return m[P]},this.decodeAndBlitFrameBGRA=function(P,J){var V=this.frameInfo(P),X=V.width*V.height,Z=new Uint8Array(X);ex(e,V.data_offset,Z,X);var ee=V.palette_offset,U=V.transparent_index;U===null&&(U=256);var te=V.width,ne=n-te,pe=te,C=4*(V.y*n+V.x),D=4*((V.y+V.height)*n+V.x),W=C,Q=4*ne;V.interlaced===!0&&(Q+=4*n*7);for(var ie=8,de=0,re=Z.length;de<re;++de){var B=Z[de];if(pe===0&&(pe=te,(W+=Q)>=D&&(Q=4*ne+4*n*(ie-1),W=C+(te+ne)*(ie<<1),ie>>=1)),B===U)W+=4;else{var oe=e[ee+3*B],ye=e[ee+3*B+1],Pe=e[ee+3*B+2];J[W++]=Pe,J[W++]=ye,J[W++]=oe,J[W++]=255}--pe}},this.decodeAndBlitFrameRGBA=function(P,J){var V=this.frameInfo(P),X=V.width*V.height,Z=new Uint8Array(X);ex(e,V.data_offset,Z,X);var ee=V.palette_offset,U=V.transparent_index;U===null&&(U=256);var te=V.width,ne=n-te,pe=te,C=4*(V.y*n+V.x),D=4*((V.y+V.height)*n+V.x),W=C,Q=4*ne;V.interlaced===!0&&(Q+=4*n*7);for(var ie=8,de=0,re=Z.length;de<re;++de){var B=Z[de];if(pe===0&&(pe=te,(W+=Q)>=D&&(Q=4*ne+4*n*(ie-1),W=C+(te+ne)*(ie<<1),ie>>=1)),B===U)W+=4;else{var oe=e[ee+3*B],ye=e[ee+3*B+1],Pe=e[ee+3*B+2];J[W++]=oe,J[W++]=ye,J[W++]=Pe,J[W++]=255}--pe}}}function ex(e,t,n,r){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,m=0,h=0,v=0,p=e[t++],j=new Int32Array(4096),w=null;;){for(;m<16&&p!==0;)h|=e[t++]<<m,m+=8,p===1?p=e[t++]:--p;if(m<c)break;var S=h&d;if(h>>=c,m-=c,S!==i){if(S===o)break;for(var g=S<l?S:w,y=0,N=g;N>i;)N=j[N]>>8,++y;var A=N;if(v+y+(g!==S?1:0)>r)return void Bt.log("Warning, gif stream longer than expected.");n[v++]=A;var R=v+=y;for(g!==S&&(n[v++]=A),N=g;y--;)N=j[N],n[--R]=255&N,N>>=8;w!==null&&l<4096&&(j[l++]=w<<8|A,l>=d+1&&c<12&&(++c,d=d<<1|1)),w=S}else l=o+1,d=(1<<(c=a+1))-1,w=null}return v!==r&&Bt.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function _m(e){var t,n,r,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),m=new Array(64),h=new Array(65535),v=new Array(65535),p=new Array(64),j=new Array(64),w=[],S=0,g=7,y=new Array(64),N=new Array(64),A=new Array(64),R=new Array(256),$=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(C,D){for(var W=0,Q=0,ie=new Array,de=1;de<=16;de++){for(var re=1;re<=C[de];re++)ie[D[Q]]=[],ie[D[Q]][0]=W,ie[D[Q]][1]=de,Q++,W++;W*=2}return ie}function ee(C){for(var D=C[0],W=C[1]-1;W>=0;)D&1<<W&&(S|=1<<g),W--,--g<0&&(S==255?(U(255),U(0)):U(S),g=7,S=0)}function U(C){w.push(C)}function te(C){U(C>>8&255),U(255&C)}function ne(C,D,W,Q,ie){for(var de,re=ie[0],B=ie[240],oe=function(Ae,De){var Me,Fe,Ye,lt,_e,Ge,Ze,yt,et,ht,Te=0;for(et=0;et<8;++et){Me=Ae[Te],Fe=Ae[Te+1],Ye=Ae[Te+2],lt=Ae[Te+3],_e=Ae[Te+4],Ge=Ae[Te+5],Ze=Ae[Te+6];var vn=Me+(yt=Ae[Te+7]),wt=Me-yt,it=Fe+Ze,bt=Fe-Ze,kt=Ye+Ge,Dn=Ye-Ge,_t=lt+_e,ii=lt-_e,Gt=vn+_t,Lr=vn-_t,va=it+kt,Yt=it-kt;Ae[Te]=Gt+va,Ae[Te+4]=Gt-va;var ut=.707106781*(Yt+Lr);Ae[Te+2]=Lr+ut,Ae[Te+6]=Lr-ut;var Ct=.382683433*((Gt=ii+Dn)-(Yt=bt+wt)),si=.5411961*Gt+Ct,kn=1.306562965*Yt+Ct,Xr=.707106781*(va=Dn+bt),Jr=wt+Xr,nt=wt-Xr;Ae[Te+5]=nt+si,Ae[Te+3]=nt-si,Ae[Te+1]=Jr+kn,Ae[Te+7]=Jr-kn,Te+=8}for(Te=0,et=0;et<8;++et){Me=Ae[Te],Fe=Ae[Te+8],Ye=Ae[Te+16],lt=Ae[Te+24],_e=Ae[Te+32],Ge=Ae[Te+40],Ze=Ae[Te+48];var Er=Me+(yt=Ae[Te+56]),Qr=Me-yt,Hn=Fe+Ze,cn=Fe-Ze,nn=Ye+Ge,ir=Ye-Ge,zi=lt+_e,xa=lt-_e,Ir=Er+zi,sr=Er-zi,Dr=Hn+nn,Zr=Hn-nn;Ae[Te]=Ir+Dr,Ae[Te+32]=Ir-Dr;var xr=.707106781*(Zr+sr);Ae[Te+16]=sr+xr,Ae[Te+48]=sr-xr;var Tr=.382683433*((Ir=xa+ir)-(Zr=cn+Qr)),Ra=.5411961*Ir+Tr,oi=1.306562965*Zr+Tr,li=.707106781*(Dr=ir+cn),ci=Qr+li,fe=Qr-li;Ae[Te+40]=fe+Ra,Ae[Te+24]=fe-Ra,Ae[Te+8]=ci+oi,Ae[Te+56]=ci-oi,Te++}for(et=0;et<64;++et)ht=Ae[et]*De[et],p[et]=ht>0?ht+.5|0:ht-.5|0;return p}(C,D),ye=0;ye<64;++ye)j[I[ye]]=oe[ye];var Pe=j[0]-W;W=j[0],Pe==0?ee(Q[0]):(ee(Q[v[de=32767+Pe]]),ee(h[de]));for(var Ie=63;Ie>0&&j[Ie]==0;)Ie--;if(Ie==0)return ee(re),W;for(var Ve,xe=1;xe<=Ie;){for(var G=xe;j[xe]==0&&xe<=Ie;)++xe;var Xe=xe-G;if(Xe>=16){Ve=Xe>>4;for(var Ue=1;Ue<=Ve;++Ue)ee(B);Xe&=15}de=32767+j[xe],ee(ie[(Xe<<4)+v[de]]),ee(h[de]),xe++}return Ie!=63&&ee(re),W}function pe(C){C=Math.min(Math.max(C,1),100),i!=C&&(function(D){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var ie=o((W[Q]*D+50)/100);ie=Math.min(Math.max(ie,1),255),l[I[Q]]=ie}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var B=o((de[re]*D+50)/100);B=Math.min(Math.max(B,1),255),c[I[re]]=B}for(var oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ye=0,Pe=0;Pe<8;Pe++)for(var Ie=0;Ie<8;Ie++)d[ye]=1/(l[I[ye]]*oe[Pe]*oe[Ie]*8),m[ye]=1/(c[I[ye]]*oe[Pe]*oe[Ie]*8),ye++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),i=C)}this.encode=function(C,D){D&&pe(D),w=new Array,S=0,g=7,te(65496),te(65504),te(16),U(74),U(70),U(73),U(70),U(0),U(1),U(1),U(0),te(1),te(1),U(0),U(0),function(){te(65499),te(132),U(0);for(var Fe=0;Fe<64;Fe++)U(l[Fe]);U(1);for(var Ye=0;Ye<64;Ye++)U(c[Ye])}(),function(Fe,Ye){te(65472),te(17),U(8),te(Ye),te(Fe),U(3),U(1),U(17),U(0),U(2),U(17),U(1),U(3),U(17),U(1)}(C.width,C.height),function(){te(65476),te(418),U(0);for(var Fe=0;Fe<16;Fe++)U(M[Fe+1]);for(var Ye=0;Ye<=11;Ye++)U(H[Ye]);U(16);for(var lt=0;lt<16;lt++)U(ae[lt+1]);for(var _e=0;_e<=161;_e++)U(E[_e]);U(1);for(var Ge=0;Ge<16;Ge++)U(P[Ge+1]);for(var Ze=0;Ze<=11;Ze++)U(J[Ze]);U(17);for(var yt=0;yt<16;yt++)U(V[yt+1]);for(var et=0;et<=161;et++)U(X[et])}(),te(65498),te(12),U(3),U(1),U(0),U(2),U(17),U(3),U(17),U(0),U(63),U(0);var W=0,Q=0,ie=0;S=0,g=7,this.encode.displayName="_encode_";for(var de,re,B,oe,ye,Pe,Ie,Ve,xe,G=C.data,Xe=C.width,Ue=C.height,Ae=4*Xe,De=0;De<Ue;){for(de=0;de<Ae;){for(ye=Ae*De+de,Ie=-1,Ve=0,xe=0;xe<64;xe++)Pe=ye+(Ve=xe>>3)*Ae+(Ie=4*(7&xe)),De+Ve>=Ue&&(Pe-=Ae*(De+1+Ve-Ue)),de+Ie>=Ae&&(Pe-=de+Ie-Ae+4),re=G[Pe++],B=G[Pe++],oe=G[Pe++],y[xe]=($[re]+$[B+256>>0]+$[oe+512>>0]>>16)-128,N[xe]=($[re+768>>0]+$[B+1024>>0]+$[oe+1280>>0]>>16)-128,A[xe]=($[re+1280>>0]+$[B+1536>>0]+$[oe+1792>>0]>>16)-128;W=ne(y,d,W,t,r),Q=ne(N,m,Q,n,a),ie=ne(A,m,ie,n,a),de+=32}De+=8}if(g>=0){var Me=[];Me[1]=g+1,Me[0]=(1<<g+1)-1,ee(Me)}return te(65497),new Uint8Array(w)},e=e||50,function(){for(var C=String.fromCharCode,D=0;D<256;D++)R[D]=C(D)}(),t=Z(M,H),n=Z(P,J),r=Z(ae,E),a=Z(V,X),function(){for(var C=1,D=2,W=1;W<=15;W++){for(var Q=C;Q<D;Q++)v[32767+Q]=W,h[32767+Q]=[],h[32767+Q][1]=W,h[32767+Q][0]=Q;for(var ie=-(D-1);ie<=-C;ie++)v[32767+ie]=W,h[32767+ie]=[],h[32767+ie][1]=W,h[32767+ie][0]=D-1+ie;C<<=1,D<<=1}}(),function(){for(var C=0;C<256;C++)$[C]=19595*C,$[C+256>>0]=38470*C,$[C+512>>0]=7471*C+32768,$[C+768>>0]=-11059*C,$[C+1024>>0]=-21709*C,$[C+1280>>0]=32768*C+8421375,$[C+1536>>0]=-27439*C,$[C+1792>>0]=-5329*C}(),pe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ca(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function tx(e){function t(M){if(!M)throw Error("assert :P")}function n(M,H,ae){for(var E=0;4>E;E++)if(M[H+E]!=ae.charCodeAt(E))return!0;return!1}function r(M,H,ae,E,P){for(var J=0;J<P;J++)M[H+J]=ae[E+J]}function a(M,H,ae,E){for(var P=0;P<E;P++)M[H+P]=ae}function i(M){return new Int32Array(M)}function o(M,H){for(var ae=[],E=0;E<M;E++)ae.push(new H);return ae}function l(M,H){var ae=[];return function E(P,J,V){for(var X=V[J],Z=0;Z<X&&(P.push(V.length>J+1?[]:new H),!(V.length<J+1));Z++)E(P[Z],J+1,V)}(ae,0,M),ae}var c=function(){var M=this;function H(u,f){for(var b=1<<f-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function ae(u,f,b,k,_){t(!(k%b));do u[f+(k-=b)]=_;while(0<k)}function E(u,f,b,k,_){if(t(2328>=_),512>=_)var T=i(512);else if((T=i(_))==null)return 0;return function(F,O,z,K,le,ge){var ve,he,Se=O,be=1<<z,ce=i(16),ue=i(16);for(t(le!=0),t(K!=null),t(F!=null),t(0<z),he=0;he<le;++he){if(15<K[he])return 0;++ce[K[he]]}if(ce[0]==le)return 0;for(ue[1]=0,ve=1;15>ve;++ve){if(ce[ve]>1<<ve)return 0;ue[ve+1]=ue[ve]+ce[ve]}for(he=0;he<le;++he)ve=K[he],0<K[he]&&(ge[ue[ve]++]=he);if(ue[15]==1)return(K=new P).g=0,K.value=ge[0],ae(F,Se,1,be,K),be;var Ne,Ce=-1,je=be-1,qe=0,Re=1,rt=1,$e=1<<z;for(he=0,ve=1,le=2;ve<=z;++ve,le<<=1){if(Re+=rt<<=1,0>(rt-=ce[ve]))return 0;for(;0<ce[ve];--ce[ve])(K=new P).g=ve,K.value=ge[he++],ae(F,Se+qe,le,$e,K),qe=H(qe,ve)}for(ve=z+1,le=2;15>=ve;++ve,le<<=1){if(Re+=rt<<=1,0>(rt-=ce[ve]))return 0;for(;0<ce[ve];--ce[ve]){if(K=new P,(qe&je)!=Ce){for(Se+=$e,Ne=1<<(Ce=ve)-z;15>Ce&&!(0>=(Ne-=ce[Ce]));)++Ce,Ne<<=1;be+=$e=1<<(Ne=Ce-z),F[O+(Ce=qe&je)].g=Ne+z,F[O+Ce].value=Se-O-Ce}K.g=ve-z,K.value=ge[he++],ae(F,Se+(qe>>z),le,$e,K),qe=H(qe,ve)}}return Re!=2*ue[15]-1?0:be}(u,f,b,k,_,T)}function P(){this.value=this.g=0}function J(){this.value=this.g=0}function V(){this.G=o(5,P),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o($n,J)}function X(u,f,b,k){t(u!=null),t(f!=null),t(2147483648>k),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=f,u.pa=b,u.Jd=f,u.Yc=b+k,u.Zc=4<=k?b+k-4+1:b,de(u)}function Z(u,f){for(var b=0;0<f--;)b|=B(u,128)<<f;return b}function ee(u,f){var b=Z(u,f);return re(u)?-b:b}function U(u,f,b,k){var _,T=0;for(t(u!=null),t(f!=null),t(4294967288>k),u.Sb=k,u.Ra=0,u.u=0,u.h=0,4<k&&(k=4),_=0;_<k;++_)T+=f[b+_]<<8*_;u.Ra=T,u.bb=k,u.oa=f,u.pa=b}function te(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Ho-8>>>0,++u.bb,u.u-=8;W(u)&&(u.h=1,u.u=0)}function ne(u,f){if(t(0<=f),!u.h&&f<=Wo){var b=D(u)&Uo[f];return u.u+=f,te(u),b}return u.h=1,u.u=0}function pe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(u){return u.Ra>>>(u.u&Ho-1)>>>0}function W(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Ho}function Q(u,f){u.u=f,u.h=W(u)}function ie(u){u.u>=pc&&(t(u.u>=pc),te(u))}function de(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function re(u){return Z(u,1)}function B(u,f){var b=u.Ca;0>u.b&&de(u);var k=u.b,_=b*f>>>8,T=(u.I>>>k>_)+0;for(T?(b-=_,u.I-=_+1<<k>>>0):b=_+1,k=b,_=0;256<=k;)_+=8,k>>=8;return k=7^_+br[k],u.b-=k,u.Ca=(b<<k)-1,T}function oe(u,f,b){u[f+0]=b>>24&255,u[f+1]=b>>16&255,u[f+2]=b>>8&255,u[f+3]=b>>0&255}function ye(u,f){return u[f+0]<<0|u[f+1]<<8}function Pe(u,f){return ye(u,f)|u[f+2]<<16}function Ie(u,f){return ye(u,f)|ye(u,f+2)<<16}function Ve(u,f){var b=1<<f;return t(u!=null),t(0<f),u.X=i(b),u.X==null?0:(u.Mb=32-f,u.Xa=f,1)}function xe(u,f){t(u!=null),t(f!=null),t(u.Xa==f.Xa),r(f.X,0,u.X,0,1<<f.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function Xe(u,f,b,k){t(b!=null),t(k!=null);var _=b[0],T=k[0];return _==0&&(_=(u*T+f/2)/f),T==0&&(T=(f*_+u/2)/u),0>=_||0>=T?0:(b[0]=_,k[0]=T,1)}function Ue(u,f){return u+(1<<f)-1>>>f}function Ae(u,f){return((4278255360&u)+(4278255360&f)>>>0&4278255360)+((16711935&u)+(16711935&f)>>>0&16711935)>>>0}function De(u,f){M[f]=function(b,k,_,T,F,O,z){var K;for(K=0;K<F;++K){var le=M[u](O[z+K-1],_,T+K);O[z+K]=Ae(b[k+K],le)}}}function Me(){this.ud=this.hd=this.jd=0}function Fe(u,f){return((4278124286&(u^f))>>>1)+(u&f)>>>0}function Ye(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function lt(u,f){return Ye(u+(u-f+.5>>1))}function _e(u,f,b){return Math.abs(f-b)-Math.abs(u-b)}function Ge(u,f,b,k,_,T,F){for(k=T[F-1],b=0;b<_;++b)T[F+b]=k=Ae(u[f+b],k)}function Ze(u,f,b,k,_){var T;for(T=0;T<b;++T){var F=u[f+T],O=F>>8&255,z=16711935&(z=(z=16711935&F)+((O<<16)+O));k[_+T]=(4278255360&F)+z>>>0}}function yt(u,f){f.jd=u>>0&255,f.hd=u>>8&255,f.ud=u>>16&255}function et(u,f,b,k,_,T){var F;for(F=0;F<k;++F){var O=f[b+F],z=O>>>8,K=O,le=255&(le=(le=O>>>16)+((u.jd<<24>>24)*(z<<24>>24)>>>5));K=255&(K=(K=K+((u.hd<<24>>24)*(z<<24>>24)>>>5))+((u.ud<<24>>24)*(le<<24>>24)>>>5)),_[T+F]=(4278255360&O)+(le<<16)+K}}function ht(u,f,b,k,_){M[f]=function(T,F,O,z,K,le,ge,ve,he){for(z=ge;z<ve;++z)for(ge=0;ge<he;++ge)K[le++]=_(O[k(T[F++])])},M[u]=function(T,F,O,z,K,le,ge){var ve=8>>T.b,he=T.Ea,Se=T.K[0],be=T.w;if(8>ve)for(T=(1<<T.b)-1,be=(1<<ve)-1;F<O;++F){var ce,ue=0;for(ce=0;ce<he;++ce)ce&T||(ue=k(z[K++])),le[ge++]=_(Se[ue&be]),ue>>=ve}else M["VP8LMapColor"+b](z,K,Se,be,le,ge,F,O,he)}}function Te(u,f,b,k,_){for(b=f+b;f<b;){var T=u[f++];k[_++]=T>>16&255,k[_++]=T>>8&255,k[_++]=T>>0&255}}function vn(u,f,b,k,_){for(b=f+b;f<b;){var T=u[f++];k[_++]=T>>16&255,k[_++]=T>>8&255,k[_++]=T>>0&255,k[_++]=T>>24&255}}function wt(u,f,b,k,_){for(b=f+b;f<b;){var T=(F=u[f++])>>16&240|F>>12&15,F=F>>0&240|F>>28&15;k[_++]=T,k[_++]=F}}function it(u,f,b,k,_){for(b=f+b;f<b;){var T=(F=u[f++])>>16&248|F>>13&7,F=F>>5&224|F>>3&31;k[_++]=T,k[_++]=F}}function bt(u,f,b,k,_){for(b=f+b;f<b;){var T=u[f++];k[_++]=T>>0&255,k[_++]=T>>8&255,k[_++]=T>>16&255}}function kt(u,f,b,k,_,T){if(T==0)for(b=f+b;f<b;)oe(k,((T=u[f++])[0]>>24|T[1]>>8&65280|T[2]<<8&16711680|T[3]<<24)>>>0),_+=32;else r(k,_,u,f,b)}function Dn(u,f){M[f][0]=M[u+"0"],M[f][1]=M[u+"1"],M[f][2]=M[u+"2"],M[f][3]=M[u+"3"],M[f][4]=M[u+"4"],M[f][5]=M[u+"5"],M[f][6]=M[u+"6"],M[f][7]=M[u+"7"],M[f][8]=M[u+"8"],M[f][9]=M[u+"9"],M[f][10]=M[u+"10"],M[f][11]=M[u+"11"],M[f][12]=M[u+"12"],M[f][13]=M[u+"13"],M[f][14]=M[u+"0"],M[f][15]=M[u+"0"]}function _t(u){return u==C0||u==A0||u==Nd||u==P0}function ii(){this.eb=[],this.size=this.A=this.fb=0}function Gt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Lr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ii,this.f.kb=new Gt,this.sd=null}function va(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Ct(u,f){var b=u.T,k=f.ba.f.RGBA,_=k.eb,T=k.fb+u.ka*k.A,F=sa[f.ba.S],O=u.y,z=u.O,K=u.f,le=u.N,ge=u.ea,ve=u.W,he=f.cc,Se=f.dc,be=f.Mc,ce=f.Nc,ue=u.ka,Ne=u.ka+u.T,Ce=u.U,je=Ce+1>>1;for(ue==0?F(O,z,null,null,K,le,ge,ve,K,le,ge,ve,_,T,null,null,Ce):(F(f.ec,f.fc,O,z,he,Se,be,ce,K,le,ge,ve,_,T-k.A,_,T,Ce),++b);ue+2<Ne;ue+=2)he=K,Se=le,be=ge,ce=ve,le+=u.Rc,ve+=u.Rc,T+=2*k.A,F(O,(z+=2*u.fa)-u.fa,O,z,he,Se,be,ce,K,le,ge,ve,_,T-k.A,_,T,Ce);return z+=u.fa,u.j+Ne<u.o?(r(f.ec,f.fc,O,z,Ce),r(f.cc,f.dc,K,le,je),r(f.Mc,f.Nc,ge,ve,je),b--):1&Ne||F(O,z,null,null,K,le,ge,ve,K,le,ge,ve,_,T+k.A,null,null,Ce),b}function si(u,f,b){var k=u.F,_=[u.J];if(k!=null){var T=u.U,F=f.ba.S,O=F==wd||F==Nd;f=f.ba.f.RGBA;var z=[0],K=u.ka;z[0]=u.T,u.Kb&&(K==0?--z[0]:(--K,_[0]-=u.width),u.j+u.ka+u.T==u.o&&(z[0]=u.o-u.j-K));var le=f.eb;K=f.fb+K*f.A,u=qt(k,_[0],u.width,T,z,le,K+(O?0:3),f.A),t(b==z),u&&_t(F)&&aa(le,K,O,T,z,f.A)}return 0}function kn(u){var f=u.ma,b=f.ba.S,k=11>b,_=b==yd||b==bd||b==wd||b==k0||b==12||_t(b);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!fc(f.Oa,u,_?11:12))return 0;if(_&&_t(b)&&Le(),u.da)alert("todo:use_scaling");else{if(k){if(f.Ib=ut,u.Kb){if(b=u.U+1>>1,f.memory=i(u.U+2*b),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+u.U,f.Mc=f.cc,f.Nc=f.dc+b,f.Ib=Ct,Le()}}else alert("todo:EmitYUV");_&&(f.Jb=si,k&&me())}if(k&&!Og){for(u=0;256>u;++u)_w[u]=89858*(u-128)+Sd>>jd,Iw[u]=-22014*(u-128)+Sd,Ew[u]=-45773*(u-128),Lw[u]=113618*(u-128)+Sd>>jd;for(u=Nc;u<E0;++u)f=76283*(u-16)+Sd>>jd,Dw[u-Nc]=Fr(f,255),Tw[u-Nc]=Fr(f+8>>4,15);Og=1}return 1}function Xr(u){var f=u.ma,b=u.U,k=u.T;return t(!(1&u.ka)),0>=b||0>=k?0:(b=f.Ib(u,f),f.Jb!=null&&f.Jb(u,f,b),f.Dc+=b,1)}function Jr(u){u.ma.memory=null}function nt(u,f,b,k){return ne(u,8)!=47?0:(f[0]=ne(u,14)+1,b[0]=ne(u,14)+1,k[0]=ne(u,1),ne(u,3)!=0?0:!u.h)}function Er(u,f){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+ne(f,b)+1}function Qr(u,f){return 120<f?f-120:1<=(b=((b=pw[f-1])>>4)*u+(8-(15&b)))?b:1;var b}function Hn(u,f,b){var k=D(b),_=u[f+=255&k].g-8;return 0<_&&(Q(b,b.u+8),k=D(b),f+=u[f].value,f+=k&(1<<_)-1),Q(b,b.u+u[f].g),u[f].value}function cn(u,f,b){return b.g+=u.g,b.value+=u.value<<f>>>0,t(8>=b.g),u.g}function nn(u,f,b){var k=u.xc;return t((f=k==0?0:u.vc[u.md*(b>>k)+(f>>k)])<u.Wb),u.Ya[f]}function ir(u,f,b,k){var _=u.ab,T=u.c*f,F=u.C;f=F+f;var O=b,z=k;for(k=u.Ta,b=u.Ua;0<_--;){var K=u.gc[_],le=F,ge=f,ve=O,he=z,Se=(z=k,O=b,K.Ea);switch(t(le<ge),t(ge<=K.nc),K.hc){case 2:hd(ve,he,(ge-le)*Se,z,O);break;case 0:var be=le,ce=ge,ue=z,Ne=O,Ce=($e=K).Ea;be==0&&(j0(ve,he,null,null,1,ue,Ne),Ge(ve,he+1,0,0,Ce-1,ue,Ne+1),he+=Ce,Ne+=Ce,++be);for(var je=1<<$e.b,qe=je-1,Re=Ue(Ce,$e.b),rt=$e.K,$e=$e.w+(be>>$e.b)*Re;be<ce;){var Lt=rt,Dt=$e,At=1;for(gc(ve,he,ue,Ne-Ce,1,ue,Ne);At<Ce;){var jt=(At&~qe)+je;jt>Ce&&(jt=Ce),(0,Hi[Lt[Dt++]>>8&15])(ve,he+ +At,ue,Ne+At-Ce,jt-At,ue,Ne+At),At=jt}he+=Ce,Ne+=Ce,++be&qe||($e+=Re)}ge!=K.nc&&r(z,O-Se,z,O+(ge-le-1)*Se,Se);break;case 1:for(Se=ve,ce=he,Ce=(ve=K.Ea)-(Ne=ve&~(ue=(he=1<<K.b)-1)),be=Ue(ve,K.b),je=K.K,K=K.w+(le>>K.b)*be;le<ge;){for(qe=je,Re=K,rt=new Me,$e=ce+Ne,Lt=ce+ve;ce<$e;)yt(qe[Re++],rt),Ks(rt,Se,ce,he,z,O),ce+=he,O+=he;ce<Lt&&(yt(qe[Re++],rt),Ks(rt,Se,ce,Ce,z,O),ce+=Ce,O+=Ce),++le&ue||(K+=be)}break;case 3:if(ve==z&&he==O&&0<K.b){for(ce=z,ve=Se=O+(ge-le)*Se-(Ne=(ge-le)*Ue(K.Ea,K.b)),he=z,ue=O,be=[],Ne=(Ce=Ne)-1;0<=Ne;--Ne)be[Ne]=he[ue+Ne];for(Ne=Ce-1;0<=Ne;--Ne)ce[ve+Ne]=be[Ne];ta(K,le,ge,z,Se,z,O)}else ta(K,le,ge,ve,he,z,O)}O=k,z=b}z!=b&&r(k,b,O,z,T)}function zi(u,f){var b=u.V,k=u.Ba+u.c*u.C,_=f-u.C;if(t(f<=u.l.o),t(16>=_),0<_){var T=u.l,F=u.Ta,O=u.Ua,z=T.width;if(ir(u,_,b,k),_=O=[O],t((b=u.C)<(k=f)),t(T.v<T.va),k>T.o&&(k=T.o),b<T.j){var K=T.j-b;b=T.j,_[0]+=K*z}if(b>=k?b=0:(_[0]+=4*T.v,T.ka=b-T.j,T.U=T.va-T.v,T.T=k-b,b=1),b){if(O=O[0],11>(b=u.ca).S){var le=b.f.RGBA,ge=(k=b.S,_=T.U,T=T.T,K=le.eb,le.A),ve=T;for(le=le.fb+u.Ma*le.A;0<ve--;){var he=F,Se=O,be=_,ce=K,ue=le;switch(k){case xd:wr(he,Se,be,ce,ue);break;case yd:lr(he,Se,be,ce,ue);break;case C0:lr(he,Se,be,ce,ue),aa(ce,ue,0,be,1,0);break;case Ag:fi(he,Se,be,ce,ue);break;case bd:kt(he,Se,be,ce,ue,1);break;case A0:kt(he,Se,be,ce,ue,1),aa(ce,ue,0,be,1,0);break;case wd:kt(he,Se,be,ce,ue,0);break;case Nd:kt(he,Se,be,ce,ue,0),aa(ce,ue,1,be,1,0);break;case k0:Vi(he,Se,be,ce,ue);break;case P0:Vi(he,Se,be,ce,ue),zt(ce,ue,be,1,0);break;case Pg:hi(he,Se,be,ce,ue);break;default:t(0)}O+=z,le+=ge}u.Ma+=T}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=b.height)}}u.C=f,t(u.C<=u.i)}function xa(u){var f;if(0<u.ua)return 0;for(f=0;f<u.Wb;++f){var b=u.Ya[f].G,k=u.Ya[f].H;if(0<b[1][k[1]+0].g||0<b[2][k[2]+0].g||0<b[3][k[3]+0].g)return 0}return 1}function Ir(u,f,b,k,_,T){if(u.Z!=0){var F=u.qd,O=u.rd;for(t(Xi[u.Z]!=null);f<b;++f)Xi[u.Z](F,O,k,_,k,_,T),F=k,O=_,_+=T;u.qd=F,u.rd=O}}function sr(u,f){var b=u.l.ma,k=b.Z==0||b.Z==1?u.l.j:u.C;if(k=u.C<k?k:u.C,t(f<=u.l.o),f>k){var _=u.l.width,T=b.ca,F=b.tb+_*k,O=u.V,z=u.Ba+u.c*k,K=u.gc;t(u.ab==1),t(K[0].hc==3),fd(K[0],k,f,O,z,T,F),Ir(b,k,f,T,F,_)}u.C=u.Ma=f}function Dr(u,f,b,k,_,T,F){var O=u.$/k,z=u.$%k,K=u.m,le=u.s,ge=b+u.$,ve=ge;_=b+k*_;var he=b+k*T,Se=280+le.ua,be=u.Pb?O:16777216,ce=0<le.ua?le.Wa:null,ue=le.wc,Ne=ge<he?nn(le,z,O):null;t(u.C<T),t(he<=_);var Ce=!1;e:for(;;){for(;Ce||ge<he;){var je=0;if(O>=be){var qe=ge-b;t((be=u).Pb),be.wd=be.m,be.xd=qe,0<be.s.ua&&xe(be.s.Wa,be.s.vb),be=O+vw}if(z&ue||(Ne=nn(le,z,O)),t(Ne!=null),Ne.Qb&&(f[ge]=Ne.qb,Ce=!0),!Ce)if(ie(K),Ne.jc){je=K,qe=f;var Re=ge,rt=Ne.pd[D(je)&$n-1];t(Ne.jc),256>rt.g?(Q(je,je.u+rt.g),qe[Re]=rt.value,je=0):(Q(je,je.u+rt.g-256),t(256<=rt.value),je=rt.value),je==0&&(Ce=!0)}else je=Hn(Ne.G[0],Ne.H[0],K);if(K.h)break;if(Ce||256>je){if(!Ce)if(Ne.nd)f[ge]=(Ne.qb|je<<8)>>>0;else{if(ie(K),Ce=Hn(Ne.G[1],Ne.H[1],K),ie(K),qe=Hn(Ne.G[2],Ne.H[2],K),Re=Hn(Ne.G[3],Ne.H[3],K),K.h)break;f[ge]=(Re<<24|Ce<<16|je<<8|qe)>>>0}if(Ce=!1,++ge,++z>=k&&(z=0,++O,F!=null&&O<=T&&!(O%16)&&F(u,O),ce!=null))for(;ve<ge;)je=f[ve++],ce.X[(506832829*je&4294967295)>>>ce.Mb]=je}else if(280>je){if(je=Er(je-256,K),qe=Hn(Ne.G[4],Ne.H[4],K),ie(K),qe=Qr(k,qe=Er(qe,K)),K.h)break;if(ge-b<qe||_-ge<je)break e;for(Re=0;Re<je;++Re)f[ge+Re]=f[ge+Re-qe];for(ge+=je,z+=je;z>=k;)z-=k,++O,F!=null&&O<=T&&!(O%16)&&F(u,O);if(t(ge<=_),z&ue&&(Ne=nn(le,z,O)),ce!=null)for(;ve<ge;)je=f[ve++],ce.X[(506832829*je&4294967295)>>>ce.Mb]=je}else{if(!(je<Se))break e;for(Ce=je-280,t(ce!=null);ve<ge;)je=f[ve++],ce.X[(506832829*je&4294967295)>>>ce.Mb]=je;je=ge,t(!(Ce>>>(qe=ce).Xa)),f[je]=qe.X[Ce],Ce=!0}Ce||t(K.h==W(K))}if(u.Pb&&K.h&&ge<_)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&xe(u.s.vb,u.s.Wa);else{if(K.h)break e;F!=null&&F(u,O>T?T:O),u.a=0,u.$=ge-b}return 1}return u.a=3,0}function Zr(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var f=u.Wa;f!=null&&(f.X=null),u.vb=null,t(u!=null)}function xr(){var u=new N0;return u==null?null:(u.a=0,u.xb=Eg,Dn("Predictor","VP8LPredictors"),Dn("Predictor","VP8LPredictors_C"),Dn("PredictorAdd","VP8LPredictorsAdd"),Dn("PredictorAdd","VP8LPredictorsAdd_C"),hd=Ze,Ks=et,wr=Te,lr=vn,Vi=wt,hi=it,fi=bt,M.VP8LMapColor32b=Vo,M.VP8LMapColor8b=md,u)}function Tr(u,f,b,k,_){var T=1,F=[u],O=[f],z=k.m,K=k.s,le=null,ge=0;e:for(;;){if(b)for(;T&&ne(z,1);){var ve=F,he=O,Se=k,be=1,ce=Se.m,ue=Se.gc[Se.ab],Ne=ne(ce,2);if(Se.Oc&1<<Ne)T=0;else{switch(Se.Oc|=1<<Ne,ue.hc=Ne,ue.Ea=ve[0],ue.nc=he[0],ue.K=[null],++Se.ab,t(4>=Se.ab),Ne){case 0:case 1:ue.b=ne(ce,3)+2,be=Tr(Ue(ue.Ea,ue.b),Ue(ue.nc,ue.b),0,Se,ue.K),ue.K=ue.K[0];break;case 3:var Ce,je=ne(ce,8)+1,qe=16<je?0:4<je?1:2<je?2:3;if(ve[0]=Ue(ue.Ea,qe),ue.b=qe,Ce=be=Tr(je,1,0,Se,ue.K)){var Re,rt=je,$e=ue,Lt=1<<(8>>$e.b),Dt=i(Lt);if(Dt==null)Ce=0;else{var At=$e.K[0],jt=$e.w;for(Dt[0]=$e.K[0][0],Re=1;Re<1*rt;++Re)Dt[Re]=Ae(At[jt+Re],Dt[Re-1]);for(;Re<4*Lt;++Re)Dt[Re]=0;$e.K[0]=null,$e.K[0]=Dt,Ce=1}}be=Ce;break;case 2:break;default:t(0)}T=be}}if(F=F[0],O=O[0],T&&ne(z,1)&&!(T=1<=(ge=ne(z,4))&&11>=ge)){k.a=3;break e}var Rt;if(Rt=T)t:{var Ot,vt,bn,Nr=k,wn=F,jr=O,Tt=ge,Rr=b,Br=Nr.m,Mn=Nr.s,zn=[null],ur=1,oa=0,Ua=gw[Tt];n:for(;;){if(Rr&&ne(Br,1)){var Fn=ne(Br,3)+2,vi=Ue(wn,Fn),Qs=Ue(jr,Fn),Jo=vi*Qs;if(!Tr(vi,Qs,0,Nr,zn))break n;for(zn=zn[0],Mn.xc=Fn,Ot=0;Ot<Jo;++Ot){var Ji=zn[Ot]>>8&65535;zn[Ot]=Ji,Ji>=ur&&(ur=Ji+1)}}if(Br.h)break n;for(vt=0;5>vt;++vt){var an=_g[vt];!vt&&0<Tt&&(an+=1<<Tt),oa<an&&(oa=an)}var I0=o(ur*Ua,P),$g=ur,zg=o($g,V);if(zg==null)var Cd=null;else t(65536>=$g),Cd=zg;var jc=i(oa);if(Cd==null||jc==null||I0==null){Nr.a=1;break n}var Ad=I0;for(Ot=bn=0;Ot<ur;++Ot){var ja=Cd[Ot],Qo=ja.G,Zo=ja.H,qg=0,Pd=1,Ug=0;for(vt=0;5>vt;++vt){an=_g[vt],Qo[vt]=Ad,Zo[vt]=bn,!vt&&0<Tt&&(an+=1<<Tt);a:{var _d,D0=an,Ld=Nr,Sc=jc,Ow=Ad,Rw=bn,T0=0,Qi=Ld.m,Bw=ne(Qi,1);if(a(Sc,0,0,D0),Bw){var $w=ne(Qi,1)+1,zw=ne(Qi,1),Wg=ne(Qi,zw==0?1:8);Sc[Wg]=1,$w==2&&(Sc[Wg=ne(Qi,8)]=1);var Ed=1}else{var Hg=i(19),Vg=ne(Qi,4)+4;if(19<Vg){Ld.a=3;var Id=0;break a}for(_d=0;_d<Vg;++_d)Hg[mw[_d]]=ne(Qi,3);var M0=void 0,kc=void 0,Kg=Ld,qw=Hg,Dd=D0,Gg=Sc,F0=0,Zi=Kg.m,Yg=8,Xg=o(128,P);r:for(;E(Xg,0,7,qw,19);){if(ne(Zi,1)){var Uw=2+2*ne(Zi,3);if((M0=2+ne(Zi,Uw))>Dd)break r}else M0=Dd;for(kc=0;kc<Dd&&M0--;){ie(Zi);var Jg=Xg[0+(127&D(Zi))];Q(Zi,Zi.u+Jg.g);var el=Jg.value;if(16>el)Gg[kc++]=el,el!=0&&(Yg=el);else{var Ww=el==16,Qg=el-16,Hw=hw[Qg],Zg=ne(Zi,dw[Qg])+Hw;if(kc+Zg>Dd)break r;for(var Vw=Ww?Yg:0;0<Zg--;)Gg[kc++]=Vw}}F0=1;break r}F0||(Kg.a=3),Ed=F0}(Ed=Ed&&!Qi.h)&&(T0=E(Ow,Rw,8,Sc,D0)),Ed&&T0!=0?Id=T0:(Ld.a=3,Id=0)}if(Id==0)break n;if(Pd&&fw[vt]==1&&(Pd=Ad[bn].g==0),qg+=Ad[bn].g,bn+=Id,3>=vt){var Cc,O0=jc[0];for(Cc=1;Cc<an;++Cc)jc[Cc]>O0&&(O0=jc[Cc]);Ug+=O0}}if(ja.nd=Pd,ja.Qb=0,Pd&&(ja.qb=(Qo[3][Zo[3]+0].value<<24|Qo[1][Zo[1]+0].value<<16|Qo[2][Zo[2]+0].value)>>>0,qg==0&&256>Qo[0][Zo[0]+0].value&&(ja.Qb=1,ja.qb+=Qo[0][Zo[0]+0].value<<8)),ja.jc=!ja.Qb&&6>Ug,ja.jc){var Td,xi=ja;for(Td=0;Td<$n;++Td){var es=Td,ts=xi.pd[es],Md=xi.G[0][xi.H[0]+es];256<=Md.value?(ts.g=Md.g+256,ts.value=Md.value):(ts.g=0,ts.value=0,es>>=cn(Md,8,ts),es>>=cn(xi.G[1][xi.H[1]+es],16,ts),es>>=cn(xi.G[2][xi.H[2]+es],0,ts),cn(xi.G[3][xi.H[3]+es],24,ts))}}}Mn.vc=zn,Mn.Wb=ur,Mn.Ya=Cd,Mn.yc=I0,Rt=1;break t}Rt=0}if(!(T=Rt)){k.a=3;break e}if(0<ge){if(K.ua=1<<ge,!Ve(K.Wa,ge)){k.a=1,T=0;break e}}else K.ua=0;var R0=k,e2=F,Kw=O,B0=R0.s,$0=B0.xc;if(R0.c=e2,R0.i=Kw,B0.md=Ue(e2,$0),B0.wc=$0==0?-1:(1<<$0)-1,b){k.xb=Sw;break e}if((le=i(F*O))==null){k.a=1,T=0;break e}T=(T=Dr(k,le,0,F,O,O,null))&&!z.h;break e}return T?(_!=null?_[0]=le:(t(le==null),t(b)),k.$=0,b||Zr(K)):Zr(K),T}function Ra(u,f){var b=u.c*u.i,k=b+f+16*f;return t(u.c<=f),u.V=i(k),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+f,1)}function oi(u,f){var b=u.C,k=f-b,_=u.V,T=u.Ba+u.c*b;for(t(f<=u.l.o);0<k;){var F=16<k?16:k,O=u.l.ma,z=u.l.width,K=z*F,le=O.ca,ge=O.tb+z*b,ve=u.Ta,he=u.Ua;ir(u,F,_,T),hn(ve,he,le,ge,K),Ir(O,b,b+F,le,ge,z),k-=F,_+=F*u.c,b+=F}t(b==f),u.C=u.Ma=f}function li(){this.ub=this.yd=this.td=this.Rb=0}function ci(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function fe(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Be(){this.Yb=function(){var u=[];return function f(b,k,_){for(var T=_[k],F=0;F<T&&(b.push(_.length>k+1?[]:0),!(_.length<k+1));F++)f(b[F],k+1,_)}(u,0,[3,11]),u}()}function Oe(){this.jb=i(3),this.Wc=l([4,8],Be),this.Xc=l([4,17],Be)}function Je(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function pt(){this.ld=this.La=this.dd=this.tc=0}function It(){this.Na=this.la=0}function Mr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function or(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function xn(){this.uc=this.M=this.Nb=0,this.wa=Array(new pt),this.Y=0,this.ya=Array(new or),this.aa=0,this.l=new Ba}function ea(){this.y=i(16),this.f=i(8),this.ea=i(8)}function qs(){this.cb=this.a=0,this.sc="",this.m=new pe,this.Od=new li,this.Kc=new ci,this.ed=new Je,this.Qa=new fe,this.Ic=this.$c=this.Aa=0,this.D=new xn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,pe),this.ia=0,this.pb=o(4,Mr),this.Pa=new Oe,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ea),this.Hd=0,this.rb=Array(new It),this.sb=0,this.wa=Array(new pt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new or),this.L=this.aa=0,this.gd=l([4,2],pt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ba(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function a0(){var u=new qs;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,wc||(wc=Ju)),u}function un(u,f,b){return u.a==0&&(u.a=f,u.sc=b,u.cb=0),0}function Yu(u,f,b){return 3<=b&&u[f+0]==157&&u[f+1]==1&&u[f+2]==42}function Xu(u,f){if(u==null)return 0;if(u.a=0,u.sc="OK",f==null)return un(u,2,"null VP8Io passed to VP8GetHeaders()");var b=f.data,k=f.w,_=f.ha;if(4>_)return un(u,7,"Truncated header.");var T=b[k+0]|b[k+1]<<8|b[k+2]<<16,F=u.Od;if(F.Rb=!(1&T),F.td=T>>1&7,F.yd=T>>4&1,F.ub=T>>5,3<F.td)return un(u,3,"Incorrect keyframe parameters.");if(!F.yd)return un(u,4,"Frame not displayable.");k+=3,_-=3;var O=u.Kc;if(F.Rb){if(7>_)return un(u,7,"cannot parse picture header");if(!Yu(b,k,_))return un(u,3,"Bad code word");O.c=16383&(b[k+4]<<8|b[k+3]),O.Td=b[k+4]>>6,O.i=16383&(b[k+6]<<8|b[k+5]),O.Ud=b[k+6]>>6,k+=7,_-=7,u.za=O.c+15>>4,u.Ub=O.i+15>>4,f.width=O.c,f.height=O.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,a((T=u.Pa).jb,0,255,T.jb.length),t((T=u.Qa)!=null),T.Cb=0,T.Bb=0,T.Fb=1,a(T.Zb,0,0,T.Zb.length),a(T.Lb,0,0,T.Lb)}if(F.ub>_)return un(u,7,"bad partition length");X(T=u.m,b,k,F.ub),k+=F.ub,_-=F.ub,F.Rb&&(O.Ld=re(T),O.Kd=re(T)),O=u.Qa;var z,K=u.Pa;if(t(T!=null),t(O!=null),O.Cb=re(T),O.Cb){if(O.Bb=re(T),re(T)){for(O.Fb=re(T),z=0;4>z;++z)O.Zb[z]=re(T)?ee(T,7):0;for(z=0;4>z;++z)O.Lb[z]=re(T)?ee(T,6):0}if(O.Bb)for(z=0;3>z;++z)K.jb[z]=re(T)?Z(T,8):255}else O.Bb=0;if(T.Ka)return un(u,3,"cannot parse segment header");if((O=u.ed).zd=re(T),O.Tb=Z(T,6),O.wb=Z(T,3),O.Pc=re(T),O.Pc&&re(T)){for(K=0;4>K;++K)re(T)&&(O.vd[K]=ee(T,6));for(K=0;4>K;++K)re(T)&&(O.od[K]=ee(T,6))}if(u.L=O.Tb==0?0:O.zd?1:2,T.Ka)return un(u,3,"cannot parse filter header");var le=_;if(_=z=k,k=z+le,O=le,u.Xb=(1<<Z(u.m,2))-1,le<3*(K=u.Xb))b=7;else{for(z+=3*K,O-=3*K,le=0;le<K;++le){var ge=b[_+0]|b[_+1]<<8|b[_+2]<<16;ge>O&&(ge=O),X(u.Jc[+le],b,z,ge),z+=ge,O-=ge,_+=3}X(u.Jc[+K],b,z,O),b=z<k?0:5}if(b!=0)return un(u,b,"cannot parse partitions");for(b=Z(z=u.m,7),_=re(z)?ee(z,4):0,k=re(z)?ee(z,4):0,O=re(z)?ee(z,4):0,K=re(z)?ee(z,4):0,z=re(z)?ee(z,4):0,le=u.Qa,ge=0;4>ge;++ge){if(le.Cb){var ve=le.Zb[ge];le.Fb||(ve+=b)}else{if(0<ge){u.pb[ge]=u.pb[0];continue}ve=b}var he=u.pb[ge];he.Sc[0]=_0[Fr(ve+_,127)],he.Sc[1]=L0[Fr(ve+0,127)],he.Eb[0]=2*_0[Fr(ve+k,127)],he.Eb[1]=101581*L0[Fr(ve+O,127)]>>16,8>he.Eb[1]&&(he.Eb[1]=8),he.Qc[0]=_0[Fr(ve+K,117)],he.Qc[1]=L0[Fr(ve+z,127)],he.lc=ve+z}if(!F.Rb)return un(u,4,"Not a key frame.");for(re(T),F=u.Pa,b=0;4>b;++b){for(_=0;8>_;++_)for(k=0;3>k;++k)for(O=0;11>O;++O)K=B(T,Nw[b][_][k][O])?Z(T,8):bw[b][_][k][O],F.Wc[b][_].Yb[k][O]=K;for(_=0;17>_;++_)F.Xc[b][_]=F.Wc[b][jw[_]]}return u.kc=re(T),u.kc&&(u.Bd=Z(T,8)),u.cb=1}function Ju(u,f,b,k,_,T,F){var O=f[_].Yb[b];for(b=0;16>_;++_){if(!B(u,O[b+0]))return _;for(;!B(u,O[b+1]);)if(O=f[++_].Yb[0],b=0,_==16)return 16;var z=f[_+1].Yb;if(B(u,O[b+2])){var K=u,le=0;if(B(K,(ve=O)[(ge=b)+3]))if(B(K,ve[ge+6])){for(O=0,ge=2*(le=B(K,ve[ge+8]))+(ve=B(K,ve[ge+9+le])),le=0,ve=xw[ge];ve[O];++O)le+=le+B(K,ve[O]);le+=3+(8<<ge)}else B(K,ve[ge+7])?(le=7+2*B(K,165),le+=B(K,145)):le=5+B(K,159);else le=B(K,ve[ge+4])?3+B(K,ve[ge+5]):2;O=z[2]}else le=1,O=z[1];z=F+yw[_],0>(K=u).b&&de(K);var ge,ve=K.b,he=(ge=K.Ca>>1)-(K.I>>ve)>>31;--K.b,K.Ca+=he,K.Ca|=1,K.I-=(ge+1&he)<<ve,T[z]=((le^he)-he)*k[(0<_)+0]}return 16}function Ql(u){var f=u.rb[u.sb-1];f.la=0,f.Na=0,a(u.zc,0,0,u.zc.length),u.ja=0}function i0(u,f){if(u==null)return 0;if(f==null)return un(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!Xu(u,f))return 0;if(t(u.cb),f.ac==null||f.ac(f)){f.ob&&(u.L=0);var b=kd[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=f.v-b>>4,u.zb=f.j-b>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=f.o+15+b>>4,u.Hb=f.va+15+b>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var k=u.ed;for(b=0;4>b;++b){var _;if(u.Qa.Cb){var T=u.Qa.Lb[b];u.Qa.Fb||(T+=k.Tb)}else T=k.Tb;for(_=0;1>=_;++_){var F=u.gd[b][_],O=T;if(k.Pc&&(O+=k.vd[0],_&&(O+=k.od[0])),0<(O=0>O?0:63<O?63:O)){var z=O;0<k.wb&&(z=4<k.wb?z>>2:z>>1)>9-k.wb&&(z=9-k.wb),1>z&&(z=1),F.dd=z,F.tc=2*O+z,F.ld=40<=O?2:15<=O?1:0}else F.tc=0;F.La=_}}}b=0}else un(u,6,"Frame setup failed"),b=u.a;if(b=b==0){if(b){u.$c=0,0<u.Aa||(u.Ic=Fw);e:{b=u.Ic,k=4*(z=u.za);var K=32*z,le=z+1,ge=0<u.L?z*(0<u.Aa?2:1):0,ve=(u.Aa==2?2:1)*z;if((F=k+832+(_=3*(16*b+kd[u.L])/2*K)+(T=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=F)b=0;else{if(F>u.Vb){if(u.Vb=0,u.Ec=i(F),u.Fc=0,u.Ec==null){b=un(u,1,"no memory during frame initialization.");break e}u.Vb=F}F=u.Ec,O=u.Fc,u.Ac=F,u.Bc=O,O+=k,u.Gd=o(K,ea),u.Hd=0,u.rb=o(le+1,It),u.sb=1,u.wa=ge?o(ge,pt):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=z),t(!0),u.oc=F,u.pc=O,O+=832,u.ya=o(ve,or),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=z),u.R=16*z,u.B=8*z,z=(K=kd[u.L])*u.R,K=K/2*u.B,u.sa=F,u.ta=O+z,u.qa=u.sa,u.ra=u.ta+16*b*u.R+K,u.Ha=u.qa,u.Ia=u.ra+8*b*u.B+K,u.$c=0,O+=_,u.mb=T?F:null,u.nb=T?O:null,t(O+T<=u.Fc+u.Vb),Ql(u),a(u.Ac,u.Bc,0,k),b=1}}if(b){if(f.ka=0,f.y=u.sa,f.O=u.ta,f.f=u.qa,f.N=u.ra,f.ea=u.Ha,f.Vd=u.Ia,f.fa=u.R,f.Rc=u.B,f.F=null,f.J=0,!gd){for(b=-255;255>=b;++b)Cn[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)pi[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)bc[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Xo[255+b]=0>b?0:255<b?255:b;gd=1}Ko=l0,mi=s0,vc=Zu,cr=o0,na=ed,dn=Qu,Go=ac,pd=Hs,xc=w0,Gs=ic,Ys=b0,Ki=Ro,Xs=sc,Yo=cd,Js=ld,Gi=za,yc=di,ra=y0,Na[0]=$a,Na[1]=c0,Na[2]=f0,Na[3]=m0,Na[4]=rd,Na[5]=Fo,Na[6]=ad,Na[7]=tc,Na[8]=g0,Na[9]=p0,Yi[0]=td,Yi[1]=d0,Yi[2]=ui,Yi[3]=To,Yi[4]=Vn,Yi[5]=h0,Yi[6]=nd,gi[0]=qi,gi[1]=u0,gi[2]=v0,gi[3]=nc,gi[4]=Ws,gi[5]=x0,gi[6]=rc,b=1}else b=0}b&&(b=function(he,Se){for(he.M=0;he.M<he.Va;++he.M){var be,ce=he.Jc[he.M&he.Xb],ue=he.m,Ne=he;for(be=0;be<Ne.za;++be){var Ce=ue,je=Ne,qe=je.Ac,Re=je.Bc+4*be,rt=je.zc,$e=je.ya[je.aa+be];if(je.Qa.Bb?$e.$b=B(Ce,je.Pa.jb[0])?2+B(Ce,je.Pa.jb[2]):B(Ce,je.Pa.jb[1]):$e.$b=0,je.kc&&($e.Ad=B(Ce,je.Bd)),$e.Za=!B(Ce,145)+0,$e.Za){var Lt=$e.Ob,Dt=0;for(je=0;4>je;++je){var At,jt=rt[0+je];for(At=0;4>At;++At){jt=ww[qe[Re+At]][jt];for(var Rt=Lg[B(Ce,jt[0])];0<Rt;)Rt=Lg[2*Rt+B(Ce,jt[Rt])];jt=-Rt,qe[Re+At]=jt}r(Lt,Dt,qe,Re,4),Dt+=4,rt[0+je]=jt}}else jt=B(Ce,156)?B(Ce,128)?1:3:B(Ce,163)?2:0,$e.Ob[0]=jt,a(qe,Re,jt,4),a(rt,0,jt,4);$e.Dd=B(Ce,142)?B(Ce,114)?B(Ce,183)?1:3:2:0}if(Ne.m.Ka)return un(he,7,"Premature end-of-partition0 encountered.");for(;he.ja<he.za;++he.ja){if(Ne=ce,Ce=(ue=he).rb[ue.sb-1],qe=ue.rb[ue.sb+ue.ja],be=ue.ya[ue.aa+ue.ja],Re=ue.kc?be.Ad:0)Ce.la=qe.la=0,be.Za||(Ce.Na=qe.Na=0),be.Hc=0,be.Gc=0,be.ia=0;else{var Ot,vt;if(Ce=qe,qe=Ne,Re=ue.Pa.Xc,rt=ue.ya[ue.aa+ue.ja],$e=ue.pb[rt.$b],je=rt.ad,Lt=0,Dt=ue.rb[ue.sb-1],jt=At=0,a(je,Lt,0,384),rt.Za)var bn=0,Nr=Re[3];else{Rt=i(16);var wn=Ce.Na+Dt.Na;if(wn=wc(qe,Re[1],wn,$e.Eb,0,Rt,0),Ce.Na=Dt.Na=(0<wn)+0,1<wn)Ko(Rt,0,je,Lt);else{var jr=Rt[0]+3>>3;for(Rt=0;256>Rt;Rt+=16)je[Lt+Rt]=jr}bn=1,Nr=Re[0]}var Tt=15&Ce.la,Rr=15&Dt.la;for(Rt=0;4>Rt;++Rt){var Br=1&Rr;for(jr=vt=0;4>jr;++jr)Tt=Tt>>1|(Br=(wn=wc(qe,Nr,wn=Br+(1&Tt),$e.Sc,bn,je,Lt))>bn)<<7,vt=vt<<2|(3<wn?3:1<wn?2:je[Lt+0]!=0),Lt+=16;Tt>>=4,Rr=Rr>>1|Br<<7,At=(At<<8|vt)>>>0}for(Nr=Tt,bn=Rr>>4,Ot=0;4>Ot;Ot+=2){for(vt=0,Tt=Ce.la>>4+Ot,Rr=Dt.la>>4+Ot,Rt=0;2>Rt;++Rt){for(Br=1&Rr,jr=0;2>jr;++jr)wn=Br+(1&Tt),Tt=Tt>>1|(Br=0<(wn=wc(qe,Re[2],wn,$e.Qc,0,je,Lt)))<<3,vt=vt<<2|(3<wn?3:1<wn?2:je[Lt+0]!=0),Lt+=16;Tt>>=2,Rr=Rr>>1|Br<<5}jt|=vt<<4*Ot,Nr|=Tt<<4<<Ot,bn|=(240&Rr)<<Ot}Ce.la=Nr,Dt.la=bn,rt.Hc=At,rt.Gc=jt,rt.ia=43690&jt?0:$e.ia,Re=!(At|jt)}if(0<ue.L&&(ue.wa[ue.Y+ue.ja]=ue.gd[be.$b][be.Za],ue.wa[ue.Y+ue.ja].La|=!Re),Ne.Ka)return un(he,7,"Premature end-of-file encountered.")}if(Ql(he),ue=Se,Ne=1,be=(ce=he).D,Ce=0<ce.L&&ce.M>=ce.zb&&ce.M<=ce.Va,ce.Aa==0)e:{if(be.M=ce.M,be.uc=Ce,hc(ce,be),Ne=1,be=(vt=ce.D).Nb,Ce=(jt=kd[ce.L])*ce.R,qe=jt/2*ce.B,Rt=16*be*ce.R,jr=8*be*ce.B,Re=ce.sa,rt=ce.ta-Ce+Rt,$e=ce.qa,je=ce.ra-qe+jr,Lt=ce.Ha,Dt=ce.Ia-qe+jr,Rr=(Tt=vt.M)==0,At=Tt>=ce.Va-1,ce.Aa==2&&hc(ce,vt),vt.uc)for(Br=(wn=ce).D.M,t(wn.D.uc),vt=wn.yb;vt<wn.Hb;++vt){bn=vt,Nr=Br;var Mn=(zn=(an=wn).D).Nb;Ot=an.R;var zn=zn.wa[zn.Y+bn],ur=an.sa,oa=an.ta+16*Mn*Ot+16*bn,Ua=zn.dd,Fn=zn.tc;if(Fn!=0)if(t(3<=Fn),an.L==1)0<bn&&Gi(ur,oa,Ot,Fn+4),zn.La&&ra(ur,oa,Ot,Fn),0<Nr&&Js(ur,oa,Ot,Fn+4),zn.La&&yc(ur,oa,Ot,Fn);else{var vi=an.B,Qs=an.qa,Jo=an.ra+8*Mn*vi+8*bn,Ji=an.Ha,an=an.Ia+8*Mn*vi+8*bn;Mn=zn.ld,0<bn&&(pd(ur,oa,Ot,Fn+4,Ua,Mn),Gs(Qs,Jo,Ji,an,vi,Fn+4,Ua,Mn)),zn.La&&(Ki(ur,oa,Ot,Fn,Ua,Mn),Yo(Qs,Jo,Ji,an,vi,Fn,Ua,Mn)),0<Nr&&(Go(ur,oa,Ot,Fn+4,Ua,Mn),xc(Qs,Jo,Ji,an,vi,Fn+4,Ua,Mn)),zn.La&&(Ys(ur,oa,Ot,Fn,Ua,Mn),Xs(Qs,Jo,Ji,an,vi,Fn,Ua,Mn))}}if(ce.ia&&alert("todo:DitherRow"),ue.put!=null){if(vt=16*Tt,Tt=16*(Tt+1),Rr?(ue.y=ce.sa,ue.O=ce.ta+Rt,ue.f=ce.qa,ue.N=ce.ra+jr,ue.ea=ce.Ha,ue.W=ce.Ia+jr):(vt-=jt,ue.y=Re,ue.O=rt,ue.f=$e,ue.N=je,ue.ea=Lt,ue.W=Dt),At||(Tt-=jt),Tt>ue.o&&(Tt=ue.o),ue.F=null,ue.J=null,ce.Fa!=null&&0<ce.Fa.length&&vt<Tt&&(ue.J=uc(ce,ue,vt,Tt-vt),ue.F=ce.mb,ue.F==null&&ue.F.length==0)){Ne=un(ce,3,"Could not decode alpha data.");break e}vt<ue.j&&(jt=ue.j-vt,vt=ue.j,t(!(1&jt)),ue.O+=ce.R*jt,ue.N+=ce.B*(jt>>1),ue.W+=ce.B*(jt>>1),ue.F!=null&&(ue.J+=ue.width*jt)),vt<Tt&&(ue.O+=ue.v,ue.N+=ue.v>>1,ue.W+=ue.v>>1,ue.F!=null&&(ue.J+=ue.v),ue.ka=vt-ue.j,ue.U=ue.va-ue.v,ue.T=Tt-vt,Ne=ue.put(ue))}be+1!=ce.Ic||At||(r(ce.sa,ce.ta-Ce,Re,rt+16*ce.R,Ce),r(ce.qa,ce.ra-qe,$e,je+8*ce.B,qe),r(ce.Ha,ce.Ia-qe,Lt,Dt+8*ce.B,qe))}if(!Ne)return un(he,6,"Output aborted.")}return 1}(u,f)),f.bc!=null&&f.bc(f),b&=1}return b?(u.cb=0,b):0}function ya(u,f,b,k,_){_=u[f+b+32*k]+(_>>3),u[f+b+32*k]=-256&_?0>_?0:255:_}function Do(u,f,b,k,_,T){ya(u,f,0,b,k+_),ya(u,f,1,b,k+T),ya(u,f,2,b,k-T),ya(u,f,3,b,k-_)}function yr(u){return(20091*u>>16)+u}function Zl(u,f,b,k){var _,T=0,F=i(16);for(_=0;4>_;++_){var O=u[f+0]+u[f+8],z=u[f+0]-u[f+8],K=(35468*u[f+4]>>16)-yr(u[f+12]),le=yr(u[f+4])+(35468*u[f+12]>>16);F[T+0]=O+le,F[T+1]=z+K,F[T+2]=z-K,F[T+3]=O-le,T+=4,f++}for(_=T=0;4>_;++_)O=(u=F[T+0]+4)+F[T+8],z=u-F[T+8],K=(35468*F[T+4]>>16)-yr(F[T+12]),ya(b,k,0,0,O+(le=yr(F[T+4])+(35468*F[T+12]>>16))),ya(b,k,1,0,z+K),ya(b,k,2,0,z-K),ya(b,k,3,0,O-le),T++,k+=32}function Qu(u,f,b,k){var _=u[f+0]+4,T=35468*u[f+4]>>16,F=yr(u[f+4]),O=35468*u[f+1]>>16;Do(b,k,0,_+F,u=yr(u[f+1]),O),Do(b,k,1,_+T,u,O),Do(b,k,2,_-T,u,O),Do(b,k,3,_-F,u,O)}function s0(u,f,b,k,_){Zl(u,f,b,k),_&&Zl(u,f+16,b,k+4)}function Zu(u,f,b,k){mi(u,f+0,b,k,1),mi(u,f+32,b,k+128,1)}function o0(u,f,b,k){var _;for(u=u[f+0]+4,_=0;4>_;++_)for(f=0;4>f;++f)ya(b,k,f,_,u)}function ed(u,f,b,k){u[f+0]&&cr(u,f+0,b,k),u[f+16]&&cr(u,f+16,b,k+4),u[f+32]&&cr(u,f+32,b,k+128),u[f+48]&&cr(u,f+48,b,k+128+4)}function l0(u,f,b,k){var _,T=i(16);for(_=0;4>_;++_){var F=u[f+0+_]+u[f+12+_],O=u[f+4+_]+u[f+8+_],z=u[f+4+_]-u[f+8+_],K=u[f+0+_]-u[f+12+_];T[0+_]=F+O,T[8+_]=F-O,T[4+_]=K+z,T[12+_]=K-z}for(_=0;4>_;++_)F=(u=T[0+4*_]+3)+T[3+4*_],O=T[1+4*_]+T[2+4*_],z=T[1+4*_]-T[2+4*_],K=u-T[3+4*_],b[k+0]=F+O>>3,b[k+16]=K+z>>3,b[k+32]=F-O>>3,b[k+48]=K-z>>3,k+=64}function ec(u,f,b){var k,_=f-32,T=Or,F=255-u[_-1];for(k=0;k<b;++k){var O,z=T,K=F+u[f-1];for(O=0;O<b;++O)u[f+O]=z[K+u[_+O]];f+=32}}function c0(u,f){ec(u,f,4)}function u0(u,f){ec(u,f,8)}function d0(u,f){ec(u,f,16)}function ui(u,f){var b;for(b=0;16>b;++b)r(u,f+32*b,u,f-32,16)}function To(u,f){var b;for(b=16;0<b;--b)a(u,f,u[f-1],16),f+=32}function Mo(u,f,b){var k;for(k=0;16>k;++k)a(f,b+32*k,u,16)}function td(u,f){var b,k=16;for(b=0;16>b;++b)k+=u[f-1+32*b]+u[f+b-32];Mo(k>>5,u,f)}function Vn(u,f){var b,k=8;for(b=0;16>b;++b)k+=u[f-1+32*b];Mo(k>>4,u,f)}function h0(u,f){var b,k=8;for(b=0;16>b;++b)k+=u[f+b-32];Mo(k>>4,u,f)}function nd(u,f){Mo(128,u,f)}function dt(u,f,b){return u+2*f+b+2>>2}function f0(u,f){var b,k=f-32;for(k=new Uint8Array([dt(u[k-1],u[k+0],u[k+1]),dt(u[k+0],u[k+1],u[k+2]),dt(u[k+1],u[k+2],u[k+3]),dt(u[k+2],u[k+3],u[k+4])]),b=0;4>b;++b)r(u,f+32*b,k,0,k.length)}function m0(u,f){var b=u[f-1],k=u[f-1+32],_=u[f-1+64],T=u[f-1+96];oe(u,f+0,16843009*dt(u[f-1-32],b,k)),oe(u,f+32,16843009*dt(b,k,_)),oe(u,f+64,16843009*dt(k,_,T)),oe(u,f+96,16843009*dt(_,T,T))}function $a(u,f){var b,k=4;for(b=0;4>b;++b)k+=u[f+b-32]+u[f-1+32*b];for(k>>=3,b=0;4>b;++b)a(u,f+32*b,k,4)}function rd(u,f){var b=u[f-1+0],k=u[f-1+32],_=u[f-1+64],T=u[f-1-32],F=u[f+0-32],O=u[f+1-32],z=u[f+2-32],K=u[f+3-32];u[f+0+96]=dt(k,_,u[f-1+96]),u[f+1+96]=u[f+0+64]=dt(b,k,_),u[f+2+96]=u[f+1+64]=u[f+0+32]=dt(T,b,k),u[f+3+96]=u[f+2+64]=u[f+1+32]=u[f+0+0]=dt(F,T,b),u[f+3+64]=u[f+2+32]=u[f+1+0]=dt(O,F,T),u[f+3+32]=u[f+2+0]=dt(z,O,F),u[f+3+0]=dt(K,z,O)}function ad(u,f){var b=u[f+1-32],k=u[f+2-32],_=u[f+3-32],T=u[f+4-32],F=u[f+5-32],O=u[f+6-32],z=u[f+7-32];u[f+0+0]=dt(u[f+0-32],b,k),u[f+1+0]=u[f+0+32]=dt(b,k,_),u[f+2+0]=u[f+1+32]=u[f+0+64]=dt(k,_,T),u[f+3+0]=u[f+2+32]=u[f+1+64]=u[f+0+96]=dt(_,T,F),u[f+3+32]=u[f+2+64]=u[f+1+96]=dt(T,F,O),u[f+3+64]=u[f+2+96]=dt(F,O,z),u[f+3+96]=dt(O,z,z)}function Fo(u,f){var b=u[f-1+0],k=u[f-1+32],_=u[f-1+64],T=u[f-1-32],F=u[f+0-32],O=u[f+1-32],z=u[f+2-32],K=u[f+3-32];u[f+0+0]=u[f+1+64]=T+F+1>>1,u[f+1+0]=u[f+2+64]=F+O+1>>1,u[f+2+0]=u[f+3+64]=O+z+1>>1,u[f+3+0]=z+K+1>>1,u[f+0+96]=dt(_,k,b),u[f+0+64]=dt(k,b,T),u[f+0+32]=u[f+1+96]=dt(b,T,F),u[f+1+32]=u[f+2+96]=dt(T,F,O),u[f+2+32]=u[f+3+96]=dt(F,O,z),u[f+3+32]=dt(O,z,K)}function tc(u,f){var b=u[f+0-32],k=u[f+1-32],_=u[f+2-32],T=u[f+3-32],F=u[f+4-32],O=u[f+5-32],z=u[f+6-32],K=u[f+7-32];u[f+0+0]=b+k+1>>1,u[f+1+0]=u[f+0+64]=k+_+1>>1,u[f+2+0]=u[f+1+64]=_+T+1>>1,u[f+3+0]=u[f+2+64]=T+F+1>>1,u[f+0+32]=dt(b,k,_),u[f+1+32]=u[f+0+96]=dt(k,_,T),u[f+2+32]=u[f+1+96]=dt(_,T,F),u[f+3+32]=u[f+2+96]=dt(T,F,O),u[f+3+64]=dt(F,O,z),u[f+3+96]=dt(O,z,K)}function p0(u,f){var b=u[f-1+0],k=u[f-1+32],_=u[f-1+64],T=u[f-1+96];u[f+0+0]=b+k+1>>1,u[f+2+0]=u[f+0+32]=k+_+1>>1,u[f+2+32]=u[f+0+64]=_+T+1>>1,u[f+1+0]=dt(b,k,_),u[f+3+0]=u[f+1+32]=dt(k,_,T),u[f+3+32]=u[f+1+64]=dt(_,T,T),u[f+3+64]=u[f+2+64]=u[f+0+96]=u[f+1+96]=u[f+2+96]=u[f+3+96]=T}function g0(u,f){var b=u[f-1+0],k=u[f-1+32],_=u[f-1+64],T=u[f-1+96],F=u[f-1-32],O=u[f+0-32],z=u[f+1-32],K=u[f+2-32];u[f+0+0]=u[f+2+32]=b+F+1>>1,u[f+0+32]=u[f+2+64]=k+b+1>>1,u[f+0+64]=u[f+2+96]=_+k+1>>1,u[f+0+96]=T+_+1>>1,u[f+3+0]=dt(O,z,K),u[f+2+0]=dt(F,O,z),u[f+1+0]=u[f+3+32]=dt(b,F,O),u[f+1+32]=u[f+3+64]=dt(k,b,F),u[f+1+64]=u[f+3+96]=dt(_,k,b),u[f+1+96]=dt(T,_,k)}function v0(u,f){var b;for(b=0;8>b;++b)r(u,f+32*b,u,f-32,8)}function nc(u,f){var b;for(b=0;8>b;++b)a(u,f,u[f-1],8),f+=32}function Us(u,f,b){var k;for(k=0;8>k;++k)a(f,b+32*k,u,8)}function qi(u,f){var b,k=8;for(b=0;8>b;++b)k+=u[f+b-32]+u[f-1+32*b];Us(k>>4,u,f)}function x0(u,f){var b,k=4;for(b=0;8>b;++b)k+=u[f+b-32];Us(k>>3,u,f)}function Ws(u,f){var b,k=4;for(b=0;8>b;++b)k+=u[f-1+32*b];Us(k>>3,u,f)}function rc(u,f){Us(128,u,f)}function Oo(u,f,b){var k=u[f-b],_=u[f+0],T=3*(_-k)+S0[1020+u[f-2*b]-u[f+b]],F=vd[112+(T+4>>3)];u[f-b]=Or[255+k+vd[112+(T+3>>3)]],u[f+0]=Or[255+_-F]}function id(u,f,b,k){var _=u[f+0],T=u[f+b];return ia[255+u[f-2*b]-u[f-b]]>k||ia[255+T-_]>k}function sd(u,f,b,k){return 4*ia[255+u[f-b]-u[f+0]]+ia[255+u[f-2*b]-u[f+b]]<=k}function od(u,f,b,k,_){var T=u[f-3*b],F=u[f-2*b],O=u[f-b],z=u[f+0],K=u[f+b],le=u[f+2*b],ge=u[f+3*b];return 4*ia[255+O-z]+ia[255+F-K]>k?0:ia[255+u[f-4*b]-T]<=_&&ia[255+T-F]<=_&&ia[255+F-O]<=_&&ia[255+ge-le]<=_&&ia[255+le-K]<=_&&ia[255+K-z]<=_}function ld(u,f,b,k){var _=2*k+1;for(k=0;16>k;++k)sd(u,f+k,b,_)&&Oo(u,f+k,b)}function za(u,f,b,k){var _=2*k+1;for(k=0;16>k;++k)sd(u,f+k*b,1,_)&&Oo(u,f+k*b,1)}function di(u,f,b,k){var _;for(_=3;0<_;--_)ld(u,f+=4*b,b,k)}function y0(u,f,b,k){var _;for(_=3;0<_;--_)za(u,f+=4,b,k)}function Ui(u,f,b,k,_,T,F,O){for(T=2*T+1;0<_--;){if(od(u,f,b,T,F))if(id(u,f,b,O))Oo(u,f,b);else{var z=u,K=f,le=b,ge=z[K-2*le],ve=z[K-le],he=z[K+0],Se=z[K+le],be=z[K+2*le],ce=27*(Ne=S0[1020+3*(he-ve)+S0[1020+ge-Se]])+63>>7,ue=18*Ne+63>>7,Ne=9*Ne+63>>7;z[K-3*le]=Or[255+z[K-3*le]+Ne],z[K-2*le]=Or[255+ge+ue],z[K-le]=Or[255+ve+ce],z[K+0]=Or[255+he-ce],z[K+le]=Or[255+Se-ue],z[K+2*le]=Or[255+be-Ne]}f+=k}}function ba(u,f,b,k,_,T,F,O){for(T=2*T+1;0<_--;){if(od(u,f,b,T,F))if(id(u,f,b,O))Oo(u,f,b);else{var z=u,K=f,le=b,ge=z[K-le],ve=z[K+0],he=z[K+le],Se=vd[112+((be=3*(ve-ge))+4>>3)],be=vd[112+(be+3>>3)],ce=Se+1>>1;z[K-2*le]=Or[255+z[K-2*le]+ce],z[K-le]=Or[255+ge+be],z[K+0]=Or[255+ve-Se],z[K+le]=Or[255+he-ce]}f+=k}}function ac(u,f,b,k,_,T){Ui(u,f,b,1,16,k,_,T)}function Hs(u,f,b,k,_,T){Ui(u,f,1,b,16,k,_,T)}function b0(u,f,b,k,_,T){var F;for(F=3;0<F;--F)ba(u,f+=4*b,b,1,16,k,_,T)}function Ro(u,f,b,k,_,T){var F;for(F=3;0<F;--F)ba(u,f+=4,1,b,16,k,_,T)}function w0(u,f,b,k,_,T,F,O){Ui(u,f,_,1,8,T,F,O),Ui(b,k,_,1,8,T,F,O)}function ic(u,f,b,k,_,T,F,O){Ui(u,f,1,_,8,T,F,O),Ui(b,k,1,_,8,T,F,O)}function sc(u,f,b,k,_,T,F,O){ba(u,f+4*_,_,1,8,T,F,O),ba(b,k+4*_,_,1,8,T,F,O)}function cd(u,f,b,k,_,T,F,O){ba(u,f+4,1,_,8,T,F,O),ba(b,k+4,1,_,8,T,F,O)}function Bo(){this.ba=new Lr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function oc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function lc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ud(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new P}function N0(){this.xb=this.a=0,this.l=new Ba,this.ca=new Lr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ud,this.ab=0,this.gc=o(4,lc),this.Oc=0}function $o(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ba,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Vs(u,f,b,k,_,T,F){for(u=u==null?0:u[f+0],f=0;f<F;++f)_[T+f]=u+b[k+f]&255,u=_[T+f]}function cc(u,f,b,k,_,T,F){var O;if(u==null)Vs(null,null,b,k,_,T,F);else for(O=0;O<F;++O)_[T+O]=u[f+O]+b[k+O]&255}function Wi(u,f,b,k,_,T,F){if(u==null)Vs(null,null,b,k,_,T,F);else{var O,z=u[f+0],K=z,le=z;for(O=0;O<F;++O)K=le+(z=u[f+O])-K,le=b[k+O]+(-256&K?0>K?0:255:K)&255,K=z,_[T+O]=le}}function uc(u,f,b,k){var _=f.width,T=f.o;if(t(u!=null&&f!=null),0>b||0>=k||b+k>T)return null;if(!u.Cc){if(u.ga==null){var F;if(u.ga=new $o,(F=u.ga==null)||(F=f.width*f.o,t(u.Gb.length==0),u.Gb=i(F),u.Uc=0,u.Gb==null?F=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,F=1),F=!F),!F){F=u.ga;var O=u.Fa,z=u.P,K=u.qc,le=u.mb,ge=u.nb,ve=z+1,he=K-1,Se=F.l;if(t(O!=null&&le!=null&&f!=null),Xi[0]=null,Xi[1]=Vs,Xi[2]=cc,Xi[3]=Wi,F.ca=le,F.tb=ge,F.c=f.width,F.i=f.height,t(0<F.c&&0<F.i),1>=K)f=0;else if(F.$a=O[z+0]>>0&3,F.Z=O[z+0]>>2&3,F.Lc=O[z+0]>>4&3,z=O[z+0]>>6&3,0>F.$a||1<F.$a||4<=F.Z||1<F.Lc||z)f=0;else if(Se.put=Xr,Se.ac=kn,Se.bc=Jr,Se.ma=F,Se.width=f.width,Se.height=f.height,Se.Da=f.Da,Se.v=f.v,Se.va=f.va,Se.j=f.j,Se.o=f.o,F.$a)e:{t(F.$a==1),f=xr();t:for(;;){if(f==null){f=0;break e}if(t(F!=null),F.mc=f,f.c=F.c,f.i=F.i,f.l=F.l,f.l.ma=F,f.l.width=F.c,f.l.height=F.i,f.a=0,U(f.m,O,ve,he),!Tr(F.c,F.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&xa(f.s)?(F.ic=1,O=f.c*f.i,f.Ta=null,f.Ua=0,f.V=i(O),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(F.ic=0,f=Ra(f,F.c)),!f))break t;f=1;break e}F.mc=null,f=0}else f=he>=F.c*F.i;F=!f}if(F)return null;u.ga.Lc!=1?u.Ga=0:k=T-b}t(u.ga!=null),t(b+k<=T);e:{if(f=(O=u.ga).c,T=O.l.o,O.$a==0){if(ve=u.rc,he=u.Vc,Se=u.Fa,z=u.P+1+b*f,K=u.mb,le=u.nb+b*f,t(z<=u.P+u.qc),O.Z!=0)for(t(Xi[O.Z]!=null),F=0;F<k;++F)Xi[O.Z](ve,he,Se,z,K,le,f),ve=K,he=le,le+=f,z+=f;else for(F=0;F<k;++F)r(K,le,Se,z,f),ve=K,he=le,le+=f,z+=f;u.rc=ve,u.Vc=he}else{if(t(O.mc!=null),f=b+k,t((F=O.mc)!=null),t(f<=F.i),F.C>=f)f=1;else if(O.ic||me(),O.ic){O=F.V,ve=F.Ba,he=F.c;var be=F.i,ce=(Se=1,z=F.$/he,K=F.$%he,le=F.m,ge=F.s,F.$),ue=he*be,Ne=he*f,Ce=ge.wc,je=ce<Ne?nn(ge,K,z):null;t(ce<=ue),t(f<=be),t(xa(ge));t:for(;;){for(;!le.h&&ce<Ne;){if(K&Ce||(je=nn(ge,K,z)),t(je!=null),ie(le),256>(be=Hn(je.G[0],je.H[0],le)))O[ve+ce]=be,++ce,++K>=he&&(K=0,++z<=f&&!(z%16)&&sr(F,z));else{if(!(280>be)){Se=0;break t}be=Er(be-256,le);var qe,Re=Hn(je.G[4],je.H[4],le);if(ie(le),!(ce>=(Re=Qr(he,Re=Er(Re,le)))&&ue-ce>=be)){Se=0;break t}for(qe=0;qe<be;++qe)O[ve+ce+qe]=O[ve+ce+qe-Re];for(ce+=be,K+=be;K>=he;)K-=he,++z<=f&&!(z%16)&&sr(F,z);ce<Ne&&K&Ce&&(je=nn(ge,K,z))}t(le.h==W(le))}sr(F,z>f?f:z);break t}!Se||le.h&&ce<ue?(Se=0,F.a=le.h?5:3):F.$=ce,f=Se}else f=Dr(F,F.V,F.Ba,F.c,F.i,f,oi);if(!f){k=0;break e}}b+k>=T&&(u.Cc=1),k=1}if(!k)return null;if(u.Cc&&((k=u.ga)!=null&&(k.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*_}function x(u,f,b,k,_,T){for(;0<_--;){var F,O=u,z=f+(b?1:0),K=u,le=f+(b?0:3);for(F=0;F<k;++F){var ge=K[le+4*F];ge!=255&&(ge*=32897,O[z+4*F+0]=O[z+4*F+0]*ge>>23,O[z+4*F+1]=O[z+4*F+1]*ge>>23,O[z+4*F+2]=O[z+4*F+2]*ge>>23)}f+=T}}function L(u,f,b,k,_){for(;0<k--;){var T;for(T=0;T<b;++T){var F=u[f+2*T+0],O=15&(K=u[f+2*T+1]),z=4369*O,K=(240&K|K>>4)*z>>16;u[f+2*T+0]=(240&F|F>>4)*z>>16&240|(15&F|F<<4)*z>>16>>4&15,u[f+2*T+1]=240&K|O}f+=_}}function Y(u,f,b,k,_,T,F,O){var z,K,le=255;for(K=0;K<_;++K){for(z=0;z<k;++z){var ge=u[f+z];T[F+4*z]=ge,le&=ge}f+=b,F+=O}return le!=255}function se(u,f,b,k,_){var T;for(T=0;T<_;++T)b[k+T]=u[f+T]>>8}function me(){aa=x,zt=L,qt=Y,hn=se}function we(u,f,b){M[u]=function(k,_,T,F,O,z,K,le,ge,ve,he,Se,be,ce,ue,Ne,Ce){var je,qe=Ce-1>>1,Re=O[z+0]|K[le+0]<<16,rt=ge[ve+0]|he[Se+0]<<16;t(k!=null);var $e=3*Re+rt+131074>>2;for(f(k[_+0],255&$e,$e>>16,be,ce),T!=null&&($e=3*rt+Re+131074>>2,f(T[F+0],255&$e,$e>>16,ue,Ne)),je=1;je<=qe;++je){var Lt=O[z+je]|K[le+je]<<16,Dt=ge[ve+je]|he[Se+je]<<16,At=Re+Lt+rt+Dt+524296,jt=At+2*(Lt+rt)>>3;$e=jt+Re>>1,Re=(At=At+2*(Re+Dt)>>3)+Lt>>1,f(k[_+2*je-1],255&$e,$e>>16,be,ce+(2*je-1)*b),f(k[_+2*je-0],255&Re,Re>>16,be,ce+(2*je-0)*b),T!=null&&($e=At+rt>>1,Re=jt+Dt>>1,f(T[F+2*je-1],255&$e,$e>>16,ue,Ne+(2*je-1)*b),f(T[F+2*je+0],255&Re,Re>>16,ue,Ne+(2*je+0)*b)),Re=Lt,rt=Dt}1&Ce||($e=3*Re+rt+131074>>2,f(k[_+Ce-1],255&$e,$e>>16,be,ce+(Ce-1)*b),T!=null&&($e=3*rt+Re+131074>>2,f(T[F+Ce-1],255&$e,$e>>16,ue,Ne+(Ce-1)*b)))}}function Le(){sa[xd]=kw,sa[yd]=Ig,sa[Ag]=Cw,sa[bd]=Dg,sa[wd]=Tg,sa[k0]=Mg,sa[Pg]=Aw,sa[C0]=Ig,sa[A0]=Dg,sa[Nd]=Tg,sa[P0]=Mg}function ze(u){return u&~Pw?0>u?0:255:u>>Fg}function Qe(u,f){return ze((19077*u>>8)+(26149*f>>8)-14234)}function gt(u,f,b){return ze((19077*u>>8)-(6419*f>>8)-(13320*b>>8)+8708)}function ft(u,f){return ze((19077*u>>8)+(33050*f>>8)-17685)}function St(u,f,b,k,_){k[_+0]=Qe(u,b),k[_+1]=gt(u,f,b),k[_+2]=ft(u,f)}function Qt(u,f,b,k,_){k[_+0]=ft(u,f),k[_+1]=gt(u,f,b),k[_+2]=Qe(u,b)}function rn(u,f,b,k,_){var T=gt(u,f,b);f=T<<3&224|ft(u,f)>>3,k[_+0]=248&Qe(u,b)|T>>5,k[_+1]=f}function yn(u,f,b,k,_){var T=240&ft(u,f)|15;k[_+0]=240&Qe(u,b)|gt(u,f,b)>>4,k[_+1]=T}function Kn(u,f,b,k,_){k[_+0]=255,St(u,f,b,k,_+1)}function Tn(u,f,b,k,_){Qt(u,f,b,k,_),k[_+3]=255}function wa(u,f,b,k,_){St(u,f,b,k,_),k[_+3]=255}function Fr(u,f){return 0>u?0:u>f?f:u}function qa(u,f,b){M[u]=function(k,_,T,F,O,z,K,le,ge){for(var ve=le+(-2&ge)*b;le!=ve;)f(k[_+0],T[F+0],O[z+0],K,le),f(k[_+1],T[F+0],O[z+0],K,le+b),_+=2,++F,++z,le+=2*b;1&ge&&f(k[_+0],T[F+0],O[z+0],K,le)}}function dd(u,f,b){return b==0?u==0?f==0?6:5:f==0?4:0:b}function dc(u,f,b,k,_){switch(u>>>30){case 3:mi(f,b,k,_,0);break;case 2:dn(f,b,k,_);break;case 1:cr(f,b,k,_)}}function hc(u,f){var b,k,_=f.M,T=f.Nb,F=u.oc,O=u.pc+40,z=u.oc,K=u.pc+584,le=u.oc,ge=u.pc+600;for(b=0;16>b;++b)F[O+32*b-1]=129;for(b=0;8>b;++b)z[K+32*b-1]=129,le[ge+32*b-1]=129;for(0<_?F[O-1-32]=z[K-1-32]=le[ge-1-32]=129:(a(F,O-32-1,127,21),a(z,K-32-1,127,9),a(le,ge-32-1,127,9)),k=0;k<u.za;++k){var ve=f.ya[f.aa+k];if(0<k){for(b=-1;16>b;++b)r(F,O+32*b-4,F,O+32*b+12,4);for(b=-1;8>b;++b)r(z,K+32*b-4,z,K+32*b+4,4),r(le,ge+32*b-4,le,ge+32*b+4,4)}var he=u.Gd,Se=u.Hd+k,be=ve.ad,ce=ve.Hc;if(0<_&&(r(F,O-32,he[Se].y,0,16),r(z,K-32,he[Se].f,0,8),r(le,ge-32,he[Se].ea,0,8)),ve.Za){var ue=F,Ne=O-32+16;for(0<_&&(k>=u.za-1?a(ue,Ne,he[Se].y[15],4):r(ue,Ne,he[Se+1].y,0,4)),b=0;4>b;b++)ue[Ne+128+b]=ue[Ne+256+b]=ue[Ne+384+b]=ue[Ne+0+b];for(b=0;16>b;++b,ce<<=2)ue=F,Ne=O+Rg[b],Na[ve.Ob[b]](ue,Ne),dc(ce,be,16*+b,ue,Ne)}else if(ue=dd(k,_,ve.Ob[0]),Yi[ue](F,O),ce!=0)for(b=0;16>b;++b,ce<<=2)dc(ce,be,16*+b,F,O+Rg[b]);for(b=ve.Gc,ue=dd(k,_,ve.Dd),gi[ue](z,K),gi[ue](le,ge),ce=be,ue=z,Ne=K,255&(ve=b>>0)&&(170&ve?vc(ce,256,ue,Ne):na(ce,256,ue,Ne)),ve=le,ce=ge,255&(b>>=8)&&(170&b?vc(be,320,ve,ce):na(be,320,ve,ce)),_<u.Ub-1&&(r(he[Se].y,0,F,O+480,16),r(he[Se].f,0,z,K+224,8),r(he[Se].ea,0,le,ge+224,8)),b=8*T*u.B,he=u.sa,Se=u.ta+16*k+16*T*u.R,be=u.qa,ve=u.ra+8*k+b,ce=u.Ha,ue=u.Ia+8*k+b,b=0;16>b;++b)r(he,Se+b*u.R,F,O+32*b,16);for(b=0;8>b;++b)r(be,ve+b*u.B,z,K+32*b,8),r(ce,ue+b*u.B,le,ge+32*b,8)}}function zo(u,f,b,k,_,T,F,O,z){var K=[0],le=[0],ge=0,ve=z!=null?z.kd:0,he=z??new oc;if(u==null||12>b)return 7;he.data=u,he.w=f,he.ha=b,f=[f],b=[b],he.gb=[he.gb];e:{var Se=f,be=b,ce=he.gb;if(t(u!=null),t(be!=null),t(ce!=null),ce[0]=0,12<=be[0]&&!n(u,Se[0],"RIFF")){if(n(u,Se[0]+8,"WEBP")){ce=3;break e}var ue=Ie(u,Se[0]+4);if(12>ue||4294967286<ue){ce=3;break e}if(ve&&ue>be[0]-8){ce=7;break e}ce[0]=ue,Se[0]+=12,be[0]-=12}ce=0}if(ce!=0)return ce;for(ue=0<he.gb[0],b=b[0];;){e:{var Ne=u;be=f,ce=b;var Ce=K,je=le,qe=Se=[0];if(($e=ge=[ge])[0]=0,8>ce[0])ce=7;else{if(!n(Ne,be[0],"VP8X")){if(Ie(Ne,be[0]+4)!=10){ce=3;break e}if(18>ce[0]){ce=7;break e}var Re=Ie(Ne,be[0]+8),rt=1+Pe(Ne,be[0]+12);if(2147483648<=rt*(Ne=1+Pe(Ne,be[0]+15))){ce=3;break e}qe!=null&&(qe[0]=Re),Ce!=null&&(Ce[0]=rt),je!=null&&(je[0]=Ne),be[0]+=18,ce[0]-=18,$e[0]=1}ce=0}}if(ge=ge[0],Se=Se[0],ce!=0)return ce;if(be=!!(2&Se),!ue&&ge)return 3;if(T!=null&&(T[0]=!!(16&Se)),F!=null&&(F[0]=be),O!=null&&(O[0]=0),F=K[0],Se=le[0],ge&&be&&z==null){ce=0;break}if(4>b){ce=7;break}if(ue&&ge||!ue&&!ge&&!n(u,f[0],"ALPH")){b=[b],he.na=[he.na],he.P=[he.P],he.Sa=[he.Sa];e:{Re=u,ce=f,ue=b;var $e=he.gb;Ce=he.na,je=he.P,qe=he.Sa,rt=22,t(Re!=null),t(ue!=null),Ne=ce[0];var Lt=ue[0];for(t(Ce!=null),t(qe!=null),Ce[0]=null,je[0]=null,qe[0]=0;;){if(ce[0]=Ne,ue[0]=Lt,8>Lt){ce=7;break e}var Dt=Ie(Re,Ne+4);if(4294967286<Dt){ce=3;break e}var At=8+Dt+1&-2;if(rt+=At,0<$e&&rt>$e){ce=3;break e}if(!n(Re,Ne,"VP8 ")||!n(Re,Ne,"VP8L")){ce=0;break e}if(Lt[0]<At){ce=7;break e}n(Re,Ne,"ALPH")||(Ce[0]=Re,je[0]=Ne+8,qe[0]=Dt),Ne+=At,Lt-=At}}if(b=b[0],he.na=he.na[0],he.P=he.P[0],he.Sa=he.Sa[0],ce!=0)break}b=[b],he.Ja=[he.Ja],he.xa=[he.xa];e:if($e=u,ce=f,ue=b,Ce=he.gb[0],je=he.Ja,qe=he.xa,Re=ce[0],Ne=!n($e,Re,"VP8 "),rt=!n($e,Re,"VP8L"),t($e!=null),t(ue!=null),t(je!=null),t(qe!=null),8>ue[0])ce=7;else{if(Ne||rt){if($e=Ie($e,Re+4),12<=Ce&&$e>Ce-12){ce=3;break e}if(ve&&$e>ue[0]-8){ce=7;break e}je[0]=$e,ce[0]+=8,ue[0]-=8,qe[0]=rt}else qe[0]=5<=ue[0]&&$e[Re+0]==47&&!($e[Re+4]>>5),je[0]=ue[0];ce=0}if(b=b[0],he.Ja=he.Ja[0],he.xa=he.xa[0],f=f[0],ce!=0)break;if(4294967286<he.Ja)return 3;if(O==null||be||(O[0]=he.xa?2:1),F=[F],Se=[Se],he.xa){if(5>b){ce=7;break}O=F,ve=Se,be=T,u==null||5>b?u=0:5<=b&&u[f+0]==47&&!(u[f+4]>>5)?(ue=[0],$e=[0],Ce=[0],U(je=new C,u,f,b),nt(je,ue,$e,Ce)?(O!=null&&(O[0]=ue[0]),ve!=null&&(ve[0]=$e[0]),be!=null&&(be[0]=Ce[0]),u=1):u=0):u=0}else{if(10>b){ce=7;break}O=Se,u==null||10>b||!Yu(u,f+3,b-3)?u=0:(ve=u[f+0]|u[f+1]<<8|u[f+2]<<16,be=16383&(u[f+7]<<8|u[f+6]),u=16383&(u[f+9]<<8|u[f+8]),1&ve||3<(ve>>1&7)||!(ve>>4&1)||ve>>5>=he.Ja||!be||!u?u=0:(F&&(F[0]=be),O&&(O[0]=u),u=1))}if(!u||(F=F[0],Se=Se[0],ge&&(K[0]!=F||le[0]!=Se)))return 3;z!=null&&(z[0]=he,z.offset=f-z.w,t(4294967286>f-z.w),t(z.offset==z.ha-b));break}return ce==0||ce==7&&ge&&z==null?(T!=null&&(T[0]|=he.na!=null&&0<he.na.length),k!=null&&(k[0]=F),_!=null&&(_[0]=Se),0):ce}function fc(u,f,b){var k=f.width,_=f.height,T=0,F=0,O=k,z=_;if(f.Da=u!=null&&0<u.Da,f.Da&&(O=u.cd,z=u.bd,T=u.v,F=u.j,11>b||(T&=-2,F&=-2),0>T||0>F||0>=O||0>=z||T+O>k||F+z>_))return 0;if(f.v=T,f.j=F,f.va=T+O,f.o=F+z,f.U=O,f.T=z,f.da=u!=null&&0<u.da,f.da){if(!Xe(O,z,b=[u.ib],T=[u.hb]))return 0;f.ib=b[0],f.hb=T[0]}return f.ob=u!=null&&u.ob,f.Kb=u==null||!u.Sd,f.da&&(f.ob=f.ib<3*k/4&&f.hb<3*_/4,f.Kb=0),1}function mc(u){if(u==null)return 2;if(11>u.S){var f=u.f.RGBA;f.fb+=(u.height-1)*f.A,f.A=-f.A}else f=u.f.kb,u=u.height,f.O+=(u-1)*f.fa,f.fa=-f.fa,f.N+=(u-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(u-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(u-1)*f.lb,f.lb=-f.lb);return 0}function qo(u,f,b,k){if(k==null||0>=u||0>=f)return 2;if(b!=null){if(b.Da){var _=b.cd,T=b.bd,F=-2&b.v,O=-2&b.j;if(0>F||0>O||0>=_||0>=T||F+_>u||O+T>f)return 2;u=_,f=T}if(b.da){if(!Xe(u,f,_=[b.ib],T=[b.hb]))return 2;u=_[0],f=T[0]}}k.width=u,k.height=f;e:{var z=k.width,K=k.height;if(u=k.S,0>=z||0>=K||!(u>=xd&&13>u))u=2;else{if(0>=k.Rd&&k.sd==null){F=T=_=f=0;var le=(O=z*Bg[u])*K;if(11>u||(T=(K+1)/2*(f=(z+1)/2),u==12&&(F=(_=z)*K)),(K=i(le+2*T+F))==null){u=1;break e}k.sd=K,11>u?((z=k.f.RGBA).eb=K,z.fb=0,z.A=O,z.size=le):((z=k.f.kb).y=K,z.O=0,z.fa=O,z.Fd=le,z.f=K,z.N=0+le,z.Ab=f,z.Cd=T,z.ea=K,z.W=0+le+T,z.Db=f,z.Ed=T,u==12&&(z.F=K,z.J=0+le+2*T),z.Tc=F,z.lb=_)}if(f=1,_=k.S,T=k.width,F=k.height,_>=xd&&13>_)if(11>_)u=k.f.RGBA,f&=(O=Math.abs(u.A))*(F-1)+T<=u.size,f&=O>=T*Bg[_],f&=u.eb!=null;else{u=k.f.kb,O=(T+1)/2,le=(F+1)/2,z=Math.abs(u.fa),K=Math.abs(u.Ab);var ge=Math.abs(u.Db),ve=Math.abs(u.lb),he=ve*(F-1)+T;f&=z*(F-1)+T<=u.Fd,f&=K*(le-1)+O<=u.Cd,f=(f&=ge*(le-1)+O<=u.Ed)&z>=T&K>=O&ge>=O,f&=u.y!=null,f&=u.f!=null,f&=u.ea!=null,_==12&&(f&=ve>=T,f&=he<=u.Tc,f&=u.F!=null)}else f=0;u=f?0:2}}return u!=0||b!=null&&b.fd&&(u=mc(k)),u}var $n=64,Uo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wo=24,Ho=32,pc=8,br=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];De("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(u){return u},M.Predictor2=function(u,f,b){return f[b+0]},M.Predictor3=function(u,f,b){return f[b+1]},M.Predictor4=function(u,f,b){return f[b-1]},M.Predictor5=function(u,f,b){return Fe(Fe(u,f[b+1]),f[b+0])},M.Predictor6=function(u,f,b){return Fe(u,f[b-1])},M.Predictor7=function(u,f,b){return Fe(u,f[b+0])},M.Predictor8=function(u,f,b){return Fe(f[b-1],f[b+0])},M.Predictor9=function(u,f,b){return Fe(f[b+0],f[b+1])},M.Predictor10=function(u,f,b){return Fe(Fe(u,f[b-1]),Fe(f[b+0],f[b+1]))},M.Predictor11=function(u,f,b){var k=f[b+0];return 0>=_e(k>>24&255,u>>24&255,(f=f[b-1])>>24&255)+_e(k>>16&255,u>>16&255,f>>16&255)+_e(k>>8&255,u>>8&255,f>>8&255)+_e(255&k,255&u,255&f)?k:u},M.Predictor12=function(u,f,b){var k=f[b+0];return(Ye((u>>24&255)+(k>>24&255)-((f=f[b-1])>>24&255))<<24|Ye((u>>16&255)+(k>>16&255)-(f>>16&255))<<16|Ye((u>>8&255)+(k>>8&255)-(f>>8&255))<<8|Ye((255&u)+(255&k)-(255&f)))>>>0},M.Predictor13=function(u,f,b){var k=f[b-1];return(lt((u=Fe(u,f[b+0]))>>24&255,k>>24&255)<<24|lt(u>>16&255,k>>16&255)<<16|lt(u>>8&255,k>>8&255)<<8|lt(u>>0&255,k>>0&255))>>>0};var j0=M.PredictorAdd0;M.PredictorAdd1=Ge,De("Predictor2","PredictorAdd2"),De("Predictor3","PredictorAdd3"),De("Predictor4","PredictorAdd4"),De("Predictor5","PredictorAdd5"),De("Predictor6","PredictorAdd6"),De("Predictor7","PredictorAdd7"),De("Predictor8","PredictorAdd8"),De("Predictor9","PredictorAdd9"),De("Predictor10","PredictorAdd10"),De("Predictor11","PredictorAdd11"),De("Predictor12","PredictorAdd12"),De("Predictor13","PredictorAdd13");var gc=M.PredictorAdd2;ht("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var hd,ta=M.ColorIndexInverseTransform,Vo=M.MapARGB,fd=M.VP8LColorIndexInverseTransformAlpha,md=M.MapAlpha,Hi=M.VP8LPredictorsAdd=[];Hi.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var Ks,wr,lr,Vi,hi,fi,Ko,mi,dn,vc,cr,na,Go,pd,xc,Gs,Ys,Ki,Xs,Yo,Js,Gi,yc,ra,aa,zt,qt,hn,Cn=i(511),pi=i(2041),bc=i(225),Xo=i(767),gd=0,S0=pi,vd=bc,Or=Xo,ia=Cn,xd=0,yd=1,Ag=2,bd=3,wd=4,k0=5,Pg=6,C0=7,A0=8,Nd=9,P0=10,dw=[2,3,7],hw=[3,3,11],_g=[280,256,256,256,40],fw=[0,1,1,1,0],mw=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],pw=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gw=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vw=8,_0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],L0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],wc=null,xw=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],yw=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Lg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bw=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ww=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nw=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],jw=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Yi=[],Na=[],gi=[],Sw=1,Eg=2,Xi=[],sa=[];we("UpsampleRgbLinePair",St,3),we("UpsampleBgrLinePair",Qt,3),we("UpsampleRgbaLinePair",wa,4),we("UpsampleBgraLinePair",Tn,4),we("UpsampleArgbLinePair",Kn,4),we("UpsampleRgba4444LinePair",yn,2),we("UpsampleRgb565LinePair",rn,2);var kw=M.UpsampleRgbLinePair,Cw=M.UpsampleBgrLinePair,Ig=M.UpsampleRgbaLinePair,Dg=M.UpsampleBgraLinePair,Tg=M.UpsampleArgbLinePair,Mg=M.UpsampleRgba4444LinePair,Aw=M.UpsampleRgb565LinePair,jd=16,Sd=1<<jd-1,Nc=-227,E0=482,Fg=6,Pw=(256<<Fg)-1,Og=0,_w=i(256),Lw=i(256),Ew=i(256),Iw=i(256),Dw=i(E0-Nc),Tw=i(E0-Nc);qa("YuvToRgbRow",St,3),qa("YuvToBgrRow",Qt,3),qa("YuvToRgbaRow",wa,4),qa("YuvToBgraRow",Tn,4),qa("YuvToArgbRow",Kn,4),qa("YuvToRgba4444Row",yn,2),qa("YuvToRgb565Row",rn,2);var Rg=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],kd=[0,2,8],Mw=[8,7,6,4,4,2,2,2,1,1,1,1],Fw=1;this.WebPDecodeRGBA=function(u,f,b,k,_){var T=yd,F=new Bo,O=new Lr;F.ba=O,O.S=T,O.width=[O.width],O.height=[O.height];var z=O.width,K=O.height,le=new va;if(le==null||u==null)var ge=2;else t(le!=null),ge=zo(u,f,b,le.width,le.height,le.Pd,le.Qd,le.format,null);if(ge!=0?z=0:(z!=null&&(z[0]=le.width[0]),K!=null&&(K[0]=le.height[0]),z=1),z){O.width=O.width[0],O.height=O.height[0],k!=null&&(k[0]=O.width),_!=null&&(_[0]=O.height);e:{if(k=new Ba,(_=new oc).data=u,_.w=f,_.ha=b,_.kd=1,f=[0],t(_!=null),((u=zo(_.data,_.w,_.ha,null,null,null,f,null,_))==0||u==7)&&f[0]&&(u=4),(f=u)==0){if(t(F!=null),k.data=_.data,k.w=_.w+_.offset,k.ha=_.ha-_.offset,k.put=Xr,k.ac=kn,k.bc=Jr,k.ma=F,_.xa){if((u=xr())==null){F=1;break e}if(function(ve,he){var Se=[0],be=[0],ce=[0];t:for(;;){if(ve==null)return 0;if(he==null)return ve.a=2,0;if(ve.l=he,ve.a=0,U(ve.m,he.data,he.w,he.ha),!nt(ve.m,Se,be,ce)){ve.a=3;break t}if(ve.xb=Eg,he.width=Se[0],he.height=be[0],!Tr(Se[0],be[0],1,ve,null))break t;return 1}return t(ve.a!=0),0}(u,k)){if(k=(f=qo(k.width,k.height,F.Oa,F.ba))==0){t:{k=u;n:for(;;){if(k==null){k=0;break t}if(t(k.s.yc!=null),t(k.s.Ya!=null),t(0<k.s.Wb),t((b=k.l)!=null),t((_=b.ma)!=null),k.xb!=0){if(k.ca=_.ba,k.tb=_.tb,t(k.ca!=null),!fc(_.Oa,b,bd)){k.a=2;break n}if(!Ra(k,b.width)||b.da)break n;if((b.da||_t(k.ca.S))&&me(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&me()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!Ve(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!Dr(k,k.V,k.Ba,k.c,k.i,b.o,zi))break n;_.Dc=k.Ma,k=1;break t}t(k.a!=0),k=0}k=!k}k&&(f=u.a)}else f=u.a}else{if((u=new a0)==null){F=1;break e}if(u.Fa=_.na,u.P=_.P,u.qc=_.Sa,Xu(u,k)){if((f=qo(k.width,k.height,F.Oa,F.ba))==0){if(u.Aa=0,b=F.Oa,t((_=u)!=null),b!=null){if(0<(z=0>(z=b.Md)?0:100<z?255:255*z/100)){for(K=le=0;4>K;++K)12>(ge=_.pb[K]).lc&&(ge.ia=z*Mw[0>ge.lc?0:ge.lc]>>3),le|=ge.ia;le&&(alert("todo:VP8InitRandom"),_.ia=1)}_.Ga=b.Id,100<_.Ga?_.Ga=100:0>_.Ga&&(_.Ga=0)}i0(u,k)||(f=u.a)}}else f=u.a}f==0&&F.Oa!=null&&F.Oa.fd&&(f=mc(F.ba))}F=f}T=F!=0?null:11>T?O.f.RGBA.eb:O.f.kb.y}else T=null;return T};var Bg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(M,H){for(var ae="",E=0;E<4;E++)ae+=String.fromCharCode(M[H++]);return ae}function m(M,H){return(M[H+0]<<0|M[H+1]<<8|M[H+2]<<16)>>>0}function h(M,H){return(M[H+0]<<0|M[H+1]<<8|M[H+2]<<16|M[H+3]<<24)>>>0}new c;var v=[0],p=[0],j=[],w=new c,S=e,g=function(M,H){var ae={},E=0,P=!1,J=0,V=0;if(ae.frames=[],!function(D,W,Q,ie){for(var de=0;de<ie;de++)if(D[W+de]!=Q.charCodeAt(de))return!0;return!1}(M,H,"RIFF",4)){for(h(M,H+=4),H+=8;H<M.length;){var X=d(M,H),Z=h(M,H+=4);H+=4;var ee=Z+(1&Z);switch(X){case"VP8 ":case"VP8L":ae.frames[E]===void 0&&(ae.frames[E]={}),(ne=ae.frames[E]).src_off=P?V:H-8,ne.src_size=J+Z+8,E++,P&&(P=!1,J=0,V=0);break;case"VP8X":(ne=ae.header={}).feature_flags=M[H];var U=H+4;ne.canvas_width=1+m(M,U),U+=3,ne.canvas_height=1+m(M,U),U+=3;break;case"ALPH":P=!0,J=ee+8,V=H-8;break;case"ANIM":(ne=ae.header).bgcolor=h(M,H),U=H+4,ne.loop_count=(pe=M)[(C=U)+0]<<0|pe[C+1]<<8,U+=2;break;case"ANMF":var te,ne;(ne=ae.frames[E]={}).offset_x=2*m(M,H),H+=3,ne.offset_y=2*m(M,H),H+=3,ne.width=1+m(M,H),H+=3,ne.height=1+m(M,H),H+=3,ne.duration=m(M,H),H+=3,te=M[H++],ne.dispose=1&te,ne.blend=te>>1&1}X!="ANMF"&&(H+=ee)}var pe,C;return ae}}(S,0);g.response=S,g.rgbaoutput=!0,g.dataurl=!1;var y=g.header?g.header:null,N=g.frames?g.frames:null;if(y){y.loop_counter=y.loop_count,v=[y.canvas_height],p=[y.canvas_width];for(var A=0;A<N.length&&N[A].blend!=0;A++);}var R=N[0],$=w.WebPDecodeRGBA(S,R.src_off,R.src_size,p,v);R.rgba=$,R.imgwidth=p[0],R.imgheight=v[0];for(var I=0;I<p[0]*v[0]*4;I++)j[I]=$[I];return this.width=p,this.height=v,this.data=j,this}(function(e){var t=function(){return typeof s1=="function"},n=function(v,p,j,w){var S=4,g=o;switch(w){case e.image_compression.FAST:S=1,g=i;break;case e.image_compression.MEDIUM:S=6,g=l;break;case e.image_compression.SLOW:S=9,g=c}v=r(v,p,j,g);var y=s1(v,{level:S});return e.__addimage__.arrayBufferToBinaryString(y)},r=function(v,p,j,w){for(var S,g,y,N=v.length/p,A=new Uint8Array(v.length+N),R=m(),$=0;$<N;$+=1){if(y=$*p,S=v.subarray(y,y+p),w)A.set(w(S,j,g),y+$);else{for(var I,M=R.length,H=[];I<M;I+=1)H[I]=R[I](S,j,g);var ae=h(H.concat());A.set(H[ae],y+$)}g=S}return A},a=function(v){var p=Array.apply([],v);return p.unshift(0),p},i=function(v,p){var j,w=[],S=v.length;w[0]=1;for(var g=0;g<S;g+=1)j=v[g-p]||0,w[g+1]=v[g]-j+256&255;return w},o=function(v,p,j){var w,S=[],g=v.length;S[0]=2;for(var y=0;y<g;y+=1)w=j&&j[y]||0,S[y+1]=v[y]-w+256&255;return S},l=function(v,p,j){var w,S,g=[],y=v.length;g[0]=3;for(var N=0;N<y;N+=1)w=v[N-p]||0,S=j&&j[N]||0,g[N+1]=v[N]+256-(w+S>>>1)&255;return g},c=function(v,p,j){var w,S,g,y,N=[],A=v.length;N[0]=4;for(var R=0;R<A;R+=1)w=v[R-p]||0,S=j&&j[R]||0,g=j&&j[R-p]||0,y=d(w,S,g),N[R+1]=v[R]-y+256&255;return N},d=function(v,p,j){if(v===p&&p===j)return v;var w=Math.abs(p-j),S=Math.abs(v-j),g=Math.abs(v+p-j-j);return w<=S&&w<=g?v:S<=g?p:j},m=function(){return[a,i,o,l,c]},h=function(v){var p=v.map(function(j){return j.reduce(function(w,S){return w+Math.abs(S)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(v,p,j,w){var S,g,y,N,A,R,$,I,M,H,ae,E,P,J,V,X=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(y=new S8(v)).imgData,g=y.bits,S=y.colorSpace,A=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){M=(I=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,ae=new Uint8Array(M*y.colors),H=new Uint8Array(M);var ee,U=y.pixelBitlength-y.bits;for(J=0,V=0;J<M;J++){for(P=I[J],ee=0;ee<U;)ae[V++]=P>>>ee&255,ee+=y.bits;H[J]=P>>>ee&255}}if(y.bits===16){M=(I=new Uint32Array(y.decodePixels().buffer)).length,ae=new Uint8Array(M*(32/y.pixelBitlength)*y.colors),H=new Uint8Array(M*(32/y.pixelBitlength)),E=y.colors>1,J=0,V=0;for(var te=0;J<M;)P=I[J++],ae[V++]=P>>>0&255,E&&(ae[V++]=P>>>16&255,P=I[J++],ae[V++]=P>>>0&255),H[te++]=P>>>16&255;g=8}w!==e.image_compression.NONE&&t()?(v=n(ae,y.width*y.colors,y.colors,w),$=n(H,y.width,1,w)):(v=ae,$=H,X=void 0)}if(y.colorType===3&&(S=this.color_spaces.INDEXED,R=y.palette,y.transparency.indexed)){var ne=y.transparency.indexed,pe=0;for(J=0,M=ne.length;J<M;++J)pe+=ne[J];if((pe/=255)===M-1&&ne.indexOf(0)!==-1)N=[ne.indexOf(0)];else if(pe!==M){for(I=y.decodePixels(),H=new Uint8Array(I.length),J=0,M=I.length;J<M;J++)H[J]=ne[I[J]];$=n(H,y.width,1)}}var C=function(D){var W;switch(D){case e.image_compression.FAST:W=11;break;case e.image_compression.MEDIUM:W=13;break;case e.image_compression.SLOW:W=14;break;default:W=12}return W}(w);return X===this.decode.FLATE_DECODE&&(Z="/Predictor "+C+" "),Z+="/Colors "+A+" /BitsPerComponent "+g+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),($&&this.__addimage__.isArrayBuffer($)||this.__addimage__.isArrayBufferView($))&&($=this.__addimage__.arrayBufferToBinaryString($)),{alias:j,data:v,index:p,filter:X,decodeParameters:Z,transparency:N,palette:R,sMask:$,predictor:C,width:y.width,height:y.height,bitsPerComponent:g,colorSpace:S}}}})(st.API),function(e){e.processGIF89A=function(t,n,r,a){var i=new k8(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},m=new _m(100).encode(d,100);return e.processJPEG.call(this,m,n,r,a)},e.processGIF87A=e.processGIF89A}(st.API),Ca.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ca.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Bt.log("bit decode error:"+n)}},Ca.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},Ca.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ca.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Ca.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,m=r*this.width*4+4*a;this.data[m]=c,this.data[m+1]=l,this.data[m+2]=o,this.data[m+3]=d}this.pos+=e}},Ca.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,m=a*this.width*4+4*i;this.data[m]=d,this.data[m+1]=c,this.data[m+2]=l,this.data[m+3]=255}this.pos+=e}},Ca.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ca.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=r,this.data[l+3]=o}},Ca.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,a){var i=new Ca(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new _m(100).encode(c,100);return e.processJPEG.call(this,d,n,r,a)}}(st.API),tx.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,a){var i=new tx(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new _m(100).encode(c,100);return e.processJPEG.call(this,d,n,r,a)}}(st.API),st.API.processRGBA=function(e,t,n){for(var r=e.data,a=r.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var m=r[d],h=r[d+1],v=r[d+2],p=r[d+3];i[l++]=m,i[l++]=h,i[l++]=v,o[c++]=p}var j=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:j,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},st.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},sl=st.API,uh=sl.getCharWidthsArray=function(e,t){var n,r,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,m=d.fof?d.fof:1,h=t.doKerning!==!1,v=0,p=e.length,j=0,w=l[0]||c,S=[];for(n=0;n<p;n++)r=e.charCodeAt(n),typeof a.metadata.widthOfString=="function"?S.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(v=h&&Et(d[r])==="object"&&!isNaN(parseInt(d[r][j],10))?d[r][j]/m:0,S.push((l[r]||w)/c+v)),j=r;return S},Jv=sl.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return sl.processArabic&&(e=sl.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,a)/n:uh.apply(this,arguments).reduce(function(i,o){return i+o},0)},Qv=function(e,t,n,r){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<n;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>r&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},Zv=function(e,t,n){n||(n={});var r,a,i,o,l,c,d,m=[],h=[m],v=n.textIndent||0,p=0,j=0,w=e.split(" "),S=uh.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?w[0].length+2:n.lineIndent||0){var g=Array(c).join(" "),y=[];w.map(function(A){(A=A.split(/\s*\n/)).length>1?y=y.concat(A.map(function(R,$){return($&&R.length?`
`:"")+R})):y.push(A[0])}),w=y,c=Jv.apply(this,[g,n])}for(i=0,o=w.length;i<o;i++){var N=0;if(r=w[i],c&&r[0]==`
`&&(r=r.substr(1),N=1),v+p+(j=(a=uh.apply(this,[r,n])).reduce(function(A,R){return A+R},0))>t||N){if(j>t){for(l=Qv.apply(this,[r,a,t-(v+p),t]),m.push(l.shift()),m=[l.pop()];l.length;)h.push([l.shift()]);j=a.slice(r.length-(m[0]?m[0].length:0)).reduce(function(A,R){return A+R},0)}else m=[r];h.push(m),v=j+c,p=S}else m.push(r),v+=p+j,p=S}return d=c?function(A,R){return(R?g:"")+A.join(" ")}:function(A){return A.join(" ")},h.map(d)},sl.splitTextToSize=function(e,t,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var h=this.internal.getFont(m.fontName,m.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=r.length;l<c;l++)d=d.concat(Zv.apply(this,[r[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},a=0;a<t.length;a++)n[t[a]]="0123456789abcdef"[a],r["0123456789abcdef"[a]]=t[a];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var v,p,j,w,S=["{"];for(var g in h){if(v=h[g],isNaN(parseInt(g,10))?p="'"+g+"'":(g=parseInt(g,10),p=(p=i(g).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof v=="number")v<0?(j=i(v).slice(3),w="-"):(j=i(v).slice(2),w=""),j=w+j.slice(0,-1)+r[j.slice(-1)];else{if(Et(v)!=="object")throw new Error("Don't know what to do with value type "+Et(v)+".");j=o(v)}S.push(p+j)}return S.push("}"),S.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,p,j,w,S={},g=1,y=S,N=[],A="",R="",$=h.length-1,I=1;I<$;I+=1)(w=h[I])=="'"?v?(j=v.join(""),v=void 0):v=[]:v?v.push(w):w=="{"?(N.push([y,j]),y={},j=void 0):w=="}"?((p=N.pop())[0][p[1]]=y,j=void 0,y=p[0]):w=="-"?g=-1:j===void 0?n.hasOwnProperty(w)?(A+=n[w],j=parseInt(A,16)*g,g=1,A=""):A+=w:n.hasOwnProperty(w)?(R+=n[w],y[j]=parseInt(R,16)*g,g=1,j=void 0,R=""):R+=w;return S},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},m={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var v=h.font,p=m.Unicode[v.postScriptName];p&&(v.metadata.Unicode={},v.metadata.Unicode.widths=p.widths,v.metadata.Unicode.kerning=p.kerning);var j=d.Unicode[v.postScriptName];j&&(v.metadata.Unicode.encoding=j,v.encoding=j.codePages[0])}])}(st.API),function(e){var t=function(n){for(var r=n.length,a=new Uint8Array(r),i=0;i<r;i++)a[i]=n.charCodeAt(i);return a};e.API.events.push(["addFont",function(n){var r=void 0,a=n.font,i=n.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(au(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,r)}}])}(st),function(e){function t(){return(ot.canvg?Promise.resolve(ot.canvg):t1(()=>import("./index.es-abef9b7f.js"),[],import.meta.url)).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}st.API.addSvgAsImage=function(n,r,a,i,o,l,c,d){if(isNaN(r)||isNaN(a))throw Bt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Bt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var m=document.createElement("canvas");m.width=i,m.height=o;var h=m.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,m.width,m.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(j){return j.fromString(h,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(v)}).then(function(){p.addImage(m.toDataURL("image/jpeg",1),r,a,i,o,c,d)})}}(),st.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(t,n);return this},st.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,m=0,h=0;function v(j,w){var S,g=!1;for(S=0;S<j.length;S+=1)j[S]===w&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(h=0;h<p;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if(Et(e)==="object"){for(a in e)if(i=e[a],v(l,a)&&i!==void 0){if(n[a].type==="boolean"&&typeof i=="boolean")n[a].value=i;else if(n[a].type==="name"&&v(n[a].valueSet,i))n[a].value=i;else if(n[a].type==="integer"&&Number.isInteger(i))n[a].value=i;else if(n[a].type==="array"){for(d=0;d<i.length;d+=1)if(r=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(m=0;m<i[d].length;m+=1)typeof i[d][m]!="number"&&(r=!1);r===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}n[a].value="["+c.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,w=[];for(j in n)n[j].explicitSet===!0&&(n[j].type==="name"?w.push("/"+j+" /"+n[j].value):w.push("/"+j+" "+n[j].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(st.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],m=[""],h=0,v=i.length;h<v;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return m.join("");l=l.toString(16),m.push(d[4-l.length],l)}return m.join("")},r=function(i){var o,l,c,d,m,h,v;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,v=(l=Object.keys(i).sort(function(p,j){return p-j})).length;h<v;h++)o=l[h],c.length>=100&&(m+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(m+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),m+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,m=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,v=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",j=0;j<v.length;j++)p+=String.fromCharCode(v[j]);var w=d();m({data:p,addLength1:!0,objectId:w}),c("endobj");var S=d();m({data:r(l.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var g=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ul(l.fontName)),c("/FontFile2 "+w+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+ul(l.fontName)),c("/FontDescriptor "+g+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+S+" 0 R"),c("/BaseFont /"+ul(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,m=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,v="",p=0;p<h.length;p++)v+=String.fromCharCode(h[p]);var j=d();m({data:v,addLength1:!0,objectId:j}),c("endobj");var w=d();m({data:r(l.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var S=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+j+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ul(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var g=0;g<l.metadata.hmtx.widths.length;g++)l.metadata.hmtx.widths[g]=parseInt(l.metadata.hmtx.widths[g]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+ul(l.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,m=i.options||{},h=i.mutex||{},v=h.pdfEscape,p=h.activeFontKey,j=h.fonts,w=p,S="",g=0,y="",N=j[w].encoding;if(j[w].encoding!=="Identity-H")return{text:l,x:c,y:d,options:m,mutex:h};for(y=l,w=p,Array.isArray(l)&&(y=l[0]),g=0;g<y.length;g+=1)j[w].metadata.hasOwnProperty("cmap")&&(o=j[w].metadata.cmap.unicode.codeMap[y[g].charCodeAt(0)]),o||y[g].charCodeAt(0)<256&&j[w].metadata.hasOwnProperty("Unicode")?S+=y[g]:S+="";var A="";return parseInt(w.slice(1))<14||N==="WinAnsiEncoding"?A=v(S,w).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(A=n(S,j[w])),h.isHex=!0,{text:A,x:c,y:d,options:m,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(st),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(st.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var a,i,o,l,c,d,m,h=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,N=0;this.__bidiEngine__={};var A=function(E){var P=E.charCodeAt(),J=P>>8,V=w[J];return V!==void 0?h[256*V+(255&P)]:J===252||J===253?"AL":g.test(J)?"L":J===8?"R":"N"},R=function(E){for(var P,J=0;J<E.length;J++){if((P=A(E.charAt(J)))==="L")return!1;if(P==="R")return!0}return!1},$=function(E,P,J,V){var X,Z,ee,U,te=P[V];switch(te){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(te="AN");break;case"AL":y=!0,te="R";break;case"WS":te="N";break;case"CS":V<1||V+1>=P.length||(X=J[V-1])!=="EN"&&X!=="AN"||(Z=P[V+1])!=="EN"&&Z!=="AN"?te="N":y&&(Z="AN"),te=Z===X?Z:"N";break;case"ES":te=(X=V>0?J[V-1]:"B")==="EN"&&V+1<P.length&&P[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&J[V-1]==="EN"){te="EN";break}if(y){te="N";break}for(ee=V+1,U=P.length;ee<U&&P[ee]==="ET";)ee++;te=ee<U&&P[ee]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(U=P.length,ee=V+1;ee<U&&P[ee]==="NSM";)ee++;if(ee<U){var ne=E[V],pe=ne>=1425&&ne<=2303||ne===64286;if(X=P[ee],pe&&(X==="R"||X==="AL")){te="R";break}}}te=V<1||(X=P[V-1])==="B"?"N":J[V-1];break;case"B":y=!1,a=!0,te=N;break;case"S":i=!0,te="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":te="N"}return te},I=function(E,P,J){var V=E.split("");return J&&M(V,J,{hiLevel:N}),V.reverse(),P&&P.reverse(),V.join("")},M=function(E,P,J){var V,X,Z,ee,U,te=-1,ne=E.length,pe=0,C=[],D=N?p:v,W=[];for(y=!1,a=!1,i=!1,X=0;X<ne;X++)W[X]=A(E[X]);for(Z=0;Z<ne;Z++){if(U=pe,C[Z]=$(E,W,C,Z),V=240&(pe=D[U][j[C[Z]]]),pe&=15,P[Z]=ee=D[pe][5],V>0)if(V===16){for(X=te;X<Z;X++)P[X]=1;te=-1}else te=-1;if(D[pe][6])te===-1&&(te=Z);else if(te>-1){for(X=te;X<Z;X++)P[X]=ee;te=-1}W[Z]==="B"&&(P[Z]=0),J.hiLevel|=ee}i&&function(Q,ie,de){for(var re=0;re<de;re++)if(Q[re]==="S"){ie[re]=N;for(var B=re-1;B>=0&&Q[B]==="WS";B--)ie[B]=N}}(W,P,ne)},H=function(E,P,J,V,X){if(!(X.hiLevel<E)){if(E===1&&N===1&&!a)return P.reverse(),void(J&&J.reverse());for(var Z,ee,U,te,ne=P.length,pe=0;pe<ne;){if(V[pe]>=E){for(U=pe+1;U<ne&&V[U]>=E;)U++;for(te=pe,ee=U-1;te<ee;te++,ee--)Z=P[te],P[te]=P[ee],P[ee]=Z,J&&(Z=J[te],J[te]=J[ee],J[ee]=Z);pe=U}pe++}}},ae=function(E,P,J){var V=E.split(""),X={hiLevel:N};return J||(J=[]),M(V,J,X),function(Z,ee,U){if(U.hiLevel!==0&&m)for(var te,ne=0;ne<Z.length;ne++)ee[ne]===1&&(te=S.indexOf(Z[ne]))>=0&&(Z[ne]=S[te+1])}(V,J,X),H(2,V,P,J,X),H(1,V,P,J,X),V.join("")};return this.__bidiEngine__.doBidiReorder=function(E,P,J){if(function(X,Z){if(Z)for(var ee=0;ee<X.length;ee++)Z[ee]=ee;l===void 0&&(l=R(X)),d===void 0&&(d=R(X))}(E,P),o||!c||d)if(o&&c&&l^d)N=l?1:0,E=I(E,P,J);else if(!o&&c&&d)N=l?1:0,E=ae(E,P,J),E=I(E,P);else if(!o||l||c||d){if(o&&!c&&l^d)E=I(E,P),l?(N=0,E=ae(E,P,J)):(N=1,E=ae(E,P,J),E=I(E,P));else if(o&&l&&!c&&d)N=1,E=ae(E,P,J),E=I(E,P);else if(!o&&!c&&l^d){var V=m;l?(N=1,E=ae(E,P,J),N=0,m=!1,E=ae(E,P,J),m=V):(N=0,E=ae(E,P,J),E=I(E,P),N=1,m=!1,E=ae(E,P,J),m=V,E=I(E,P))}}else N=0,E=ae(E,P,J);else N=l?1:0,E=ae(E,P,J);return E},this.__bidiEngine__.setOptions=function(E){E&&(o=E.isInputVisual,c=E.isOutputVisual,l=E.isInputRtl,d=E.isOutputRtl,m=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var a=r.text;r.x,r.y;var i=r.options||{};r.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([n.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([n.doBidiReorder(a[l])]);r.text=o}else r.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])}(st),st.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Fs(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new $8(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new C8(this.contents),this.head=new P8(this),this.name=new D8(this),this.cmap=new rw(this),this.toUnicode={},this.hhea=new _8(this),this.maxp=new T8(this),this.hmtx=new M8(this),this.post=new E8(this),this.os2=new L8(this),this.loca=new B8(this),this.glyf=new F8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Oa,Fs=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,a;for(a=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)a.push(this.writeByte(t.charCodeAt(n)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,a,i,o,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,a,i;for(i=[],r=0,a=t.length;r<a;r++)n=t[r],i.push(this.writeByte(n));return i},e}(),C8=function(){var e;function t(n){var r,a,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,a,i,o,l,c,d,m,h,v,p,j,w;for(w in p=Object.keys(n).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),o=Math.floor(h/c),m=16*p-h,(a=new Fs).writeInt(this.scalarType),a.writeShort(p),a.writeShort(h),a.writeShort(o),a.writeShort(m),i=16*p,d=a.pos+i,l=null,j=[],n)for(v=n[w],a.writeString(w),a.writeInt(e(v)),a.writeInt(d),a.writeInt(v.length),j=j.concat(v),w==="head"&&(l=d),d+=v.length;d%4;)j.push(0),d++;return a.write(j),r=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(r),a.data},e=function(n){var r,a,i,o;for(n=aw.call(n);n.length%4;)n.push(0);for(i=new Fs(n),a=0,r=0,o=n.length;r<o;r=r+=4)a+=i.readUInt32();return 4294967295&a},t}(),A8={}.hasOwnProperty,ai=function(e,t){for(var n in t)A8.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Oa=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var P8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Fs).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),nx=function(){function e(t,n){var r,a,i,o,l,c,d,m,h,v,p,j,w,S,g,y,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),v=p/2,t.pos+=6,i=function(){var A,R;for(R=[],c=A=0;0<=v?A<v:A>v;c=0<=v?++A:--A)R.push(t.readUInt16());return R}(),t.pos+=2,w=function(){var A,R;for(R=[],c=A=0;0<=v?A<v:A>v;c=0<=v?++A:--A)R.push(t.readUInt16());return R}(),d=function(){var A,R;for(R=[],c=A=0;0<=v?A<v:A>v;c=0<=v?++A:--A)R.push(t.readUInt16());return R}(),m=function(){var A,R;for(R=[],c=A=0;0<=v?A<v:A>v;c=0<=v?++A:--A)R.push(t.readUInt16());return R}(),a=(this.length-t.pos+this.offset)/2,l=function(){var A,R;for(R=[],c=A=0;0<=a?A<a:A>a;c=0<=a?++A:--A)R.push(t.readUInt16());return R}(),c=g=0,N=i.length;g<N;c=++g)for(S=i[c],r=y=j=w[c];j<=S?y<=S:y>=S;r=j<=S?++y:--y)m[c]===0?o=r+d[c]:(o=l[m[c]/2+(r-j)-(v-c)]||0)!==0&&(o+=d[c]),this.codeMap[r]=65535&o}t.pos=h}return e.encode=function(t,n){var r,a,i,o,l,c,d,m,h,v,p,j,w,S,g,y,N,A,R,$,I,M,H,ae,E,P,J,V,X,Z,ee,U,te,ne,pe,C,D,W,Q,ie,de,re,B,oe,ye,Pe;switch(V=new Fs,o=Object.keys(t).sort(function(Ie,Ve){return Ie-Ve}),n){case"macroman":for(w=0,S=function(){var Ie=[];for(j=0;j<256;++j)Ie.push(0);return Ie}(),y={0:0},i={},X=0,te=o.length;X<te;X++)y[B=t[a=o[X]]]==null&&(y[B]=++w),i[a]={old:t[a],new:y[t[a]]},S[a]=y[t[a]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(S),{charMap:i,subtable:V.data,maxGlyphID:w+1};case"unicode":for(P=[],h=[],N=0,y={},r={},g=d=null,Z=0,ne=o.length;Z<ne;Z++)y[R=t[a=o[Z]]]==null&&(y[R]=++N),r[a]={old:R,new:y[R]},l=y[R]-a,g!=null&&l===d||(g&&h.push(g),P.push(a),d=l),g=a;for(g&&h.push(g),h.push(65535),P.push(65535),ae=2*(H=P.length),M=2*Math.pow(Math.log(H)/Math.LN2,2),v=Math.log(M/2)/Math.LN2,I=2*H-M,c=[],$=[],p=[],j=ee=0,pe=P.length;ee<pe;j=++ee){if(E=P[j],m=h[j],E===65535){c.push(0),$.push(0);break}if(E-(J=r[E].new)>=32768)for(c.push(0),$.push(2*(p.length+H-j)),a=U=E;E<=m?U<=m:U>=m;a=E<=m?++U:--U)p.push(r[a].new);else c.push(J-E),$.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*H+2*p.length),V.writeUInt16(0),V.writeUInt16(ae),V.writeUInt16(M),V.writeUInt16(v),V.writeUInt16(I),de=0,C=h.length;de<C;de++)a=h[de],V.writeUInt16(a);for(V.writeUInt16(0),re=0,D=P.length;re<D;re++)a=P[re],V.writeUInt16(a);for(oe=0,W=c.length;oe<W;oe++)l=c[oe],V.writeUInt16(l);for(ye=0,Q=$.length;ye<Q;ye++)A=$[ye],V.writeUInt16(A);for(Pe=0,ie=p.length;Pe<ie;Pe++)w=p[Pe],V.writeUInt16(w);return{charMap:r,subtable:V.data,maxGlyphID:N+1}}},e}(),rw=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,a,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)r=new nx(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var a,i;return r==null&&(r="macroman"),a=nx.encode(n,r),(i=new Fs).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),_8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),L8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,a;for(a=[],r=0;r<10;++r)a.push(n.readByte());return a}(),this.charRange=function(){var r,a;for(a=[],r=0;r<4;++r)a.push(n.readInt());return a}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(n.readInt());return a}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),E8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="post",t.prototype.parse=function(n){var r,a,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(a=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)r=n.readByte(),i.push(this.names.push(n.readString(r)));return i;case 151552:return a=n.readUInt16(),this.offsets=n.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(n.readUInt32());return d}).call(this)}},t}(),I8=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},D8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="name",t.prototype.parse=function(n){var r,a,i,o,l,c,d,m,h,v,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),a=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)a.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(d={},o=h=0,v=a.length;h<v;o=++h)i=a[o],n.pos=i.offset,m=n.readString(i.length),l=new I8(m,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),T8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),M8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,a,i,o,l,c,d;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var m,h;for(h=[],r=m=0;0<=i?m<i:m>i;r=0<=i?++m:--m)h.push(n.readInt16());return h}(),this.widths=(function(){var m,h,v,p;for(p=[],m=0,h=(v=this.metrics).length;m<h;m++)o=v[m],p.push(o.advance);return p}).call(this),a=this.widths[this.widths.length-1],d=[],r=l=0;0<=i?l<i:l>i;r=0<=i?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),aw=[].slice,F8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,a,i,o,l,c,d,m,h,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,a=o.indexOf(n),(i=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+a,l=(c=new Fs(r.read(i))).readShort(),m=c.readShort(),v=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[n]=l===-1?new R8(c,m,v,d,h):new O8(c,l,m,v,d,h),this.cache[n]))},t.prototype.encode=function(n,r,a){var i,o,l,c,d;for(l=[],o=[],c=0,d=r.length;c<d;c++)i=n[r[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),O8=function(){function e(t,n,r,a,i,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),R8=function(){function e(t,n,r,a,i){var o,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Fs(aw.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),B8=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ai(t,Oa),t.prototype.tag="loca",t.prototype.parse=function(n){var r,a;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(n.readUInt32());return o}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<r.length&&r[o]==l){++o,a[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var m=new Array(4*a.length),h=0;h<a.length;++h)m[4*h+3]=255&a[h],m[4*h+2]=(65280&a[h])>>8,m[4*h+1]=(16711680&a[h])>>16,m[4*h]=(4278190080&a[h])>>24;return m},t}(),$8=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,a,i;for(n in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[n],t[n]=a[r];return t},e.prototype.glyphsFor=function(t){var n,r,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in n=[],a)(r=a[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in c=this.glyphsFor(n))r=c[i],a[i]=r;return a},e.prototype.encode=function(t,n){var r,a,i,o,l,c,d,m,h,v,p,j,w,S,g;for(a in r=rw.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},g=r.charMap)p[(c=g[a]).old]=c.new;for(j in v=r.maxGlyphID,o)j in p||(p[j]=v++);return m=function(y){var N,A;for(N in A={},y)A[y[N]]=N;return A}(p),h=Object.keys(m).sort(function(y,N){return y-N}),w=function(){var y,N,A;for(A=[],y=0,N=h.length;y<N;y++)l=h[y],A.push(m[l]);return A}(),i=this.font.glyf.encode(o,w,p),d=this.font.loca.encode(i.offsets,w),S={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},e}();st.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,a,i,o;if(Array.isArray(n))return"["+function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)r=n[l],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in i=["<<"],n)o=n[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+n},t}();const rx=e=>{try{const t=new st({orientation:"portrait",unit:"pt",format:[226,800]});let n=20;const r=226,a=10,i=10,o=r-a-i,l=e.documentType==="recharge",c=e.documentType==="balance_payment";t.setFontSize(14),t.setFont("helvetica","bold");const d=t.getTextWidth(e.restaurantName),m=(r-d)/2;t.text(e.restaurantName,m,n),n+=20,t.setFontSize(12),t.setFont("helvetica","bold");let h="TICKET";l?h="RECARGA DE SALDO":c&&(h="ALBARÁN");const v=t.getTextWidth(h),p=(r-v)/2;t.text(h,p,n),n+=20,t.setLineWidth(.5),t.line(a,n,r-i,n),n+=10,t.setFontSize(9),t.setFont("helvetica","normal");const j=new Date;if(t.text(`Fecha: ${j.toLocaleDateString("es-ES")}`,a,n),n+=12,t.text(`Hora: ${j.toLocaleTimeString("es-ES")}`,a,n),n+=12,l||(t.text(`Mesa: ${e.tableNumber}`,a,n),n+=15),e.selectedCustomer){t.setFontSize(9),t.setFont("helvetica","bold"),t.text("CLIENTE:",a,n),n+=12,t.setFontSize(9),t.setFont("helvetica","normal");const M=`${e.selectedCustomer.name} ${e.selectedCustomer.lastName}`;t.text(M,a,n),n+=12,e.selectedCustomer.email&&(t.text(`Email: ${e.selectedCustomer.email}`,a,n),n+=12),e.selectedCustomer.phone&&(t.text(`Tel: ${e.selectedCustomer.phone}`,a,n),n+=12),e.selectedCustomer.cardCode&&(t.text(`Tarjeta: ${e.selectedCustomer.cardCode}`,a,n),n+=12),n+=5}t.line(a,n,r-i,n),n+=10,e.orderItems.forEach(M=>{t.setFontSize(10),t.setFont("helvetica","bold"),t.text(M.productName,a,n),n+=12,t.setFontSize(9),t.setFont("helvetica","normal");const H=`${M.quantity} x ${e.currencySymbol}${M.unitPrice.toFixed(2)}`,ae=`${e.currencySymbol}${M.totalPrice.toFixed(2)}`;t.text(H,a,n);const E=t.getTextWidth(ae);t.text(ae,r-i-E,n),n+=15}),t.line(a,n,r-i,n),n+=10,t.setFontSize(10),t.setFont("helvetica","normal");const w=`Subtotal: ${e.currencySymbol}${e.subtotal.toFixed(2)}`,S=t.getTextWidth(w);t.text(w,r-i-S,n),n+=12;const g=`IVA: ${e.currencySymbol}${e.tax.toFixed(2)}`,y=t.getTextWidth(g);t.text(g,r-i-y,n),n+=12,t.setFontSize(12),t.setFont("helvetica","bold");const N=`TOTAL: ${e.currencySymbol}${e.total.toFixed(2)}`,A=t.getTextWidth(N);if(t.text(N,r-i-A,n),n+=20,e.useBalance&&e.balanceAmount&&e.balanceAmount>0){t.line(a,n,r-i,n),n+=10,t.setFontSize(11),t.setFont("helvetica","bold"),t.text("PAGO CON SALDO",a,n),n+=15,t.setFontSize(9),t.setFont("helvetica","normal");const M=`Saldo usado: ${e.currencySymbol}${e.balanceAmount.toFixed(2)}`,H=t.getTextWidth(M);if(t.text(M,r-i-H,n),n+=12,e.selectedCustomer){const ae=e.selectedCustomer.balance-e.balanceAmount,E=`Saldo restante: ${e.currencySymbol}${ae.toFixed(2)}`,P=t.getTextWidth(E);t.text(E,r-i-P,n),n+=12}if(e.remainingAmount&&e.remainingAmount>0){const E=`Resto pagado con: ${e.remainingPaymentMethod==="cash"?"Efectivo":"Tarjeta"}`,P=t.getTextWidth(E);t.text(E,r-i-P,n),n+=12}n+=10}if(t.line(a,n,r-i,n),n+=10,!e.useBalance||e.remainingAmount&&e.remainingAmount>0){t.setFontSize(9),t.setFont("helvetica","normal");const M=e.paymentMethod==="cash"?"Efectivo":"Tarjeta";t.text(`Pago: ${M}`,a,n),n+=20}if(l&&e.selectedCustomer){n+=10,t.setFontSize(10),t.setFont("helvetica","bold"),t.text("Saldo actualizado:",a,n),n+=12,t.setFontSize(10),t.setFont("helvetica","normal");const M=e.selectedCustomer.balance+e.total;t.text(`${e.currencySymbol}${M.toFixed(2)}`,a,n),n+=12}t.setFontSize(10),t.setFont("helvetica","bold");const R="¡Gracias por su visita!",$=t.getTextWidth(R),I=(r-$)/2;return t.text(R,I,n),t.output("dataurlstring")}catch(t){throw console.error("Error generando PDF:",t),new Error("No se pudo generar el ticket PDF")}},z8=(e,t="ticket")=>{var n;try{console.log("Intentando abrir PDF en nueva ventana...");const r=window.open("","_blank","width=800,height=1000,scrollbars=yes,resizable=yes");r?(r.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Ticket - ${t}</title>
            <style>
              body { 
                margin: 0; 
                padding: 20px; 
                font-family: Arial, sans-serif;
                background: #f5f5f5;
              }
              .container {
                max-width: 800px;
                margin: 0 auto;
                background: white;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
              }
              .header {
                text-align: center;
                margin-bottom: 20px;
                padding-bottom: 10px;
                border-bottom: 2px solid #333;
              }
              .actions {
                text-align: center;
                margin-bottom: 20px;
              }
              .btn {
                background: #007bff;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                margin: 0 10px;
                text-decoration: none;
                display: inline-block;
              }
              .btn:hover {
                background: #0056b3;
              }
              .pdf-container {
                text-align: center;
              }
              iframe {
                border: 1px solid #ddd;
                border-radius: 5px;
              }
            </style>
          </head>
          <body>
            <div class="container">
              <div class="header">
                <h2>Ticket de Compra</h2>
                <p>Mesa: ${t.includes("mesa")?(n=t.split("-mesa-")[1])==null?void 0:n.split("-")[0]:"N/A"}</p>
              </div>
              <div class="actions">
                <button class="btn" onclick="window.print()">🖨️ Imprimir</button>
                <a class="btn" href="${e}" download="${t}.pdf">💾 Descargar PDF</a>
                <button class="btn" onclick="window.close()">❌ Cerrar</button>
              </div>
              <div class="pdf-container">
                <iframe src="${e}" width="100%" height="800px" type="application/pdf">
                  <p>Tu navegador no puede mostrar PDFs. <a href="${e}" download="${t}.pdf">Haz clic aquí para descargar</a></p>
                </iframe>
              </div>
            </div>
          </body>
        </html>
      `),r.document.close(),console.log("PDF abierto en popup exitosamente")):(console.log("No se pudo abrir popup, descargando..."),ax(e,t))}catch(r){console.error("Error abriendo PDF:",r),ax(e,t)}},ax=(e,t)=>{console.log("Descargando PDF...");const n=document.createElement("a");n.href=e,n.download=`${t}.pdf`,document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log("PDF descargado")},q8=({isOpen:e,onClose:t,onPaymentComplete:n,orderItems:r,tableNumber:a,customerName:i,subtotal:o,tax:l,total:c,mergedTableNumber:d,titleOverride:m,skipDbSave:h=!1,defaultPaymentMethod:v="cash",originalOrderItems:p,originalSubtotal:j,originalTax:w,originalTotal:S,selectedCustomer:g})=>{const[y,N]=q.useState(v),[A,R]=q.useState(""),[$,I]=q.useState(!1),[M,H]=q.useState(0),[ae,E]=q.useState(0),[P,J]=q.useState("cash"),[V,X]=q.useState(""),{getCurrencySymbol:Z,getTaxRate:ee,config:U}=Ri(),{refreshCustomers:te}=Ku(),ne=(g==null?void 0:g.balance)||0,pe=ne>0;if(q.useEffect(()=>{if($&&pe){const B=Math.min(ne,c);H(B);const oe=c-B;E(oe),oe>0?N("mixed"):N("balance")}else H(0),E(0),N(v)},[$,ne,c,v,pe]),q.useEffect(()=>{if(e){I(!1),H(0),E(0),J("cash"),X(""),R(""),N(v);const B=localStorage.getItem("rechargeData");if(B)try{const oe=JSON.parse(B);oe.customer&&oe.amount&&I(!1)}catch(oe){console.error("Error parsing recharge data:",oe)}}},[e,v]),!e)return null;const C=Z(),D=parseFloat(A)-c,W=c<0||r.some(B=>B.productName.includes("(-)")),Q=r.some(B=>B.productId==="diff"),ie=parseFloat(V)-ae,de=()=>{try{console.log("Iniciando generación de PDF...");const B=p||r,oe=j!==void 0?j:o,ye=w!==void 0?w:l,Pe=S!==void 0?S:c;console.log("Datos del ticket:",{itemsToShow:B,subtotalToShow:oe,taxToShow:ye,totalToShow:Pe,tableNumber:a,paymentMethod:y});const Ie=localStorage.getItem("rechargeData");let Ve="ticket";Ie?Ve="recharge":$&&M>0&&(Ve="balance_payment");const xe={restaurantName:U.restaurantName||"Restaurante",tableNumber:a,customerName:i,mergedTableNumber:d,orderItems:B,subtotal:oe,tax:ye,total:Pe,paymentMethod:y==="balance"?"card":y==="mixed"?P:y,cashReceived:y==="cash"||y==="mixed"&&P==="cash"?$?V:A:void 0,currencySymbol:C,selectedCustomer:g,useBalance:$,balanceAmount:M,remainingAmount:ae,remainingPaymentMethod:P,documentType:Ve};console.log("Generando PDF con datos:",xe);const G=rx(xe);console.log("PDF generado, abriendo ventana...");const Xe=`ticket-mesa-${a}-${new Date().toISOString().slice(0,10)}`;z8(G,Xe),console.log("PDF abierto exitosamente")}catch(B){console.error("Error generando ticket PDF:",B),alert(`Error al generar el ticket PDF: ${B instanceof Error?B.message:"Error desconocido"}`)}},re=async()=>{const B=localStorage.getItem("rechargeData");if(B)try{const oe=JSON.parse(B);if(oe.customer&&oe.amount){const ye=oe.customer.balance+oe.amount+oe.bonus;await xt.customers.update(oe.customer.id,{balance:ye,updatedAt:new Date}),await te(),localStorage.removeItem("rechargeData"),console.log(`Recarga completada para ${oe.customer.name}: ${oe.customer.balance} -> ${ye}`)}}catch(oe){console.error("Error procesando recarga:",oe)}else if($&&g&&M>0)try{const oe=ne-M;await xt.customers.update(g.id,{balance:oe,updatedAt:new Date}),console.log(`Saldo actualizado para ${g.name}: ${ne} -> ${oe}`),await te(),console.log("Contexto de clientes refrescado")}catch(oe){console.error("Error actualizando saldo del cliente:",oe)}if(de(),$&&ae>0)try{const oe={orderItems:r,tableNumber:a,customerName:i,subtotal:o,tax:l,total:ae,paymentMethod:P,cashReceived:V||ae.toString(),mergedTableNumber:d,selectedCustomer:g,useBalance:!1,balanceAmount:0,remainingAmount:0,remainingPaymentMethod:P,restaurantName:U.restaurantName,currencySymbol:Z(),documentType:"ticket"};await rx(oe),console.log("Ticket separado generado para el resto pagado con efectivo/tarjeta")}catch(oe){console.error("Error generando ticket separado:",oe)}if(!h)try{await xt.orders.add({tableId:a?parseInt(a):void 0,customerName:i||void 0,status:"paid",items:r.map(oe=>({productId:0,productName:oe.productName,quantity:oe.quantity,unitPrice:oe.unitPrice,totalPrice:oe.totalPrice,status:"delivered"})),subtotal:o,tax:l,discount:0,total:c,createdAt:new Date,updatedAt:new Date,closedAt:new Date})}catch(oe){console.error("Error guardando ticket en DB:",oe)}n(),t()};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:"inline-block w-full max-w-2xl my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[s.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${W?"border-red-200 bg-red-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ho,{className:`w-6 h-6 ${W?"text-red-600":"text-primary-600"}`}),s.jsx("h2",{className:`text-xl font-semibold ${W?"text-red-700":"text-gray-900"}`,children:W?"⚠️ DEVOLUCIÓN":Q?"Cobro de Diferencia":m||`Cobro - Mesa ${a}`})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Resumen del Pedido"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-48 overflow-y-auto",children:r.map((B,oe)=>{const ye=B.productName.includes("(-)");return s.jsxs("div",{className:"flex justify-between items-center py-1",children:[s.jsxs("span",{className:`text-sm ${ye?"text-red-700 font-medium":""}`,children:[B.quantity,"x ",B.productName]}),s.jsxs("span",{className:`text-sm font-medium ${ye?"text-red-700":""}`,children:[ye?"-":"",C,Math.abs(B.totalPrice).toFixed(2)]})]},oe)})})]}),pe&&s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Cliente con Saldo"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[C,ne.toFixed(2)]}),s.jsx("div",{className:"text-sm text-blue-600",children:"Saldo disponible"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",id:"useBalance",checked:$,onChange:B=>I(B.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"useBalance",className:"text-sm font-medium text-blue-800",children:"Usar saldo del cliente"})]}),$&&s.jsx("div",{className:"bg-white rounded-lg p-3 border border-blue-200",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total a pagar:"}),s.jsxs("span",{className:"font-medium",children:[C,c.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Saldo a usar:"}),s.jsxs("span",{className:"font-medium text-blue-600",children:[C,M.toFixed(2)]})]}),ae>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Restante a pagar:"}),s.jsxs("span",{className:"font-medium text-orange-600",children:[C,ae.toFixed(2)]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Método para el resto:"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>J("cash"),className:`flex-1 py-2 px-3 rounded text-sm font-medium transition-colors ${P==="cash"?"bg-green-100 text-green-800 border border-green-300":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,children:"Efectivo"}),s.jsx("button",{onClick:()=>J("card"),className:`flex-1 py-2 px-3 rounded text-sm font-medium transition-colors ${P==="card"?"bg-blue-100 text-blue-800 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,children:"Tarjeta"})]})]})]})]})})]})]})}),s.jsx("div",{className:`rounded-lg p-4 mb-6 ${W?"bg-red-50 border-2 border-red-200":"bg-gray-50"}`,children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal (sin IVA):"}),s.jsxs("span",{className:W?"text-red-700":"",children:[W&&o<0?"-":"",C,vs(Math.abs(o))]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"IVA (21%):"}),s.jsxs("span",{className:W?"text-red-700":"",children:[W&&l<0?"-":"",C,vs(Math.abs(l))]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-semibold border-t pt-2",children:[s.jsx("span",{children:"TOTAL (IVA incl.):"}),s.jsxs("span",{className:`${W?"text-red-700 font-bold":"text-primary-600"}`,children:[W&&c<0?"-":"",C,vs(Math.abs(c))]})]}),$&&pe&&s.jsxs("div",{className:"border-t pt-2 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-blue-600",children:"Pagado con saldo:"}),s.jsxs("span",{className:"text-blue-600 font-medium",children:["-",C,M.toFixed(2)]})]}),ae>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-orange-600",children:["Restante (",P==="cash"?"Efectivo":"Tarjeta","):"]}),s.jsxs("span",{className:"text-orange-600 font-medium",children:[C,ae.toFixed(2)]})]})]}),W&&s.jsx("div",{className:"mt-3 p-3 bg-red-100 border border-red-300 rounded-lg",children:s.jsxs("p",{className:"text-red-800 text-sm font-medium",children:["🔴 ATENCIÓN: Debe devolver ",C,vs(Math.abs(c))," al cliente"]})})]})}),(!$||ae>0)&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:$?"Método para el Resto":"Método de Pago"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("button",{onClick:()=>$?J("cash"):N("cash"),className:`flex-1 flex items-center justify-center space-x-2 p-3 rounded-lg border-2 transition-colors ${($?P:y)==="cash"?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"}`,children:[s.jsx(fa,{className:"w-5 h-5"}),s.jsx("span",{children:"Efectivo"})]}),s.jsxs("button",{onClick:()=>$?J("card"):N("card"),className:`flex-1 flex items-center justify-center space-x-2 p-3 rounded-lg border-2 transition-colors ${($?P:y)==="card"?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:border-gray-400"}`,children:[s.jsx(Uu,{className:"w-5 h-5"}),s.jsx("span",{children:"Tarjeta"})]})]})]}),(!$&&y==="cash"||$&&P==="cash"&&ae>0)&&s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:$?"Cantidad Recibida (Resto)":"Cantidad Recibida"}),s.jsx("input",{type:"number",value:$?V:A,onChange:B=>$?X(B.target.value):R(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.00",step:"0.01",min:$?ae:c}),parseFloat($?V:A)>0&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Cambio: "}),s.jsxs("span",{className:`font-semibold ${($?ie:D)>=0?"text-green-600":"text-red-600"}`,children:[C,($?ie:D).toFixed(2)]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:de,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg flex items-center justify-center space-x-2 transition-colors",children:[s.jsx($5,{className:"w-4 h-4"}),s.jsx("span",{children:"Previsualizar Ticket PDF"})]}),s.jsxs("button",{onClick:re,disabled:!$&&y==="cash"&&(parseFloat(A)<c||!A)||$&&ae>0&&P==="cash"&&(parseFloat(V)<ae||!V),className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white py-4 px-6 rounded-lg flex items-center justify-center space-x-2 font-semibold text-lg transition-colors disabled:cursor-not-allowed",children:[s.jsx(Ej,{className:"w-5 h-5"}),s.jsx("span",{children:$&&ae===0?"Completar Cobro con Saldo e Imprimir PDF":"Completar Cobro e Imprimir PDF"})]})]})]})]})]})})},U8=({isOpen:e,onClose:t})=>{const[n,r]=q.useState([]),{tables:a,mergeTables:i,getTableOrderItems:o}=Qf(),l=a.filter(h=>(h.status==="available"||h.status==="occupied")&&!h.mergedWith),c=()=>{if(n.length<2){ke.error("Debes seleccionar al menos dos mesas para unir");return}if(new Set(n.map(S=>S.id)).size!==n.length){ke.error("No puedes seleccionar la misma mesa más de una vez");return}const v=n[0],p=n.slice(1),j=n.reduce((S,g)=>S+o(g.id).length,0),w=n.map(S=>S.number).join(", ");p.map(S=>S.number).join(", "),window.confirm(`¿Estás seguro de que quieres unir las mesas ${w}?

Se combinarán ${j} productos en total.
La mesa ${v.number} será la mesa principal.`)&&(p.forEach(S=>{i(v.id,S.id)}),ke.success(`Mesas ${w} unidas exitosamente`),t(),r([]))},d=()=>{r([])},m=h=>{r(v=>v.some(j=>j.id===h.id)?v.filter(j=>j.id!==h.id):[...v,h])};return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:"inline-block w-full max-w-2xl my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(df,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Unir Mesas"})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6",children:l.length<2?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Su,{className:"w-12 h-12 mx-auto mb-4 text-yellow-500"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay suficientes mesas para unir"}),s.jsx("p",{className:"text-gray-600",children:"Necesitas al menos 2 mesas disponibles u ocupadas (que no estén ya unidas) para poder unirlas."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Selecciona las mesas que quieres unir. La primera mesa seleccionada será la principal. Puedes unir mesas disponibles u ocupadas."}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(Su,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Importante:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Los pedidos se combinarán en la mesa principal"}),s.jsx("li",{children:"La primera mesa seleccionada será la principal"}),s.jsx("li",{children:"Puedes unir múltiples mesas a la vez"}),s.jsx("li",{children:"Las mesas mostrarán indicadores visuales de unión"})]})]})]})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:["Mesas Seleccionadas (",n.length,")"]}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.map(h=>{const v=n.some(j=>j.id===h.id),p=n.length>0&&n[0].id===h.id;return s.jsx("div",{onClick:()=>m(h),className:`p-4 border rounded-lg cursor-pointer transition-all ${v?p?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-green-500 bg-green-50 ring-2 ring-green-200":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:["Mesa ",h.number]}),h.name&&s.jsx("div",{className:"text-sm text-gray-600",children:h.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[o(h.id).length," productos"]})]}),v&&s.jsx("div",{className:"text-sm font-medium",children:p?"⭐ Principal":"🔗 Unir"})]}),s.jsx("div",{className:`w-4 h-4 rounded-full ${h.status==="available"?"bg-green-500":"bg-red-500"}`})]})},h.id)})})]}),n.length>=2&&s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Resumen de la Unión"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Mesa Principal:"})," Mesa ",n[0].number,"(",o(n[0].id).length," productos)"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Mesas a Unir:"})," ",n.slice(1).map(h=>`Mesa ${h.number} (${o(h.id).length} productos)`).join(", ")]}),s.jsxs("p",{className:"mt-2",children:[s.jsx("strong",{children:"Total después de unir:"})," ",n.reduce((h,v)=>h+o(v.id).length,0)," productos"]})]})]})]})}),l.length>=2&&s.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex space-x-3",children:[s.jsx("button",{onClick:d,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Limpiar Selección"}),s.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsxs("button",{onClick:c,disabled:n.length<2,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Unir ",n.length," Mesa",n.length!==1?"s":""]})]})]})]})}):null},Cg=({value:e,onConfirm:t,onCancel:n,currencySymbol:r="$"})=>{const[a,i]=q.useState(e.toString()),o=h=>{if(a==="0"&&h!==".")i(h);else{if(h==="."&&a.includes("."))return;if(a.length>=10)return;i(a+h)}},l=()=>{a.length===1?i("0"):i(a.slice(0,-1))},c=()=>{i("0")},d=()=>{const h=parseFloat(a)||0;t(h)},m=()=>{n()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-white font-semibold text-lg",children:"Editar Precio (IVA incl.)"}),s.jsx("button",{onClick:m,className:"text-white hover:text-gray-200 p-2 rounded-lg hover:bg-white/20 transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"p-6 bg-gray-50",children:s.jsx("div",{className:"bg-white rounded-xl p-4 border-2 border-gray-200",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Precio por unidad (IVA incluido)"}),s.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[r,a]})]})})}),s.jsxs("div",{className:"p-4 bg-gray-100",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsx("button",{onClick:()=>o("7"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"7"}),s.jsx("button",{onClick:()=>o("8"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"8"}),s.jsx("button",{onClick:()=>o("9"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"9"}),s.jsx("button",{onClick:()=>o("4"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"4"}),s.jsx("button",{onClick:()=>o("5"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"5"}),s.jsx("button",{onClick:()=>o("6"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"6"}),s.jsx("button",{onClick:()=>o("1"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"1"}),s.jsx("button",{onClick:()=>o("2"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"2"}),s.jsx("button",{onClick:()=>o("3"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"3"}),s.jsx("button",{onClick:()=>o("0"),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"0"}),s.jsx("button",{onClick:()=>o("."),className:"bg-white hover:bg-gray-50 text-gray-800 font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"."}),s.jsx("button",{onClick:l,className:"bg-red-500 hover:bg-red-600 text-white font-semibold text-xl py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"←"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[s.jsxs("button",{onClick:c,className:"bg-gray-500 hover:bg-gray-600 text-white font-semibold py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95 flex items-center justify-center space-x-2",children:[s.jsx(Dj,{className:"w-5 h-5"}),s.jsx("span",{children:"Limpiar"})]}),s.jsx("button",{onClick:d,className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 active:scale-95",children:"Confirmar"})]})]})]})})},W8=({isOpen:e,onClose:t,productName:n,tariffs:r,onSelectTariff:a,currencySymbol:i="€"})=>{if(!e)return null;const o=l=>{a(l),t()};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Seleccionar Tarifa"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-2 rounded-lg hover:bg-white/20 transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-blue-100 text-sm mt-1",children:n})]}),s.jsxs("div",{className:"px-6 py-6",children:[s.jsx("div",{className:"space-y-3",children:r.map(l=>s.jsx("button",{onClick:()=>o(l),className:"w-full p-4 border-2 border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 text-left group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:l.name}),l.isDefault&&s.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full",children:"Predeterminada"})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[n," - ",l.name]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:[i,l.price.toFixed(2)]}),s.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 rounded-full group-hover:border-blue-500 transition-colors flex items-center justify-center",children:s.jsx(Gf,{className:"w-4 h-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})]})},l.id))}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:s.jsx("button",{onClick:t,className:"w-full px-4 py-2 text-gray-600 hover:text-gray-800 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"})})]})]})]})})},H8=({isOpen:e,onClose:t,baseProduct:n,combinations:r,availableProducts:a,onConfirmCombination:i,currencySymbol:o="€"})=>{const[l,c]=q.useState([]);if(!e)return null;const d=a.filter(S=>r.some(g=>!!(g.productId&&g.productId===S.id&&g.isActive||g.categoryId&&g.categoryId===S.categoryId&&g.isActive))),m=S=>{const g=r.find(N=>N.productId===S.id);if(g)return g.additionalPrice;const y=r.find(N=>N.categoryId===S.categoryId);return(y==null?void 0:y.additionalPrice)||0},h=S=>{const g=l.find(y=>y.product.id===S.id);c(g?l.map(y=>y.product.id===S.id?{...y,quantity:y.quantity+1}:y):[...l,{product:S,quantity:1}])},v=S=>{const g=l.find(y=>y.product.id===S);g&&g.quantity>1?c(l.map(y=>y.product.id===S?{...y,quantity:y.quantity-1}:y)):c(l.filter(y=>y.product.id!==S))},p=()=>{const S=n.price,g=l.reduce((y,N)=>y+m(N.product)*N.quantity,0);return S+g},j=()=>{i(n,l),c([]),t()},w=()=>{c([]),t()};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:w}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Combinar Producto"}),s.jsx("button",{onClick:w,className:"text-white hover:text-gray-200 p-2 rounded-lg hover:bg-white/20 transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:[n.name," - Selecciona productos para combinar"]})]}),s.jsxs("div",{className:"px-6 py-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Productos Disponibles"}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:d.map(S=>{const g=m(S);return s.jsx("button",{onClick:()=>h(S),className:"w-full p-3 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 text-left group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:S.name}),s.jsxs("span",{className:`text-xs px-2 py-1 rounded ${g>0?"bg-green-100 text-green-600":g<0?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:[g>0?"+":"",o,g.toFixed(2)]})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:S.description||"Sin descripción"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[o,S.price.toFixed(2)]}),s.jsx(_n,{className:"w-4 h-4 text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})},S.id)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Productos Seleccionados"}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:l.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("p",{children:"No hay productos seleccionados"}),s.jsx("p",{className:"text-sm mt-1",children:"Selecciona productos de la lista para combinarlos"})]}):l.map(({product:S,quantity:g})=>{const y=m(S);return s.jsx("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:S.name}),s.jsxs("span",{className:"text-xs bg-green-100 text-green-600 px-2 py-1 rounded",children:["x",g]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[y>0?"+":"",o,y.toFixed(2)," por unidad"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:`text-sm font-medium ${y*g>0?"text-green-600":y*g<0?"text-red-600":"text-gray-600"}`,children:[y*g>0?"+":"",o,(y*g).toFixed(2)]}),s.jsx("button",{onClick:()=>v(S.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:s.jsx(U5,{className:"w-4 h-4"})})]})]})},S.id)})})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Precio base:"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Precio combinaciones:"}),s.jsx("p",{className:"font-medium text-gray-900",children:"Total:"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[o,n.price.toFixed(2)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["+",o,l.reduce((S,g)=>S+m(g.product)*g.quantity,0).toFixed(2)]}),s.jsxs("p",{className:"font-medium text-lg text-gray-900",children:[o,p().toFixed(2)]})]})]})}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{onClick:w,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:j,disabled:l.length===0,className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Confirmar Combinación"})]})]})]})]})})},V8=({isOpen:e,onClose:t,title:n="Seleccionar modificadores",options:r,selected:a,onSave:i,allowCustomText:o=!0})=>{const[l,c]=q.useState(a),[d,m]=q.useState("");if(q.useEffect(()=>{c(a)},[a,e]),!e)return null;const h=j=>{c(w=>w.includes(j)?w.filter(S=>S!==j):[...w,j])},v=()=>{const j=d.trim()?Array.from(new Set([...l,d.trim()])):l;i(j),t()},p=()=>{c([])};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:n}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 p-2 rounded-lg hover:bg-white/20 transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Selecciona las opciones que apliquen. No alteran el precio."})]}),s.jsxs("div",{className:"px-6 py-6",children:[r.length===0?s.jsx("div",{className:"text-center text-gray-500 py-8",children:"No hay modificadores disponibles para este producto."}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:r.map(j=>{const w=l.includes(j);return s.jsxs("button",{onClick:()=>h(j),className:`flex items-center justify-between w-full px-4 py-3 rounded-lg border transition-all duration-200 ${w?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-blue-300 hover:bg-blue-50/50 text-gray-700"}`,children:[s.jsx("span",{className:"text-sm font-medium",children:j}),w&&s.jsx(Gf,{className:"w-4 h-4"})]},j)})}),o&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Añadir nota/modificador específico"}),s.jsx("input",{type:"text",value:d,onChange:j=>m(j.target.value),placeholder:"Escribe algo como: Sin pepinillos, punto de la carne, etc.",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"px-6 pb-6 flex items-center justify-between",children:[s.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Limpiar"}),s.jsxs("div",{className:"space-x-3",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:v,className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Guardar"})]})]})]})]})})},iw=({isOpen:e,onClose:t,onConfirm:n,title:r,message:a,type:i="danger"})=>{if(!e)return null;const l=(()=>{switch(i){case"danger":return{icon:ga,iconColor:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",buttonColor:"bg-red-600 hover:bg-red-700"};case"warning":return{icon:Su,iconColor:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",buttonColor:"bg-yellow-600 hover:bg-yellow-700"};default:return{icon:Su,iconColor:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",buttonColor:"bg-blue-600 hover:bg-blue-700"}}})(),c=l.icon;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[s.jsxs("div",{className:`flex items-center justify-between p-6 ${l.bgColor} ${l.borderColor} border-b rounded-t-xl`,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 ${l.bgColor} rounded-full flex items-center justify-center`,children:s.jsx(c,{className:`w-5 h-5 ${l.iconColor}`})}),s.jsx("div",{children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r})})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6",children:s.jsx("p",{className:"text-gray-700 leading-relaxed",children:a})}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancelar"}),s.jsxs("button",{onClick:n,className:`px-6 py-2 text-white font-medium rounded-lg transition-colors flex items-center space-x-2 ${l.buttonColor}`,children:[s.jsx(ga,{className:"w-4 h-4"}),s.jsx("span",{children:"Confirmar"})]})]})]})})},sw=q.createContext(void 0),K8=({children:e})=>{const[t,n]=q.useState([]),[r,a]=q.useState([]);q.useEffect(()=>{try{const w=localStorage.getItem("kimipos_products"),S=localStorage.getItem("kimipos_categories");if(w){const y=JSON.parse(w).map(N=>({...N,createdAt:new Date(N.createdAt),updatedAt:new Date(N.updatedAt)}));n(y)}else n([{id:"1",name:"Coca Cola",price:25,categoryId:"cat-1",description:"Refresco de cola 350ml",backgroundColor:"#dc2626",tariffs:[{id:"1-1",name:"350ml",price:25,isDefault:!0}],isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"2",name:"Sprite",price:25,categoryId:"cat-1",description:"Refresco de limón 350ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"3",name:"Fanta Naranja",price:25,categoryId:"cat-1",description:"Refresco de naranja 350ml",backgroundColor:"#ea580c",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"4",name:"Pepsi",price:23,categoryId:"cat-1",description:"Refresco de cola 350ml",backgroundColor:"#2563eb",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"5",name:"7UP",price:25,categoryId:"cat-1",description:"Refresco de lima-limón 350ml",backgroundColor:"#65a30d",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"6",name:"Mirinda",price:25,categoryId:"cat-1",description:"Refresco de naranja 350ml",backgroundColor:"#ea580c",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"7",name:"Mountain Dew",price:28,categoryId:"cat-1",description:"Refresco cítrico 350ml",backgroundColor:"#65a30d",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"8",name:"Dr Pepper",price:30,categoryId:"cat-1",description:"Refresco de cereza 350ml",backgroundColor:"#dc2626",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"9",name:"Agua Mineral",price:15,categoryId:"cat-1",description:"Agua mineral 500ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"10",name:"Agua con Gas",price:18,categoryId:"cat-1",description:"Agua carbonatada 500ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"11",name:"Jugo de Naranja",price:35,categoryId:"cat-1",description:"Jugo natural 300ml",backgroundColor:"#ea580c",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"12",name:"Jugo de Manzana",price:35,categoryId:"cat-1",description:"Jugo natural 300ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"13",name:"Limonada",price:30,categoryId:"cat-1",description:"Limonada natural 400ml",backgroundColor:"#ca8a04",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"14",name:"Té Helado",price:25,categoryId:"cat-1",description:"Té helado 350ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"15",name:"Café Americano",price:20,categoryId:"cat-1",description:"Café americano 250ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"16",name:"Café Expresso",price:18,categoryId:"cat-1",description:"Café expresso 30ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"17",name:"Café Capuccino",price:25,categoryId:"cat-1",description:"Café capuccino 200ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"18",name:"Café Latte",price:28,categoryId:"cat-1",description:"Café latte 250ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"19",name:"Chocolate Caliente",price:30,categoryId:"cat-1",description:"Chocolate caliente 250ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"20",name:"Té Verde",price:22,categoryId:"cat-1",description:"Té verde 250ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"21",name:"Corona",price:45,categoryId:"cat-2",description:"Cerveza 355ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"22",name:"Heineken",price:50,categoryId:"cat-2",description:"Cerveza premium 355ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"23",name:"Budweiser",price:40,categoryId:"cat-2",description:"Cerveza 355ml",backgroundColor:"#dc2626",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"24",name:"Miller Lite",price:42,categoryId:"cat-2",description:"Cerveza light 355ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"25",name:"Coors Light",price:43,categoryId:"cat-2",description:"Cerveza light 355ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"26",name:"Stella Artois",price:55,categoryId:"cat-2",description:"Cerveza belga 330ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"27",name:"Dos Equis",price:48,categoryId:"cat-2",description:"Cerveza mexicana 355ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"28",name:"Tecate",price:35,categoryId:"cat-2",description:"Cerveza mexicana 355ml",backgroundColor:"#dc2626",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"29",name:"Modelo Especial",price:45,categoryId:"cat-2",description:"Cerveza mexicana 355ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"30",name:"Pacifico",price:42,categoryId:"cat-2",description:"Cerveza mexicana 355ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"31",name:"Sol",price:38,categoryId:"cat-2",description:"Cerveza mexicana 355ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"32",name:"Victoria",price:40,categoryId:"cat-2",description:"Cerveza mexicana 355ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"33",name:"Indio",price:35,categoryId:"cat-2",description:"Cerveza mexicana 355ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"34",name:"Bohemia",price:45,categoryId:"cat-2",description:"Cerveza mexicana 355ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"35",name:"Negra Modelo",price:48,categoryId:"cat-2",description:"Cerveza oscura 355ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"36",name:"Guinness",price:65,categoryId:"cat-2",description:"Cerveza stout 330ml",backgroundColor:"#18181b",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"37",name:"Blue Moon",price:58,categoryId:"cat-2",description:"Cerveza de trigo 355ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"38",name:"Samuel Adams",price:52,categoryId:"cat-2",description:"Cerveza artesanal 355ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"39",name:"Sierra Nevada",price:55,categoryId:"cat-2",description:"Cerveza IPA 355ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"40",name:"Lagunitas",price:58,categoryId:"cat-2",description:"Cerveza IPA 355ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"41",name:"Jack Daniels",price:120,categoryId:"cat-3",description:"Whisky 50ml",backgroundColor:"#92400e",combinations:[{id:"comb-41-1",productId:"1",additionalPrice:25,isActive:!0},{id:"comb-41-2",productId:"2",additionalPrice:20,isActive:!0},{id:"comb-41-3",categoryId:"cat-1",additionalPrice:-1,isActive:!0}],isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"42",name:"Jim Beam",price:95,categoryId:"cat-3",description:"Whisky bourbon 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"43",name:"Maker's Mark",price:140,categoryId:"cat-3",description:"Whisky bourbon 50ml",backgroundColor:"#dc2626",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"44",name:"Wild Turkey",price:110,categoryId:"cat-3",description:"Whisky bourbon 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"45",name:"Bulleit",price:130,categoryId:"cat-3",description:"Whisky bourbon 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"46",name:"Johnnie Walker Red",price:100,categoryId:"cat-3",description:"Whisky escocés 50ml",backgroundColor:"#dc2626",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"47",name:"Johnnie Walker Black",price:180,categoryId:"cat-3",description:"Whisky escocés 50ml",backgroundColor:"#18181b",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"48",name:"Chivas Regal",price:160,categoryId:"cat-3",description:"Whisky escocés 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"49",name:"Glenfiddich",price:220,categoryId:"cat-3",description:"Whisky single malt 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"50",name:"Macallan",price:350,categoryId:"cat-3",description:"Whisky single malt 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"51",name:"Jameson",price:110,categoryId:"cat-3",description:"Whisky irlandés 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"52",name:"Bushmills",price:105,categoryId:"cat-3",description:"Whisky irlandés 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"53",name:"Crown Royal",price:125,categoryId:"cat-3",description:"Whisky canadiense 50ml",backgroundColor:"#7c3aed",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"54",name:"Canadian Club",price:90,categoryId:"cat-3",description:"Whisky canadiense 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"55",name:"Suntory Toki",price:140,categoryId:"cat-3",description:"Whisky japonés 50ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"56",name:"Nikka",price:160,categoryId:"cat-3",description:"Whisky japonés 50ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"57",name:"Yamazaki",price:280,categoryId:"cat-3",description:"Whisky japonés 50ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"58",name:"Hibiki",price:320,categoryId:"cat-3",description:"Whisky japonés 50ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"59",name:"Evan Williams",price:75,categoryId:"cat-3",description:"Whisky bourbon 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"60",name:"Old Grand-Dad",price:85,categoryId:"cat-3",description:"Whisky bourbon 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"61",name:"Bacardi Blanco",price:85,categoryId:"cat-4",description:"Ron blanco 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"62",name:"Bacardi Dorado",price:90,categoryId:"cat-4",description:"Ron dorado 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"63",name:"Havana Club",price:95,categoryId:"cat-4",description:"Ron cubano 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"64",name:"Captain Morgan",price:88,categoryId:"cat-4",description:"Ron especiado 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"65",name:"Malibu",price:95,categoryId:"cat-4",description:"Ron con coco 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"66",name:"Kraken",price:110,categoryId:"cat-4",description:"Ron especiado 50ml",backgroundColor:"#18181b",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"67",name:"Mount Gay",price:105,categoryId:"cat-4",description:"Ron barbadense 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"68",name:"Appleton Estate",price:115,categoryId:"cat-4",description:"Ron jamaicano 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"69",name:"Goslings",price:100,categoryId:"cat-4",description:"Ron bermudeño 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"70",name:"Zacapa",price:180,categoryId:"cat-4",description:"Ron guatemalteco 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"71",name:"Flor de Caña",price:95,categoryId:"cat-4",description:"Ron nicaragüense 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"72",name:"Brugal",price:85,categoryId:"cat-4",description:"Ron dominicano 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"73",name:"Barceló",price:90,categoryId:"cat-4",description:"Ron dominicano 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"74",name:"Matusalem",price:110,categoryId:"cat-4",description:"Ron dominicano 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"75",name:"Don Q",price:88,categoryId:"cat-4",description:"Ron puertorriqueño 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"76",name:"Ron Abuelo",price:120,categoryId:"cat-4",description:"Ron panameño 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"77",name:"Diplomatico",price:160,categoryId:"cat-4",description:"Ron venezolano 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"78",name:"Santa Teresa",price:140,categoryId:"cat-4",description:"Ron venezolano 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"79",name:"Pampero",price:95,categoryId:"cat-4",description:"Ron venezolano 50ml",backgroundColor:"#92400e",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"80",name:"Cacique",price:85,categoryId:"cat-4",description:"Ron venezolano 50ml",backgroundColor:"#fbbf24",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"81",name:"Bombay Sapphire",price:110,categoryId:"cat-5",description:"Ginebra premium 50ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"82",name:"Tanqueray",price:105,categoryId:"cat-5",description:"Ginebra londinense 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"83",name:"Beefeater",price:95,categoryId:"cat-5",description:"Ginebra londinense 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"84",name:"Gordon's",price:75,categoryId:"cat-5",description:"Ginebra 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"85",name:"Hendrick's",price:140,categoryId:"cat-5",description:"Ginebra premium 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"86",name:"Plymouth",price:125,categoryId:"cat-5",description:"Ginebra inglesa 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"87",name:"Sipsmith",price:130,categoryId:"cat-5",description:"Ginebra artesanal 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"88",name:"Monkey 47",price:180,categoryId:"cat-5",description:"Ginebra alemana 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"89",name:"Malfy",price:115,categoryId:"cat-5",description:"Ginebra italiana 50ml",backgroundColor:"#0891b2",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"90",name:"Citadelle",price:120,categoryId:"cat-5",description:"Ginebra francesa 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"91",name:"Nolet's",price:200,categoryId:"cat-5",description:"Ginebra holandesa 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"92",name:"Botanist",price:160,categoryId:"cat-5",description:"Ginebra escocesa 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"93",name:"Martin Miller's",price:135,categoryId:"cat-5",description:"Ginebra premium 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"94",name:"Fords",price:110,categoryId:"cat-5",description:"Ginebra londinense 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"95",name:"Broker's",price:100,categoryId:"cat-5",description:"Ginebra londinense 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"96",name:"Hayman's",price:105,categoryId:"cat-5",description:"Ginebra familiar 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"97",name:"Boodles",price:115,categoryId:"cat-5",description:"Ginebra británica 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"98",name:"Plymouth Navy Strength",price:140,categoryId:"cat-5",description:"Ginebra de alta graduación 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"99",name:"Sloe Gin",price:95,categoryId:"cat-5",description:"Ginebra de endrinas 50ml",backgroundColor:"#ec4899",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"100",name:"Old Raj",price:150,categoryId:"cat-5",description:"Ginebra con azafrán 50ml",backgroundColor:"#ca8a04",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"101",name:"Drumshanbo",price:145,categoryId:"cat-5",description:"Ginebra irlandesa 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"102",name:"Bertha's Revenge",price:155,categoryId:"cat-5",description:"Ginebra irlandesa 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"103",name:"Dingle",price:165,categoryId:"cat-5",description:"Ginebra irlandesa 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"104",name:"Gunpowder",price:125,categoryId:"cat-5",description:"Ginebra irlandesa 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"105",name:"Shortcross",price:135,categoryId:"cat-5",description:"Ginebra irlandesa 50ml",backgroundColor:"#16a34a",isActive:!0,createdAt:new Date,updatedAt:new Date}]);if(S){const y=JSON.parse(S).map(N=>({...N,createdAt:new Date(N.createdAt),updatedAt:new Date(N.updatedAt)}));a(y)}else a([{id:"cat-1",name:"Bebidas",color:"#3b82f6",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"cat-2",name:"Cervezas",color:"#f59e0b",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"cat-3",name:"Whisky",color:"#8b5cf6",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"cat-4",name:"Rones",color:"#ef4444",isActive:!0,createdAt:new Date,updatedAt:new Date},{id:"cat-5",name:"Ginebras",color:"#10b981",isActive:!0,createdAt:new Date,updatedAt:new Date}])}catch(w){console.error("Error cargando productos y categorías:",w)}},[]),q.useEffect(()=>{if(t.length>0)try{localStorage.setItem("kimipos_products",JSON.stringify(t))}catch(w){console.error("Error guardando productos:",w)}},[t]),q.useEffect(()=>{if(r.length>0)try{localStorage.setItem("kimipos_categories",JSON.stringify(r))}catch(w){console.error("Error guardando categorías:",w)}},[r]);const j={products:t,categories:r,addProduct:w=>{const S={...w,id:`product-${Date.now()}`,createdAt:new Date,updatedAt:new Date};n(g=>[...g,S])},updateProduct:(w,S)=>{n(g=>g.map(y=>y.id===w?{...y,...S,updatedAt:new Date}:y))},deleteProduct:w=>{n(S=>S.filter(g=>g.id!==w))},getProductById:w=>t.find(S=>S.id===w),getProductsByCategory:w=>t.filter(S=>S.categoryId===w&&S.isActive),addCategory:w=>{const S={...w,id:`cat-${Date.now()}`,isActive:w.isActive??!0,createdAt:new Date,updatedAt:new Date};a(g=>[...g,S])},updateCategory:(w,S)=>{a(g=>g.map(y=>y.id===w?{...y,...S,updatedAt:new Date}:y))},deleteCategory:w=>{if(t.some(g=>g.categoryId===w))throw new Error("No se puede eliminar una categoría que tiene productos asignados");a(g=>g.filter(y=>y.id!==w))},getCategoryById:w=>r.find(S=>S.id===w)};return s.jsx(sw.Provider,{value:j,children:e})},Gu=()=>{const e=q.useContext(sw);if(e===void 0)throw new Error("useProducts must be used within a ProductProvider");return e};function G8(e,t,n){var r,a;typeof e=="function"?(r=t||[],a=n):(r=[],a=t);var i=Ea.useRef({hasResult:!1,result:a,error:null}),o=Ea.useReducer(function(d){return d+1},0);o[0];var l=o[1],c=Ea.useMemo(function(){var d=typeof e=="function"?e():e;if(!d||typeof d.subscribe!="function")throw e===d?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof d.hasValue!="function"||d.hasValue()))if(typeof d.getValue=="function")i.current.result=d.getValue(),i.current.hasResult=!0;else{var m=d.subscribe(function(h){i.current.result=h,i.current.hasResult=!0});typeof m=="function"?m():m.unsubscribe()}return d},r);if(Ea.useDebugValue(i.current.result),Ea.useEffect(function(){var d=c.subscribe(function(m){var h=i.current;(h.error!==null||h.result!==m)&&(h.error=null,h.result=m,h.hasResult=!0,l())},function(m){var h=i.current;h.error!==m&&(h.error=m,l())});return typeof d=="function"?d:d.unsubscribe.bind(d)},r),i.current.error)throw i.current.error;return i.current.result}function ys(e,t,n){return G8(function(){return Tb(e)},t||[],n)}const ow=q.createContext(void 0),lw=()=>{const e=q.useContext(ow);if(e===void 0)throw new Error("useBalanceIncentives must be used within a BalanceIncentiveProvider");return e},Y8=({children:e})=>{const[t,n]=q.useState(!1),r=ys(async()=>{try{return(await xt.balanceIncentives.toArray()).filter(p=>p.isActive===!0)}catch(v){return console.error("Error cargando incentivos activos:",v),[]}},[])||[],a=ys(async()=>{try{return await xt.balanceIncentives.toArray()}catch(v){return console.error("Error cargando todos los incentivos:",v),[]}},[])||[],i=async v=>{try{n(!0);const p=v.totalBalance-v.customerPayment,j={...v,bonusAmount:p,createdAt:new Date,updatedAt:new Date,syncStatus:"pending"};await xt.balanceIncentives.add(j),ke.success("Incentivo agregado exitosamente")}catch(p){console.error("Error agregando incentivo:",p),ke.error("Error al agregar el incentivo")}finally{n(!1)}},o=async(v,p)=>{try{if(n(!0),p.customerPayment!==void 0||p.totalBalance!==void 0){const j=await xt.balanceIncentives.get(v);if(j){const w=p.customerPayment??j.customerPayment,S=p.totalBalance??j.totalBalance;p.bonusAmount=S-w}}await xt.balanceIncentives.update(v,{...p,updatedAt:new Date,syncStatus:"pending"}),ke.success("Incentivo actualizado exitosamente")}catch(j){console.error("Error actualizando incentivo:",j),ke.error("Error al actualizar el incentivo")}finally{n(!1)}},l=async v=>{try{n(!0),await xt.balanceIncentives.delete(v),ke.success("Incentivo eliminado exitosamente")}catch(p){console.error("Error eliminando incentivo:",p),ke.error("Error al eliminar el incentivo")}finally{n(!1)}},c=v=>r.find(p=>p.customerPayment===v)||null,d=()=>{},m=async()=>{try{if(await xt.balanceIncentives.count(),await xt.balanceIncentives.count()===0){const p=[{customerPayment:50,totalBalance:65,bonusAmount:15,isActive:!0,createdAt:new Date,updatedAt:new Date,syncStatus:"pending"},{customerPayment:100,totalBalance:140,bonusAmount:40,isActive:!0,createdAt:new Date,updatedAt:new Date,syncStatus:"pending"},{customerPayment:200,totalBalance:300,bonusAmount:100,isActive:!0,createdAt:new Date,updatedAt:new Date,syncStatus:"pending"}];for(const j of p)await xt.balanceIncentives.add(j);console.log("Incentivos de ejemplo inicializados")}}catch(v){console.error("Error inicializando incentivos de ejemplo:",v)}};q.useEffect(()=>{m()},[]);const h={incentives:r,allIncentives:a,isLoading:t,addIncentive:i,updateIncentive:o,deleteIncentive:l,getIncentiveForPayment:c,refreshIncentives:d};return s.jsx(ow.Provider,{value:h,children:e})},X8=({selectedCustomer:e,onCustomerSelect:t,placeholder:n="Seleccionar cliente..."})=>{const[r,a]=q.useState(!1),[i,o]=q.useState(""),l=q.useRef(null),{customers:c,searchCustomers:d}=Ku(),m=zu(),h=i?d(i):c;q.useEffect(()=>{const w=S=>{l.current&&!l.current.contains(S.target)&&a(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]);const v=w=>{t(w),a(!1),o("")},p=()=>{t(null),a(!1),o("")},j=()=>{a(!1),o(""),m("/customers")};return s.jsxs("div",{className:"relative",ref:l,children:[s.jsxs("div",{onClick:()=>a(!r),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white shadow-sm transition-all duration-200 hover:shadow-md cursor-pointer flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(Nn,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"font-medium text-gray-900 truncate",children:[e.name," ",e.lastName]}),s.jsx("div",{className:"text-xs text-gray-500 truncate",children:e.email||e.phone||e.cardCode})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Nn,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-gray-500",children:n})]})}),s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[e&&s.jsx("button",{onClick:w=>{w.stopPropagation(),p()},className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:s.jsx(In,{className:"w-3 h-3"})}),s.jsx(wj,{className:`w-4 h-4 text-gray-400 transition-transform ${r?"rotate-180":""}`})]})]}),r&&s.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-xl shadow-lg z-50 max-h-80 overflow-hidden",children:[s.jsx("div",{className:"p-3 border-b border-gray-100",children:s.jsxs("div",{className:"relative",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Buscar clientes...",value:i,onChange:w=>o(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",autoFocus:!0})]})}),s.jsx("div",{className:"max-h-60 overflow-y-auto",children:h.length===0?s.jsxs("div",{className:"p-4 text-center text-gray-500",children:[s.jsx(Nn,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-sm",children:i?"No se encontraron clientes":"No hay clientes registrados"})]}):s.jsx("div",{className:"py-1",children:h.map(w=>s.jsx("div",{onClick:()=>v(w),className:"px-4 py-3 hover:bg-blue-50 cursor-pointer transition-colors border-b border-gray-50 last:border-b-0",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(Nn,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[w.name," ",w.lastName]}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-1",children:[w.email&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(cg,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:w.email})]}),w.phone&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ug,{className:"w-3 h-3"}),s.jsx("span",{children:w.phone})]}),w.cardCode&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Uu,{className:"w-3 h-3"}),s.jsx("span",{children:w.cardCode})]})]})]}),w.balance>0&&s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Saldo"}),s.jsxs("div",{className:"text-sm font-semibold text-green-600",children:["€",w.balance.toFixed(2)]})]})]})},w.id))})}),s.jsx("div",{className:"p-3 border-t border-gray-100 bg-gray-50",children:s.jsxs("button",{onClick:j,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center space-x-2 text-sm font-medium",children:[s.jsx(_n,{className:"w-4 h-4"}),s.jsx("span",{children:"Nuevo Cliente"})]})})]})]})},cw=({isOpen:e,onClose:t,customer:n,onSave:r})=>{const[a,i]=q.useState({name:"",lastName:"",email:"",phone:"",address:"",cardCode:"",balance:0,notes:""}),[o,l]=q.useState({});q.useEffect(()=>{i(n||{name:"",lastName:"",email:"",phone:"",address:"",cardCode:"",balance:0,notes:""}),l({})},[n,e]);const c=()=>{const h={};return a.name.trim()||(h.name="El nombre es obligatorio"),a.lastName.trim()||(h.lastName="El apellido es obligatorio"),a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)&&(h.email="Email inválido"),a.phone&&!/^[\+]?[0-9\s\-\(\)]{9,}$/.test(a.phone)&&(h.phone="Teléfono inválido"),l(h),Object.keys(h).length===0},d=h=>{h.preventDefault(),c()&&(r({...a,id:n==null?void 0:n.id}),t())},m=(h,v)=>{i(p=>({...p,[h]:v})),o[h]&&l(p=>({...p,[h]:void 0}))};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Nn,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n?"Editar Cliente":"Nuevo Cliente"}),s.jsx("p",{className:"text-sm text-gray-600",children:n?"Modifica la información del cliente":"Agrega un nuevo cliente al sistema"})]})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información Personal"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",value:a.name,onChange:h=>m("name",h.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.name?"border-red-300":"border-gray-300"}`,placeholder:"Nombre del cliente"})]}),o.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apellido *"}),s.jsx("input",{type:"text",value:a.lastName,onChange:h=>m("lastName",h.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.lastName?"border-red-300":"border-gray-300"}`,placeholder:"Apellido del cliente"}),o.lastName&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.lastName})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información de Contacto"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(cg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"email",value:a.email,onChange:h=>m("email",h.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.email?"border-red-300":"border-gray-300"}`,placeholder:"email@ejemplo.com"})]}),o.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),s.jsxs("div",{className:"relative",children:[s.jsx(ug,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"tel",value:a.phone,onChange:h=>m("phone",h.target.value),className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.phone?"border-red-300":"border-gray-300"}`,placeholder:"+34 600 000 000"})]}),o.phone&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.phone})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección"}),s.jsxs("div",{className:"relative",children:[s.jsx(Es,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",value:a.address,onChange:h=>m("address",h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Dirección completa"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información de Tarjeta y Saldo"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código de Tarjeta"}),s.jsxs("div",{className:"relative",children:[s.jsx(Uu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",value:a.cardCode,onChange:h=>m("cardCode",h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Código de tarjeta o barras"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Para identificación por NFC o código de barras"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Saldo (€)"}),s.jsxs("div",{className:"relative",children:[s.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:a.balance,onChange:h=>m("balance",parseFloat(h.target.value)||0),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Saldo positivo a favor del cliente"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),s.jsxs("div",{className:"relative",children:[s.jsx($5,{className:"absolute left-3 top-3 text-gray-400 w-4 h-4"}),s.jsx("textarea",{value:a.notes,onChange:h=>m("notes",h.target.value),rows:3,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Información adicional sobre el cliente..."})]})]}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(_o,{className:"w-4 h-4"}),s.jsx("span",{children:n?"Guardar Cambios":"Crear Cliente"})]})]})]})]})}):null},J8=({isOpen:e,onClose:t,customer:n,incentives:r,onRecharge:a,onOpenPaymentModal:i})=>{const{getCurrencySymbol:o}=Ri(),l=o(),[c,d]=q.useState(""),m=v=>{i(v.customerPayment,v.bonusAmount),t()},h=()=>{const v=parseFloat(c);v>0&&(i(v,0),t())};return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:"inline-block w-full max-w-md my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(fa,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recargar Saldo"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[n.name," ",n.lastName]})]})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Saldo actual:"}),s.jsxs("span",{className:"text-lg font-bold text-blue-900",children:[l,n.balance.toFixed(2)]})]})}),r.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Yf,{className:"w-5 h-5 text-green-600 mr-2"}),"Incentivos Disponibles"]}),s.jsx("div",{className:"space-y-3",children:r.map(v=>s.jsx("button",{onClick:()=>m(v),className:"w-full p-4 border border-green-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-all duration-200 text-left group",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900",children:["Paga ",l,v.customerPayment.toFixed(2)]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Recibe ",l,v.totalBalance.toFixed(2)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-green-600 font-bold",children:["+",l,v.bonusAmount.toFixed(2)]}),s.jsx("div",{className:"text-xs text-green-600",children:"Regalo"})]})]})},v.id))})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(_n,{className:"w-5 h-5 text-blue-600 mr-2"}),"Recarga Personalizada"]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"number",step:"0.01",min:"0",value:c,onChange:v=>d(v.target.value),placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})}),s.jsx("button",{onClick:h,disabled:!c||parseFloat(c)<=0,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors",children:"Recargar"})]})]})]})]})]})}):null},Q8=({isOpen:e,onClose:t,customer:n,tables:r,onTransfer:a})=>{const[i,o]=q.useState(null);if(!e)return null;const l=r.filter(d=>d.status==="occupied"&&d.id!=="virtual"),c=()=>{if(!i){ke.error("Por favor selecciona una mesa para trasladar");return}a(i,n),t()};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:"inline-block w-full max-w-md my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(df,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Trasladar Cuenta"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[n.name," ",n.lastName]})]})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Nn,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-blue-900",children:"Cliente seleccionado:"}),s.jsxs("p",{className:"text-sm text-blue-700",children:[n.name," ",n.lastName]}),n.balance>0&&s.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Saldo disponible: €",n.balance.toFixed(2)]})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx(Es,{className:"w-5 h-5 text-gray-600 mr-2"}),"Seleccionar Mesa para Trasladar"]}),l.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Es,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No hay mesas ocupadas"}),s.jsx("p",{className:"text-sm",children:"Todas las mesas están libres"})]}):s.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map(d=>s.jsx("button",{onClick:()=>o(d),className:`w-full p-4 border rounded-lg text-left transition-all duration-200 ${(i==null?void 0:i.id)===d.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-gray-900",children:["Mesa ",d.number]}),d.name&&s.jsx("div",{className:"text-sm text-gray-600",children:d.name}),d.temporaryName&&s.jsx("div",{className:"text-sm text-blue-600",children:d.temporaryName})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"})})]})},d.id))})]}),s.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Su,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Importante:"}),s.jsx("p",{className:"text-sm text-yellow-700",children:"Al trasladar la cuenta, la mesa quedará libre y todos los productos se moverán a la cuenta por nombre del cliente."})]})]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:c,disabled:!i,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed text-white rounded-xl font-medium transition-all duration-200",children:"Trasladar Cuenta"})]})]})]})]})})},Z8=()=>{var li,ci;const[e,t]=q.useState(null),[n,r]=q.useState(""),[a,i]=q.useState([]),[o,l]=q.useState(null),[c,d]=q.useState(null),[m,h]=q.useState(!1),[v,p]=q.useState(!1),[j,w]=q.useState(!1),[S,g]=q.useState(!1),[y,N]=q.useState(!1),[A,R]=q.useState(null),[$,I]=q.useState(!1),[M,H]=q.useState(null),[ae,E]=q.useState(!1),[P,J]=q.useState(null),[V,X]=q.useState(null),[Z,ee]=q.useState(null),[U,te]=q.useState(!1),[ne,pe]=q.useState(!1),[C,D]=q.useState(null),[W,Q]=q.useState(!1),[ie,de]=q.useState(null),[re,B]=q.useState(!1),[oe,ye]=q.useState(!1),[Pe,Ie]=q.useState(null),[Ve,xe]=q.useState(null),[G,Xe]=q.useState(null),{addOrderToTable:Ue,getTableOrderItems:Ae,clearTableOrder:De,tables:Me,removeNamedAccount:Fe,addNamedAccount:Ye,updateTableStatus:lt}=Qf(),{getCurrencySymbol:_e,getTaxRate:Ge,getModifiersForCategory:Ze}=Ri(),{products:yt,categories:et}=Gu(),{customers:ht,updateCustomer:Te}=Ku(),{incentives:vn}=lw(),wt=yt.filter(fe=>fe.isActive),it=et.filter(fe=>fe.isActive),bt=wt.filter(fe=>{const Be=!e||fe.categoryId===e,Oe=!n||fe.name.toLowerCase().includes(n.toLowerCase());return Be&&Oe}),kt=(fe,Be)=>{var Je;if(a.find(pt=>pt.productId===fe.id))i(a.map(pt=>pt.productId===fe.id?{...pt,quantity:pt.quantity+1,totalPrice:(pt.quantity+1)*pt.unitPrice}:pt));else{const pt=Be||((Je=fe.tariffs)==null?void 0:Je.find(Mr=>Mr.isDefault))||{price:fe.price},It={productId:fe.id,productName:`${fe.name}${Be?` - ${Be.name}`:""}`,quantity:1,unitPrice:pt.price,totalPrice:pt.price,status:"pending",modifiers:[]};i([...a,It])}};Ea.useEffect(()=>{(async()=>{const Be=localStorage.getItem("orderToEdit");if(!Be){h(!0);return}try{const Oe=await xt.orders.get(Number(Be));if(Oe){const Je=Oe.items.map((pt,It)=>({productId:String(pt.productId??`edit-${It}`),productName:pt.productName||`Producto ${It+1}`,quantity:pt.quantity||1,unitPrice:pt.unitPrice||0,totalPrice:pt.totalPrice||0,status:"pending",modifiers:[]}));i(Je),Ie(Oe.id||null),xe(Oe.total||0),ke.success(`Editando ticket #${Oe.id}`),h(!1)}}catch(Oe){console.error("Error cargando ticket para edición:",Oe),h(!0)}})()},[]);const Dn=()=>{Ie(null),xe(null),Xe(null),i([]),d(null),p(!1),localStorage.removeItem("orderToEdit"),h(!0),ke.success("Dashboard limpiado, selecciona una nueva mesa")},_t=async()=>{if(!Pe)return;const{subtotal:fe,tax:Be,total:Oe}=sr();if(Ve!==null){const Je=parseFloat((Oe-Ve).toFixed(2));if(Math.abs(Je)>.001){Xe({amount:Math.abs(Je),isIncrease:Je>0,newTotal:Oe,newSubtotal:fe,newTax:Be}),w(!0);return}}try{await xt.orders.update(Pe,{items:a.map(Je=>({productId:Je.productId,productName:Je.productName,quantity:Je.quantity,unitPrice:Je.unitPrice,totalPrice:Je.totalPrice,modifiers:Je.modifiers||[]})),subtotal:fe,tax:Be,total:Oe,updatedAt:new Date}),ke.success("Ticket actualizado sin cambios en el total"),Dn()}catch(Je){console.error("Error guardando ticket editado:",Je),ke.error("No se pudo guardar el ticket")}},ii=fe=>{if(!c&&!v){ke.error("Debes seleccionar una mesa antes de agregar productos"),h(!0);return}fe.combinations&&fe.combinations.some(Be=>Be.isActive)?(J(fe),E(!0)):fe.tariffs&&fe.tariffs.length>1?(H(fe),I(!0)):kt(fe)},Gt=fe=>{if(!c&&!v){ke.error("Debes seleccionar una mesa antes de agregar productos"),h(!0);return}if(V&&M&&V.baseProduct.id===M.id){const{baseProduct:Be,combinationNames:Oe,additionalPrice:Je}=V,pt=`${Be.name} con ${Oe} - ${fe.name}`,It=fe.price+Je,Mr={productId:Be.id,productName:pt,quantity:1,unitPrice:It,totalPrice:It,status:"pending",modifiers:[]};i([...a,Mr]),X(null);return}M&&kt(M,fe)},Lr=fe=>{const Be=yt.find(Oe=>Oe.id===fe);return Be?Ze(Be.categoryId):[]},va=fe=>{ee(fe),te(!0)},Yt=(fe,Be)=>{i(a.map(Oe=>Oe.productId===fe?{...Oe,modifiers:Be}:Oe))},ut=(fe,Be)=>{if(!c&&!v){ke.error("Debes seleccionar una mesa antes de agregar productos"),h(!0);return}const Oe=Be.map(or=>`${or.product.name}${or.quantity>1?` (x${or.quantity})`:""}`).join(" + "),Je=Be.reduce((or,xn)=>{const ea=fe.combinations.find(Ba=>Ba.productId===xn.product.id);if(ea)return or+ea.additionalPrice*xn.quantity;const qs=fe.combinations.find(Ba=>Ba.categoryId===xn.product.categoryId);return or+((qs==null?void 0:qs.additionalPrice)||0)*xn.quantity},0);if(fe.tariffs&&fe.tariffs.length>1){X({baseProduct:fe,selectedProducts:Be,combinationNames:Oe,additionalPrice:Je}),H(fe),I(!0);return}const pt=`${fe.name} con ${Oe}`,It=fe.price+Je,Mr={productId:fe.id,productName:pt,quantity:1,unitPrice:It,totalPrice:It,status:"pending"};i([...a,Mr])},Ct=(fe,Be)=>{i(a.map(Oe=>{if(Oe.productId===fe){const Je=Math.max(0,Oe.quantity+Be);return Je===0?null:{...Oe,quantity:Je,totalPrice:Je*Oe.unitPrice}}return Oe}).filter(Boolean))},si=(fe,Be)=>{i(a.map(Oe=>Oe.productId===fe?{...Oe,unitPrice:Be,totalPrice:Oe.quantity*Be}:Oe))},kn=fe=>{A&&si(A,fe),N(!1),R(null)},Xr=()=>{N(!1),R(null)},Jr=fe=>{R(fe),N(!0)},nt=fe=>{const Be=yt.find(Oe=>Oe.id===fe);Be&&i(a.map(Oe=>Oe.productId===fe?{...Oe,unitPrice:Be.price,totalPrice:Oe.quantity*Be.price}:Oe))},Er=fe=>{i(a.filter(Be=>Be.productId!==fe))},Qr=()=>{o&&B(!0)},Hn=()=>{o&&ye(!0)},cn=(fe,Be)=>{console.log("Iniciando traslado de cuenta:",{sourceTable:fe,customer:Be});try{console.log("Verificando cuentas existentes para el cliente:",Be.id),console.log("Todas las mesas:",Me);const Oe=Me.find(xn=>{var ea;return xn.id!==fe.id&&((ea=xn.assignedCustomer)==null?void 0:ea.id)===Be.id});if(Oe){console.log("Cliente ya tiene cuenta abierta:",Oe),ke.error(`${Be.name} ${Be.lastName} ya tiene una cuenta por nombre abierta. No se pueden tener dos cuentas simultáneas.`);return}const Je=Ae(fe.id);if(console.log("Productos encontrados en la mesa:",Je),Je.length===0){ke.error("La mesa seleccionada no tiene productos para trasladar");return}const pt=`${Be.name} ${Be.lastName}`;let It;console.log("Buscando cuenta existente para:",pt);const Mr=Me.find(xn=>xn.name===pt&&xn.id!==fe.id);if(Mr)console.log("Usando cuenta existente:",Mr),It=Mr.id;else{console.log("Creando nueva cuenta por nombre");try{It=Ye(pt),console.log("Nueva cuenta creada con ID:",It)}catch(xn){console.error("Error creando cuenta por nombre:",xn),ke.error("Error al crear la cuenta por nombre");return}}const or=Je.reduce((xn,ea)=>xn+ea.totalPrice,0);console.log("Total a trasladar:",or),console.log("Trasladando a cuenta:",It);try{Ue(It,or,Je,Be),console.log("Productos trasladados exitosamente"),console.log("Limpiando mesa origen:",fe.id),De(fe.id),lt(fe.id,"available"),console.log("Mesa origen liberada"),ke.success(`Cuenta trasladada exitosamente de Mesa ${fe.number} a ${pt}`),ye(!1)}catch(xn){console.error("Error durante el traslado:",xn),ke.error("Error durante el traslado de la cuenta");return}}catch(Oe){console.error("Error trasladando cuenta:",Oe),ke.error("Error al trasladar la cuenta")}},nn=async fe=>{try{await Te(fe.id,fe),l(fe),ke.success(`Saldo de ${fe.name} ${fe.lastName} actualizado a ${_e()}${fe.balance.toFixed(2)}`)}catch{ke.error("Error al actualizar el saldo del cliente")}},ir=async(fe,Be,Oe)=>{try{const Je=fe.balance+Be+Oe,pt={...fe,balance:Je};await Te(fe.id,pt),l(pt);const It=Be+Oe;Oe>0?ke.success(`¡Recarga exitosa! ${fe.name} pagó ${_e()}${Be.toFixed(2)} y recibió ${_e()}${It.toFixed(2)} (${_e()}${Oe.toFixed(2)} de regalo)`):ke.success(`Recarga exitosa! ${fe.name} ahora tiene ${_e()}${Je.toFixed(2)}`)}catch{ke.error("Error al recargar el saldo del cliente")}},zi=(fe,Be)=>{const Oe=[{productId:"recharge",productName:`Recarga de Saldo${Be>0?` + ${_e()}${Be.toFixed(2)} regalo`:""}`,quantity:1,unitPrice:fe,totalPrice:fe,status:"pending"}],Je=fe,pt=0,It=fe;w(!0),localStorage.setItem("rechargeData",JSON.stringify({customer:o,amount:fe,bonus:Be,orderItems:Oe,subtotal:Je,tax:pt,total:It}))},xa=fe=>{const Be=o?{...fe,assignedCustomer:{id:o.id,name:o.name,lastName:o.lastName,email:o.email,phone:o.phone},temporaryName:void 0}:fe;if(d(Be),p(!1),fe.assignedCustomer&&!o){const Oe=ht.find(Je=>Je.id===fe.assignedCustomer.id);Oe&&(l(Oe),ke.success(`Cliente ${Oe.name} ${Oe.lastName} cargado de la mesa ${fe.number}`))}if(o&&ke.success(`Cliente ${o.name} ${o.lastName} asignado a la mesa ${fe.number}`),fe.status==="occupied"){const Oe=Ae(fe.id);Oe.length>0&&(i(Oe),ke.success(`Cargados ${Oe.length} productos de la mesa ${fe.number}`))}else i([]);h(!1)},Ir=()=>{d(null),p(!0),i([]),l(null),h(!1),ke.success("Modo ticket sin mesa activado. Puedes agregar productos y cobrarlos directamente.")},sr=()=>{const fe=BC(a),Be=$C(a),Oe=zC(a);return{subtotal:fe,tax:Be,total:Oe}},Dr=async()=>{if(a.length===0){ke.error("El pedido está vacío");return}if(!c){ke.error("Debes seleccionar una mesa antes de procesar el pedido");return}const{total:fe,subtotal:Be,tax:Oe}=sr(),Je=localStorage.getItem("orderToEdit");if(Je){const pt=await xt.orders.get(Number(Je));pt&&(await xt.orders.update(pt.id,{items:a.map(It=>({productId:0,productName:It.productName,quantity:It.quantity,unitPrice:It.unitPrice,totalPrice:It.totalPrice,status:"delivered"})),subtotal:Be,tax:Oe,total:fe,updatedAt:new Date}),localStorage.removeItem("orderToEdit"))}Ue(c.id,fe,a,o),c.id.startsWith("account-")?ke.success(`Pedido procesado exitosamente para ${c.name}`):ke.success(`Pedido procesado exitosamente para Mesa ${c.number}`),i([]),l(null),d(null),h(!0)},Zr=(fe,Be,Oe,Je="danger")=>{D({title:fe,message:Be,onConfirm:Oe,type:Je}),pe(!0)},xr=()=>{if(!c){ke.error("Debes seleccionar una mesa primero");return}if(c.status!=="occupied"){ke.error("La mesa no tiene pedidos activos");return}const fe=c.id.startsWith("account-"),Be=fe?"Eliminar Cuenta":"Vaciar Ticket Mesa",Oe=fe?`¿Estás seguro de que quieres eliminar la cuenta de "${c.name}"?`:`¿Estás seguro de que quieres vaciar completamente el ticket de la Mesa ${c.number}?`;Zr(Be,Oe,()=>{fe?(Fe(c.id),ke.success(`Cuenta de ${c.name} eliminada exitosamente`),i([]),l(null),d(null),setTimeout(()=>{h(!0)},100)):(De(c.id),d({...c,status:"available",occupiedSince:void 0,currentOrder:void 0}),ke.success(`Mesa ${c.number} vaciada y liberada exitosamente`),i([]),l(null))},"danger")},{subtotal:Tr,tax:Ra,total:oi}=sr();return s.jsxs("div",{className:"h-full flex bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200/50 p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar productos...",value:n,onChange:fe=>r(fe.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm transition-all duration-200 hover:shadow-md"})]}),o&&s.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 px-4 py-2 rounded-xl shadow-sm",children:[s.jsx(Nn,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[o.name," ",o.lastName]})]})]})}),s.jsx("div",{className:"bg-white/70 backdrop-blur-sm border-b border-gray-200/50 p-4 shadow-sm",children:s.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[s.jsx("button",{onClick:()=>t(null),className:`px-6 py-4 rounded-xl font-medium whitespace-nowrap transition-all duration-200 shadow-sm min-h-[56px] flex items-center justify-center text-base ${e===null?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg transform scale-105":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md border border-gray-200"}`,children:"Todas"}),it.map(fe=>s.jsx("button",{onClick:()=>t(fe.id),style:{backgroundColor:e===fe.id?fe.color:void 0,color:e===fe.id?"white":void 0,borderColor:e===fe.id?fe.color:void 0},className:`px-6 py-4 rounded-xl font-medium whitespace-nowrap transition-all duration-200 shadow-sm min-h-[56px] flex items-center justify-center text-base ${e===fe.id?"text-white shadow-lg transform scale-105 border-2":"bg-white text-gray-700 hover:bg-gray-50 hover:shadow-md border border-gray-200 hover:border-gray-300"}`,children:fe.name},fe.id))]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!c&&!v&&s.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-700",children:[s.jsx(Es,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Selecciona una mesa para comenzar a agregar productos"})]})}),v&&s.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl text-center",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700",children:[s.jsx(ho,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Modo ticket sin mesa - Agrega productos para cobrar directamente"})]})}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:bt.map(fe=>s.jsx("div",{onClick:()=>ii(fe),className:"product-card cursor-pointer p-6 rounded-2xl shadow-md border border-gray-200/50 transition-all duration-300 hover:shadow-xl hover:scale-105 backdrop-blur-sm min-h-[120px] flex flex-col justify-center",style:{background:fe.backgroundColor?`linear-gradient(135deg, ${fe.backgroundColor}15, ${fe.backgroundColor}25, ${fe.backgroundColor}15)`:"linear-gradient(135deg, #ffffff, #f8fafc, #ffffff)",borderColor:fe.backgroundColor?`${fe.backgroundColor}40`:"#e5e7eb"},onMouseEnter:Be=>{fe.backgroundColor&&(Be.currentTarget.style.background=`linear-gradient(135deg, ${fe.backgroundColor}25, ${fe.backgroundColor}35, ${fe.backgroundColor}25)`,Be.currentTarget.style.borderColor=`${fe.backgroundColor}60`)},onMouseLeave:Be=>{fe.backgroundColor&&(Be.currentTarget.style.background=`linear-gradient(135deg, ${fe.backgroundColor}15, ${fe.backgroundColor}25, ${fe.backgroundColor}15)`,Be.currentTarget.style.borderColor=`${fe.backgroundColor}40`)},children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-3 line-clamp-2 leading-tight",children:fe.name}),s.jsxs("p",{className:"text-xl font-bold",style:{color:fe.backgroundColor||"#3b82f6"},children:[_e(),fe.price.toFixed(2)]})]})},fe.id))})]})]}),s.jsxs("div",{className:"w-[32rem] bg-white/90 backdrop-blur-sm border-l border-gray-200/50 flex flex-col shadow-xl",children:[s.jsx("div",{className:"p-6 border-b border-gray-200/50 bg-gradient-to-r from-blue-50 to-indigo-50",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(X8,{selectedCustomer:o,onCustomerSelect:l,placeholder:"Seleccionar cliente (opcional)"}),o&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:Qr,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white py-3 px-4 rounded-xl font-medium flex items-center justify-center space-x-2 transition-all duration-200 hover:shadow-lg hover:scale-105 text-sm",children:[s.jsx(fa,{className:"w-4 h-4"}),s.jsx("span",{children:"Recargar Saldo"})]}),s.jsx("button",{onClick:()=>l(null),className:"px-4 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200 text-gray-500 hover:text-red-500 hover:border-red-300 shadow-sm hover:shadow-md min-w-[48px] min-h-[48px] flex items-center justify-center text-lg font-bold",title:"Quitar cliente",children:"✕"})]}),s.jsxs("button",{onClick:Hn,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white py-3 px-4 rounded-xl font-medium flex items-center justify-center space-x-2 transition-all duration-200 hover:shadow-lg hover:scale-105 text-sm",children:[s.jsx(df,{className:"w-4 h-4"}),s.jsx("span",{children:"Trasladar Cuenta a Cliente"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>h(!0),className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm text-left flex items-center justify-between hover:bg-gray-50 transition-all duration-200 hover:shadow-md bg-white shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Es,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:c?"text-gray-900":"text-gray-500",children:c?`Mesa ${c.number}${c.name?` - ${c.name}`:""}`:"Seleccionar mesa"})]}),c&&s.jsx("div",{className:`w-3 h-3 rounded-full ${c.status==="available"?"bg-green-500":c.status==="occupied"?"bg-red-500":c.status==="reserved"?"bg-yellow-500":"bg-blue-500"}`})]}),c&&s.jsx("button",{onClick:()=>{d(null),i([]),l(null),h(!0)},className:"px-4 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200 text-gray-500 hover:text-red-500 hover:border-red-300 shadow-sm hover:shadow-md min-w-[48px] min-h-[48px] flex items-center justify-center text-lg font-bold",title:"Cambiar mesa",children:"✕"})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:a.length===0?s.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[s.jsx(H5,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No hay productos en el pedido"}),s.jsx("p",{className:"text-sm",children:"Selecciona productos para agregar"})]}):s.jsx("div",{className:"space-y-2",children:a.map(fe=>{var Be,Oe;return s.jsxs("div",{className:"bg-gradient-to-r from-white to-gray-50 rounded-lg p-3 border border-gray-200/50 shadow-sm hover:shadow-md transition-all duration-200",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>Er(fe.productId),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-all duration-200 hover:scale-110 flex-shrink-0",children:s.jsx(ga,{className:"w-4 h-4"})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("h4",{className:"font-semibold text-gray-900 text-lg leading-tight",children:fe.productName})}),s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("button",{onClick:()=>Jr(fe.productId),className:`text-base font-semibold hover:underline cursor-pointer flex items-center ${fe.unitPrice!==((Be=yt.find(Je=>Je.id===fe.productId))==null?void 0:Be.price)?"text-blue-600":"text-gray-700"}`,title:"Haz clic para editar el precio (IVA incluido)",children:[_e(),vs(fe.unitPrice)," c/u",s.jsx(fa,{className:"w-4 h-4 ml-1 opacity-50"})]})}),s.jsxs("div",{className:"flex-shrink-0",children:[s.jsx("button",{onClick:()=>va(fe.productId),className:"text-xs text-gray-500 hover:text-blue-600 px-2 py-1 rounded hover:bg-blue-50",title:"Añadir modificadores",children:"Mods"}),fe.unitPrice!==((Oe=yt.find(Je=>Je.id===fe.productId))==null?void 0:Oe.price)&&s.jsx("button",{onClick:()=>nt(fe.productId),className:"text-xs text-gray-400 hover:text-blue-600 p-1 rounded hover:bg-blue-50 ml-1",title:"Restaurar precio original",children:"↺"})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s.jsx("button",{onClick:()=>Ct(fe.productId,-1),className:"p-1 rounded bg-gray-200 hover:bg-blue-500 hover:text-white transition-all duration-200 hover:scale-110 min-w-[24px] min-h-[24px] flex items-center justify-center",children:s.jsx(U5,{className:"w-3 h-3"})}),s.jsx("span",{className:"w-6 text-center font-semibold text-gray-800 text-sm",children:fe.quantity}),s.jsx("button",{onClick:()=>Ct(fe.productId,1),className:"p-1 rounded bg-gray-200 hover:bg-blue-500 hover:text-white transition-all duration-200 hover:scale-110 min-w-[24px] min-h-[24px] flex items-center justify-center",children:s.jsx(_n,{className:"w-3 h-3"})})]})]}),fe.modifiers&&fe.modifiers.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:fe.modifiers.map((Je,pt)=>s.jsx("span",{className:"text-[10px] px-2 py-0.5 bg-gray-100 text-gray-600 rounded",children:Je},pt))})]},fe.productId)})})}),(a.length>0||Pe)&&s.jsxs("div",{className:"border-t border-gray-200/50 p-6 space-y-4 bg-gradient-to-r from-blue-50/50 to-indigo-50/50",children:[a.length>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Subtotal (sin IVA):"}),s.jsxs("span",{children:[_e(),vs(Tr)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"IVA (21%):"}),s.jsxs("span",{children:[_e(),vs(Ra)]})]}),s.jsxs("div",{className:"flex justify-between text-xl font-bold border-t pt-3 border-gray-300",children:[s.jsx("span",{className:"text-gray-800",children:"Total (IVA incl.):"}),s.jsxs("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[_e(),vs(oi)]})]})]}):Pe&&s.jsxs("div",{className:"text-center text-gray-600 py-4",children:[s.jsx("p",{className:"text-sm font-medium",children:"Ticket vacío"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Puedes guardar el ticket sin productos o cancelar la edición"})]}),s.jsxs("div",{className:"space-y-2",children:[Pe?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:_t,className:"w-full bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white py-4 px-6 rounded-xl font-semibold flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[s.jsx(ho,{className:"w-5 h-5"}),s.jsx("span",{children:"Guardar Cambios"})]}),s.jsxs("button",{onClick:Dn,className:"w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white py-3 px-6 rounded-xl font-medium flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[s.jsx(In,{className:"w-4 h-4"}),s.jsx("span",{children:"Cancelar Edición"})]})]}):s.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.jsxs("button",{onClick:Dr,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white py-3 px-4 rounded-xl font-semibold flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 text-sm",children:[s.jsx(ho,{className:"w-4 h-4"}),s.jsx("span",{children:"Procesar"})]})}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-2 rounded-xl font-medium flex items-center justify-center space-x-1 transition-all duration-200 hover:shadow-md text-sm",children:[s.jsx(bj,{className:"w-4 h-4"}),s.jsx("span",{children:"Dividir"})]}),s.jsxs("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-2 rounded-xl font-medium flex items-center justify-center space-x-1 transition-all duration-200 hover:shadow-md text-sm",children:[s.jsx(Uu,{className:"w-4 h-4"}),s.jsx("span",{children:"Tarjeta"})]}),s.jsxs("button",{onClick:()=>g(!0),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 py-3 px-2 rounded-xl font-medium flex items-center justify-center space-x-1 transition-all duration-200 hover:shadow-md text-sm",children:[s.jsx(df,{className:"w-4 h-4"}),s.jsx("span",{children:"Unir"})]})]}),c&&c.status==="occupied"||v?s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>w(!0),className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white py-3 px-4 rounded-xl font-bold flex items-center justify-center space-x-2 shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105 text-base border-2 border-green-400 ring-2 ring-green-200 animate-pulse",children:[s.jsx(fa,{className:"w-5 h-5"}),s.jsx("span",{children:"Cobrar"})]}),c&&s.jsxs("button",{onClick:xr,className:"bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-700 hover:to-rose-700 text-white py-3 px-4 rounded-xl font-semibold flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 text-sm",children:[s.jsx(ga,{className:"w-4 h-4"}),s.jsx("span",{children:"Vaciar"})]})]}):null]})]})]}),s.jsx(MC,{isOpen:m,onClose:()=>h(!1),onSelectTable:xa,selectedTableId:c==null?void 0:c.id,forceOpen:!c&&!v&&!Pe,onTicketWithoutTable:Ir}),s.jsx(q8,{isOpen:j,onClose:()=>w(!1),onPaymentComplete:async()=>{if(G&&Pe)try{await xt.orders.update(Pe,{items:a.map(fe=>({productId:fe.productId,productName:fe.productName,quantity:fe.quantity,unitPrice:fe.unitPrice,totalPrice:fe.totalPrice,modifiers:fe.modifiers||[]})),subtotal:G.newSubtotal||0,tax:G.newTax||0,total:G.newTotal||0,updatedAt:new Date}),xe(G.newTotal||0),ke.success(G.isIncrease?"Diferencia cobrada y ticket actualizado":"Devolución procesada y ticket actualizado"),Dn()}catch(fe){console.error("Error guardando ticket tras cobro:",fe),ke.error("Error al guardar el ticket actualizado")}else c?(De(c.id),i([]),l(null),d(null),h(!0),c.mergedWith?ke.success("Cuenta de mesas unidas cobrada exitosamente. Las mesas han sido liberadas y desunidas. Selecciona una nueva mesa."):c.id.startsWith("account-")?ke.success(`Cuenta de ${c.name} cobrada y cerrada exitosamente. Selecciona una nueva mesa.`):ke.success(`Mesa ${c.number} cobrada y liberada exitosamente. Selecciona una nueva mesa.`)):v&&(i([]),l(null),p(!1),h(!0),ke.success("Ticket sin mesa cobrado exitosamente. Selecciona una nueva mesa."));w(!1),Xe(null)},orderItems:G?[{productId:"diff",productName:G.isIncrease?"Diferencia a cobrar (+)":"Devolución al cliente (-)",quantity:1,unitPrice:G.isIncrease?G.amount:-G.amount,totalPrice:G.isIncrease?G.amount:-G.amount,status:"pending"}]:a,tableNumber:(c==null?void 0:c.number)||"",customerName:o?`${o.name} ${o.lastName}`:"",subtotal:G?G.isIncrease?G.amount:-G.amount:Tr,tax:G?0:Ra,total:G?G.isIncrease?G.amount:-G.amount:oi,mergedTableNumber:c==null?void 0:c.mergedWith,titleOverride:localStorage.getItem("orderToEdit")?G?"Cobro de diferencia":"Actualizar Ticket":void 0,skipDbSave:!!localStorage.getItem("orderToEdit"),defaultPaymentMethod:"cash",originalOrderItems:G?a:void 0,originalSubtotal:G?G.newSubtotal:void 0,originalTax:G?G.newTax:void 0,originalTotal:G?G.newTotal:void 0,selectedCustomer:o}),s.jsx(U8,{isOpen:S,onClose:()=>g(!1)}),y&&A&&s.jsx(Cg,{value:((li=a.find(fe=>fe.productId===A))==null?void 0:li.unitPrice)||0,onConfirm:kn,onCancel:Xr,currencySymbol:_e()}),$&&M&&s.jsx(W8,{isOpen:$,onClose:()=>{I(!1),H(null),X(null)},productName:M.name,tariffs:M.tariffs||[],onSelectTariff:Gt,currencySymbol:_e()}),ae&&P&&s.jsx(H8,{isOpen:ae,onClose:()=>{E(!1),J(null)},baseProduct:P,combinations:P.combinations||[],availableProducts:wt,onConfirmCombination:ut,currencySymbol:_e()}),U&&Z&&s.jsx(V8,{isOpen:U,onClose:()=>{te(!1),ee(null)},title:"Seleccionar modificadores",options:Lr(Z),selected:((ci=a.find(fe=>fe.productId===Z))==null?void 0:ci.modifiers)||[],onSave:fe=>Yt(Z,fe)}),ne&&C&&s.jsx(iw,{isOpen:ne,onClose:()=>pe(!1),onConfirm:C.onConfirm,title:C.title,message:C.message,type:C.type}),W&&ie&&s.jsx(cw,{isOpen:W,onClose:()=>{Q(!1),de(null)},customer:ie,onSave:nn}),re&&o&&s.jsx(J8,{isOpen:re,onClose:()=>B(!1),customer:o,incentives:vn,onRecharge:ir,onOpenPaymentModal:zi}),oe&&o&&s.jsx(Q8,{isOpen:oe,onClose:()=>ye(!1),customer:o,tables:Me,onTransfer:cn})]})},eA=({value:e,onChange:t,label:n="Color de fondo",className:r=""})=>{const[a,i]=q.useState(!1),o=["#dc2626","#ea580c","#d97706","#ca8a04","#65a30d","#16a34a","#0d9488","#0891b2","#0284c7","#2563eb","#4f46e5","#7c3aed","#9333ea","#c026d3","#ec4899","#be123c","#92400e","#78716c","#52525b","#18181b"];return s.jsxs("div",{className:`space-y-3 ${r}`,children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-gray-300 shadow-sm",style:{backgroundColor:e},title:e}),s.jsx("input",{type:"text",value:e,onChange:l=>t(l.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent font-mono text-sm",placeholder:"#3b82f6"}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"Selector de color personalizado",children:s.jsx(Pj,{className:"w-5 h-5"})})]}),a&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"color",value:e,onChange:l=>t(l.target.value),className:"w-full h-12 border border-gray-300 rounded-lg cursor-pointer"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Colores sugeridos:"}),s.jsx("div",{className:"grid grid-cols-10 gap-2",children:o.map(l=>s.jsx("button",{type:"button",onClick:()=>t(l),className:`w-8 h-8 rounded-lg border-2 transition-all hover:scale-110 ${e===l?"border-gray-800 scale-110":"border-gray-300"}`,style:{backgroundColor:l},title:l},l))})]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Este color se mostrará en el botón del producto en el dashboard"})]})},tA=({tariffs:e,onChange:t})=>{const[n,r]=q.useState(null),[a,i]=q.useState({name:"",price:0}),o=()=>{if(e.length>=4){alert("No puedes agregar más de 4 tarifas por producto");return}if(!a.name.trim()||a.price<=0){alert("Por favor completa el nombre y precio de la tarifa");return}const m={id:`tariff-${Date.now()}`,name:a.name.trim(),price:a.price,isDefault:e.length===0};t([...e,m]),i({name:"",price:0})},l=(m,h)=>{const v=e.map(p=>p.id===m?{...p,...h}:p);t(v),r(null)},c=m=>{const h=e.find(v=>v.id===m);if(h!=null&&h.isDefault&&e.length>1){const v=e.filter(p=>p.id!==m).map((p,j)=>({...p,isDefault:j===0}));t(v)}else t(e.filter(v=>v.id!==m))},d=m=>{const h=e.map(v=>({...v,isDefault:v.id===m}));t(h)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Tarifas del Producto"}),s.jsxs("span",{className:"text-xs text-gray-500",children:[e.length,"/4 tarifas"]})]}),s.jsx("div",{className:"space-y-2",children:e.map(m=>s.jsx("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:n===m.id?s.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:m.name,onChange:h=>l(m.id,{name:h.target.value}),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"Nombre de la tarifa"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:m.price,onChange:h=>l(m.id,{price:parseFloat(h.target.value)||0}),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"Precio"}),s.jsx("button",{onClick:()=>r(null),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:s.jsx(Gf,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:`text-sm font-medium ${m.isDefault?"text-blue-600":"text-gray-700"}`,children:[m.name,m.isDefault&&s.jsx("span",{className:"ml-1 text-xs bg-blue-100 text-blue-600 px-1 rounded",children:"Por defecto"})]}),s.jsxs("span",{className:"text-sm text-gray-600",children:["€",m.price.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[!m.isDefault&&s.jsx("button",{onClick:()=>d(m.id),className:"p-1 text-blue-600 hover:bg-blue-50 rounded text-xs",title:"Establecer como predeterminada",children:"⭐"}),s.jsx("button",{onClick:()=>r(m.id),className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Editar tarifa",children:s.jsx(W5,{className:"w-4 h-4"})}),e.length>1&&s.jsx("button",{onClick:()=>c(m.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Eliminar tarifa",children:s.jsx(ga,{className:"w-4 h-4"})})]})]})},m.id))}),e.length<4&&s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(_n,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Agregar Nueva Tarifa"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:a.name,onChange:m=>i({...a,name:m.target.value}),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nombre (ej: Tapa, Ración, Media Ración)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:a.price,onChange:m=>i({...a,price:parseFloat(m.target.value)||0}),className:"w-24 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Precio"}),s.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Agregar"})]})]}),e.length===0&&s.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[s.jsx("p",{children:"No hay tarifas configuradas."}),s.jsx("p",{className:"mt-1",children:"Agrega al menos una tarifa para que el producto sea visible en el dashboard."})]}),e.length>0&&s.jsxs("div",{className:"text-xs text-gray-500 bg-blue-50 p-3 rounded-lg",children:[s.jsx("p",{children:s.jsx("strong",{children:"Información:"})}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:"• La primera tarifa será la predeterminada"}),s.jsx("li",{children:"• Puedes cambiar la tarifa predeterminada haciendo clic en ⭐"}),s.jsx("li",{children:"• En el dashboard, si hay múltiples tarifas, se mostrará un selector"}),s.jsx("li",{children:"• Si solo hay una tarifa, se agregará directamente al pedido"})]})]})]})},nA=({isOpen:e,onClose:t,categoryId:n,categoryName:r,products:a,baseCombinationPrice:i,onSave:o,currencySymbol:l="€"})=>{const[c,d]=q.useState({}),[m,h]=q.useState(!1),[v,p]=q.useState(!1),[j,w]=q.useState(null);q.useEffect(()=>{if(e){const I={};a.forEach(M=>{I[M.id]=i}),d(I),h(!1)}},[e,a,i]);const S=(I,M)=>{d(H=>({...H,[I]:M})),h(!0)},g=I=>{w(I),p(!0)},y=I=>{j&&S(j,I),p(!1),w(null)},N=()=>{p(!1),w(null)},A=()=>{const I={};a.forEach(M=>{I[M.id]=i}),d(I),h(!0)},R=()=>{const I=a.map(M=>({id:`comb-${n}-${M.id}`,productId:M.id,additionalPrice:c[M.id],isActive:!0}));o(I),h(!1),t()},$=()=>{h(!1),t()};return e?s.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:$}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-xl transform transition-all sm:my-4 sm:align-middle sm:max-w-7xl sm:w-full",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Detalle de Productos - ",r]}),s.jsxs("p",{className:"text-purple-100 text-sm mt-1",children:["Precio base de categoría: ",i>0?"+":"",l,i.toFixed(2)]})]}),s.jsx("button",{onClick:$,className:"text-white hover:text-gray-200 p-2 rounded-lg hover:bg-white/20 transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"px-6 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[a.length," productos en ",r]}),s.jsxs("button",{onClick:A,className:"flex items-center space-x-2 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(Ij,{className:"w-4 h-4"}),s.jsx("span",{children:"Restablecer a precio base"})]})]}),m&&s.jsx("span",{className:"text-sm text-orange-600 bg-orange-50 px-3 py-1 rounded-full",children:"Cambios sin guardar"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 max-h-[70vh] overflow-y-auto",children:a.map(I=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:I.name}),s.jsx("p",{className:"text-xs text-gray-500",children:I.description||"Sin descripción"})]}),s.jsx("div",{className:"w-4 h-4 rounded-full ml-2",style:{backgroundColor:I.backgroundColor||"#6b7280"}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Precio base:"}),s.jsxs("span",{children:[l,I.price.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 flex-1",children:"Precio combinación:"}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{type:"button",onClick:()=>g(I.id),className:`w-24 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-right cursor-pointer hover:bg-gray-50 transition-colors ${c[I.id]>0?"border-green-300 bg-green-50 hover:bg-green-100":c[I.id]<0?"border-red-300 bg-red-50 hover:bg-red-100":"border-gray-300 hover:bg-gray-50"}`,children:(c[I.id]||0).toFixed(2)}),s.jsx("span",{className:"absolute right-2 top-2 text-xs text-gray-400 pointer-events-none",children:"€"})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Precio final:"}),s.jsxs("span",{className:`font-medium ${I.price+(c[I.id]||0)>I.price?"text-green-600":I.price+(c[I.id]||0)<I.price?"text-red-600":"text-gray-600"}`,children:[l,(I.price+(c[I.id]||0)).toFixed(2)]})]})]})]},I.id))}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Productos con precio +:"}),s.jsx("div",{className:"font-medium text-green-600",children:a.filter(I=>(c[I.id]||0)>0).length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Productos con descuento:"}),s.jsx("div",{className:"font-medium text-red-600",children:a.filter(I=>(c[I.id]||0)<0).length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Sin cambio:"}),s.jsx("div",{className:"font-medium text-gray-600",children:a.filter(I=>(c[I.id]||0)===0).length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Total productos:"}),s.jsx("div",{className:"font-medium text-gray-900",children:a.length})]})]})}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{onClick:$,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),s.jsxs("button",{onClick:R,disabled:!m,className:"px-6 py-2 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx(_o,{className:"w-4 h-4 inline mr-2"}),"Guardar Cambios"]})]})]})]})]}),v&&j&&s.jsx(Cg,{value:c[j]||i,onConfirm:y,onCancel:N,currencySymbol:l})]}):null},rA=({combinations:e,categories:t,products:n,onChange:r})=>{const[a,i]=q.useState(null),[o,l]=q.useState({productId:"",categoryId:"",additionalPrice:0,combinationType:"product"}),[c,d]=q.useState({isOpen:!1,categoryId:"",categoryName:"",basePrice:0}),m=()=>{if(o.combinationType==="product"&&!o.productId){alert("Por favor selecciona un producto");return}if(o.combinationType==="category"&&!o.categoryId){alert("Por favor selecciona una categoría");return}if(e.some(R=>o.combinationType==="product"&&R.productId===o.productId||o.combinationType==="category"&&R.categoryId===o.categoryId)){alert("Ya existe una combinación con este elemento");return}const A={id:`combination-${Date.now()}`,productId:o.combinationType==="product"?o.productId:void 0,categoryId:o.combinationType==="category"?o.categoryId:void 0,additionalPrice:o.additionalPrice,isActive:!0};r([...e,A]),l({productId:"",categoryId:"",additionalPrice:0,combinationType:"product"})},h=(N,A)=>{const R=e.map($=>$.id===N?{...$,...A}:$);r(R),i(null)},v=N=>{r(e.filter(A=>A.id!==N))},p=N=>{const A=e.map(R=>R.id===N?{...R,isActive:!R.isActive}:R);r(A)},j=N=>{var A;return((A=t.find(R=>R.id===N))==null?void 0:A.name)||"Categoría no encontrada"},w=N=>{var A;return((A=n.find(R=>R.id===N))==null?void 0:A.name)||"Producto no encontrado"},S=(N,A,R)=>{d({isOpen:!0,categoryId:N,categoryName:A,basePrice:R})},g=N=>{const A=e.filter(R=>R.categoryId!==c.categoryId);r([...A,...N])},y=()=>{if(!o.categoryId){alert("Selecciona una categoría");return}const N=n.filter(I=>I.categoryId===o.categoryId);if(N.length===0){alert("La categoría seleccionada no tiene productos");return}const A=N.map(I=>({id:`comb-${o.categoryId}-${I.id}`,productId:I.id,additionalPrice:o.additionalPrice,isActive:!0})),R=new Set(N.map(I=>I.id)),$=e.filter(I=>!(I.productId&&R.has(I.productId))&&I.categoryId!==o.categoryId);r([...$,...A])};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Combinaciones Disponibles"}),s.jsxs("span",{className:"text-xs text-gray-500",children:[e.length," combinaciones"]})]}),s.jsx("div",{className:"space-y-2",children:e.map(N=>s.jsx("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:a===N.id?s.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[s.jsxs("select",{value:N.categoryId,onChange:A=>h(N.id,{categoryId:A.target.value}),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Seleccionar categoría"}),t.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:N.additionalPrice,onChange:A=>h(N.id,{additionalPrice:parseFloat(A.target.value)||0}),className:"w-24 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",placeholder:"Precio +"}),s.jsx("button",{onClick:()=>i(null),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:s.jsx(Gf,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q5,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{className:`text-sm font-medium ${N.isActive?"text-gray-700":"text-gray-400"}`,children:N.productId?w(N.productId):j(N.categoryId)}),N.productId&&s.jsx("span",{className:"text-xs bg-purple-100 text-purple-600 px-1 rounded",children:"Producto"}),N.categoryId&&s.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-1 rounded",children:"Categoría"}),!N.isActive&&s.jsx("span",{className:"text-xs bg-gray-100 text-gray-500 px-1 rounded",children:"Inactiva"})]}),s.jsxs("span",{className:`text-sm font-medium ${N.additionalPrice>0?"text-green-600":N.additionalPrice<0?"text-red-600":"text-gray-600"}`,children:[N.additionalPrice>0?"+":"","€",N.additionalPrice.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>p(N.id),className:`p-1 rounded text-xs ${N.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:N.isActive?"Desactivar":"Activar",children:N.isActive?"✓":"○"}),s.jsx("button",{onClick:()=>i(N.id),className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Editar combinación",children:s.jsx(W5,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>v(N.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Eliminar combinación",children:s.jsx(ga,{className:"w-4 h-4"})})]})]})},N.id))}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(_n,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Agregar Nueva Combinación"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Categoría completa (recomendado)"}),s.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:"Nuevo"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("select",{value:o.categoryId,onChange:N=>l({...o,categoryId:N.target.value}),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Seleccionar categoría"}),t.map(N=>s.jsx("option",{value:N.id,children:N.name},N.id))]}),s.jsx("input",{type:"number",step:"0.01",value:o.additionalPrice,onChange:N=>l({...o,additionalPrice:parseFloat(N.target.value)||0}),className:"w-32 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Precio ±"}),s.jsxs("button",{onClick:()=>{if(o.categoryId&&o.categoryId!==""){const N=t.find(A=>A.id===o.categoryId);N&&S(N.id,N.name,o.additionalPrice)}},disabled:!o.categoryId,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:[s.jsx(Xf,{className:"w-4 h-4 inline mr-1"}),"Detalle"]}),s.jsxs("button",{onClick:y,disabled:!o.categoryId,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors",title:"Guardar directo para toda la categoría",children:[s.jsx(_o,{className:"w-4 h-4 inline mr-1"}),"Guardar"]})]}),s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"💡 Establece un precio base y luego personaliza cada producto individualmente"})]}),s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Producto específico"}),s.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:"Legacy"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("select",{value:o.productId,onChange:N=>l({...o,productId:N.target.value}),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Seleccionar producto específico"}),n.map(N=>s.jsxs("option",{value:N.id,children:[N.name," - ",N.price.toFixed(2),"€"]},N.id))]}),s.jsx("input",{type:"number",step:"0.01",value:o.additionalPrice,onChange:N=>l({...o,additionalPrice:parseFloat(N.target.value)||0}),className:"w-32 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Precio ±"}),s.jsx("button",{onClick:m,disabled:!o.productId,className:"px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Agregar"})]})]})]}),s.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[s.jsx("p",{children:"💡 Puedes usar precios negativos para descuentos (ej: -1.00€)"}),s.jsx("p",{children:"💡 Precio 0.00€ = sin costo adicional"})]})]}),e.length===0&&s.jsxs("div",{className:"text-center py-4 text-gray-500 text-sm",children:[s.jsx("p",{children:"No hay combinaciones configuradas."}),s.jsx("p",{className:"mt-1",children:"Agrega combinaciones para permitir que este producto se combine con otros de categorías específicas."})]}),e.length>0&&s.jsxs("div",{className:"text-xs text-gray-500 bg-blue-50 p-3 rounded-lg",children:[s.jsx("p",{children:s.jsx("strong",{children:"Información sobre combinaciones:"})}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Categoría completa (recomendado):"})," Establece un precio base y personaliza cada producto"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Producto específico:"})," Combinación directa con un producto individual"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Precio positivo (+):"})," Se suma al precio base del producto"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Precio negativo (-):"})," Se resta del precio base (descuento)"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Precio 0.00€:"})," Sin costo adicional"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:'Botón "Detalle":'})," Abre un popup para editar precios individuales"]}),s.jsx("li",{children:"• En el dashboard, aparecerá la opción de combinar cuando sea relevante"}),s.jsx("li",{children:"• Puedes activar/desactivar combinaciones sin eliminarlas"})]})]}),s.jsx(nA,{isOpen:c.isOpen,onClose:()=>d({...c,isOpen:!1}),categoryId:c.categoryId,categoryName:c.categoryName,products:n.filter(N=>N.categoryId===c.categoryId),baseCombinationPrice:c.basePrice,onSave:g,currencySymbol:"€"})]})},aA=()=>{const{products:e,categories:t,addProduct:n,updateProduct:r,deleteProduct:a}=Gu(),{getCurrencySymbol:i}=Ri(),[o,l]=q.useState(""),[c,d]=q.useState(""),[m,h]=q.useState(!1),[v,p]=q.useState(!1),[j,w]=q.useState(null),[S,g]=q.useState({name:"",price:"",categoryId:"",description:"",backgroundColor:"#3b82f6",isActive:!0}),[y,N]=q.useState([]),[A,R]=q.useState([]),$=e.filter(P=>{const J=!o||P.name.toLowerCase().includes(o.toLowerCase()),V=!c||P.categoryId===c,X=m||P.isActive;return J&&V&&X}),I=P=>{var J;P?(w(P),g({name:P.name,price:P.price.toString(),categoryId:P.categoryId,description:P.description||"",backgroundColor:P.backgroundColor||"#3b82f6",isActive:P.isActive}),N(P.tariffs||[]),R(P.combinations||[])):(w(null),g({name:"",price:"",categoryId:((J=t[0])==null?void 0:J.id)||"",description:"",backgroundColor:"#3b82f6",isActive:!0}),N([]),R([])),p(!0)},M=()=>{p(!1),w(null),g({name:"",price:"",categoryId:"",description:"",backgroundColor:"#3b82f6",isActive:!0}),N([]),R([])},H=()=>{if(!S.name.trim()||!S.price||!S.categoryId){ke.error("Completa todos los campos obligatorios");return}const P=parseFloat(S.price);if(P<=0){ke.error("El precio debe ser mayor a 0");return}const J={name:S.name.trim(),price:P,categoryId:S.categoryId,description:S.description.trim(),backgroundColor:S.backgroundColor,tariffs:y,combinations:A,isActive:S.isActive};j?(r(j.id,J),ke.success("Producto actualizado exitosamente")):(n(J),ke.success("Producto creado exitosamente")),M()},ae=P=>{window.confirm(`¿Estás seguro de eliminar "${P.name}"?`)&&(a(P.id),ke.success("Producto eliminado"))},E=P=>{r(P.id,{isActive:!P.isActive}),ke.success(`Producto ${P.isActive?"desactivado":"activado"}`)};return s.jsxs("div",{className:"h-full bg-gray-50",children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Productos"}),s.jsx("p",{className:"text-gray-600",children:"Administra tu catálogo de productos"})]}),s.jsxs("button",{onClick:()=>I(),className:"btn btn-primary flex items-center space-x-2 px-6 py-4 min-h-[48px] text-base font-medium",children:[s.jsx(_n,{className:"w-5 h-5"}),s.jsx("span",{children:"Nuevo Producto"})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsx("div",{className:"flex-1 min-w-64",children:s.jsxs("div",{className:"relative",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar productos...",value:o,onChange:P=>l(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),s.jsxs("select",{value:c,onChange:P=>d(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"Todas las categorías"}),t.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:P=>h(P.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar inactivos"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"overflow-x-auto overflow-y-auto max-h-[600px]",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoría"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio/Tarifas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Combinaciones"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Color"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(P=>{const J=t.find(V=>V.id===P.categoryId);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(_p,{className:"w-8 h-8 text-gray-400 mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name}),P.description&&s.jsx("div",{className:"text-sm text-gray-500",children:P.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:J&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:J.color},children:J.name})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center text-sm font-medium text-gray-900",children:P.tariffs&&P.tariffs.length>0?s.jsx("div",{className:"space-y-1",children:P.tariffs.map((V,X)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`text-xs px-2 py-1 rounded ${V.isDefault?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600"}`,children:V.name}),s.jsxs("span",{className:"font-medium",children:[i(),V.price.toFixed(2)]})]},V.id))}):s.jsxs(s.Fragment,{children:[s.jsx(fa,{className:"w-4 h-4 mr-1"}),i(),P.price.toFixed(2)]})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center text-sm font-medium text-gray-900",children:P.combinations&&P.combinations.length>0?s.jsx("div",{className:"space-y-1",children:P.combinations.filter(V=>V.isActive).map((V,X)=>{const Z=t.find(U=>U.id===V.categoryId),ee=e.find(U=>U.id===V.productId);return s.jsxs("div",{className:"flex items-center space-x-2",children:[V.productId?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded",children:(ee==null?void 0:ee.name)||"Producto"}),s.jsx("span",{className:"text-xs bg-purple-50 text-purple-600 px-1 rounded",children:"Prod"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:(Z==null?void 0:Z.name)||"Categoría"}),s.jsx("span",{className:"text-xs bg-blue-50 text-blue-600 px-1 rounded",children:"Cat"})]}),s.jsxs("span",{className:`text-xs font-medium ${V.additionalPrice>0?"text-green-600":V.additionalPrice<0?"text-red-600":"text-gray-600"}`,children:[V.additionalPrice>0?"+":"","€",V.additionalPrice.toFixed(2)]})]},V.id)})}):s.jsx("span",{className:"text-gray-400 text-xs",children:"Sin combinaciones"})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P.backgroundColor&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:P.backgroundColor},title:P.backgroundColor}),s.jsx("span",{className:"text-xs text-gray-600 font-mono",children:P.backgroundColor})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:P.isActive?"Activo":"Inactivo"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>E(P),className:"p-3 text-gray-400 hover:text-gray-600 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",title:P.isActive?"Desactivar":"Activar",children:P.isActive?s.jsx(jj,{className:"w-5 h-5"}):s.jsx(B5,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>I(P),className:"p-3 text-blue-600 hover:text-blue-800 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-blue-100 transition-colors",title:"Editar",children:s.jsx(Cu,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>ae(P),className:"p-3 text-red-600 hover:text-red-800 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-red-100 transition-colors",title:"Eliminar",children:s.jsx(ga,{className:"w-5 h-5"})})]})})]},P.id)})})]}),$.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(_p,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No se encontraron productos"})]})]})})]}),v&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j?"Editar Producto":"Nuevo Producto"}),s.jsx("button",{onClick:M,className:"p-3 text-gray-400 hover:text-gray-600 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(In,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),s.jsx("input",{type:"text",value:S.name,onChange:P=>g({...S,name:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nombre del producto"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio *"}),s.jsx("input",{type:"number",min:"0",step:"0.01",value:S.price,onChange:P=>g({...S,price:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría *"}),s.jsxs("select",{value:S.categoryId,onChange:P=>g({...S,categoryId:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Seleccionar categoría"}),t.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),s.jsx("textarea",{value:S.description,onChange:P=>g({...S,description:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,placeholder:"Descripción opcional del producto"})]}),s.jsx(eA,{value:S.backgroundColor,onChange:P=>g({...S,backgroundColor:P}),label:"Color de fondo del botón"}),s.jsx(tA,{tariffs:y,onChange:N}),s.jsx(rA,{combinations:A,categories:t,products:e,onChange:R}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:S.isActive,onChange:P=>g({...S,isActive:P.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:"Producto activo"})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:M,className:"px-6 py-4 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors min-h-[48px] flex items-center justify-center text-base font-medium",children:"Cancelar"}),s.jsxs("button",{onClick:H,className:"px-6 py-4 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2 min-h-[48px] text-base font-medium",children:[s.jsx(_o,{className:"w-5 h-5"}),s.jsx("span",{children:"Guardar"})]})]})]})})})]})},iA=()=>{const{categories:e,addCategory:t,updateCategory:n,deleteCategory:r,products:a,updateProduct:i}=Gu(),{getCurrencySymbol:o}=Ri(),[l,c]=q.useState(""),[d,m]=q.useState(!1),[h,v]=q.useState(null),[p,j]=q.useState({name:"",description:"",color:"#3B82F6"}),[w,S]=q.useState(""),[g,y]=q.useState(""),[N,A]=q.useState(0),[R,$]=q.useState(!1),[I,M]=q.useState(null),[H,ae]=q.useState(0),E=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"],P=e.filter(D=>!l||D.name.toLowerCase().includes(l.toLowerCase())),J=D=>{D?(v(D),j({name:D.name,description:D.description||"",color:D.color})):(v(null),j({name:"",description:"",color:E[0]})),m(!0)},V=()=>{m(!1),v(null),j({name:"",description:"",color:"#3B82F6"})},X=()=>{if(!p.name.trim()){ke.error("El nombre es obligatorio");return}const D={name:p.name.trim(),description:p.description.trim(),color:p.color,isActive:!0};h?(n(h.id,D),ke.success("Categoría actualizada exitosamente")):(t(D),ke.success("Categoría creada exitosamente")),V()},Z=D=>{if(window.confirm(`¿Estás seguro de eliminar la categoría "${D.name}"?`))try{r(D.id),ke.success("Categoría eliminada")}catch(W){ke.error(W instanceof Error?W.message:"Error al eliminar la categoría")}},ee=()=>{if(!w||!g){ke.error("Selecciona categoría origen y destino");return}if(w===g){ke.error("El origen y destino no pueden ser iguales");return}const D=a.filter(W=>W.categoryId===w);if(D.length===0){ke.error("La categoría origen no tiene productos");return}D.forEach(W=>{const ie=(W.combinations||[]).filter(re=>re.categoryId!==g),de={id:`comb-catcat-${w}-${g}-${W.id}`,categoryId:g,additionalPrice:N,isActive:!0};i(W.id,{combinations:[...ie,de]})}),ke.success(`Combinaciones aplicadas a ${D.length} productos`)},U=(D,W,Q)=>{a.filter(de=>de.categoryId===D).forEach(de=>{const re=(de.combinations||[]).map(B=>B.categoryId===W?{...B,isActive:Q}:B);i(de.id,{combinations:re})}),ke.success(`${Q?"Activadas":"Desactivadas"} combinaciones hacia la categoría seleccionada`)},te=(D,W)=>{M(D),ae(W),$(!0)},ne=D=>{if(!h||!I){$(!1);return}a.filter(Q=>Q.categoryId===h.id).forEach(Q=>{const ie=(Q.combinations||[]).map(de=>de.categoryId===I?{...de,additionalPrice:D}:de);i(Q.id,{combinations:ie})}),$(!1),M(null),ke.success("Precio actualizado para todas las combinaciones seleccionadas")},pe=()=>{$(!1),M(null)},C=D=>{const W=a.filter(B=>B.categoryId===D);W.length;const Q={},ie={};W.forEach(B=>{(B.combinations||[]).filter(oe=>!!oe.categoryId).forEach(oe=>{const ye=oe.categoryId;Q[ye]||(Q[ye]=[]),Q[ye].push(oe.additionalPrice),ie[ye]=(ie[ye]||0)+(oe.isActive?1:0)})});const de=Object.keys(Q);if(de.length===0)return s.jsx("div",{className:"text-sm text-gray-500",children:"Sin combinaciones por categoría"});const re=o();return s.jsx("div",{className:"space-y-2",children:de.map(B=>{const oe=Q[B],ye=e.find(Ae=>Ae.id===B),Pe=oe.length,Ie=ie[B]||0,Ve=Ie===Pe,xe=oe.every(Ae=>Ae===oe[0]),G=Math.min(...oe),Xe=Math.max(...oe),Ue=xe?oe[0]:G;return s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs px-2 py-1 rounded text-white",style:{backgroundColor:(ye==null?void 0:ye.color)||"#64748b"},children:(ye==null?void 0:ye.name)||"Categoría"}),s.jsxs("span",{className:"text-xs text-gray-500",children:[Ie,"/",Pe," activos"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:xe?`${re}${Ue.toFixed(2)}`:`Varios (${re}${G.toFixed(2)} - ${re}${Xe.toFixed(2)})`}),s.jsxs("button",{onClick:()=>te(B,Ue),className:"text-xs inline-flex items-center px-2 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",title:"Editar precio masivo",children:[s.jsx(fa,{className:"w-3 h-3 mr-1"})," Precio"]}),s.jsxs("button",{onClick:()=>U(D,B,!Ve),className:`text-xs inline-flex items-center px-2 py-1 rounded ${Ve?"bg-red-50 text-red-600 hover:bg-red-100":"bg-green-50 text-green-600 hover:bg-green-100"}`,title:Ve?"Desactivar todas":"Activar todas",children:[s.jsx(Lj,{className:"w-3 h-3 mr-1"})," ",Ve?"Desactivar":"Activar"]})]})]},B)})})};return s.jsxs("div",{className:"h-full bg-gray-50",children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Categorías"}),s.jsx("p",{className:"text-gray-600",children:"Organiza tus productos por categorías"})]}),s.jsxs("button",{onClick:()=>J(),className:"btn btn-primary flex items-center space-x-2 px-6 py-4 min-h-[48px] text-base font-medium",children:[s.jsx(_n,{className:"w-5 h-5"}),s.jsx("span",{children:"Nueva Categoría"})]})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Combinaciones por categorías"}),s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded inline-flex items-center",children:[s.jsx(q5,{className:"w-3 h-3 mr-1"})," Rápido"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("select",{value:w,onChange:D=>S(D.target.value),className:"px-3 py-2 text-sm border border-blue-200 rounded-lg bg-white",children:[s.jsx("option",{value:"",children:"Origen"}),e.map(D=>s.jsx("option",{value:D.id,children:D.name},D.id))]}),s.jsx("span",{className:"text-sm text-blue-700",children:"se combina con"}),s.jsxs("select",{value:g,onChange:D=>y(D.target.value),className:"px-3 py-2 text-sm border border-blue-200 rounded-lg bg-white",children:[s.jsx("option",{value:"",children:"Destino"}),e.map(D=>s.jsx("option",{value:D.id,children:D.name},D.id))]}),s.jsx("input",{type:"number",step:"0.01",value:N,onChange:D=>A(parseFloat(D.target.value)||0),className:"w-28 px-3 py-2 text-sm border border-blue-200 rounded-lg",placeholder:"Precio ±"}),s.jsx("button",{onClick:ee,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700",children:"Aplicar a la categoría"})]}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:'El campo "Precio" sirve para añadir (o restar con valores negativos) el precio a la categoría destino.'}),s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Aplica una combinación por categoría destino a todos los productos de la categoría origen."})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar categorías...",value:l,onChange:D=>c(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:P.map(D=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:D.color}}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.name})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>J(D),className:"p-3 text-gray-400 hover:text-blue-600 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-blue-100 transition-colors",title:"Editar",children:s.jsx(Cu,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>Z(D),className:"p-3 text-gray-400 hover:text-red-600 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-red-100 transition-colors",title:"Eliminar",children:s.jsx(ga,{className:"w-5 h-5"})})]})]}),D.description&&s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:D.description}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(yv,{className:"w-4 h-4 mr-1"}),"Categoría"]}),s.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:D.color},children:D.color})]})]},D.id))}),P.length===0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[s.jsx(yv,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No se encontraron categorías"}),s.jsx("button",{onClick:()=>J(),className:"mt-4 btn btn-primary px-6 py-4 min-h-[48px] text-base font-medium",children:"Crear primera categoría"})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h?"Editar Categoría":"Nueva Categoría"}),s.jsx("button",{onClick:V,className:"p-3 text-gray-400 hover:text-gray-600 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(In,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),s.jsx("input",{type:"text",value:p.name,onChange:D=>j({...p,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nombre de la categoría"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),s.jsx("textarea",{value:p.description,onChange:D=>j({...p,description:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,placeholder:"Descripción opcional de la categoría"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"color",value:p.color,onChange:D=>j({...p,color:D.target.value}),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),s.jsx("input",{type:"text",value:p.color,onChange:D=>j({...p,color:D.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"#3B82F6"})]}),s.jsx("div",{className:"grid grid-cols-5 gap-3",children:E.map(D=>s.jsx("button",{type:"button",onClick:()=>j({...p,color:D}),className:`w-12 h-12 rounded-full border-2 transition-all ${p.color===D?"border-gray-900 scale-110":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:D},title:D},D))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vista previa"}),s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:p.color}}),s.jsx("span",{className:"text-sm font-medium",children:p.name||"Nombre de la categoría"})]})]}),h&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Combinaciones de esta categoría"}),C(h.id)]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:V,className:"px-6 py-4 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors min-h-[48px] flex items-center justify-center text-base font-medium",children:"Cancelar"}),s.jsxs("button",{onClick:X,className:"px-6 py-4 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center space-x-2 min-h-[48px] text-base font-medium",children:[s.jsx(_o,{className:"w-5 h-5"}),s.jsx("span",{children:"Guardar"})]})]})]})})}),R&&I&&h&&s.jsx(Cg,{value:H,onConfirm:ne,onCancel:pe,currencySymbol:o()})]})},sA=()=>{const[e,t]=q.useState(null),[n,r]=q.useState("tables"),[a,i]=q.useState(!1),[o,l]=q.useState(!1),[c,d]=q.useState(!1),[m,h]=q.useState(null),[v,p]=q.useState(null),[j,w]=q.useState(null),[S,g]=q.useState(!1),[y,N]=q.useState({number:"",name:"",capacity:"",x:100,y:100,width:80,height:80}),[A,R]=q.useState({name:"",description:""}),[$,I]=q.useState({name:""}),M=ys(()=>xt.salons.where("isActive").equals(1).toArray()),H=ys(()=>e?xt.posTables.where("salonId").equals(e).toArray():[],[e]),ae=ys(()=>{if(e)return xt.salons.get(e)},[e]),E=ys(()=>e?xt.namedAccounts.where("salonId").equals(e).toArray().then(B=>B.filter(oe=>oe.status==="active")):[],[e]);Ea.useEffect(()=>{M&&M.length>0&&!e&&t(M[0].id)},[M,e]);const P=async B=>{if(B.preventDefault(),!y.number||!y.name||!y.capacity||!e){ke.error("Por favor completa todos los campos obligatorios");return}try{const oe={number:y.number,name:y.name,capacity:parseInt(y.capacity),salonId:e,x:y.x,y:y.y,width:y.width,height:y.height,status:"available"};m?(await xt.posTables.update(m.id,oe),ke.success("Mesa actualizada exitosamente")):(await xt.posTables.add({...oe,createdAt:new Date,updatedAt:new Date,syncStatus:"pending"}),ke.success("Mesa creada exitosamente")),Z()}catch(oe){console.error("Error saving table:",oe),ke.error("Error al guardar la mesa")}},J=()=>{h(null),N({number:"",name:"",capacity:"",x:50+Math.random()*200,y:50+Math.random()*200,width:80,height:80}),i(!0)},V=B=>{h(B),N({number:B.number,name:B.name,capacity:B.capacity.toString(),x:B.x,y:B.y,width:B.width,height:B.height}),i(!0)},X=async B=>{if(B.status==="occupied"){ke.error("No se puede eliminar una mesa que está ocupada");return}if(window.confirm(`¿Estás seguro de que quieres eliminar la mesa "${B.name}"?`))try{await xt.posTables.delete(B.id),ke.success("Mesa eliminada exitosamente")}catch(oe){console.error("Error deleting table:",oe),ke.error("Error al eliminar la mesa")}},Z=()=>{i(!1),h(null),N({number:"",name:"",capacity:"",x:100,y:100,width:80,height:80})},ee=async B=>{if(B.preventDefault(),!A.name){ke.error("El nombre del salón es obligatorio");return}try{const oe={name:A.name,description:A.description||void 0,isActive:!0};if(v)await xt.salons.update(v.id,oe),ke.success("Salón actualizado exitosamente");else{const ye=await xt.salons.add({...oe,createdAt:new Date,updatedAt:new Date,syncStatus:"pending"});t(ye),ke.success("Salón creado exitosamente")}te()}catch(oe){console.error("Error saving salon:",oe),ke.error("Error al guardar el salón")}},U=B=>{p(B),R({name:B.name,description:B.description||""}),l(!0)},te=()=>{l(!1),p(null),R({name:"",description:""})},ne=async B=>{if(B.preventDefault(),!$.name||!e){ke.error("Por favor ingresa un nombre para la cuenta");return}try{await xt.namedAccounts.add({name:$.name,salonId:e,status:"active",totalAmount:0,createdAt:new Date,updatedAt:new Date,syncStatus:"pending"}),ke.success("Cuenta creada exitosamente"),D()}catch(oe){console.error("Error creating account:",oe),ke.error("Error al crear la cuenta")}},pe=async B=>{if(window.confirm(`¿Estás seguro de que quieres cobrar la cuenta de "${B.name}"?`))try{await xt.namedAccounts.update(B.id,{status:"paid",paidAt:new Date,updatedAt:new Date,syncStatus:"pending"}),ke.success(`Cuenta de ${B.name} cobrada exitosamente`)}catch(oe){console.error("Error paying account:",oe),ke.error("Error al cobrar la cuenta")}},C=()=>{I({name:""}),d(!0)},D=()=>{d(!1),I({name:""})},W=B=>{switch(B){case"available":return"border-green-300 bg-green-50 text-green-800";case"occupied":return"border-red-300 bg-red-50 text-red-800";case"reserved":return"border-yellow-300 bg-yellow-50 text-yellow-800";case"maintenance":return"border-gray-400 bg-gray-100 text-gray-600";default:return"border-gray-300 bg-gray-50 text-gray-800"}},Q=B=>{switch(B){case"available":return"Disponible";case"occupied":return"Ocupada";case"reserved":return"Reservada";case"maintenance":return"Mantenimiento";default:return B}},ie=(B,oe)=>{w(oe),g(!0),B.dataTransfer.effectAllowed="move",B.dataTransfer.setData("text/html","")},de=B=>{B.preventDefault(),B.dataTransfer.dropEffect="move"},re=async B=>{if(B.preventDefault(),g(!1),!!j)try{const ye=B.currentTarget.getBoundingClientRect(),Pe=B.clientX-ye.left-40,Ie=B.clientY-ye.top-40,Ve=ye.width-80,xe=ye.height-80,G=Math.max(0,Math.min(Pe,Ve)),Xe=Math.max(0,Math.min(Ie,xe));await xt.posTables.update(j.id,{x:G,y:Xe,updatedAt:new Date,syncStatus:"pending"}),ke.success("Posición de mesa actualizada")}catch(oe){console.error("Error updating table position:",oe),ke.error("Error al actualizar la posición de la mesa")}finally{w(null)}};return s.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Pp,{className:"w-6 h-6 text-primary-600"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Editor de Salones y Mesas"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>l(!0),className:"btn btn-secondary flex items-center space-x-2 px-6 py-4 min-h-[48px] text-base font-medium",children:[s.jsx(_n,{className:"w-5 h-5"}),s.jsx("span",{children:"Nuevo Salón"})]}),n==="tables"?s.jsxs("button",{onClick:J,disabled:!e,className:"btn btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed px-6 py-4 min-h-[48px] text-base font-medium",children:[s.jsx(_n,{className:"w-5 h-5"}),s.jsx("span",{children:"Nueva Mesa"})]}):s.jsxs("button",{onClick:C,disabled:!e,className:"btn btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed px-6 py-4 min-h-[48px] text-base font-medium",style:{backgroundColor:"#9333ea",borderColor:"#9333ea"},children:[s.jsx(_n,{className:"w-5 h-5"}),s.jsx("span",{children:"Nueva Cuenta"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Salón:"}),s.jsxs("select",{value:e||"",onChange:B=>t(B.target.value?Number(B.target.value):null),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Seleccionar salón..."}),M==null?void 0:M.map(B=>s.jsx("option",{value:B.id,children:B.name},B.id))]}),ae&&s.jsx("button",{onClick:()=>U(ae),className:"p-3 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",title:"Editar salón",children:s.jsx(Cu,{className:"w-5 h-5"})})]}),e&&s.jsxs("div",{className:"flex space-x-1 mt-4",children:[s.jsx("button",{onClick:()=>r("tables"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="tables"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Mesas"}),s.jsx("button",{onClick:()=>r("accounts"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n==="accounts"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cuentas por Nombre"})]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:e&&ae?s.jsxs("div",{className:"h-full flex",children:[s.jsx("div",{className:"flex-1 bg-white m-4 rounded-lg border border-gray-200 relative overflow-auto",children:s.jsx("div",{className:"absolute inset-0 p-4",children:n==="tables"?s.jsxs("div",{className:`w-full h-full relative bg-gray-50 rounded border-2 border-dashed border-gray-300 ${S?"bg-blue-50 border-blue-300":""}`,onDragOver:de,onDrop:re,children:[H==null?void 0:H.map(B=>s.jsxs("div",{draggable:!0,onDragStart:oe=>ie(oe,B),className:`absolute rounded-lg border-2 cursor-move transition-all duration-200 flex items-center justify-center text-xs font-medium select-none ${W(B.status)} ${(j==null?void 0:j.id)===B.id?"opacity-50":""} hover:shadow-lg hover:scale-105`,style:{left:B.x,top:B.y,width:B.width||80,height:B.height||80},onDoubleClick:()=>V(B),title:`Mesa ${B.number} - ${B.name} (${Q(B.status)}) - Arrastra para mover, doble clic para editar`,children:[s.jsxs("div",{className:"text-center pointer-events-none",children:[s.jsx("div",{className:"font-semibold",children:B.number}),s.jsx("div",{className:"text-xs opacity-75",children:B.name})]}),s.jsx("div",{className:"absolute -top-2 -right-2",children:s.jsx("button",{onClick:oe=>{oe.stopPropagation(),X(B)},className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center bg-white shadow-sm border border-gray-200",children:s.jsx(ga,{className:"w-4 h-4"})})})]},B.id)),(H==null?void 0:H.length)===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Mj,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium",children:"Sin mesas en este salón"}),s.jsx("p",{className:"text-sm",children:'Haz clic en "Nueva Mesa" para agregar una'})]})}),H&&H.length>0&&s.jsxs("div",{className:"absolute top-2 left-2 bg-blue-100 border border-blue-300 rounded-lg p-3 text-blue-800 text-sm max-w-xs",children:[s.jsx("div",{className:"font-medium mb-1",children:"💡 Cómo usar el editor:"}),s.jsxs("ul",{className:"text-xs space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Arrastra"})," las mesas para moverlas"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Doble clic"})," para editar una mesa"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Clic en ❌"})," para eliminar"]})]})]})]}):s.jsx("div",{className:"w-full h-full relative bg-gray-50 rounded border-2 border-dashed border-gray-300 p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-4",children:[E==null?void 0:E.map(B=>s.jsxs("div",{className:"bg-purple-100 border-2 border-purple-300 rounded-lg p-4 min-w-[120px] text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-200",onClick:()=>pe(B),title:`Clic para cobrar la cuenta de ${B.name}`,children:[s.jsx(Nn,{className:"w-6 h-6 mx-auto mb-2 text-purple-600"}),s.jsx("div",{className:"font-semibold text-purple-800 text-sm",children:B.name}),s.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["$",B.totalAmount.toFixed(2)]})]},B.id)),(E==null?void 0:E.length)===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Nn,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium",children:"Sin cuentas activas"}),s.jsx("p",{className:"text-sm",children:'Haz clic en "Nueva Cuenta" para crear una'})]})})]})})})}),s.jsx("div",{className:"w-80 bg-white border-l border-gray-200 overflow-auto",children:s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:ae.name}),ae.description&&s.jsx("p",{className:"text-gray-600 mb-4",children:ae.description}),n==="tables"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Estadísticas de Mesas"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[s.jsx("div",{className:"font-medium",children:"Total Mesas"}),s.jsx("div",{className:"text-lg font-bold text-primary-600",children:(H==null?void 0:H.length)||0})]}),s.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[s.jsx("div",{className:"font-medium",children:"Disponibles"}),s.jsx("div",{className:"text-lg font-bold text-green-600",children:(H==null?void 0:H.filter(B=>B.status==="available").length)||0})]}),s.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[s.jsx("div",{className:"font-medium",children:"Ocupadas"}),s.jsx("div",{className:"text-lg font-bold text-red-600",children:(H==null?void 0:H.filter(B=>B.status==="occupied").length)||0})]}),s.jsxs("div",{className:"bg-yellow-50 p-2 rounded",children:[s.jsx("div",{className:"font-medium",children:"Reservadas"}),s.jsx("div",{className:"text-lg font-bold text-yellow-600",children:(H==null?void 0:H.filter(B=>B.status==="reserved").length)||0})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Lista de Mesas"}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-auto",children:H==null?void 0:H.map(B=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 cursor-pointer",onClick:()=>V(B),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:["Mesa ",B.number]}),s.jsx("div",{className:"text-sm text-gray-600",children:B.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Capacidad: ",B.capacity," personas"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${W(B.status)}`,children:Q(B.status)}),s.jsx("button",{onClick:oe=>{oe.stopPropagation(),X(B)},className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center",children:s.jsx(ga,{className:"w-4 h-4"})})]})]})},B.id))})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Estadísticas de Cuentas"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[s.jsx("div",{className:"font-medium",children:"Cuentas Activas"}),s.jsx("div",{className:"text-lg font-bold text-purple-600",children:(E==null?void 0:E.length)||0})]}),s.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[s.jsx("div",{className:"font-medium",children:"Total a Cobrar"}),s.jsxs("div",{className:"text-lg font-bold text-green-600",children:["$",(E==null?void 0:E.reduce((B,oe)=>B+oe.totalAmount,0).toFixed(2))||"0.00"]})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Cuentas Activas"}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-auto",children:E==null?void 0:E.map(B=>s.jsx("div",{className:"border border-purple-200 rounded-lg p-3 hover:bg-purple-50 cursor-pointer",onClick:()=>pe(B),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-purple-800",children:B.name}),s.jsxs("div",{className:"text-sm text-purple-600",children:["$",B.totalAmount.toFixed(2)]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Creada: ",new Date(B.createdAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Activa"}),s.jsx("button",{onClick:oe=>{oe.stopPropagation(),pe(B)},className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center",title:"Cobrar cuenta",children:s.jsx(fa,{className:"w-4 h-4"})})]})]})},B.id))})]})]})]})})]}):s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Pp,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Selecciona un salón"}),s.jsx("p",{className:"text-gray-500 mb-4",children:(M==null?void 0:M.length)===0?"No hay salones creados. Crea tu primer salón para comenzar.":"Selecciona un salón de la lista para ver y editar sus mesas."}),(M==null?void 0:M.length)===0&&s.jsx("button",{onClick:()=>l(!0),className:"btn btn-primary px-6 py-4 min-h-[48px] text-base font-medium",children:"Crear Primer Salón"})]})})}),a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:m?"Editar Mesa":"Nueva Mesa"}),s.jsx("button",{onClick:Z,className:"text-gray-400 hover:text-gray-600 p-3 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(_n,{className:"w-6 h-6 transform rotate-45"})})]}),s.jsxs("form",{onSubmit:P,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número *"}),s.jsx("input",{type:"text",required:!0,value:y.number,onChange:B=>N({...y,number:B.target.value}),className:"input",placeholder:"1, 2, A1..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacidad *"}),s.jsx("input",{type:"number",min:"1",required:!0,value:y.capacity,onChange:B=>N({...y,capacity:B.target.value}),className:"input",placeholder:"4"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),s.jsx("input",{type:"text",required:!0,value:y.name,onChange:B=>N({...y,name:B.target.value}),className:"input",placeholder:"Mesa junto a la ventana"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ancho (px)"}),s.jsx("input",{type:"number",min:"40",max:"200",value:y.width,onChange:B=>N({...y,width:parseInt(B.target.value)}),className:"input"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alto (px)"}),s.jsx("input",{type:"number",min:"40",max:"200",value:y.height,onChange:B=>N({...y,height:parseInt(B.target.value)}),className:"input"})]})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:Z,className:"flex-1 btn btn-secondary px-6 py-4 min-h-[48px] text-base font-medium",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 btn btn-primary px-6 py-4 min-h-[48px] text-base font-medium",children:m?"Actualizar":"Crear"})]})]})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:v?"Editar Salón":"Nuevo Salón"}),s.jsx("button",{onClick:te,className:"text-gray-400 hover:text-gray-600 p-3 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(_n,{className:"w-6 h-6 transform rotate-45"})})]}),s.jsxs("form",{onSubmit:ee,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),s.jsx("input",{type:"text",required:!0,value:A.name,onChange:B=>R({...A,name:B.target.value}),className:"input",placeholder:"Salón principal, Terraza..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),s.jsx("textarea",{rows:3,value:A.description,onChange:B=>R({...A,description:B.target.value}),className:"input resize-none",placeholder:"Descripción del salón (opcional)"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:te,className:"flex-1 btn btn-secondary px-6 py-4 min-h-[48px] text-base font-medium",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 btn btn-primary px-6 py-4 min-h-[48px] text-base font-medium",children:v?"Actualizar":"Crear"})]})]})]})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Nueva Cuenta por Nombre"}),s.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600 p-3 min-w-[44px] min-h-[44px] flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(_n,{className:"w-6 h-6 transform rotate-45"})})]}),s.jsxs("form",{onSubmit:ne,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Cliente *"}),s.jsx("input",{type:"text",required:!0,value:$.name,onChange:B=>I({...$,name:B.target.value}),className:"input",placeholder:"Juan Pérez, María García...",autoFocus:!0})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:D,className:"flex-1 btn btn-secondary px-6 py-4 min-h-[48px] text-base font-medium",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 btn btn-primary px-6 py-4 min-h-[48px] text-base font-medium",style:{backgroundColor:"#9333ea",borderColor:"#9333ea"},children:"Crear Cuenta"})]})]})]})})]})},oA=()=>{const[e,t]=q.useState(""),n=new Date,r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`,[a,i]=q.useState("paid"),[o,l]=q.useState(r),[c,d]=q.useState(null),m=zu(),h=ys(async()=>{try{let g=xt.orders.toCollection();if(a&&(g=g.filter(y=>y.status===a)),o){const y=new Date(o),N=new Date(y.getTime()+24*60*60*1e3);g=g.filter(A=>A.createdAt>=y&&A.createdAt<N)}if(e){const y=e.toLowerCase();g=g.filter(N=>{var A,R;return((A=N.customerName)==null?void 0:A.toLowerCase().includes(y))||((R=N.waiterName)==null?void 0:R.toLowerCase().includes(y))||String(N.id??"").includes(e)})}return await g.reverse().sortBy("createdAt")}catch(g){return console.error("Error cargando pedidos:",g),[]}},[a,o,e])||[],v=ys(()=>xt.posTables.toArray())||[],p=g=>{switch(g){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"preparing":return"bg-purple-100 text-purple-800";case"ready":return"bg-orange-100 text-orange-800";case"delivered":return"bg-green-100 text-green-800";case"paid":return"bg-emerald-100 text-emerald-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=g=>{switch(g){case"pending":return"Pendiente";case"confirmed":return"Confirmado";case"preparing":return"Preparando";case"ready":return"Listo";case"delivered":return"Entregado";case"paid":return"Pagado";case"cancelled":return"Cancelado";default:return g}},w=g=>{if(!g)return"Para llevar";const y=v==null?void 0:v.find(N=>N.id===g);return y?`Mesa ${y.number} - ${y.name}`:`Mesa ${g}`},S=async(g,y)=>{try{if(await xt.orders.update(g,{status:y,updatedAt:new Date}),(c==null?void 0:c.id)===g){const N=await xt.orders.get(g);d(N||null)}}catch(N){console.error("Error updating order status:",N)}};return s.jsxs("div",{className:"h-full flex bg-gray-50",children:[s.jsxs("div",{className:"w-1/2 flex flex-col border-r border-gray-200",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ho,{className:"w-6 h-6 text-primary-600"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pedidos"})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente, mesero o ID...",value:e,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("select",{value:a,onChange:g=>i(g.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Todos los estados"}),s.jsx("option",{value:"pending",children:"Pendiente"}),s.jsx("option",{value:"confirmed",children:"Confirmado"}),s.jsx("option",{value:"preparing",children:"Preparando"}),s.jsx("option",{value:"ready",children:"Listo"}),s.jsx("option",{value:"delivered",children:"Entregado"}),s.jsx("option",{value:"paid",children:"Pagado"}),s.jsx("option",{value:"cancelled",children:"Cancelado"})]}),s.jsx("input",{type:"date",value:o,onChange:g=>l(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto",children:[h.length>0&&h.map(g=>s.jsxs("div",{onClick:()=>d(g),className:`border-b border-gray-200 p-4 cursor-pointer hover:bg-gray-50 transition-colors ${(c==null?void 0:c.id)===g.id?"bg-primary-50 border-primary-200":"bg-white"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"font-semibold text-gray-900",children:["Pedido #",g.id]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p(g.status)}`,children:j(g.status)})]}),s.jsxs("div",{className:"text-lg font-bold text-primary-600",children:["$",g.total.toFixed(2)]})]}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ku,{className:"w-4 h-4"}),s.jsx("span",{children:pf(g.createdAt,"dd/MM/yyyy HH:mm",{locale:gf})})]}),g.customerName&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Nn,{className:"w-4 h-4"}),s.jsx("span",{children:g.customerName})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:w(g.tableId)})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[g.items.length," producto(s) • ",g.waiterName]})]})]},g.id)),h.length===0&&s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ho,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay pedidos"}),s.jsx("p",{className:"text-gray-500",children:e||a||o?"No se encontraron pedidos con los filtros aplicados":"Los pedidos aparecerán aquí"})]})})]})]}),s.jsx("div",{className:"flex-1 flex flex-col",children:c?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Pedido #",c.id]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("select",{value:c.status,onChange:g=>S(c.id,g.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"pending",children:"Pendiente"}),s.jsx("option",{value:"confirmed",children:"Confirmado"}),s.jsx("option",{value:"preparing",children:"Preparando"}),s.jsx("option",{value:"ready",children:"Listo"}),s.jsx("option",{value:"delivered",children:"Entregado"}),s.jsx("option",{value:"paid",children:"Pagado"}),s.jsx("option",{value:"cancelled",children:"Cancelado"})]}),s.jsx("button",{onClick:()=>{c!=null&&c.id&&(localStorage.setItem("orderToEdit",String(c.id)),m("/"))},className:"px-3 py-2 rounded-lg border border-primary-500 text-primary-700 hover:bg-primary-50",title:"Editar este ticket en el Dashboard",children:"Editar en Dashboard"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 mb-1",children:[s.jsx(ku,{className:"w-4 h-4"}),s.jsx("span",{children:"Creado:"})]}),s.jsx("div",{className:"font-medium",children:pf(c.createdAt,"dd/MM/yyyy HH:mm",{locale:gf})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 mb-1",children:[s.jsx(Es,{className:"w-4 h-4"}),s.jsx("span",{children:"Ubicación:"})]}),s.jsx("div",{className:"font-medium",children:w(c.tableId)})]}),c.customerName&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 mb-1",children:[s.jsx(Nn,{className:"w-4 h-4"}),s.jsx("span",{children:"Cliente:"})]}),s.jsx("div",{className:"font-medium",children:c.customerName})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-gray-600 mb-1",children:[s.jsx(Nn,{className:"w-4 h-4"}),s.jsx("span",{children:"Mesero:"})]}),s.jsx("div",{className:"font-medium",children:c.waiterName})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Productos"}),s.jsx("div",{className:"space-y-3",children:c.items.map((g,y)=>s.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:g.productName}),g.notes&&s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Nota: ",g.notes]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[s.jsxs("span",{children:["Cantidad: ",g.quantity]}),s.jsxs("span",{children:["Precio unitario: $",g.unitPrice.toFixed(2)]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p(g.status)}`,children:j(g.status)})]})]}),s.jsxs("div",{className:"text-lg font-semibold text-primary-600",children:["$",g.totalPrice.toFixed(2)]})]})},y))})]}),s.jsxs("div",{className:"bg-white border-t border-gray-200 p-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["$",c.subtotal.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"IVA:"}),s.jsxs("span",{children:["$",c.tax.toFixed(2)]})]}),c.discount>0&&s.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[s.jsx("span",{children:"Descuento:"}),s.jsxs("span",{children:["-$",c.discount.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-semibold border-t pt-2",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{className:"text-primary-600",children:["$",c.total.toFixed(2)]})]})]}),c.notes&&s.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Notas del pedido:"}),s.jsx("div",{className:"text-sm text-yellow-700",children:c.notes})]})]})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(B5,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Selecciona un pedido"}),s.jsx("p",{className:"text-gray-500",children:"Haz clic en un pedido para ver sus detalles"})]})})})]})},lA=({isOpen:e,onClose:t,onSave:n,incentive:r=null,title:a="Agregar Incentivo de Saldo"})=>{const{getCurrencySymbol:i}=Ri(),o=i(),[l,c]=q.useState({customerPayment:"",totalBalance:"",isActive:!0}),[d,m]=q.useState({});q.useEffect(()=>{c(r?{customerPayment:r.customerPayment.toString(),totalBalance:r.totalBalance.toString(),isActive:r.isActive}:{customerPayment:"",totalBalance:"",isActive:!0}),m({})},[r,e]);const h=()=>{const S={};return(!l.customerPayment||parseFloat(l.customerPayment)<=0)&&(S.customerPayment="El monto que paga el cliente debe ser mayor a 0"),(!l.totalBalance||parseFloat(l.totalBalance)<=0)&&(S.totalBalance="El saldo total debe ser mayor a 0"),parseFloat(l.totalBalance)<=parseFloat(l.customerPayment)&&(S.totalBalance="El saldo total debe ser mayor al monto pagado"),m(S),Object.keys(S).length===0},v=S=>{if(S.preventDefault(),!h())return;const g={customerPayment:parseFloat(l.customerPayment),totalBalance:parseFloat(l.totalBalance),bonusAmount:parseFloat(l.totalBalance)-parseFloat(l.customerPayment),isActive:l.isActive};n(g),t()},p=(S,g)=>{c(y=>({...y,[S]:g})),d[S]&&m(y=>({...y,[S]:""}))},j=l.customerPayment&&l.totalBalance?parseFloat(l.totalBalance)-parseFloat(l.customerPayment):0,w=l.customerPayment&&j>0?(j/parseFloat(l.customerPayment)*100).toFixed(1):"0";return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:"inline-block w-full max-w-md my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Yf,{className:"w-6 h-6 text-green-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(In,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto que paga el cliente"}),s.jsxs("div",{className:"relative",children:[s.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:l.customerPayment,onChange:S=>p("customerPayment",S.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors ${d.customerPayment?"border-red-300":"border-gray-300"}`,placeholder:"0.00"})]}),d.customerPayment&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.customerPayment})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Saldo total que recibe"}),s.jsxs("div",{className:"relative",children:[s.jsx(fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:l.totalBalance,onChange:S=>p("totalBalance",S.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors ${d.totalBalance?"border-red-300":"border-gray-300"}`,placeholder:"0.00"})]}),d.totalBalance&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.totalBalance})]}),l.customerPayment&&l.totalBalance&&j>0&&s.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-green-800 mb-2",children:"Resumen del Incentivo"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Paga el cliente:"}),s.jsxs("span",{className:"font-medium",children:[o,parseFloat(l.customerPayment).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Recibe como saldo:"}),s.jsxs("span",{className:"font-medium",children:[o,parseFloat(l.totalBalance).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between border-t border-green-200 pt-2",children:[s.jsx("span",{className:"text-green-700 font-medium",children:"Regalo:"}),s.jsxs("span",{className:"text-green-700 font-bold",children:[o,j.toFixed(2)," (",w,"%)"]})]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isActive",checked:l.isActive,onChange:S=>c(g=>({...g,isActive:S.target.checked})),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700",children:"Incentivo activo"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancelar"}),s.jsxs("button",{type:"submit",className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg font-medium flex items-center justify-center space-x-2 transition-all duration-200 hover:shadow-lg",children:[s.jsx(_o,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar"})]})]})]})]})]})}):null},ol=()=>{const[e,t]=q.useState("general"),n=$i(),[r,a]=q.useState(!1),[i,o]=q.useState(null),[l,c]=q.useState(""),{customers:d,addCustomer:m,updateCustomer:h,deleteCustomer:v,searchCustomers:p}=Ku(),[j,w]=q.useState(!1),[S,g]=q.useState(null),[y,N]=q.useState(!1),[A,R]=q.useState(null),{allIncentives:$,addIncentive:I,updateIncentive:M,deleteIncentive:H}=lw();q.useEffect(()=>{n.pathname.includes("/configuration/salons")||n.pathname.includes("/tables")?t("salons"):n.pathname.includes("/configuration/modifiers")||n.pathname.includes("/modifiers")?t("modifiers"):n.pathname.includes("/customers")?t("customers"):n.pathname.includes("/configuration/incentives")?t("incentives"):t("general")},[n.pathname]);const{salons:ae,activeSalonId:E,setActiveSalon:P,addSalon:J,removeSalon:V,renameSalon:X,tables:Z,decor:ee,addTable:U,removeTable:te,updateTablePosition:ne,updateTableRotation:pe,addDecor:C,updateDecorPosition:D,updateDecorRotation:W}=Qf(),{categories:Q}=Gu(),{config:ie,updateConfig:de,getModifiersForCategory:re,updateCategoryModifiers:B}=Ri(),[oe,ye]=q.useState(ie);q.useEffect(()=>{ye(ie)},[ie]);const Pe=()=>{de(oe),ke.success("Configuración guardada exitosamente")},Ie=async _e=>{try{_e.id?await h(_e.id,_e):await m(_e)}catch(Ge){console.error("Error saving customer:",Ge)}},Ve=async()=>{if(S)try{await v(S.id),g(null),w(!1)}catch(_e){console.error("Error deleting customer:",_e)}},xe=p(l),G=async _e=>{try{A?await M(A.id,_e):await I(_e)}catch(Ge){console.error("Error saving incentive:",Ge)}},Xe=_e=>{R(_e),N(!0)},Ue=async _e=>{try{await H(_e.id)}catch(Ge){console.error("Error deleting incentive:",Ge)}},Ae=()=>{R(null),N(!0)},De=()=>s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información del Restaurante"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Restaurante"}),s.jsx("input",{type:"text",value:oe.restaurantName,onChange:_e=>ye({...oe,restaurantName:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Moneda"}),s.jsxs("select",{value:oe.currency,onChange:_e=>ye({...oe,currency:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"MXN",children:"Peso Mexicano (MXN)"}),s.jsx("option",{value:"USD",children:"Dólar Americano (USD)"}),s.jsx("option",{value:"EUR",children:"Euro (EUR)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tasa de IVA (%)"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:oe.taxRate*100,onChange:_e=>{const Ge=Math.max(0,Math.min(100,parseFloat(_e.target.value)));ye({...oe,taxRate:Ge/100})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),s.jsx("div",{className:"mt-6",children:s.jsxs("button",{onClick:Pe,className:"btn btn-primary flex items-center space-x-2",children:[s.jsx(_o,{className:"w-4 h-4"}),s.jsx("span",{children:"Guardar Cambios"})]})})]})}),Me=()=>{var _e;return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Modificadores"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modificadores globales"}),s.jsx(ix,{value:((_e=oe.modifiers)==null?void 0:_e.global)||[],onChange:Ge=>{var Ze;return ye({...oe,modifiers:{global:Ge,byCategory:((Ze=oe.modifiers)==null?void 0:Ze.byCategory)||{}}})},placeholder:"Escribe y presiona Enter"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modificadores por categoría"}),s.jsx("div",{className:"space-y-4 max-h-72 overflow-y-auto pr-2",children:Q.map(Ge=>{var Ze,yt;return s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsx("div",{className:"text-sm font-medium mb-2",style:{color:Ge.color},children:Ge.name}),s.jsx(ix,{value:((yt=(Ze=oe.modifiers)==null?void 0:Ze.byCategory)==null?void 0:yt[Ge.id])||[],onChange:et=>{var ht,Te;return ye({...oe,modifiers:{global:((ht=oe.modifiers)==null?void 0:ht.global)||[],byCategory:{...((Te=oe.modifiers)==null?void 0:Te.byCategory)||{},[Ge.id]:et}}})},placeholder:`Añadir modificadores para ${Ge.name}`})]},Ge.id)})})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{onClick:()=>{de({modifiers:oe.modifiers}),ke.success("Modificadores guardados")},className:"btn btn-primary",children:"Guardar Modificadores"})})]})})},Fe=()=>s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestión de Clientes"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Administra la información de tus clientes"})]}),s.jsxs("button",{onClick:()=>{o(null),a(!0)},className:"btn btn-primary flex items-center space-x-2",children:[s.jsx(_n,{className:"w-4 h-4"}),s.jsx("span",{children:"Nuevo Cliente"})]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, email, teléfono o código de tarjeta...",value:l,onChange:_e=>c(_e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),xe.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(hf,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay clientes registrados"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Comienza agregando tu primer cliente"}),s.jsxs("button",{onClick:()=>{o(null),a(!0)},className:"btn btn-primary inline-flex items-center space-x-2",children:[s.jsx(_n,{className:"w-4 h-4"}),s.jsx("span",{children:"Agregar Cliente"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[xe.length," cliente",xe.length!==1?"s":""," encontrado",xe.length!==1?"s":"",l&&d.length!==xe.length&&s.jsxs("span",{className:"text-blue-600",children:[" de ",d.length," total"]})]}),s.jsx("div",{className:"grid gap-4",children:xe.map(_e=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(hf,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900",children:[_e.name," ",_e.lastName]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[_e.email&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(cg,{className:"w-3 h-3"}),s.jsx("span",{children:_e.email})]}),_e.phone&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ug,{className:"w-3 h-3"}),s.jsx("span",{children:_e.phone})]}),_e.cardCode&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Uu,{className:"w-3 h-3"}),s.jsx("span",{children:_e.cardCode})]})]})]})]})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Saldo"}),s.jsxs("div",{className:`font-semibold ${_e.balance>0?"text-green-600":"text-gray-600"}`,children:["€",_e.balance.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{o(_e),a(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar cliente",children:s.jsx(Cu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{g(_e),w(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar cliente",children:s.jsx(ga,{className:"w-4 h-4"})})]})]})]}),_e.notes&&s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("strong",{children:"Notas:"})," ",_e.notes]})})]},_e.id))})]})]})}),Ye=()=>{const{getCurrencySymbol:_e}=Ri(),Ge=_e();return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Incentivos de Saldo"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configura los incentivos que ofreces al recargar saldo"})]}),s.jsxs("button",{onClick:Ae,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(_n,{className:"w-4 h-4"}),s.jsx("span",{children:"Agregar Incentivo"})]})]}),$.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-gray-400 mb-4",children:s.jsx(Yf,{className:"w-16 h-16 mx-auto"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay incentivos configurados"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Crea tu primer incentivo para ofrecer regalos al recargar saldo"}),s.jsx("button",{onClick:Ae,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg",children:"Crear Primer Incentivo"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paga Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recibe Saldo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Regalo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(Ze=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[Ge,Ze.customerPayment.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Ge,Ze.totalBalance.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:["+",Ge,Ze.bonusAmount.toFixed(2)," (",(Ze.bonusAmount/Ze.customerPayment*100).toFixed(1),"%)"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Ze.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Ze.isActive?"Activo":"Inactivo"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>Xe(Ze),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Editar",children:s.jsx(Cu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ue(Ze),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Eliminar",children:s.jsx(ga,{className:"w-4 h-4"})})]})})]},Ze.id))})]})})]})})},lt=()=>{const _e=ae.find(it=>it.id===E),Ge=()=>{const it={id:`table-${Date.now()}`,number:"1",name:"",status:"available",x:100,y:100,capacity:4};U(it),ke.success("Mesa agregada")},Ze=it=>{te(it)?ke.success("Mesa eliminada"):ke.error("No se puede eliminar una mesa ocupada")},yt=(it,bt,kt)=>{ne(it,bt,kt)},et=(it,bt)=>{pe(it.id,bt)},ht=(it,bt)=>{W(it.id,bt)},Te=()=>{const it={id:`decor-${Date.now()}`,kind:"plant",x:150,y:150};C(it),ke.success("Planta agregada")},vn=()=>{const it={id:`decor-${Date.now()}`,kind:"bar",x:200,y:200};C(it),ke.success("Barra agregada")},wt=()=>{const it=prompt("Nombre del nuevo salón:");it!=null&&it.trim()&&(J(it.trim()),ke.success(`Salón "${it}" creado`))};return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Editor de Salones"}),s.jsxs("button",{onClick:wt,className:"btn btn-primary flex items-center space-x-2",children:[s.jsx(_n,{className:"w-4 h-4"}),s.jsx("span",{children:"Nuevo Salón"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("select",{value:E,onChange:it=>P(it.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:ae.map(it=>s.jsx("option",{value:it.id,children:it.name},it.id))}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:Ge,className:"btn btn-secondary flex items-center space-x-1",children:[s.jsx(_n,{className:"w-4 h-4"}),s.jsx("span",{children:"Mesa"})]}),s.jsxs("button",{onClick:Te,className:"btn btn-secondary flex items-center space-x-1",children:[s.jsx(kj,{className:"w-4 h-4"}),s.jsx("span",{children:"Planta"})]}),s.jsxs("button",{onClick:vn,className:"btn btn-secondary flex items-center space-x-1",children:[s.jsx(R5,{className:"w-4 h-4"}),s.jsx("span",{children:"Barra"})]})]})]})]}),_e&&s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsxs("div",{className:"salon-canvas h-full bg-gray-100 relative overflow-auto",style:{minHeight:"600px"},children:[Z.map(it=>s.jsx(eb,{table:it,isDraggable:!0,onDragEnd:(bt,kt,Dn)=>yt(bt.id,kt,Dn),onRotationChange:et,onDelete:()=>Ze(it.id),showDeleteButton:!0,scale:1},it.id)),ee.map(it=>s.jsx(tb,{item:it,isDraggable:!0,onDragEnd:(bt,kt,Dn)=>D(it.id,kt,Dn),onRotationChange:ht},it.id))]})})]})};return s.jsxs("div",{className:"h-full bg-gray-50",children:[s.jsxs("div",{className:"h-full overflow-hidden",children:[e==="general"&&s.jsx("div",{className:"h-full overflow-y-auto p-6",children:De()}),e==="modifiers"&&s.jsx("div",{className:"h-full overflow-y-auto p-6",children:Me()}),e==="customers"&&s.jsx("div",{className:"h-full overflow-y-auto p-6",children:Fe()}),e==="incentives"&&s.jsx("div",{className:"h-full overflow-y-auto p-6",children:Ye()}),e==="salons"&&s.jsx("div",{className:"h-full",children:lt()})]}),s.jsx(cw,{isOpen:r,onClose:()=>a(!1),customer:i,onSave:Ie}),s.jsx(iw,{isOpen:j,onClose:()=>w(!1),onConfirm:Ve,title:"Eliminar Cliente",message:`¿Estás seguro de que deseas eliminar al cliente "${S==null?void 0:S.name} ${S==null?void 0:S.lastName}"? Esta acción no se puede deshacer.`,type:"danger"}),s.jsx(lA,{isOpen:y,onClose:()=>N(!1),onSave:G,incentive:A,title:A?"Editar Incentivo de Saldo":"Agregar Incentivo de Saldo"})]})},ix=({value:e,onChange:t,placeholder:n})=>{const[r,a]=q.useState(""),i=l=>{const c=l.trim();if(!c)return;const d=Array.from(new Set([...e,c]));t(d),a("")},o=l=>{t(e.filter(c=>c!==l))};return s.jsxs("div",{children:[s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map(l=>s.jsxs("span",{className:"inline-flex items-center text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:[l,s.jsx("button",{onClick:()=>o(l),className:"ml-1 text-blue-500 hover:text-blue-700",children:"×"})]},l))}),s.jsx("input",{type:"text",value:r,onChange:l=>a(l.target.value),onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),i(r))},placeholder:n||"Añadir...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Pulsa Enter para agregar"})]})},sx=({value:e,onChange:t,placeholder:n})=>{const[r,a]=q.useState(""),i=l=>{const c=l.trim();if(!c)return;const d=Array.from(new Set([...e,c]));t(d),a("")},o=l=>{t(e.filter(c=>c!==l))};return s.jsxs("div",{children:[s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map(l=>s.jsxs("span",{className:"inline-flex items-center text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:[l,s.jsx("button",{onClick:()=>o(l),className:"ml-1 text-blue-500 hover:text-blue-700",children:"×"})]},l))}),s.jsx("input",{type:"text",value:r,onChange:l=>a(l.target.value),onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),i(r))},placeholder:n||"Añadir...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Pulsa Enter para agregar"})]})},cA=()=>{const{config:e,updateConfig:t,getModifiersForCategory:n}=Ri(),{categories:r}=Gu(),[a,i]=q.useState(e.modifiers||{global:[],byCategory:{}}),[o,l]=q.useState("");q.useEffect(()=>{i(e.modifiers||{global:[],byCategory:{}})},[e.modifiers]);const c=()=>{t({modifiers:a}),ke.success("Modificadores guardados")},d=m=>{if(!o){ke.error("Selecciona una categoría origen para clonar");return}if(o===m){ke.error("El origen y destino no pueden ser iguales");return}const h=a.byCategory[o]||[];i({...a,byCategory:{...a.byCategory,[m]:Array.from(new Set([...a.byCategory[m]||[],...h]))}}),ke.success("Modificadores clonados")};return s.jsx("div",{className:"h-full bg-gray-50 p-6",children:s.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(V5,{className:"w-6 h-6 mr-2"})," Modificadores"]}),s.jsx("button",{onClick:c,className:"btn btn-primary",children:"Guardar"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Globales"}),s.jsx(sx,{value:a.global||[],onChange:m=>i({...a,global:m}),placeholder:"Añade modificadores globales"})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Clonar entre categorías"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:o,onChange:m=>l(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Selecciona categoría origen"}),r.map(m=>s.jsx("option",{value:m.id,children:m.name},m.id))]}),s.jsx("div",{className:"text-sm text-gray-500",children:"Selecciona una categoría para copiar sus modificadores"})]})]})]}),s.jsxs("div",{className:"card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Por Categoría"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(m=>{var h;return s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"text-sm font-medium",style:{color:m.color},children:m.name}),s.jsxs("button",{onClick:()=>d(m.id),className:"text-xs inline-flex items-center px-2 py-1 bg-blue-50 text-blue-700 rounded hover:bg-blue-100",title:"Clonar modificadores desde la categoría seleccionada arriba",children:[s.jsx(Nj,{className:"w-3 h-3 mr-1"})," Clonar de origen"]})]}),s.jsx(sx,{value:((h=a.byCategory)==null?void 0:h[m.id])||[],onChange:v=>i({...a,byCategory:{...a.byCategory,[m.id]:v}}),placeholder:`Añadir modificadores para ${m.name}`})]},m.id)})})]})]})})},uA=({onEnter:e})=>{const[t,n]=q.useState(!1),[r,a]=q.useState(!1),[i,o]=q.useState(!1);return q.useEffect(()=>{const l=setTimeout(()=>n(!0),300),c=setTimeout(()=>a(!0),800),d=setTimeout(()=>o(!0),1200);return()=>{clearTimeout(l),clearTimeout(c),clearTimeout(d)}},[]),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-8",children:s.jsxs("div",{className:"max-w-md w-full",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("div",{className:`relative inline-block mb-6 transition-all duration-1000 ease-out ${t?"scale-100 opacity-100":"scale-0 opacity-0"}`,children:[s.jsx("div",{className:`w-32 h-32 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-full flex items-center justify-center shadow-2xl transition-all duration-1000 ease-out ${t?"rotate-0 scale-100":"rotate-180 scale-0"}`,children:s.jsxs("div",{className:"relative",children:[s.jsx(R5,{className:`w-16 h-16 text-white transition-all duration-700 ease-out delay-300 ${t?"scale-100 opacity-100":"scale-0 opacity-0"}`}),s.jsx(Fj,{className:`w-8 h-8 text-yellow-300 absolute -bottom-2 -right-2 transition-all duration-700 ease-out delay-500 ${t?"scale-100 opacity-100 rotate-0":"scale-0 opacity-0 rotate-180"}`})]})}),s.jsx("div",{className:`absolute inset-0 border-4 border-blue-400/30 rounded-full transition-all duration-1000 ease-out delay-700 ${t?"animate-pulse opacity-100":"opacity-0"}`}),s.jsx("div",{className:`absolute -top-4 -left-4 w-3 h-3 bg-blue-400 rounded-full transition-all duration-1000 ease-out delay-900 ${t?"animate-bounce opacity-60":"opacity-0"}`}),s.jsx("div",{className:`absolute -top-2 -right-6 w-2 h-2 bg-indigo-400 rounded-full transition-all duration-1000 ease-out delay-1000 ${t?"animate-bounce opacity-60":"opacity-0"}`,style:{animationDelay:"0.5s"}}),s.jsx("div",{className:`absolute -bottom-4 -right-2 w-2.5 h-2.5 bg-purple-400 rounded-full transition-all duration-1000 ease-out delay-1100 ${t?"animate-bounce opacity-60":"opacity-0"}`,style:{animationDelay:"1s"}})]}),s.jsxs("h1",{className:`text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-700 bg-clip-text text-transparent mb-2 transition-all duration-1000 ease-out ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[s.jsx("span",{className:"inline-block",children:"kimi"}),s.jsx("span",{className:"inline-block text-indigo-800",children:"POS"})]}),s.jsx("p",{className:`text-lg text-gray-600 font-medium transition-all duration-1000 ease-out delay-200 ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:"Sistema de Punto de Venta"}),s.jsx("p",{className:`text-sm text-gray-500 mt-1 transition-all duration-1000 ease-out delay-400 ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:"Gestión inteligente para tu negocio"})]}),s.jsx("div",{className:`text-center transition-all duration-1000 ease-out ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:s.jsxs("button",{onClick:e,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-4 rounded-xl font-semibold text-lg flex items-center justify-center space-x-3 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 mx-auto",children:[s.jsx(_j,{className:"w-5 h-5"}),s.jsx("span",{children:"Entrar al Sistema"})]})}),s.jsxs("div",{className:`text-center mt-8 text-sm text-gray-500 transition-all duration-1000 ease-out delay-600 ${i?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[s.jsx("p",{children:"Versión 1.0"}),s.jsx("p",{className:"mt-1",children:"© 2024 kimiPOS - Todos los derechos reservados"})]})]})})},uw=q.createContext(null),dA=()=>{const e=q.useContext(uw);if(!e)throw new Error("useOnScreenKeyboard debe usarse dentro de OnScreenKeyboardProvider");return e};function ox(e,t){var i,o;const n=(i=Object.getOwnPropertyDescriptor(e,"value"))==null?void 0:i.set,r=Object.getPrototypeOf(e),a=(o=Object.getOwnPropertyDescriptor(r,"value"))==null?void 0:o.set;a&&n!==a?a.call(e,t):n?n.call(e,t):e.value=t,e.dispatchEvent(new Event("input",{bubbles:!0}))}const hA=({children:e})=>{const[t,n]=q.useState(!1),[r,a]=q.useState(""),i=q.useRef(null),o=q.useRef(0),l=q.useRef(!1),c=q.useCallback(g=>{i.current=g;const y=g.value??"";a(y);try{o.current=g.selectionStart??y.length}catch{o.current=y.length}n(!0)},[]),d=q.useCallback(()=>{n(!1),i.current=null},[]),m=q.useCallback(()=>{const g=i.current;if(g){ox(g,r);try{g.selectionStart=g.selectionEnd=o.current}catch{}l.current=!0,g.focus()}d()},[r,d]),h=q.useCallback(()=>{d()},[d]),v=q.useCallback(g=>{a(g);const y=i.current;if(y){ox(y,g);try{y.selectionStart=y.selectionEnd=o.current}catch{}}},[]),p=q.useCallback(g=>{const y=Math.max(0,Math.min(r.length,(o.current??0)+g));o.current=y},[r.length]),j=q.useCallback(()=>{const g=o.current??0;if(g<=0)return;const y=r.slice(0,g-1)+r.slice(g);o.current=g-1,v(y)},[r,v]),w=q.useCallback(g=>{const y=o.current??0,N=r.slice(0,y)+g+r.slice(y);o.current=y+g.length,v(N)},[r,v]);q.useEffect(()=>{const g=y=>{const N=y.target;if(N){if(l.current){l.current=!1;return}if(N.getAttribute("data-osk")!=="false")if(N instanceof HTMLInputElement){const A=(N.type||"text").toLowerCase();["text","search","email","password","tel","url","number"].includes(A)&&c(N)}else N instanceof HTMLTextAreaElement&&c(N)}};return document.addEventListener("focusin",g),()=>document.removeEventListener("focusin",g)},[c]);const S=q.useMemo(()=>({isOpen:t,currentValue:r,openForElement:c,close:d,setValue:v,commit:m,cancel:h,moveCaret:p,backspace:j,insertText:w}),[t,r,c,d,v,m,h,p,j,w]);return s.jsx(uw.Provider,{value:S,children:e})},fA=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["z","x","c","v","b","n","m"]],mA=()=>{const{isOpen:e,currentValue:t,insertText:n,backspace:r,moveCaret:a,commit:i,cancel:o}=dA(),[l,c]=q.useState(!1),d=q.useMemo(()=>fA.map(g=>g.map(y=>l?y.toUpperCase():y)),[l]),m="osk:possize:v1",[h,v]=q.useState(()=>({x:20,y:window.innerHeight-360})),[p,j]=q.useState(()=>({w:980,h:320})),w=q.useRef({dragging:!1,dx:0,dy:0}),S=q.useRef({dir:null,startX:0,startY:0,startW:0,startH:0});return q.useEffect(()=>{try{const g=localStorage.getItem(m);if(g){const{x:y,y:N,w:A,h:R}=JSON.parse(g);Number.isFinite(y)&&Number.isFinite(N)&&v({x:y,y:N}),Number.isFinite(A)&&Number.isFinite(R)&&j({w:A,h:R})}}catch{}},[]),q.useEffect(()=>{try{localStorage.setItem(m,JSON.stringify({x:h.x,y:h.y,w:p.w,h:p.h}))}catch{}},[h,p]),q.useEffect(()=>{const g=N=>{if(w.current.dragging){const A=N.clientX-w.current.dx,R=N.clientY-w.current.dy,$=window.innerWidth-p.w-10,I=window.innerHeight-p.h-10;v({x:Math.max(10,Math.min(A,$)),y:Math.max(10,Math.min(R,I))})}else if(S.current.dir){const A=N.clientX-S.current.startX,R=N.clientY-S.current.startY,$=600,I=260;S.current.dir==="right"?j(M=>({w:Math.max($,S.current.startW+A),h:M.h})):S.current.dir==="bottom"?j(M=>({w:M.w,h:Math.max(I,S.current.startH+R)})):S.current.dir==="corner"&&j({w:Math.max($,S.current.startW+A),h:Math.max(I,S.current.startH+R)})}},y=()=>{w.current.dragging=!1,S.current.dir=null};return window.addEventListener("mousemove",g),window.addEventListener("mouseup",y),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",y)}},[p.w,p.h]),e?s.jsx("div",{className:"fixed inset-0 pointer-events-none z-[2000]",children:s.jsxs("div",{className:"absolute bg-white rounded-2xl shadow-2xl border pointer-events-auto select-none",style:{left:h.x,top:h.y,width:p.w,height:p.h},children:[s.jsxs("div",{className:"px-4 py-2 border-b flex items-center justify-between cursor-move rounded-t-2xl bg-gray-50",onMouseDown:g=>{w.current={dragging:!0,dx:g.clientX-h.x,dy:g.clientY-h.y}},children:[s.jsx("div",{className:"text-sm text-gray-700 font-medium",children:"Entrada de texto"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-gray-400 text-xs max-w-[420px] truncate",children:t}),s.jsx("button",{className:"text-sm text-gray-500 hover:text-gray-700 px-2 py-1",onClick:o,children:"Cerrar"})]})]}),s.jsxs("div",{className:"p-3 h-[calc(100%-48px)] overflow-auto",children:[s.jsx("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"repeat(10, minmax(0, 1fr))"},children:d[0].map(g=>s.jsx("button",{className:"h-12 rounded bg-gray-100 hover:bg-gray-200 active:bg-gray-300 text-lg",onClick:()=>n(g),children:g},g))}),s.jsx("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"repeat(10, minmax(0, 1fr))"},children:d[1].map(g=>s.jsx("button",{className:"h-12 rounded bg-gray-100 hover:bg-gray-200 active:bg-gray-300 text-lg",onClick:()=>n(g),children:g},g))}),s.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:"repeat(13, minmax(0, 1fr))"},children:[s.jsx("button",{className:`h-12 rounded ${l?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"} text-sm col-span-2`,onClick:()=>c(g=>!g),children:"Shift"}),d[2].map(g=>s.jsx("button",{className:"h-12 rounded bg-gray-100 hover:bg-gray-200 active:bg-gray-300 text-lg",onClick:()=>n(g),children:g},g)),s.jsx("button",{className:"h-12 rounded bg-gray-100 hover:bg-gray-200 text-sm col-span-2",onClick:r,children:"⌫"})]}),s.jsxs("div",{className:"grid gap-2",style:{gridTemplateColumns:"repeat(11, minmax(0, 1fr))"},children:[s.jsx("button",{className:"h-12 rounded bg-gray-100 hover:bg-gray-200 text-sm col-span-2",onClick:()=>a(-1),children:"◀"}),d[3].map(g=>s.jsx("button",{className:"h-12 rounded bg-gray-100 hover:bg-gray-200 active:bg-gray-300 text-lg",onClick:()=>n(g),children:g},g)),s.jsx("button",{className:"h-12 rounded bg-gray-100 hover:bg-gray-200 text-sm col-span-2",onClick:()=>a(1),children:"▶"})]}),s.jsxs("div",{className:"grid gap-2 mt-2 items-stretch",style:{gridTemplateColumns:"repeat(12, minmax(0, 1fr))"},children:[s.jsx("div",{className:"col-span-2"}),s.jsx("button",{className:"h-12 col-span-6 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>n(" "),children:"Espacio"}),s.jsx("button",{className:"h-12 col-span-2 rounded bg-gray-100 hover:bg-gray-200",onClick:()=>n(`
`),children:"Enter"}),s.jsx("button",{className:"h-12 col-span-2 rounded bg-emerald-600 text-white hover:bg-emerald-700",onClick:i,children:"Aceptar"})]})]}),s.jsx("div",{className:"absolute right-0 top-0 h-full w-2 cursor-ew-resize",onMouseDown:g=>{S.current={dir:"right",startX:g.clientX,startY:g.clientY,startW:p.w,startH:p.h}}}),s.jsx("div",{className:"absolute left-0 bottom-0 w-full h-2 cursor-ns-resize",onMouseDown:g=>{S.current={dir:"bottom",startX:g.clientX,startY:g.clientY,startW:p.w,startH:p.h}}}),s.jsx("div",{className:"absolute right-0 bottom-0 w-3 h-3 cursor-nwse-resize",onMouseDown:g=>{S.current={dir:"corner",startX:g.clientX,startY:g.clientY,startW:p.w,startH:p.h}}})]})}):null},pA=()=>{const[e,t]=q.useState(!0),[n,r]=q.useState(!0);q.useEffect(()=>{localStorage.getItem("kimipos-has-visited")&&t(!1),r(!1)},[]);const a=()=>{localStorage.setItem("kimipos-has-visited","true"),t(!1)};return n?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:s.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e?s.jsx(uA,{onEnter:a}):s.jsx(Bj,{children:s.jsx(FC,{children:s.jsx(K8,{children:s.jsx(TC,{children:s.jsx(Y8,{children:s.jsx(qk,{children:s.jsx(hA,{children:s.jsx(w6,{children:s.jsxs(Rk,{children:[s.jsxs(f6,{children:[s.jsx($r,{path:"/",element:s.jsx(Z8,{})}),s.jsx($r,{path:"/products",element:s.jsx(aA,{})}),s.jsx($r,{path:"/categories",element:s.jsx(iA,{})}),s.jsx($r,{path:"/tables",element:s.jsx(sA,{})}),s.jsx($r,{path:"/orders",element:s.jsx(oA,{})}),s.jsx($r,{path:"/modifiers",element:s.jsx(cA,{})}),s.jsx($r,{path:"/configuration",element:s.jsx(ol,{})}),s.jsx($r,{path:"/configuration/salons",element:s.jsx(ol,{})}),s.jsx($r,{path:"/customers",element:s.jsx(ol,{})}),s.jsx($r,{path:"/configuration/incentives",element:s.jsx(ol,{})}),s.jsx($r,{path:"/reports",element:s.jsx(ol,{})}),s.jsx($r,{path:"/invoices",element:s.jsx(ol,{})})]}),s.jsx(pj,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#10b981"}},error:{style:{background:"#ef4444"}}}}),s.jsx(mA,{})]})})})})})})})})})};Lm.createRoot(document.getElementById("root")).render(s.jsx(Ea.StrictMode,{children:s.jsx(pA,{})}));export{Et as _,vA as c,Jw as g};
